





Using the MS-Kermit on the IBM PC at UC Berkeley    (MIC 2.2.8)

Berkeley Release UCB 227.14, 11 March 1985

Abstract    The MS-Kermit package programs your IBM Personal Computer to act  as
            a  terminal  with the Berkeley CMS and UNIX computer systems, and to
            exchange files with them and other PCs.

Credits     Greg Small, Computer Facilities and Operations.

Contents     2     Introduction

             3     Connecting as a Terminal
             5     Keyboard Tables and Key Definitions

             6     File Transfer

             9     Printing on the PC Printer

            11     Terminal Connection and Modems

            11     PC-DOS Installation and Customization
            12     UNIX   Customization and Detail
            13     CMS    Customization and Detail

            13     Problems and Bugs
            13     On-line Source, Binaries and Documentation

            A1     Keyboard Description (MSKERMIT.INI)
            A2     Screen Controls (Heath-19 plus some ANSI)
            A3     UCB Changes and Fixes to Columbia's MS-Kermit 2.27

Stuff       Available in the Computing Services Library, 218 Evans Hall.

            The MS-Kermit 2.27 (UCB 227.14) for the IBM PC  diskette,  available
            for $ 3.75.

            This document, Using MS-Kermit on the IBM PC  at  UC  Berkeley,  MIC
                           _____ __ ______ __ ___ ___ __  __  __  ________
            2.2.8, available for $ 1.00.

            Kermit Users Guide, Fifth Edition - Revision 1, Columbia  University
            ______ _____ _____  _____ _______   ________ _
            Center  for  Computing Activities, (MIC 2.2.3, July 1984), available
            for $ 9.15.

            Kermit Protocol Manual, Fifth Edition,  Columbia  University  Center
            ______ ________ ______  _____ _______
            for  Computing  Activities, (MIC 2.2.4, April 1984), available for $
            4.00.

            Kermit UNIX File Transfer Program, (MIC 2.2.7, January 1985), avail-
            ______ ____ ____ ________ _______
            able on-line as "man kermit" and printed for $ 0.30.

            Kermit CMS File Transfer Program, (MIC 2.2.6, March 1985), available
            ______ ___ ____ ________ _______
            on-line as "HELP KERMIT" and printed for $ 0.35.




gts@ucbpopuli                        - 1 -                           11 March 85





MIC 2.2.8         Using MS-Kermit on the IBM PC at UC Berkeley         MIC 2.2.8


This Document

This document covers the use of MS-Kermit UCB 227.14 on the IBM PC  or  XT  with
Computer  Center  Systems  at  Berkeley,  but  does not replace the Kermit Users
                                                                    ______ _____
Guide.  Read this document first, then use the guide and on-line help  for  more
_____
detail.  This document superceeds where details differ.

The discussions in this document assume a basic understanding  of  the  PC  (see
your PC Guide to Operations and Disk Operating System manuals).
        _____ __ __________     ____ _________ ______

Please refer technical content problems to consult and gts@ucbpopuli.

Introduction

MS-Kermit is a program written by Columbia University and various other  contri-
butors  to  use  an  MS-DOS  or  PC-DOS  personal  computer as a terminal and to
exchange files with other personal computers and mainframes.

MS-Kermit works with the Computer Center CMS and UNIX systems.

MS-Kermit allows your PC to act as a full screen ASCII  terminal  with  UNIX  or
with  CMS  3270  Display  Mode.   The  screen emulates a Heath-19 with some ANSI
extensions, including underlining, highlighting, blink and reverse video.   Key-
board  definitions allow any key to send a single character or a string of char-
acters.  You can switch back and forth between using a mainframe computer system
with your PC as a terminal, and using the PC as a computer.

MS-Kermit also provides file transfer from your PC to the  mainframe,  from  the
mainframe  to the PC, and PC to PC.  File transfers use an error correcting pro-
tocol to insure correct transfer and can transfer either text or  binary  files.
This  works  with  the  Computer Center UNIX systems and CMS systems with either
Full Screen or Line Mode ASCII service.  File exchange is possible with any per-
sonal computer, minicomputer or mainframe that has a Kermit program.

You can print your CMS or UNIX files on  the  PC  printer.   This  can  be  done
directly  while acting as a terminal, or using the printer as the destination of
a file transfer.

Either asynchronous communications port (COM1 or COM2) can be used.

MS-Kermit does not provide any display of APL characters.  However, APL program-
ming can be done using MS-Kermit as an ASCII terminal.

To use MS-Kermit on your PC with CMS or UNIX, you will need:

     IBM PC, XT or hardware compatible look-alike
     Asynchronous adapter card (or other COM1/COM2 serial port)
     Direct line to a computer system, or modem and telephone
     PC DOS diskette (from IBM), Version 1.x, 2.x or 3.x
     MS-Kermit for the IBM PC diskette (UCB 227.14)
     An account on the CMS or UNIX system you want to use






gts@ucbpopuli                        - 2 -                           11 March 85





MIC 2.2.8         Using MS-Kermit on the IBM PC at UC Berkeley         MIC 2.2.8


Connecting as a Terminal

This example uses the master MS-Kermit diskette so that it may be tried  immedi-
ately.   You  can  read  this in front of your PC and try everything as you read
along.  For suggestions on methods of regular use see the installation and  cus-
tomization sections.

0.   Connect the asynchronous communications adapter (COM1: or  COM2:)  to  your
     terminal line or modem exactly as you would for a terminal.

1.   For a PC, insert the DOS diskette in  drive  A:  and  power  up  or  reboot
     (simultaneously  press  Ctrl,  Alt  and  Del keys).  Then put the MS-Kermit
     diskette in drive B: and type "B:" to switch  to  that  drive.   On  single
     drive PCs, take out the DOS diskette and insert the MS-Kermit diskette.

     For an XT, boot from the hard disk (C:),  put  the  MS-Kermit  diskette  in
     drive A:, and type "A:".

2.   Load MS-Kermit by typing: "mskermit".

     MS-Kermit will say something like:

          IBM-PC Kermit-MS Version 2.27 (UCB 227.14 3/7/85 10:54:14)
          Type ? for help.

          MS-Kermit Initialization for the IBM PC (UCB 227.14 3/8/85)

          Kermit-MS macro commands for UC Berkeley Computer Center:

          DO UNIX   set for UNIX   use TERM=mskermit227
          DO CMS    set for CMS    Display Mode, use terminal KERMIT
          DO CMSL   set for CMS    Line Mode

          set take-echo off        LOADING KEYBOARD TABLES AND MACROS
          Kermit-MS>

3.   The prompt "Kermit-MS>" means MS-Kermit is ready to accept commands.

     MS-Kermit has a built in abbreviation and help facility.   Kermit  commands
     are  a  series of words separated by spaces.  Any time you type "?", Kermit
     will tell you how to complete the current word  or  what  words  are  valid
     next.  Any time you type Esc, Kermit will complete the current word or beep
     at you if the word is ambiguous.

     Try typing "set p?".  Kermit should say:

          Kermit-MS>set p? One of the following:
                  PARITY  PORT    PROMPT
          Kermit-MS>set p

     Note that Kermit restores what was typed so that you may continue.  Had you
     typed  "Esc"  instead  of "?", Kermit would have beeped because the current
     word "p" is ambiguous.  All of the possibilities listed start with the  "p"
     you  typed,  so  at  least enough characters must be added to make the word



gts@ucbpopuli                        - 3 -                           11 March 85





MIC 2.2.8         Using MS-Kermit on the IBM PC at UC Berkeley         MIC 2.2.8


     unambiguous.

     Type an additional "o?".  Kermit should say:

          Kermit-MS>set po? One of the following:
                    1       2       COM1    COM2
          Kermit-MS>set po

     Since none of the listed words begin with "po", you can continue with space
     or Esc followed by any of the listed words.

     If the command is already complete when you type "?", Kermit will say "Con-
     firm  with  carriage  return"  or  give you an error message if the command
     could not be done.

     Usually "trial and error" with this facility will help you figure out what-
     ever command you need.  You may also want to know the smallest abbreviation
     for commands you use frequently.

     You can edit the command line with the usual control keys: Ctrl-X to  erase
     the  preceding one character, Ctrl-W to erase one word and Ctrl-U or Ctrl-X
     to erase the whole line.

4.   Set the communications port by typing: "set port COM1".

     Actually, Kermit assumes COM1, so this command was not  necessary,  but  to
     use  the  COM2  port, you must type "set port com2".  You may have sessions
     going on both ports.

5.   Set the baud rate by typing: "set baud 1200".

     If you use 9600 baud then "set baud 9600" and so on.  The PC remembers that
     last  baud  rate set for each port, so this command is not necessary if the
     rate was set previously by MS-Kermit, the DOS mode  command  or  any  other
     way.

6.   Enter the macro command to setup for the system you will use:

          For UNIX, type "do unix".
              ____

          For CMS Display Mode (cad, cbd, etc.), type "do cms".
              ___ _______ ____

          For CMS Line Mode (cal, cbl, etc.), type "do cmsl".
              ___ ____ ____

     These macro commands customize the keyboard and file transfer  options  for
     the  system  you  will  be using.  If you switch from one system to another
     without exiting MS-Kermit, be sure to  redo  the  setup  command.   If  you
     access  CMS  through  UNIX tn3270, use "do unix" while in UNIX and "do cms"
                                ______
     while in CMS.

7.   Connect to the terminal line with the command "connect".

     The PC screen will clear and now the PC acts as a terminal.




gts@ucbpopuli                        - 4 -                           11 March 85





MIC 2.2.8         Using MS-Kermit on the IBM PC at UC Berkeley         MIC 2.2.8


     To return to MS-Kermit command mode, type "Ctrl-]c" (hold down the Ctrl key
     and  type "]", then type "c").  "Ctrl-]" is the terminal emulation "escape"
     character and "c" is the close command character.  The terminal screen  and
     line connection are not affected, you can reconnect with the "connect" com-
     mand.  Note that when you type the escape character the cursor goes to line
     25  as  a visual clue.  If you type "Ctrl-]?" in terminal emulation, Kermit
     will display a description of all the escape command  characters  and  wait
     for you to type one.  Space will return to terminal emulation.

     The <--- backspace key has two local control functions  while  in  terminal
     emulation.   "Ctrl  <---"  toggles  the  line 25 status display on and off.
     "Ctrl-Shift <---" clears the screen.

8.   Once in terminal emulation, logon to the system as you would for any termi-
     nal.

          CMS Display Mode (cad, cbd, etc.) will scroll up the  screen  and  ask
          ___ _______ ____
          "ENTER TERMINAL TYPE:", you reply "kermit".

          UNIX usually asks for your terminal type after login: "TERM  (tvi920c)
          ____
          =", you reply "mskermit227".

8.   You can use your PC as a computer as well as a terminal  and  still  remain
     logged on to the mainframe.

     You can "connect" and "escape" whenever you need to.  You keep track of who
     you  are  talking to by the prompt that is displayed or the contents of the
     screen.  After reconnecting to UNIX or CMS Line Mode, an Enter will usually
     display  a new prompt.  In CMS Full Screen, a "Ctrl-G" can be used to clear
     and redisplay the screen.

     To return to DOS and run programs locally, type the MS-Kermit  "exit"  com-
     mand.   The screen is not saved, but the line is not dropped.  To return to
     your login session, type the "mskermit" command again, then "connect".

     Alternatively, use the "push" command.  Push  keeps  MS-Kermit  in  the  PC
     memory  including  the  last screen and any setting you may have made, then
     calls a new DOS command processor.  The penalty  is  that  MS-Kermit  holds
     about 50k bytes of memory.  To return to your logon session, type "exit" to
     exit the DOS command processor and return  to  MS-Kermit,  then  "connect".
     This may not work on a single diskette PC.

     Be sure to logout when you are done with the mainframe!
     __ ____ __ ______ ____ ___ ___ ____ ____ ___ _________

Keyboard Table and Key Definitions

The keyboard table defines what character the PC sends when  you  press  a  key.
The  PC  screen  is  not  affected  by  the keyboard table, it always acts as an
extended Heath-19 screen.  The initial keyboard table is just a basic ASCII key-
board  but  any key may be set to send a single character or a string of charac-
ters using the "set key" command.

The UCB initialization file, MSKERMIT.INI, defines the  standard  function  keys
and  key pad for use on Computer Center Systems at Berkeley.  See Appendix A1 or



gts@ucbpopuli                        - 5 -                           11 March 85





MIC 2.2.8         Using MS-Kermit on the IBM PC at UC Berkeley         MIC 2.2.8


read the file MSKERMIT.INI to see how the keyboard works.

For UNIX, enter the MS-Kermit macro command "do unix" and use  TERM=mskermit227.
This  gives  a straight ASCII keyboard in the normal typing area with the keypad
and function keys set up to work with vi.
                                      __

For CMS Display Mode, enter the MS-Kermit macro command "do cms" and use  termi-
nal type kermit.  A Yale Series/1 protocol converter connects ASCII terminals to
CMS as locally attached 3270 terminals.  The control  keys,  function  keys  and
keypad  are  set  up for CMS 3270 emulation.  "Do cms" should also be used while
connected to CMS through UNIX tn3270 (see UNIX Customization about map3270).
                              ______

For CMS Line Mode, enter the MS-Kermit macro command "do cmsl".  In  Line  Mode,
the  interrupt  character  is  Ctrl-Break.  Line Mode is for line terminals, the
function keys and keypad are not useful.

To set a temporary key, use the "show key" command to determine  its  scan  code
and then set it with the "set key scan" command.

     Kermit-MS>show key
     Press Key:Alt-a
       Scan code: 2078
       Definition:

     Kermit-MS>set key scan 2078
     Definition string:this is an example
     Kermit-MS>show key
     Press Key:Alt-a
       Scan code: 2078
       Definition: this is an example

Thereafter, while connected, the string "this is an example" will be sent  when-
ever the key "Alt-a" is typed.  Control characters and characters with the eight
bit set must be entered as the octal ASCII code, e.g. "\012", "\212".

File Transfer

MS-Kermit provides file transfer from your PC to the mainframe (uploading), from
                                                                _________
the  mainframe  to  your  PC  (downloading),  and from PC to PC.  Either text or
                               ___________
binary files can be exchanged.

The file transfers use an error correcting protocol to insure correct  transfer.
The  protocol exchange between the two systems is coordinated by the Kermit pro-
gram running in each system.  The MSKERMIT program runs in the PC to talk proto-
col with the mainframe Kermit program or Kermit running in another PC.

In order to transfer a file, you must logon to the mainframe using MS-Kermit  as
a  terminal,  and  start  the mainframe Kermit program.  The mainframe Kermit is
given a send or receive command.  When the mainframe  Kermit  has  accepted  the
command,  MS-Kermit  is  "escaped" from terminal emulation and the complementary
receive or send command is given.

File Transfer Between UNIX and the PC




gts@ucbpopuli                        - 6 -                           11 March 85





MIC 2.2.8         Using MS-Kermit on the IBM PC at UC Berkeley         MIC 2.2.8


The UNIX program  to  transfer  files  is  kermit.   To  transfer  the  PC  file
                                           ______
MYPROG.BAS  to  the  UNIX file myprog.bas, connect to UNIX in terminal emulation
and give the UNIX command: "kermit -r".

Then escape from terminal emulation by typing "Ctrl-]" then "c".  The  MS-Kermit
prompt should appear, then type: "send myprog.bas".

MS-Kermit will display progress statistics.  The numbers should change as  pack-
ets  of  bytes  are sent and received.  When the transfer is complete, MS-Kermit
gives a new command prompt.

To return to UNIX, type the MS-Kermit "connect" command and then type Enter  for
a new prompt.

To transfer the UNIX file myprog.basic to the PC file MYPROG.BAS, the steps  are
the  same,  but  the UNIX command is: "kermit -s myprog.basic" and the MS-Kermit
command is: "receive".

To go back to other UNIX activities, type the MS-Kermit  "connect"  command  and
then type Enter for a new prompt.

The UNIX commands "kermit -s" and "kermit -r" are for text  files,  use  "kermit
-si"  and  "kermit -ri" for binary files.  See "man kermit" on UNIX or the docu-
ment Kermit UNIX File Transfer Program for further features and details.
     ______ ____ ____ ________ _______

The transfer time can be estimated from the baud rate but is also very dependent
on system load.  At 9600 baud, expect about 500 characters per second (about 50%
of line rate) on an unloaded UNIX system; at 1200 baud expeout 100  charac-
ters per second (80%).

File Transfer Between CMS and the PC

The CMS program to transfer files is KERMIT.  To transfer the PC file MYPROG.BAS
to  the  CMS  file MYPROG BAS, connect to CMS in terminal emulation and give the
CMS command: "kermit".

CMS-Kermit will load and respond with the prompt:

     KERMIT-CMS CAD Full Screen (UCB1.14 2/20/85)

Enter the CMS-Kermit command: "receive".

The screen will clear or just change depending on the baud  rate.   Then  escape
from  MS-Kermit  terminal  emulation by typing "Ctrl-]" then "c".  The MS-Kermit
prompt should appear, then type: "send myprog.bas".

MS-Kermit will display progress statistics.  The numbers should change in spurts
as  blocks  of  bytes are sent and received.  When the transfer is complete, MS-
Kermit gives a new command prompt.

To return to CMS, type the "connect" command.  Then type "Ctrl-G"  to  redisplay
the CMS screen.  In Line Mode, type Enter for a new prompt.

To transfer the CMS file MYPROG BASIC to the PC file MYPROG.BAS, the  steps  are



gts@ucbpopuli                        - 7 -                           11 March 85





MIC 2.2.8         Using MS-Kermit on the IBM PC at UC Berkeley         MIC 2.2.8


the  same,  but the CMS-Kermit command is: "send myprog basic" and the MS-Kermit
command is: "receive".  An extra Enter will start the transfer faster.

To go back to other CMS activities, return to CMS with the  MS-Kermit  "connect"
command,  type  "Ctrl-G"  to  redisplay  the CMS screen, and then "exit" to quit
CMS-Kermit.

CMS-Kermit SEND and RECEIVE commands are for text files, use BINSEND and  BINRE-
CEIVE  for binary files.  See HELP KERMIT on CMS or the document Kermit CMS File
                                                                 ______ ___ ____
Transfer Program for further features and details.
________ _______

The transfer time can be estimated from the baud rate but is also  dependent  on
system load.  At 9600 baud, expect about 300 characters per second (about 30% of
line rate); at 1200 baud expect about 80 characters  per  second  (65%).   These
rates  should  improve  as certain problems with the Series/1 3270 emulators are
corrected.  If the file transfer is done though UNIX tn3270, the  rate  will  be
                                                     ______
slowed by network transfer time and by UNIX response time.

File Transfer Between Personal Computers

MS-Kermit can exchange files with any other personal computer that has a  Kermit
program, even if the other is not a PC.

The two personal computers can be connected directly  together,  async  port  to
async port through a null modem (cable or adapter), or over phone lines with one
modem in "originate mode" and the other modem in "answer mode"  (see  the  modem
manuals).   Both  ends  must  be  set for the same baud rate and parity (none is
best).

Once connected physically, there  are  two  basic  methods.   The  first  method
requires  that  each  Kermit  be  given  the appropriate send or receive command
separately.  This is possible with any two Kermits.  The second  method  is  for
one  Kermit  to  be  put in server mode with the "server" command, and the other
Kermit to transfer files with "send" and  "get"  commands.   The  server  method
requires  one  Kermit  to  have the server function implemented and the other to
have the "get" command implemented.  MS-Kermit has both (and  more!).   See  the
Kermit Users Guide for more detail.
______ _____ _____

File Transfer from Other Drives or Directories

The MS-Kermit send and receive commands do not  take  DOS  2.x  pathnames.   MS-
Kermit  will  use the current directory on either the default disk or the speci-
fied disk on the send file name (e.g. "send b:myprog.bas") or the recieve  (e.g.
"receive b:").

To change the current directory for a drive  or  to  change  the  default  disk,
either set them in DOS before calling MS-Kermit or use the MS-Kermit "push" com-
mand to go back to DOS and set them.  For example, to receive a  file  into  the
OTHER directory on drive B:

     Kermit-MS>push
     A:\>cd b:other
     A:\>exit
     Kermit-MS>receive b:



gts@ucbpopuli                        - 8 -                           11 March 85





MIC 2.2.8         Using MS-Kermit on the IBM PC at UC Berkeley         MIC 2.2.8


     etc...

Printing on the PC Printer

MS-Kermit can print the PC screen or characters  comming  to  the  screen.   The
PrtSc key controls local printing while connected to a mainframe as a terminal.

Shift-PrtSc    prints whatever is currently on the screen.  Keyboard  input  and
               mainframe output are held until printing is complete.

Ctrl-PrtSc     prints everything as it arrives for the screen.  While  printing,
               Ctrl-PrtSc  stops  printing.  This is not good for UNIX vi or CMS
                                                                       __
               Display Mode because the printer does  not  understand  all  that
               screen cursor positioning!

All print operations expect the printer power to be on  and  the  status  to  be
ready  (online).   If  printer power is off or the status is not ready, DOS will
give a message and expect the user to give an Abort,  Ignore  or  Retry  command
(characters arriving from the mainframe are held).

The remote mainframe can tell MS-Kermit to start and stop the printer  with  the
escape sequences (see Appendix A2 Display Controls).

Printing Files Using File Transfer

CMS or UNIX files may be printed directly on the PC printer using file transfer.
Before  starting the transfer, give MS-Kermit the command set destination print.
After the printing is complete, you can reset file transfer for  disk  with  the
command  "set destination disk".  In some cases it may be faster to transfer the
print file to the PC disk then use the DOS print command to print the file.

Printing CMS Files in Terminal Mode

The CMS commands PCPRINT and TPRINT can print CMS files on the PC printer  while
connected  as  a  terminal.  Both will start and stop the printer automatically.
To print the CMS file MYPROG BASIC, type either CMS command:

          PCPRINT MYPROG BASIC (NOSTOP

          TPRINT  MYPROG BASIC (IBMPC

PCPRINT shows the lines on the screen as they print and printing can be  deleted
                                                                         _______
with  PF3.   TPRINT clears the screen during printing and can be paused with PF3
                                                                 ______
to allow a quit, restart or continue command.

Some CMS files use the first character of each line for carriage control.  These
must  be  recognized and converted for the PC printer.  Usually, LISTING, OUTPUT
OR MEMO files have such carriage controls.  Use the CC option for this:

     PCPRINT MYPROG LISTING (NOSTOP CC

     TPRINT  MYPROG LISTING (IBMPC CC

Actually, both TPRINT and PCPRINT would assume that a LISTING file has  carriage



gts@ucbpopuli                        - 9 -                           11 March 85





MIC 2.2.8         Using MS-Kermit on the IBM PC at UC Berkeley         MIC 2.2.8


controls.  See HELP PCPRINT, HELP EXTPRINT and HELP TPRINT on CMS for other use-
ful options.

Printing UNIX Files in Terminal Mode

The ycat command is used to print UNIX files  while  connected  as  a  terminal.
    ____
Ycat is just the UNIX command cat (1) plus output to start and stop the printer.
____                          ___  _
The output will show on the screen as it is printed.  To  print  the  UNIX  file
"myfile" on the PC printer, type:

          ycat myfile

or if you want page headers and trailers:

          pr myfile | ycat

Ycat can be used as the final stage of more complicated printing,  for  example,
____
to print an nroff file with underlining:
            _____

          nroff myfile | ul -t unknown | ycat

In fact, any command output can be printed by appending "| ycat".  See help ycat
                                                                       ____ ____
or man ycat on UNIX.
   ___ ____

The Fine Print

All the print commands rely on the PC user to set up the paper.  The IBM printer
knows  the position of line 1 by where the paper was when the printer was turned
on.  Subsequent form feeds go to that line.  To set line 1, turn off the printer
and roll the paper forward until a fold is under the print head (you may have to
pull back the ruler to see).  Then adjust the paper  so  that  the  raised  mark
above  the  tractor  is  exactly halfway between the two paper holes.  When then
printer is turned on, it will remember line  1.   Of  course  if  you  turn  the
printer  off  when  the  paper is not at line 1, you will have to reposition the
paper before turning the printer on again.

PCPRINT, TPRINT and ycat expect the printer to be at line 1 when the command  is
                    ____
given.   PCPRINT  does  nothing after printing; TPRINT and ycat will send a form
                                                           ____
feed to space to line 1 of the next page.  After using PCPRINT and in some cases
after  TPRINT  or  ycat  are aborted, take care to space forward manually.  Push
                   ____
Online to toggle the printer offline, then FormFeed  to  space  to  line  1  and
______                                     ________
finally Online again for ready.
        ______

If the terminal line baud rate is much faster than  the  printer,  printing  may
continue  many  lines after sending from the mainframe has completed.  MS-Kermit
fills its receive buffer, telling the mainframe to stop and start as  necessary.
Meanwhile,  MS-Kermit  will print from the receive buffer as fast as the printer
will accept characters.  The IBM printer  prints  at  about  80  characters  per
second  (800 baud) so this effect will be noticed at line rates of 1200 baud and
above.

For the above reason, printing may not stop  immediately  if  ycat,  PCPRINT  or
                                                              ____
TPRINT  are stopped.  Use Ctrl-PrtSc to stop printing faster (only if you do not
want the print output!).



gts@ucbpopuli                        - 10 -                          11 March 85





MIC 2.2.8         Using MS-Kermit on the IBM PC at UC Berkeley         MIC 2.2.8


When printing is turned on, MS-Kermit  does  not  convert  screen  or  attribute
escape sequences for the PC printer.  Controls and escape sequences must be sent
by the mainframe, generally by inclusion in the file to  be  printed.   See  the
manual for your PC printer.

Terminal Connection and Modems

MS-Kermit on the PC will do both terminal emulation and file transfer at  up  to
9600  baud  (960  characters  per  second).  Many campus terminal lines will run
reliably at 9600, however some may not, try 4800 or 2400.  Generally, if a  ter-
minal  works at 9600 so will the PC with MS-Kermit.  Modems, of course, are 1200
baud (Bell 212) or 300 baud (Bell 103).

The PC async ports (either COM1: or COM2:) act  as  an  RS-232-C  Data  Terminal
Equipments  (DTE).  The DB-25S connector must provide certain signals to the PC.
Proper connection is provided by the UCB Port Selector Connection ("red  button"
box).   A  modem  will  get  proper  signals if it is connected to the PC with a
"full" RS-232 cable or a 25 wire ribbon cable.

The basic RS-232-C connections are Receive Data (pin 3), Send Data  (pin 2)  and
Signal  Ground (Pin 7).  MS-Kermit turns on Request to Send (RTS pin 4) and Data
Terminal Ready (DTR pin 20) for use by a modem.  MS-Kermit does not  care  about
the state of the other signals.

PC-DOS Installation and Customization

Installation of MS-Kermit simply means copying MSKERMIT.EXE and MSKERMIT.INI, to
your  regular  system  diskette.   Put a system diskette in drive A: and the MS-
Kermit diskette in drive B: then enter the command: copy b:mskermit.* a: If  you
keep  command  programs  in  a  subdirectory,  copy  MS-Kermit there, e.g. "copy
b:mskermit.* a:\bin".  Thereafter, MS-Kermit can  be  used  without  the  master
diskette.

If you have an XT with the system on hard drive C:, use C: and  A:  whenever  A:
and B: are refered to here.

You will want to use the PATH command in your AUTOEXEC.BAT file so that commands
can be loaded from the system diskette while you are using another drive or sub-
directory.  If you keep your command programs in the root directory,  use  "PATH
A:\", otherwise specify that subdirectory, e.g. "PATH A:\BIN".

You will probably want to set the communications port baud rate for  both  ports
in   your   AUTOEXEC.BAT,   for   example:   "MODE  COM1:9600,e,7,1"  and  "MODE
COM2:9600,e,7,1".  If you normally use 1200 baud, change 9600 to 1200, etc.

The released version of the PC file MSKERMIT.INI initially sets up MS-Kermit for
use  with  UNIX  (the last command is "do unix").  If you normally use CMS, edit
the last line to be "do cms".

Another good setup command for your AUTOEXEC.BAT is "PROMPT $p$g".  This  causes
the  DOS  2.x  prompt to include your current directory, e.g. "A:>" for the root
directory and "A:the other directory.

UNIX Customization and Detail



gts@ucbpopuli                        - 11 -                          11 March 85





MIC 2.2.8         Using MS-Kermit on the IBM PC at UC Berkeley         MIC 2.2.8


Termcap Terminal Definitions
_______ ________ ___________

On UNIX, full screen and keyboard functions are defined  in  the  user  readable
system  file  /etc/termcap.   New  termcaps  are  first  included  in  the  file
/usr/new/etc/termcap and sometime later "migrated" to /etc/termcap.  To use  the
newer   termcaps,   the   environment   variable   TERMCAP   must   be   set  to
/usr/new/etc/termcap in your .login or .cshrc file just before any tset is done.
                                                                   ____
For example:

     if (-f /usr/new/etc/termcap)  setenv TERMCAP /usr/new/etc/termcap
     set noglob; eval `tset -s -m :?920c`

The "if -f" makes sure /usr/new/etc/termcap exists, in case it was "migrated" to
/etc/termcap.   If  you  always use MS-Kermit to connect to UNIX, you can change
the default terminal to "mskermit227" instead  of  "920c"  or  whatever  it  was
before.

The termcap mskermit227 may be abbreviated msk227 and is available on  all  UNIX
            ___________                    ______
systems.   This  termcap  does  not  use  automatic  margins  (autowrap) because
autowrap off is assumed by Columbia's release of mskermit 2.27.   This  version,
dated 1-3-85, has a bug which prevents standout from working.

A newer version of mskermit227, to be on /usr/new/termcap in a week or so,  uses
                   ___________
reverse  video for both standout and underlining (like a Heath-19).  The termcap
mskermit227am is the same but uses automatic margins.  The new termcap  specifi-
_____________
cally  for  this  release,  mskermit22714 or msk22714, will also be available on
                            _____________    ________
/usr/new/etc/termcap in a week of so.  It  uses  high  intensity  for  standout,
underline  for  underline,  and  uses  automatic margins (assumed by UCB Release
227.14).  These termcap definitions are included on the  diskette  as  the  file
MSK22714.TC.

For users of tn3270 for telnet into CMS, a similar file, /etc/map3270,  is  used
             ______                                       ___ _______
by tn3270 to map ASCII control characters and sequences into CMS 3270 functions.
It may take  some  time  for  the  map3270  entry  for  MS-Kermit  to  get  into
/etc/map3270  so  you  may  want to set it up on your own account.  Transfer the
diskette file MAP3270.tc to your UNIX account.  Then make your  own  map3270  in
your  home  directory by appending map3270.tc to /etc/map3270: "cat /etc/map3270
map3270.tc > map3270".  The put the command "setenv  MAP3270  $home/map3270"  in
your .login file.  See "man tn3270" and "man map3270" for more detail.

Versions of UNIX Kermit programs
________ __ ____ ______ ________

The current versions of Kermit and related programs are in /usr/ucb on VAX  UNIX
and  /usr/ucb/bin  on  PDP-11  UNIX.   New programs are first available for user
testing in /usr/new on VAX UNIX or /usr/new/bin on PDP-11  UNIX,  then  sometime
later  "migrated"  to /usr/ucb or /usr/ucb/bin.  If you want to use new versions
as they are released for user testing, your command path should include /usr/new
or /usr/new/bin before /usr/ucb or /usr/ucb/bin.  Or you can define an alias for
                                                                       _____
the command in your .cshrc file, e.g. "alias kermit /usr/new/kermit".  For  more
information about search paths, see "help searchpath" on UNIX.

CMS Customization and Detail

The only suggestion for CMS is  that  you  put  the  CP  command  "TERM  BREAKIN



gts@ucbpopuli                        - 12 -                          11 March 85





MIC 2.2.8         Using MS-Kermit on the IBM PC at UC Berkeley         MIC 2.2.8


GUESTCTL" in your PROFILE EXEC to prevent console messages from interfering with
file transfers.

On-line Source, Binaries and Documentation

The source code, binary executable code and documentation for all supported Ker-
mits  is available on-line on CMS.  Similar access is planned for UNIX.  Current
and future releases of the various Kermits can be downloaded  directly  to  your
machine.

On CMS, the NETCOMM 491 minidisk can be accessed by:

     LINK NETCOMM 491 491 RR
     ACCESS 491 P

Problems and Bugs    (General)

It is our policy to document all known problems, bugs and deficiencies  so  that
users  are  better  able to deal with them.  No software is problem free and the
user should be aware that lack of documented problems is  probably  evidence  of
lesser  testing  not  fewer problems.  Operationally important problems are also
documented in the main text where appropriate.  If you know  or  discover  addi-
tional problems, please notify consult (2-4072) and gts@ucbpopuli (2-5979).

Problems and Bugs    (MS-Kermit UCB 227.14)

UCB changes and fixes to Columbia's MS-Kermit 2.27 are listed in appendix A3.

At 9600 baud, the PC is near its character processing limit.  A number of "back-
ground" programs such as the DOS print command or aids such as clock displays or
"pop-up" functions may interfere with MS-Kermit at 9600 baud by taking away time
at  critical  moments.   In terminal emulation, this will manifest as occasional
characters lost during long series of characters sent to the screen at full line
speed.  During file transfer, an occasional packet will need to be retransmitted
(the retry count will increment).

There are no known bugs in MS-Kermit 2.27 UCB Release 227.14 (Let us  know  what
you find out!).

Problems and Bugs    (Keyboard Tables, UNIX, CMS)

On CMS Full Screen, there are a number of problems with the current KERMIT  ter-
minal  definition  that  will  be  fixed over the next month or so.  None of the
highlighting features of MS-Kermit are used.  Kermit  terminal  types  that  use
high  intensity  and  reverse video for green monitors and four colors for color
monitors will be announced.  Ctrl-J is newline instead of cursor down (Ctrl-N is
newline).

If you do file transfers with CMS while logged on through UNIX tn3270, the  line
may  occasionally  hang.   This  is  being investigated.  Also file transfers go
rather slower that through the Series/1 but should improve  as  the  network  is
tuned and tn3270 improved.





gts@ucbpopuli                        - 13 -                          11 March 85





MIC 2.2.8         Using MS-Kermit on the IBM PC at UC Berkeley         MIC 2.2.8


Appendix A1 - Keyboard Description

(put KEYBOARD.DOC page 1 here)






















































gts@ucbpopuli                        - 14 -                          11 March 85





MIC 2.2.8         Using MS-Kermit on the IBM PC at UC Berkeley         MIC 2.2.8


Appendix A1 - Keyboard Description

(put KEYBOARD.DOC page 2 here)






















































gts@ucbpopuli                        - 15 -                          11 March 85





MIC 2.2.8         Using MS-Kermit on the IBM PC at UC Berkeley         MIC 2.2.8


Appendix A2 - Screen Controls (Heath-19 plus some ANSI)

(put SCREEN.DOC here)






















































gts@ucbpopuli                        - 16 -                          11 March 85





MIC 2.2.8         Using MS-Kermit on the IBM PC at UC Berkeley         MIC 2.2.8


Appendix A3 - UCB Changes and Fixes to Columbia's MS-Kermit 2.27

(put MODLIST.DOC page 1 here)






















































gts@ucbpopuli                        - 17 -                          11 March 85





MIC 2.2.8         Using MS-Kermit on the IBM PC at UC Berkeley         MIC 2.2.8


Appendix A3 - UCB Changes and Fixes to Columbia's MS-Kermit 2.27

(put MODLIST.DOC page 2 here)






















































gts@ucbpopuli                        - 18 -                          11 March 85


   A (Ü