

CFB NO.:  152                                        DATE:  DECEMBER 16, 1987 

REV LEVEL:  0                                DATE CHANGED:  DECEMBER 16, 1987 

TYPE:  HARDWARE
HARDWARE:  ENGINE
SUBJECT:  CPU III INSTALLATION GUIDE.







CPU III Installation                                         1-Dec-1987


The  purpose  of this CFB is to describe in detail those steps necessary
to  install or upgrade network machines to CPU III level.  The following
document  will  present an overview of the CPU III board, the components
and steps necessary to bring a machine to CPU III level.



1.  CPU III OVERVIEW

The  CPU III board combines the functions of the current CPU I and ROM &
I/O  boards onto a single board through the use of gate arrays and other
techniques.   In  addition,  the  clock  source has been increased to 10
MHz.   The  CPU  III can be used with a MAC II or MAC III level machine.
The  CPU  III can be installed in a single bucket (16 slot) engine, mini
engine  or  dual-mini  engine.   The  CPU  III can not be installed in a
double bucket (32 slot) engine.


NOTE:  At  the  present  time  it has been determined that any CPU I
       engine  to   be  upgraded  to  CPU  III will automatically be
       upgraded  to  MAC  III  at  the  same  time.    Any backplane
       upgraded  for  CPU  III  will no longer support CPU I and ROM
       I/O  unless  the  backplane jumpering outlined in section 2.3
       Backplane Modifications is removed.




2.  CPU III INSTALLATION


2.1  INSTALLATION PREREQUISITES

Prior  to  installation  or  any upgrades, the target machine MUST be at
current  FCO  rev  levels,  including  but  not limited to the following
ECO's:

        ECO 84-129      Backplane noise modifications
        ECO 84-130      Backplane noise modifications
        ECO 84-131      Backplane noise modifications
        ECO 84-132      Backplane noise modifications


If  the  target machine has a MAC III, this MAC III must have ECO 86-283
installed and be a D1 etch or higher.
















2.2  GENERAL INSTRUCTIONS

The steps necessary to perform the CPU III upgrade are as follows:

    o  Remove  the  existing  CPU  I,  ROM  I/O,  MAC  II and Memory
       boards.

    o  Perform  the  backplane modifications (if necessary) outlined
       in Section 2.3 Backplane Modifications (below).

    o  Perform  the  necessary  jumpering  on  the  CPU III board as
       outlined    in    Section    2.4   CPU   III   Board   Jumper
       Configurations.  (below).

    o  Install the new CPU III and MAC III boards

    o  Run the following diagnostics:

            o  CPU  (DCPU)
            o  MAC  (DMAC)
            o  Memory  (DMEM)
            o  Relocation Test  (DREL)
            o  SIO  (DSIO)
            o  Enhanced Sync  (DSYN) - if appropriate
            o  Sync/Async  (DSYA) - if appropriate

    o  If  the  above  diagnostics have been run with no errors, the
       machine is ready for bringup in the network.

    o  Return all replaced boards to the Depot.



Remember:

    o  The  CPU  III board is installed in slot 6 of the chassis for all
       non  5  DMA  mini-engine backplanes, leaving slot 7 unused at the
       present  time.   For 5 DMA mini-engine backplanes, the CPU III is
       installed  in  slot 7 (see Section 2.5 Backplane Slot Assignments
       - below).

    o  The  front  console ribbon cable connects to the CPU III board at
       connector  J3.   The  ROM  I/O  to  MAC ribbon cable now connects
       between  CPU  III connector J2 and the MAC board 26-pin connector
       (see Section  2.6 CPU III Board Diagrams - below).



2.3  BACKPLANE MODIFICATIONS

There  are  eight  (8) signals that need to be jumpered on the backplane
of  the  target  machine,  only  if  the  backplane  is  the  type  that
accommodates  CPU  I.   If  the  target  machine  is a  5 DMA type these
backplane  modifications  are  not  necessary.  These signals used to be
brought  out  by  the  ROM I/O board and will now be internal to the CPU
III  board,  but  still  need  to  be  brought through to the MAC board.








These  signals  should be jumpered using standard 30-gauge wire wrap and
are as follows:

        Slot 6          Slot 5          Signal

        112-0           112-0           PMA 011
        113-0           113-0           PMA 031
        114-0           114-0           PMA 051
        115-0           115-0           PMA 071

        212-0           212-0           PMA 021
        213-0           213-0           PMA 041
        214-0           214-0           PMA 061
        215-0           215-0           PMA 081


NOTE:   The  DMA backplane jumper configurations are the same as all
previous  configurations.  Consult the Engine Maintenance manual for
further assistance.



2.4  CPU III BOARD JUMPER CONFIGURATIONS

There  are  a total of six (6) jumpers on the CPU III board.  One (1) is
used  solely for test purposes, one (1) is used to determine the size of
the   microcode prom word range, one (1) is used to set the clock source
speed,  and three (3) are used to accommodate either a MAC II or MAC III
10 MHz board.  The jumpers and their specifics are as follows:


    E1 (Microcode Prom Word Range)

       This  is  a  three  (3) post jumper (near location 7B) and is
       used  to  select  the size of the microcode prom word
       range.    The  type  of  chips  located  at  C28-C36  (engine
       microcode  proms)  determine the configuration value for this
       jumper.   The  standard  position is to jumper A-B, but check
       the  prom type to be sure.  The valid configurations for this
       jumper are as follows:

             Jumper Position         Function

                  A - B              2K x 8 Prom  (Chip# 27S191)
                  B - C              4K x 8 Prom  (Chip# 27S43A)



    E2 (Test)

       This  is  a  three (3) post jumper (near location 14E) and is
       used   for  test  purposes  only.  This jumper must always be
       connected (A-B).











    E3 (Clock Speed)

       This  is  a  three  (3) post jumper (near location 2J - front
       left  edge)  and  is  used to select the on-board clock speed
       and has two (2) positions as follows:

             Jumper Position         Function

                E3 -  8 MHz          Alternate clock speed
                E3 - 10 MHz          Normal clock speed select



    E4 (MAC Board Selection)

       This  is  a  three (3) post jumper (near location 11H) and is
       used  to  select the type of MAC board being used and has two
       (2) positions as follows:

             Jumper Position         Function

               E4 -  MAC II          MAC II board  in machine
               E4 -  MAC III         MAC III board in machine


    E5 (MAC Board Selection)

       This  is  a  three (3) post jumper (near location 13H) and is
       used  to  select the type of MAC board being used and has two
       (2) positions as follows:

             Jumper Position         Function

               E5 -  MAC II          MAC II board  in machine
               E5 -  MAC III         MAC III board in machine


    E6 (MAC Board Selection)

       This  is  a  three (3) post jumper (near location 15H) and is
       used  to  select the type of MAC board being used and has two
       (2) positions as follows:

             Jumper Position         Function

               E6 -  MAC II          MAC II board  in machine
               E6 -  MAC III         MAC III board in machine


     NOTE:  JUMPERS  E4,  E5  AND  E6  MUST  ALL SELECT THE SAME MAC
            BOARD TYPE.













2.5  BACKPLANE SLOT ASSIGNMENTS


The  slot assignments of the Sync, Async and DMA boards depends upon the
configuration  of  the target machine.  Not all types of interface cards
may  be present, therefore the only requirement is the signaling for the
DMA slots.



     NOTE:  The  DMA backplane jumper configurations are the same as
            all   previous   configurations.    Consult  the  Engine
            Maintenance manual for further assistance.



The  slot  assignments  for  2  DMA mini engine backplane  machines  are
as follows:

               slot         board

                    +-----------------------+
                 7  +                       +
                    +-----------------------+
                 6  +       CPU  III        +
                    +-----------------------+
                 5  +       MAC  III        +
                    +-----------------------+
                 4  +     MULTIFUNCTION     +
                    +-----------------------+
                 3  +         SYNC          +
                    +-----------------------+
                 2  +     SYNC or ASYNC     +
                    +-----------------------+
                 1  +   DMA, SYNC or ASYNC  +
                    +-----------------------+
                 0  +   DMA, SYNC or ASYNC  +
                    +-----------------------+




The  backplane  slot  assignments  for  a 3 DMA mini engine backplane is
essentially  the  same  as  a  2  DMA  mini engine backplane, except the
bottom three slots (slots 0-2) can be DMA, Sync or Async.



















The  slot  assignments  for  a 5 DMA mini engine backplane  machine  are
as follows:


               slot         board

                    +-----------------------+
                 7  +       CPU  III        +
                    +-----------------------+
                 6  +       MAC  III        +
                    +-----------------------+
                 5  +    MULTIFUNCTION      +
                    +-----------------------+
                 4  +  DMA,  SYNC or ASYNC  +
                    +-----------------------+
                 3  +  DMA,  SYNC or ASYNC  +
                    +-----------------------+
                 2  +  DMA,  SYNC or ASYNC  +
                    +-----------------------+
                 1  +  DMA,  SYNC or ASYNC  +
                    +-----------------------+
                 0  +  DMA,  SYNC or ASYNC  +
                    +-----------------------+







The  slot assignments for a standard engine (full engine) backplane  are
as follows:


               slot         board

                    +-----------------------+
                 7  +                       +
                    +-----------------------+
                 6  +       CPU  III        +
                    +-----------------------+
                 5  +       MAC  III        +
                    +-----------------------+
                 4  +     MULTIFUNCTION     +
                    +-----------------------+  ---  Half-Chassis A1
                 3  +     SYNC or ASYNC     +
                    +-----------------------+
                 2  +     SYNC or ASYNC     +
                    +-----------------------+
                 1  +     SYNC or ASYNC     +
                    +-----------------------+
                 0  +     SYNC or ASYNC     +
                    +-----------------------+












                    +-----------------------+
                 7  +   DMA, SYNC or ASYNC  +
                    +-----------------------+
                 6  +   DMA, SYNC or ASYNC  +
                    +-----------------------+
                 5  +   DMA, SYNC or ASYNC  +
                    +-----------------------+
                 4  +   DMA, SYNC or ASYNC  +
                    +-----------------------+  ---  Half-Chassis A2
                 3  +   DMA, SYNC or ASYNC  +
                    +-----------------------+
                 2  +   DMA, SYNC or ASYNC  +
                    +-----------------------+
                 1  +   DMA, SYNC or ASYNC  +
                    +-----------------------+
                 0  +   DMA, SYNC or ASYNC  +
                    +-----------------------+




2.6  CPU III BOARD DIAGRAMS

The  following  diagram  depicts the layout of the CPU III board and the
main areas of concern for installation purposes:

  +==============================__==__=============================+
  +                                                                 +
  +                                                                 +
  +                       E1    P01 P00 P02 P05 P08 P06 P04 P03 P07 +
  +                                                                 +
  +                                                                 +
  +                                                                 +
  +                                                                 +
  +                                                                 +
  +                                                                 +
  +                                      +--------+  E2             +
  +                                      +   G    +                 +
  +                                      +--------+                 +
  +                                                                 +
  +                                                                 +
  +                                                                 +
  +                                                                 +
  +                                                                 +
  +                                                                 +
  +                                                                 +
  +                                         E4     E5     E6        +
  +                                                                 +
  +                                                                 +
  +  E3     J3         SW2     SW3    LED3      J2      LED1 LED2   +
  +-----[========]---------------------------[========]-------------+












The  components  of  the CPU III that are visible from the front edge of
the board as follows:


  +-----------------------------------------------------------------+
  +  E3     J3         SW2     SW3    LED3      J2      LED1 LED2   +
  +-----[========]---------------------------[========]-------------+



The   following  is  a  description  of  each  of  the  above  mentioned
components:


   E3 (Clock Speed)

      This   is   the   jumper   described  in  Section  2.2  Jumper
      Configurations (above).

   J3 (Console Data Ribbon Cable)

      This  is the normal 26 pin ribbon cable connecting the CPU III
      to the engine front console.

   SW2 (Reset Switch)

      This  switch  is a snap-action, momentary-contact switch which
      is the  system clear switch, and is the same as the initialize
      key  (INI)  on  the  engine  front  console.   Depressing this
      switch  simulates  a  power  failure and causes a restart from
      microcode address zero, creating a power-up interrupt.

   SW3 (Repeat Switch)

      This  is  a two (2) position switch used by a bench technician
      while   troubleshooting  the  CPU  III  board.   It allows the
      technician  to  loop  a  set of instructions during debugging.
      This  switch should be placed in the position pointing towards
      the  front  edge  of  the  CPU  III  board  (not in the REPEAT
      position) during normal operation.

   LED3 (Repeat)

      This  LED  will illuminate whenever the Repeat switch (SW2) is
      pressed  or  the  repeat  key  (RPT)  on the engine console is
      pressed.   During  normal  operation  this  LED  will  not  be
      illuminated.

   J2 (CPU to MAC Ribbon Cable)

      This  is the normal 26 pin ribbon cable connecting the CPU III
      to the MAC board.

   LED1 (Microcode Parity Indicator)

      This  LED is the microcode parity error indicator and will not








      be  illuminated  during  normal operation.  Should a microcode
      parity  error  occur, this LED will be illuminated with a high
      intensity.

   LED2 (MNAME - Prom Loaded)

      This  LED  illuminates when the microcode is executing.  Under
      normal   conditions  this  LED  will  always  be  illuminated.
      Should  this  LED  be  extinguished it indicates a major board
      failure.

   G (Gate Array - ALU)

      This  is  the ALU gate array logic.  The gate array contains a
      significant  portion  of  the CPU I board functions compressed
      into it.

   P01, P00, P02, P05, P08, P06, P04, P03, P07 (Microcode PROMS)

      These  proms  are  the locations of the basic engine microcode
      proms.   In  the  case  of  a public network supervisor, these
      proms  will  contain special microcode to allow the machine to
      operate as a public network supervisor.



3.  CPU III COMPONENTS

The  basic  components of the CPU III kit are described in the following
section.   It  should  be  noted  that  there  is  a  difference  in the
Connector  0  terminator  board  if it is  being used  on a  full engine
versus a mini engine.


The individual components of the CPU III are as follows:

        Part Number     Component Description

        470284-001      CPU III 10 MHz Standard Engine
        470284-002      CPU III 10 MHz Split Supervisor Engine

        470269-001      MAC III

        470140-001      Connector 0 Terminator - Full Engine
        470140-003      Connector 0 Terminator - Mini Engine
        470117-001      DMA Terminator

        160025-001      CPU III to MAC III ribbon cable
        160028-001      CPU III to Front Console data cable











































































   