











                          REPORT TO SUPERVISOR'S LOG

                                      BY

                         3270 POLLED BISYNC INTERFACES

                                   VERSIONS

                         TERMINAL INTERFACE : PBT 6.05
                             HOST INTERFACE : PBH 8.04






                                    TYMNET
                        NETWORK TECHNOLOGY DEVELOPMENT
                                April 28, 1986












     ====================================================================
     |   Tymnet,  Inc.'s  proprietary  rights  are  included  in  the   |
     |   information disclosed herein.   The recipient,  by receiving   |
     |   this document,  agrees  that neither this  document nor  the   |
     |   information  disclosed  herein nor any part thereof shall be   |
     |   reproduced or transferred to  other  documents  or  used  or   |
     |   disclosed  to  others  for  manufacturing  or  for any other   |
     |   purpose except  as  specifically authorized  in  writing  by   |
     |   Tymnet, Inc.                                                   |
     ====================================================================
                                                                 April 28, 1986







                                   TABLE OF CONTENTS

        Section                                                            Page



        1.   INTRODUCTION                                                     1


        2.   DSP ERROR LOG                                                    2
          2.1   DSP Defined Error Codes                                       2
             2.1.1    Command /Response Undelivered                           2
             2.1.2    Command/Response Aborted                                3

          2.2   Transformation Logic Of DSP code To Report Type               3


        3.   CIRCUIT ZAP LOG                                                  4


        4.   AVERAGE POLLING TIME LOG                                         5


        5.   REPORT PROCESS BY PBH                                            6
          5.1   Circuit Reset                                                 6
          5.2   Command/Response Undelivered/Aborted                          6
          5.3   Invalid User Circuit Number                                   7
          5.4   Invalid Data Format                                           7
          5.5   Invalid Input DSP Sequence Number                             7


        6.   REPORT PROCESS BY PBT                                            8
          6.1   Circuit Reset                                                 8
          6.2   Command/Response Undelivered/Aborted                          8
          6.3   Invalid User Circuit Number                                   8
          6.4   Invalid Input Sequence Number                                 9


                                     APPENDICES
                                     ==========


        I.   CROSS REFERENCE FOR DSP ERROR CODE AND REPORT TYPE              11






                                                                     SUPLOG.DOC
        INTRODUCTION                                             April 28, 1986






                                   1 -  INTRODUCTION


             From versions PBH 7.04 and PBT 5.04, there is a new  feature where
        all error messages detected by the 3270 terminal interface  or detected
        by the host interface via the established DSP error reporting mechanism
        are logged to the supervisor.  The report type will be  the transformed
        DSP error code from 2 bytes to one byte.  The transformation logic will
        be described later.

             Both PBT and PBH  also generate report type  of 30 for the  log of
        circuit zap with the line, control unit, and device addresses.

             Report type 3F is generated by  PBT only, and it is to  report the
        average polling time for the  control units connected to the  PBT. This
        log shows the status of the control units on all the lines in PBT.

             An operator may acces the supervisor's log via PROBE.

             The log message for each error will have the following format:

          NODE REPORT 2060 FROM SLOT# 6 PBH TYPE 30 414040

          Where 2060 is the node number
                6    is the slot of the 3270 host interface.
                PBH  stands for Polled Bisynch Host, and is the mneumonic for
                     3270 host interface in the standard TYMNET terminology
                30   is the error type, it means circuit has been zapped
                40   is the line address, as defined in the TYM file
                40   is the control unit address, as defined in the TYM file
                40   is the terminal address, as defined in the TYM file



















                                                                     SUPLOG.DOC
        DSP ERROR LOG                                            April 28, 1986






                                  2 -  DSP ERROR LOG


             The error  type is derived  from the standard  DSP error  codes as
        listed  in  the  DSP  manual  under  COMMANDS/RESPONSE  UNDELIVERED and
        ABORTED.  Following  is the  list and description  of all  the possible
        combinations of error codes.






                             2.1  DSP Defined Error Codes


             Following  are  descriptions  of the  DSP  errors.   The  label is
        defined in the PBT  slot, and the code  consists of DSP message  ID and
        error code, one byte each.





                    2.1.1  Command /Response Undelivered

          Label   Code  Description of the error code
          -----   ----  ------------------------------------------------

          XMTEOT  1001  RECEIVE EOT TO THE TRANSMITTED DATA
          XMTRVI  1002  RECEIVE RVI TO THE SELECT POLL FROM TIF
          XMTFF   1003  DETECTED FACILITIES FAILURE
          XMTTO   1004  REPEATED TIMEOUT IN RESPONSE TO TRANSMITTED DATA
          XMTNAK  1005  REPEATED NAKS TO TRANSMITTED DATA
          XMTWAK  1006  REPEATED WACKS TO XMTS(OR SELECT POLL FOR FROM TIF)
          XMTINV  1008  INVALID DSP DATA MESSAGE FORMAT
          XMTUR   1009  UNRECOGNIZABLE BSC DATA FROM EXTERNAL EQUIPTMENT
          XMTUCN  1010  BAD USER CIRCUIT NUMBER
          XMTSEQ  1011  DSP DATA MESSAGE OUT OF SEQUENCE
          XMTCU   1012  CU NOT RESPONDING TO POLL FROM TIF
          XMTETO  1013  TIMEOUT WAITING FOR ETX OR ETB AFTER STX
          XMTZAP  1020  CIRCUIT ZAP








                                                                     SUPLOG.DOC
        DSP ERROR LOG                                            April 28, 1986


                    2.1.2  Command/Response Aborted

          Label   Code  Description of the error code
          -----   ----  ------------------------------------------------

          RCVFF   1103  FACILITIES FAILURE
          RCVTO   1104  TIMEOUT
          RCVNAK  1105  N NAKS SENT
          RCVSTE  110A  RECEIVE REPEATED DATA ABORT (STX...SUB...ENQ)
          RCVACK  1110  RECEIVED REPEATED REQUEST TO RESEND ACKS
          RCVTTD  1111  NO ETX AFTER ETB ... SEND REPEAT TTD'S
          RCVRST  1112  RECEIVED CIRCUIT RESET FROM HOST PAD







                 2.2  Transformation Logic Of DSP code To Report Type


             The derivation is performed in the following manner :

          DETECTED    REPORTED
             BY          BY     CMD/RES    ORIGINAL      INPUT      OUTPUT
            
            PBT         PBT
            PBH         PBH
                                 XMT        10XX ---->   10XX ----> 10-3F
                                 RCV        11XX ---->   11XX ----> 40-6F

            PBT         PBH
            PBH         PBT
                                 XMT        10XX ----->  12XX ----> 70-AF
                                 RCV        11XX ----->  13XX ----> B0-EF

              Where ORIGINAL  is the error code as defined by DSP
                              10XX undelivered with code XX
                              11XX aborted with code XX

                    OUTPUT    is the report type as seen in PROBE's log












                                                                     SUPLOG.DOC
        CIRCUIT ZAP LOG                                          April 28, 1986






                                 3 -  CIRCUIT ZAP LOG


             This log type of 30 indicates that there is going to be  a circuit
        terminated  in the  network,  which will  be accompanied  by  the line,
        control unit, and device addresses.

             Usually, if a circuit is  to be terminated, both PBT and  PBH will
        make several reports depending on the nature of the zap.

             The first report, if the  zap is related to the  line disciplines,
        is as explained in the DSP error log.

             The  second  report is  the  Addendum to  Accounting  report, ISIS
        message  B7,  to give  accounting  system the  reason  for  the circuit
        termination.

             Finally, the circuit zap log is reported.

             To find out the real reason for the circuit termination,  one must
        relate  to  all  the  pertinent reports  and  get  the  reason  code to
        determine the nature of the zap.




























                                                                     SUPLOG.DOC
        AVERAGE POLLING TIME LOG                                 April 28, 1986






                             4 -  AVERAGE POLLING TIME LOG


             This  log is  dedicated to  PBT  only, it  is used  to  report the
        average polling time calculated by  PBT over a certain period  of time.
        It indicates the polling cycle performed by PBT. From this log, one can
        see if the control unit is active or idle.

             The output of this report type is as follows:

        85:18:06:01
         NODE REPORT 2062 SLOT# 2 PBT TYPE 3F 1A6A 
         NODE REPORT 2062 SLOT# 2 PBT TYPE 3F 11A69 
         NODE REPORT 2062 SLOT# 2 PBT TYPE 3F 25554 
        85:18:11:00
         NODE REPORT 2062 SLOT# 2 PBT TYPE 3F 1A6A 
         NODE REPORT 2062 SLOT# 2 PBT TYPE 3F 11A69 
         NODE REPORT 2062 SLOT# 2 PBT TYPE 3F 2F0C1 
        85:18:16:02
         NODE REPORT 2062 SLOT# 2 PBT TYPE 3F 1A6A 
         NODE REPORT 2062 SLOT# 2 PBT TYPE 3F 11A69 
         NODE REPORT 2062 SLOT# 2 PBT TYPE 3F 2F0C2 
        85:18:21:01
         NODE REPORT 2062 SLOT# 2 PBT TYPE 3F 1A6A 
         NODE REPORT 2062 SLOT# 2 PBT TYPE 3F 11A69 
         NODE REPORT 2062 SLOT# 2 PBT TYPE 3F 2F0C1 


             As can seen above, for multiple  lines in PBT, the log for  line 0
        will not have the line number as lines 1 or 2 do.

             Line 2  has a very  large number of  polling time,  this indicates
        that this lins is in "Slow Poll" mode. Most likely, this line is either
        not connected or control units  connected to this line do not  have the
        same control unit addresses configured in PBT.















                                                                     SUPLOG.DOC
        REPORT PROCESS BY PBH                                    April 28, 1986






                              5 -  REPORT PROCESS BY PBH


             This  section  describes  when and  how  the  supervisor's  log is
        reported by PBH.






                                  5.1  Circuit Reset


             When PBH receives  a DSP circuit reset  message from the  TPAD, it
        returns  the same  message back  to TPAD  after resetting  the expected
        internal sequence numbers.

             PBH also reports to supervisor  by using the DSP error  message of
        1112(RCVRST),  which will  be transformed  into one  byte  again before
        sending to SUP.






                       5.2  Command/Response Undelivered/Aborted


             Whenever PBH  detects error  conditions between  host, or  PBT has
        detected error conditions on  its connections with control  unit, there
        is always reports made by each interface to notify the other end of the
        conditions.

             The  DSP  message ID  and  error codes  are  described  in earlier
        section and the list can also be found in the appendix.













                                                                     SUPLOG.DOC
        REPORT PROCESS BY PBH                                    April 28, 1986


                           5.3  Invalid User Circuit Number


             When a DSP data message is received from the TPAD, PBH  checks the
        UCN(User Circuit  Number). Current implementation  of PBH and  PBT only
        supports UCN of 0.

             If UCN of the  DSP data message is not  equal to 0, PBH  will send
        back an Invitation to Clear  to TPAD after transforming the  1010 error
        code, and report to the SUP.






                               5.4  Invalid Data Format


             If a new DSP data message comes into HIF and previous data message
        is not ended with ETX,  a Rresponse Undelivered DSP error  message will
        be returned  to TPAD with  reason code of  1008. This reason  code will
        also be used to form report type to the SUP.






                        5.5  Invalid Input DSP Sequence Number


             If the sequence number of the  DSP data message to PBH is  not the
        one expected by PBH, error code of 1011 will be used to make the report
        type to the supervisor's log.



















                                                                     SUPLOG.DOC
        REPORT PROCESS BY PBT                                    April 28, 1986






                              6 -  REPORT PROCESS BY PBT







                                  6.1  Circuit Reset


             PBT  has received  a DSP  Circuit Reset  control message  from the
        HPAD. PBT returns the exact message back to the HPAD in acknowledgement
        of receiving it. Supervisor's log is also reported.






                       6.2  Command/Response Undelivered/Aborted


             This report process is made when PBT has detected error conditions
        between  control unit,  or HPAD  has detected  error conditions  on its
        connection with host and informed PBT of such conditions.






                           6.3  Invalid User Circuit Number


             Current implementation in PBT only supports User Circuit Number of
        zero, any message header  with UCN other than  0 will be treated  as an
        error condition.












                                                                     SUPLOG.DOC
        REPORT PROCESS BY PBT                                    April 28, 1986


                          6.4  Invalid Input Sequence Number


             This  error condition  happens when  PBT has  received a  DSP data
        message from HPAD, and the expected sequence number does not  match the
        number in the DSP message header.
















































                                                                     SUPLOG.DOC
                                                                 April 28, 1986



























                      *   ****  ****  ***** *   * ****  ***** *   *
                     * *  *   * *   * *     **  * *   *   *    * * 
                    ***** ****  ****  ****  * * * *   *   *     *  
                    *   * *     *     *     *  ** *   *   *    * * 
                    *   * *     *     ***** *   * ****  ***** *   *
























                                                                     SUPLOG.DOC
        CROSS REFERENCE FOR DSP ERROR CODE AND REPORT TYPE       April 28, 1986






           APPENDIX I.   CROSS REFERENCE FOR DSP ERROR CODE AND REPORT TYPE



        Cross reference of the DSP error code and the converted report type.

          DSP   REPORT  REPORT
          CODE   TYPE   TYPE   DESCRIPTION
         ------  ----   ----   --------------------------------------
                   *     **
          1001    11     71     EOT Received to transmitted data
          1002    12     72     RVI received to SELECT poll
          1003    13     73     Facilities Failure Detected
          1004    14     74     Failure to respond to message
          1005    15     75     Message undelivered due to receipt of NAK
          1006    16     76     Message undelivered due to receipt of WACK
          1008    18     78     Invalid DSP data format
          1009    19     79     Unrecognizable terminal response
          1010    20     80     Bad user circuit number(UCN)
          1011    21        
          1012    22     82     CU not responding to poll
          1013    23     83     Timeout waiting for ETB/ETX after STX
          1020    30            Circuit ZAP

          1103    43     A3     Facilities Failure detected
          1104    44     A4     Failure to respond to message
          1105    45     A5     Message undelivered due to receipt of NAK
          110A    4A     AA     Received repeated STX...SUB...ENQ
          1110    50     B0     Received repeated request to resend ACK
          1111    51     B1     No ETX after ETB... Send TTD
          1112    52     B2     Received Circuit Reset
            
       ------------------------------------------------------------------
           *   : This column indicates the error detected by PBH and
                 reported by PBH, so will be the case for PBT.

           **  : This column indicates the error detected by PBH and
                 reported by PBT, vice versa.












                                                                     SUPLOG.DOC
   MmLr 