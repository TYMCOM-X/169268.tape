






                            PBH.ERS












                               _b_y

                    BISYNC INTERFACE SECTION

                             TYMNET
                 Network Technology Development
                         April 13, 1990






















Tymnet's proprietary  rights  are  included  in  the  information
disclosed  herein.   The  recipient,  by receiving this document,
agrees that neither this document nor the  information  disclosed
herein, nor any part thereof shall be used or disclosed to others
for manufacturing or for any other purpose except as specifically
authorized in writing by the Tymnet.


















                          1.  PBH

This  document details all the configuration macro's available to
configure  the  PBH.  The host interface configuration must match
the configuration of the host front-end processor. When the  host
interface is generated, several aspects of the configuration must
be defined.


        1. The host BSC lines must be specified. The host type if
           other than IBM must be specified.

        2. For each BSC line, all control units' addresses whose poll
           messages  are  answered  by the  host  interface  must  be
           defined.

        3. For each control unit, all  devices recognized by the host
           must be defined  by specifying a device  address, a device
           type (terminal  or printer), and  a logical  line address.
           The  logical line  address  is  used in  assigning  device
           addresses to network circuits.


The detailed configuration of the host interface is specified  in
the sample Tymfile.

1.1  SYNTAX AND FORMATS

The following statements specify parameters for the  TYMNET  3270
Host  Interface  Tymfile:   macro,  ranging  macro,  equate,  and
message text.

The following represent macro characteristics:

     o+ All the default macros being used should  be  put  at  the
       beginning of the tymfile.

     o+ A macro body cannot exceed 7665 characters.

     o+ All macros may begin in column  one; indentation is recom-
       mended for clarity.  More than one macro can be put on one
       line and separated by a semicolon. If a macro is separated
       by  a semicolon and it is to be commented out a colon must
       be  inserted  after  all  semicolons   not  just  at   the
       beginning of the line.

     o+ Open parenthesis "(" immediately follows a name.

     o+ Closed parenthesis ")" must follow  the last value without
       spaces.




Page 1                   PBHERS.DOC







PBH                                           April 13, 1990



     o+ Macros  to  define  the  line,  control  unit  and  device
       parameters  can  be  omitted;  a  default  value  will  be
       assigned as described later.

     o+ All characters for a message text must be specified.

     o+ A colon (:) on a line indicates a comment  (This  comment,
       which is not read by the assembler, is optional).

     o+ Spaces within the parentheses are  not entered unless part
       of the value (as in message text).


1.2  MACRO DEFINITIONS FOR LINE

This section  describes  the  macros  that  are  used  to  define
parameters  for  the  BSC  line's operation and to be used in the
network.

1.2.1  HSTPRT - Host Number and Ports

Syntax : HSTPRT(arg1,arg2)

arg1 = the host number (in decimal)

arg2 = the number of dispatcher ports.

Description :

This  macro  specifies  the  host  number,(host#   in   decimal),
associated  with  this  host  interface and assigns the number of
dispatcher ports, (#port in decimal), to the current host number.

The number of dispatcher ports is based upon the total number  of
devices  configured  within  the  specified host number. When HIF
comes up in the network,  it  will  report  this  number  as  the
available ports for circuit building purpose.

Host interface supports more than one  host  number  by  defining
this macro for each host number desired for the line(s).

The number of hosts  may  not  be  greater  than  the  number  of
interface lines and at least one host number must exist.

Example :

   HSTPRT(500,6)

Host number 500 has 6 ports assigned to it.





Page 2                   PBHERS.DOC







PBH                                           April 13, 1990



1.2.2  LINTYP - Change Host Line Type


Syntax : LINTYP(ARG1)

ARG1 = IBM OR FUJITSU OR HITACHI

Default : Defined by the previous DEFLIN macro or  if  DEFLIN  is
not defined the default is IBM.

Description :

This macro defines the line type indicated in the argument field.
This macro must be used before configuration of the line starts.

This macro can be used to configure the line type to be  any  one
of  the  above vendors to allow for multi-protocol support in the
slot.

This macro does not,  however, change  the  default  line   type.
This can be done only by using the macro DEFLIN(line-type).

Example: LINTYP(FUJITSU)

The current line host type is FUJITSU.

1.2.3  LINE   - Line Address

Syntax : LINE(address)

Default : Automatically assigned by the  code.

Description :

This macro specifies the current line address and  indicates  the
start  of  a  line  configuration.  This  address  is arbitrarily
assigned, but must be unique.

There are three macros HOST, RTSCTS and NOPOLL used to define the
parameters for the current line.

Example :

   LINE(40)

The address of current line is 40.








Page 3                   PBHERS.DOC







PBH                                           April 13, 1990



1.2.4  HOST   - Associating Host Number

Syntax : HOST(host#)

Default : Defined by the previous DEFHST macro.

Description :

This macro specifies the host number,(host# in decimal), for  the
current line being defined by the LINE macro.

If DEFHST is not defined, then the default host  number  will  be
relative host number 0.

Example :

   HOST(900)

Current line is associated with host number 900.

1.2.5  RTSCTS - RTS/CTS Handshake Signals

Syntax : RTSCTS(YES/NO)

Default : Defined by the previous DEFRTS macro.

Description :

This macro specifies whether Request-To-Send (RTS) and  Clear-To-
Send (CTS) handshake signals are required.

The  requirement  of  RTS/CTS  signals  must  conform  with   the
Synchronous  lines  defined on the Engine. Primitive ports do not
support RTS/CTS signals and thus  cannot  be  configured  to  use
RTS/CTS  handshake  signals  in the slot. The lines which support
RTS/CTS are 2,3,6,7,10,11,14,and 15.

If DEFRTS is not defined, the default value is NO.

The values of argument are the following:


                     YES = RTS is required.
                     NO  = RTS is not required.


Example :

   RTSCTS(NO)

Current line does not require RTS.



Page 4                   PBHERS.DOC







PBH                                           April 13, 1990



1.2.6  NOPOLL - No Poll Duration

Syntax : NOPOLL(t)

Default : Defined by the previous DEFPOL macro or 90  seconds  if
DEFPOL is not defined.

Description :

This macro specifies the time,(t in decimal),  when  no  poll  is
detected,  then the host number associated with this line will be
declared down.

For multiple lines sharing one host number, this host number will
come  up  and answer even if one of the lines does not get polled
by the Front End Processor. However,  the  host  interface  still
keeps  track  of  the  number of available devices which does not
include those devices defined for the line(s) that are down.

Example :

   NOPOLL(60)

When none of the polling sequences, namely General  Poll,  Select
Poll,  or  Specific  Poll,  are  detected  after  60 seconds, the
devices on this line will be brought down and no circuits can  be
built to these devices.

1.3  MACRO DEFINITIONS FOR CONTROL UNIT

1.3.1  CUNIT - Control Unit Address

Syntax : CUNIT(addr)

Default : Automatically assigned by the code for IBM/FUJITSU.

Description :

This macro specifies the address of control unit, in  HEX,  which
is  attached  to  the line specified in the preceding LINE macro.
The addresses for  IBM  and  FUJITSU  are  the  specific  polling
addresses, ie. 40,0C0,0C1,etc. There is only one set of addresses
for  the  control  unit  in  Hitachi  format  which  starts  from
0C0,0C1,etc.

Example :

   CUNIT(40)

The address of current control unit is 40.




Page 5                   PBHERS.DOC







PBH                                           April 13, 1990



1.4  MACRO DEFINITIONS FOR DEVICE

This section describes the macros that are  used  to  define  the
various aspects of the device characteristics and environment.


1.4.1  DEVICE - Device Address

Syntax : DEVICE(addr)

Default : Automatically assigned by the code for IBM/FUJITSU.

Description :

This macro specifies the address of the device which is  attached
to  the  control unit specified in the preceding CUNIT macro. The
device addresses for IBM and FUJITSU are the same as the  general
polling  addresses for the control unit. The device addresses for
Hitachi are the  specific  polling  addresses  which  start  from
0A0,0A1,etc.

Example :

   DEVICE(0C1)

The address of current device is 0C1.

There are ten macros TYPE,  COLOR,  XPRNT,  GREET,  DISCON,  ZAP,
ASSOC,   NEEDLE,  INACT,  KKORKJ  and  LUD  used  to  define  the
parameters for current device.
























Page 6                   PBHERS.DOC







PBH                                           April 13, 1990



1.4.2  TYPE   - Device Type

Syntax : TYPE(ARG1)

where arg1 = c#### or p####.

Default : Defined by the previous DEFTYP macro.

Description :

This macro specifies the device type  and  screen  size  of  each
device with the following values for the arguments.


         C#### = CRT, where #### indicates screen size
                 in character per screen, it can be the value
                 480, 960, 1920, 2560, 3440, or 3564.
         P#### = Printer, where #### indicates screen size
                 in character per screen, it can be the value
                 480, 690, 1920, 2560, 3440, or 3564.


For the virtual host mode terminals or printers, the screen  size
of devices must be defined as 1920.

Example :

   TYPE(C1920)

The device is a terminal with 1920 characters per screen.

1.4.3  COLOR  - Color Feature

Syntax : COLOR(ARG1)

where arg1 = yes or no.

Default : Defined by the previous DEFCOL macro.

Description :

This macro specifies whether the device can handle color or  not.
The values of the argument are the following:


              YES = can handle color.
              NO  = can not handle color.


If the DEFCOL is not defined, the the default value is NO color.




Page 7                   PBHERS.DOC







PBH                                           April 13, 1990



Example :

   COLOR(YES)

Current device will be available for call request requiring color
feature.

1.4.4  XPRNT  - Transparent Data Handling

Syntax : XPRNT(ARG1)

where arg1 = YES OR NO

Default : NO if not defined by the previous DEFXPR macro.

Description :

This macro specifies whether the device can handle  transparency.
Transparency   is   required   for  the  extended  features,  eg.
programmed symbols, extended highlighting, and extended color.

The values of the argument are the following:


              YES = can handle transparency.
              NO  = can not handle transparency.


Example :

XPRNT(YES)

The device can be operated in the transparency mode.

1.4.5  KKORKJ - Change Character Set


Syntax : KKORKJ(arg1)

where arg1 = ENG OR KANA OR KANJI

Default :  Defined by previous DEFCHR macro or ENG if the  DEFCHR
macro is not defined.

Description :

This macro  changes  the  character  set  for  the  device  being
defined.  It does not change the default character set as defined
by the previous DEFCHR macro.

Example : KKORKJ(KANA)



Page 8                   PBHERS.DOC







PBH                                           April 13, 1990



This device supports the  KATA KANA character set.





















































Page 9                   PBHERS.DOC







PBH                                           April 13, 1990



1.4.6  GREET  - Greeting Message When Log On

Syntax : GREET(label1,label2) or GREET(NONE)

Default : NONE or Defined by the previous DEFGRT macro.

Description :

This macro specifies the greeting message that will  be  sent  to
the  host  when a user signs on to the terminal and a circuit has
been established between TERMINAL INTERFACE and HOST INTERFACE.

This feature is used to do automatic  login  or  logoff  so  that
users  can  establish  a  session  with  the host or disconnect a
previous session that was abnormally terminated.

There is an option for user to send a second greeting message  to
the  host  if  one  greeting  message  was  not enough to build a
session to the host.

After receiving the first greeting message, the host should  send
back  a  WCC(Write Control Character) with an unlock keyboard bit
set to the host interface.

Upon  detection  of  the  Write  Control  Character  with  unlock
keyboard  bit  set,  the  host  interface  will  send  the second
greeting message if defined and awaits for data transmissions.

If the WCC does not have an unlock bit set, the host will not  be
expecting any data, so host interface waits until one is found or
when the timer expires. Then the circuit will be zapped and logon
will be rejected.

The values of the arguments are the following:


              label1 = a label of a maximum of six characters
                       defined in macro MSGTXT for the
                       first greeting message, or NONE.
              label2 = a label of a maximum of six characters
                       defined in macro MSGTXT for the second
                       greeting message, optional.
              NONE   = there will be no greeting message sent to host.



Example :

   GREET(GRT1)

A message with the label GRT1 will be sent to  the  host  as  the



Page 10                  PBHERS.DOC







PBH                                           April 13, 1990



only greeting message.



1.4.7  DISCON - Disconnect Message On Logoff

Syntax : DISCON(ARG1)

where arg1 = NONE OR LABEL.

Default : Defined by the previous DEFDSC macro. If the DEFDSC  is
not defined, the default value is NONE.

Description :

This macro defines the only message that will be sent out by  the
HOST INTERFACE when the circuit is to be terminated.

The label is a string of text defined by the MSGTXT macro.

The option of MULT has been removed from this macro and  replaced
by the MDS macro.



             label = a label of a maximum of six characters
                     defined in macro MSGTXT for the
                     disconnect message.
             NONE  = there is no disconnect message required by
                     the host.


Example :


          DISCON(NONE)

               No disconnect message is necessary when zapping circuits.

          DISCON(DSCMG)

               A disconnect message with the label "DSCMG" will be
               sent to the host.


1.4.8  MDS - Define Multiple Disconnect Sequence


Syntax : MDS(ARG1)

where arg1 = none or label.



Page 11                  PBHERS.DOC







PBH                                           April 13, 1990



Default : Defined by the previous DEFMDS  macro.  If  the  DEFMDS
macro  is  not  defined the device does not have multi-disconnect
sequence.

Description :

This macro associates or  changes the  label  of  the   sequences
that  the   Multiple    Disconnect   logic  will   follow  during
the  circuit termination process.

This macro does not  change the default label defined  by DEFMDS,
for Multiple Disconnect logic.

label = a label of a maximum of six characters defined  in  macro
MLTDMS for multiple disconnect messages.

none = device does not have multiple disconnect sequence.

Example : MDS(MUL1)

This device will follow the disconnect sequence defined by  label
MUL1 used in the macro MLTDMS.

1.4.9  ZAP    - Zap Message From The Host

Syntax : ZAP(label) or ZAP(NONE)

Default : NONE or Defined by the previous DEFZAP macro.

Description :

This macro specifies whether there will be a zap message sent  to
the host interface in order to force the user off the network.

Once this message is detected by the host interface, user circuit
will  be  terminated  by  following the usual circuit termination
procedure, namely multiple disconnect exchange if defined.

The length of the text is not restricted to 4 characters only  as
in the earlier versions of the Host Interface.

 The values of the argument are the following:


              label = a label of a maximum of six characters defined
                      in MSGTXT macro for zap message.
              NONE  = zap message is not required.


Example :




Page 12                  PBHERS.DOC







PBH                                           April 13, 1990



   ZAP(ZAPMSG)

A zap message, defined by the label  ZAPMSG,  sent  to  the  host
interface will cause the user circuit to be terminated.

1.4.10  ASSOC  - Associated Device

Syntax : ASSOC(addr) or ASSOC(NONE)

Default : Defined by the previous DEFASO macro. If the DEFASO  is
not defined, the default value is NONE.

Description :

This macro specifies the device address of the printer associated
with  this  terminal operating. The associated printer is assumed
to be on the same control unit, so that the specificatf  the
printer device address is sufficient.

In virtual host mode, if an associated printer  is  requested  at
login,  the  printer  is  automatically  logged  on as a separate
device.  The request for an associated printer can be  predefined
by the macro VIRASO. The default is no associated printer. In the
native mode, the associated device connection request mode (CRM4)
in  the  3270 display system protocol (DSP) is used by the CMT to
request a connection for a printer which is to be associated with
an existing connection to another crt device. In the native mode,
the crt and its associated printer have their own network circuit
between the host interface slot and crt slot.

The native mode with the  associated  device  connection  request
mode  (CRM4)  causes the inactivity timer to be coupled together.
The  crt  and  its  associated  printer  with   two   independent
inactivity  timers  defaults  to the device timer with the higher
value. The inactivity timer defined  by  the  INACT  macro  on  a
device  basic  will  use the higher value as the master value for
the CRM4  coupled  devices.  The  coupled  devices  will  not  be
disconnected  as long as one device is active or the higher value
timer (master)has not not elapsed.

The request for associated printer  can  be  pre-defined  by  the
macro VIRASO, the default is no associated printer.

The  associated  printer  is  intended  for  Virtual  Host   Mode
terminals with which a printer is attached to the auxiliary port,
and signing on the printer can only be done by the HOST INTERFACE
during  logon  process.  CRT and printer will be sharing the same
network  circuit  even  though  they  appear  to  the  Front  End
Processor as two separately addressable devices.

The values of the argument are the following:



Page 13                  PBHERS.DOC







PBH                                           April 13, 1990




              addr = the address of associated printer device.
              NONE = no associated printer device is required.



Example :

   ASSOC(0C2)

A printer of address 0C2 is associated with this device.

1.4.11  NEEDLE - Needle Message

Syntax : NEEDLE(ARG1)

where YES = dynamic greeting message is required.

      NO  = dynamic greeting message is not required.

Default : Defined by the previous DEFNDL macro. If the DEFNDL  is
not defined, the default value is NO.

Description :

This  macro  specifies  whether  a   dynamic   greeting   message
containing  the  users information is to be sent to the host when
the device is logging in.

The values of argument are the following:
























Page 14                  PBHERS.DOC







PBH                                           April 13, 1990




     Following is the format of the NEEDLE message :

       S C D A A A P I D O O O I T U P C D E B B
       T U V I D D # N H N H P I I S J U V T C C
       X A A D 1 2   V # # # # X D N C A A X C C

     Interpretation is as follows:

     STX     : The beginning of the NEEDLE message.
     CUA     : Control Unit Address.
     DVA     : Device Address.
     AID     : The AID of ENTER key.
     AD1     : Cursor address byte 1.
     AD2     : Cursor address byte 2.
     P#      : ISIS dispatcher port number.
     INV     : Invoice number.
     DH#     : Destination Host Number.
     ON#     : Origination Node Number.
     OH#     : Origination Host Number.
     OP#     : Origination Port Number.
     IIX     : IIX capability indicator.
     TID     : Terminal ID.
     USN     : User Name.
     PJC     : Project Code.
     CUA     : Associated Control Unit Address.
     DVA     : Associated Device Address.
     ETX     : End of Text.
     BCC     : Checksum


Example :

   NEEDLE(NO)

No dynamic greeting message is sent to the host when  the  device
is logging in.

1.4.12  INACT  - Timeout Interval For Inactivity

Syntax : INACT(t)

t is in seconds if t = 0 inactivity is disabled for this device.

Default : Defined by the previous DEFIAT macro. If the DEFIAT  is
not defined, the default value is 3600 second(1 hour).

Description :

This macro specifies the interval of inactivity when  the  device
is  to  be  disconnected.  The inactivity is usually caused by no



Page 15                  PBHERS.DOC







PBH                                           April 13, 1990



data transfer between the host interface and terminal  interface.
The  timer  is  on  a  device  selection and independent of other
devices EXCEPT in the case of CMT USERS OPERATING WITH ASSOCIATED
PRINTER  AND CRM4 SELECTED in this case the inactivity timers are
coupled with the master timer being the higher value timer.   The
device inactivity timer can be disabled by making the arg t = 0.

Example :

   INACT(90)

With 90 seconds being inactive, the user is disconnected.

   INACT(0)

The inactivity is disabled for this device


1.4.13  LUD - Local User Directory

Syntax : LUD(label1,label2,....,label16) or LUD(NOLUD/ALNAM)

Default :  Defined by previous DEFLUD macro. If the DEFLUD is not
defined, the default value is NOLUD.

Description :

This macro specifies the LUD  entries  which  allow  or  restrict
logon  to the device by the first two characters of the username.
This username information is provided by the  Needle  created  by
Tymnet Supervisor.


           label1 = first label of name entry in the LUD defined
                    by macro LUDTRY.
           labeln = last label of name entry in the LUD which is
                    defined by macro LUDTRY.
           NOLUD  = indicate that all usernames except the name
                    defined in macro LUDTRY can access current device.
           ALNAM  = all usernames can access current device.


Example :

   LUD(LUD2)

Usernames that start with the characters defined  in  entry  LUD2
can access this device.






Page 16                  PBHERS.DOC







PBH                                           April 13, 1990



1.4.14  MSGTXT - Message Text

Syntax : MSGTXT(label,text) or MSGTXT(CONT,text)

Description :

This macro defines greeting, disconnect, or zap  messages  and  a
label to reference it by.


             where label = a label of a maximum of six character
                           used to reference this text in
                           macros GREET, DISCON,and ZAP.
                   CONT  = indicate the continuation of previous MSGTXT.
                   text  = desired text in EBCDIC for greeting,
                           disconnect or zap message.
                           Up to 15 characters can be defined.


Example :


      MSGTXT(GRT1,A.ENT.,SP.,J.,L.,O.,G.,O.,N.,SP.,A.,P.,P.,L.,I.,D.)
      MSGTXT(CONT,4D,I.,M.,S.,5D)


GRT1 refers to a greeting message of LOGON APPLID(IMS)  with  the
cursor address at the location of row 1, column 18.

1.4.15  LUDTRY - LUD Entry

Syntax : LUDTRY(label,first,second)

Description :

This macro specifies the first two characters of a   named  entry
in  LUD(in  ASCII  CHARACTERS OR ASCII HEX VALUES PREFIX WITH " )
which allows or restricts access to a device by username.


            label  = The name of the LUD entry that will be used
            first  = The first character for the LUD entry.
            second = The second character for the LUD entry.



Example :

   LUDTRY(LUD2,I,S) OR LUDTRY(LUD2,"49,"53)

Usernames start with IS can access devices that  are  limited  by



Page 17                  PBHERS.DOC







PBH                                           April 13, 1990



LUD2.


1.4.16  TSTREQ - Send Test Request Message at Zap


Syntax: TSTREQ(YES/NO)

Where

YES = enables pbh to send the test request message when a circuit
for the device is being zapped.

NO = disables the feature for the current device.

Description :

This  macro defines the "test request" message  feature  for  the
current device being configured by the macro device . The pbh can
be configured to send the test request message to the  host  when
the  network circuit is being zapped. The test request message is
a special sequence defined as follows:

SOH % / STX DEV# DEV# ETX BCC BCC

The dev# is the device number for  the  circuit  that  is  to  be
terminated by the PBH. This macro affects the current device.

Example :

TSTREQ(NO)

The test request message is not sent for  this  device  when  the
circuit is zapped.




















Page 18                  PBHERS.DOC







PBH                                           April 13, 1990



1.4.17  MLTDMS - Define Sequence of Multiple Disconnect
        Exchange


Syntax : MLTDMS(LABEL,sndlab1,rcvlab1,.....,sndlab8,rcvlab8) OR
         MLTDMS(CONT,sndlab1,rcvlab1,.....,sndlab8,rcvlab8)

Description :

This macro defines a label to indicate the  desired  sequence  of
exchange  that must be followed by the host interface in order to
disconnect the circuit from the FEP.

The label in the first parameter field is  the  new  label   that
will  be  referred  to by the MDS  macro or DEFMDS. As many as 15
other labels can be  defined  within   the  MLTDMS   macro.  Each
label must  be defined previously by the MSGTXT macro.

The sequence can be continued  by  using  the  MLTDMS  with   the
label CONT in the first parameter field.

The purpose of the  special  exchange  is  to  perform  automatic
logoff  from  the host application, and by following a predefined
sequence of events, session  security  can  be  enhanced  by  not
allowing  illegal users to get in to the same session that's been
left intact if host application is  not  aware  of  the  previous
disconnection.

The special exchange consists of a disconnect  message  from  the
host  interface  to the host, followed by a specific message from
the host to the host interface.

The message text defined that will be delivered to  the  host  is
allowing  the  3270  PBH  to  act  as if an operator is sending a
certain logoff sequence or a special message  that  will  trigger
the  host to initiate a logoff procedure to terminate the session
gracefully with the terminal.

Host interface, when receiving a message from  the  host  in  the
disconnecting  process,  takes the message starting from the byte
after the STX, ESC and the COMMAND bytes, which is the  WCC  byte
and checks the message against the predefined text byte by byte.

If the host response is different from the expected  message,  as
defined  in the TYMFILE, or if the message is not received within
a  predefined  time  frame,  then  the  circuit  is   immediately
disconnected without continuing the rest of the special exchange.

If  the  host  response  is  correct,  then  another   predefined
subsequent disconnect message is sent to the host and the circuit
is torn down by the host  interface  if  no  more  sequences  are



Page 19                  PBHERS.DOC







PBH                                           April 13, 1990



desired,  otherwise the exchange continues until all messages are
being sent out and received correctly then circuit is terminated.

The message text can be defined by putting  in  EBCDIC  character
code  or  by  putting  in the graphic representation(ended with a
period) of the EBCDIC character desired.


The values of the argument are the following:


            sndlabn = a label of a maximum of six characters
                      defined in macro MSGTXT for disconnect
                      message which is sent to host whenever
                      a circuit is to be zapped.

            rcvlabn = a label of a maximum of six characters
                      defined in macro MSGTXT for the expected
                      COMMAND message that is sent by the host
                      in response to the disconnect message
                      sent by the host interface.


The disconnect message to be sent to the FEP, as defined in macro
MSGTXT, must be represented in EBCDIC data string with the format
of

     AID + cursor address + text.

The expected response message received from the  FEP  defined  in
macro MSGTXT will follow the  rule in the following format:

     WCC + orders and text.

Example :


     MSGTXT(SND1,AIDENT,40,40,L.,O.,G.,O.,F.,F.)
     MSGTXT(RCV1,WCCN)
     MSGTXT(SND2,AIDCLR)
     MSGTXT(RCV2,WCCN,SBA.,40,40)
     MSGTXT(SND3,AIDPA1)
     MSGTXT(RCV3,WCCK,B.,Y.,E.,B.,Y.)
     MLTDMS(MUL1,SND1,RCV1,SND2,RCV2,SND3,RCV3)
     MLTDMS(MUL2,SND1,RCV1,SND2,RCV3)









Page 20                  PBHERS.DOC







PBH                                           April 13, 1990



If the  device  is  declared  for  multiple  disconnect  feature,
messages  with  the  label  MUL1.  SND1  will be sent to the host
during a disconnect procedure, and a message with the label  RCV1
is  the  expected  message  from  the  host  in  response  to the
disconnect message SND1. This disconnect sequence  will  continue
until the sequence is complete.


             HIF             FEP

             SND1 -------->

             <-------------  RCV1

             SND2 ---------->

             <-------------  RCV2

             ..............

             <------------   RCV3

































Page 21                  PBHERS.DOC







PBH                                           April 13, 1990



Following are tables defining the symbols that can be used within
the  message text definitions in a more readable form. The EBCDIC
form of these keys are still acceptable.


                  TABLE 1. Symbol Table for AID
             ----------------------------------------
             This table shows the symbols for the AID
             which may be included in the send part of
             the disconnect message.

               AID           Symbol      EBCDIC
             ---------       ------      ------
             ENTER           A.ENT         7D
             PF 1 Key        A.PF1         F1
             PF 2 Key        A.PF2         F2
             PF 3 Key        A.PF3         F3
             PF 4 Key        A.PF4         F4
             PF 5 Key        A.PF5         F5
             PF 6 Key        A.PF6         F6
             PF 7 Key        A.PF7         F7
             PF 8 Key        A.PF8         F8
             PF 9 Key        A.PF9         F9
             PF 10 Key       A.PF10        7A
             PF 11 Key       A.PF11        7B
             PF 12 Key       A.PF12        7C
             PF 13 Key       A.PF13        C1
             PF 14 Key       A.PF14        C2
             PF 15 Key       A.PF15        C3
             PF 16 Key       A.PF16        C4
             PF 17 Key       A.PF17        C5
             PF 18 Key       A.PF18        C6
             PF 19 Key       A.PF19        C7
             PF 20 Key       A.PF20        C8
             PF 21 Key       A.PF21        C9
             PF 22 Key       A.PF22        4A
             PF 23 Key       A.PF23        4B
             PF 24 Key       A.PF24        4C
             PA 1 Key        A.PA1         6C
             PA 2 Key        A.PA2         6E
             PA 3 Key        A.PA3         68
             CLEAR Key       A.CLR         6D
             --------------------------------------











Page 22                  PBHERS.DOC







PBH                                           April 13, 1990



                 TABLE 2. Symbol Table for Orders
          --------------------------------------------

          This table shows the symbols for the orders
          which may be included in the receive part of
          the disconnect message sequence.

             Order                           Symbol       EBCDIC
             -----                           ------      -------
          Start Field (SF)                   OR.SF          1D
          Start Field Extended (SFE)         OR.SFE         29
          Set Buffer Address (SBA)           OR.SBA         11
          Set Attribute (SA)                 OR.SA          28
          Modify Field (MF)                  OR.MF          2C
          Insert Cursor (IC)                 OR.IC          13
          Program Tab (PT)                   OR.PT          05
          Repeat to Address (RA)             OR.RA          3C
          Erase Unprotected to Address (EUA) OR.EUA         12
          Graphic Escape(GE)                 OR.GE          08
          -------------------------------------------------------


                   TABLE 3. Symbol Table for WCC
          ------------------------------------------------
          This table shows the symbols for the WCC which
          may be included in the receive part of the
          disconnect message sequence.

                        WCC                          Symbol    EBCDIC
          -------------------------------------      ------    ------
          Alarm+Restore Keyboard+Reset MDT Bits      WCCAKM      C7
          Restore Keyboard+Reset MDT Bits            WCCKM       C3
          Restore Keyboard                           WCCK        C2
          Alarm                                      WCCA        C4
          Alarm+Restore Keyboard                     WCCAK       C6
          No Action                                  WCCN        40
          NL Format+Start Print                      WCCPNS      C8
          40 Characters line+Start Print             WCCP4S      D8
          64 Characters Line+Start Print             WCCP6S      E8
          80 Characters Line+Start Print             WCCP8S      F8
          NL Format                                  WCCPN       40
          40 characters Line                         WCCP4       50
          64 Characters Line                         WCCP6       60
          80 Characters Line                         WCCP8       F0
          ----------------------------------------------------------


SYMBOLS NOT IN THESE TABLES ARE NOT VALID.






Page 23                  PBHERS.DOC







PBH                                           April 13, 1990



1.5  CHANGING DEFAULT LINE HOST TYPE FOR THE SLOT

The macro DEFLIN is used to change the host type  for  the  slot.
This macro must be used before the LINE macro.


1.5.1  DEFLIN - Define Default Host Line Type


Syntax : DEFLIN(line-type)

Where line-type is IBM OR FUJITSU OR HITACHI.

Default :  Defined by previous DEFLIN macro. If the macro  DEFLIN
is not defined the default is IBM.

Description :

This macro defines the default protocol type for  the  lines   in
the  slot.  The line-type can be  IBM or FUJITSU or HITACHI. This
macro must be used before the line configuration starts.

It is used  whenever a definition of  the line type  is   desired
or  when  the  line type  has been  changed by  the macro  LINTYP
and  a re- definition is intended to clarify the line type of the
subsequent lines that are to be configured.


Example: DEFLIN(HITACHI)  The default line host type is HITACHI.

1.6  CHANGING DEFAULT VALUES FOR LINE

There are three macros DEFHST, DEFRTS and DEFPOL used  to  change
the  default  for  line  parameters.  These macros can be invoked
anywhere in the TYMFILE.  The defaults are changed at  the  point
of invocation, and may be redefined at a later point.

1.6.1  DEFHST - Default Host Number

Syntax : DEFHST(n)

Default : If DEFHST is not defined the default value is"0".

Description :

This  macro  defines  the  default  host  number  for  the  macro
HOST(n).

Example :

   DEFHST(900)



Page 24                  PBHERS.DOC







PBH                                           April 13, 1990



The default host number for each line is 900 from this point on.

1.6.2  DEFRTS  - Default RTS/CTS Handshake Signal


Syntax : DEFRTS(YES/NO)

Default : If the macro DEFRTS is not defined the default is NO.

Description :

This macro defines the default for macro RTSCTS(arg).

The values of the argument are the following :


                  YES = RTS is required.
                  NO  = RTS is not required.



Example :

   DEFRTS(NO)

The default Request-to-Send/Clear-to-send  handshake  signal  for
each line is not required from this point on.

1.6.3  DEFPOL - Polling Timeout From Host

Syntax : DEFPOL(t)

Default : If the macro DEFPOL is not defined the default value is
90 seconds.

Description :

This macro defines the default for macro NOPOLL(t).

The value of t is the time when no poll  is  detected,  then  the
host to this line is declared down.

Example :

   DEFPOL(60)

The default timeout interval for no poll detected for  each  line
is 60 seconds from this point on.






Page 25                  PBHERS.DOC







PBH                                           April 13, 1990



1.7  CHANGING DEFAULT VALUES FOR DEVICE PARAMETER

There are ELEVEN macros DEFTYP, DEFCOL, DEFXPR,  DEFGRT,  DEFDSC,
DEFZAP, DEFASO, DEFNDL, DEFIAT, DEFLUD, and DEFCHR used to change
the default for device parameters.  These macros can  be  invoked
anywhere  in  the TYMFILE.  The defaults are changed at the point
of invocation, and may be redefined at later point.

1.7.1  DEFTYP  - Default Device Type

Syntax : DEFTYP(C####/P####)

Default : C1920, CRT with 1920 bytes per screen.

Description :

This macro defines the default for macro TYPE(arg).

The values of the argument are the following:


            C#### = terminal, where #### indicates screen size
                    in character per screen, it can be the value
                    480, 960, 1920, 2560, 3440, or 3564.

            P#### = printer, where #### indicates screen size
                    in character per screen, it can be the value
                    480, 690, 1920, 2560, 3440, or 3564.


For the virtual host mode, the screen size  of  devices  must  be
defined as 1920.

Example :

   DEFTYP(C1920)

The default device type is a terminal with the screen of 1920.

1.7.2  DEFCOL  - Default Color Capability

Syntax : DEFCOL(YES/NO)

Default : NO.

Description :

This macro defines the default for macro COLOR(arg).

The values of argument are the following:




Page 26                  PBHERS.DOC







PBH                                           April 13, 1990




            YES = can handle color.
            NO  = can not handle color.


Example :

   DEFCOL(NO)

The default color capability of the device is that the device can
not handle color.

1.7.3  DEFXPR  - Default Transparency Capability

Syntax : DEFXPR(YES/NO)

Default : NO.

Description :

This macro defines the default for macro XPRNT(arg).

The values of argument are the  following :


            YES = can handle transparency.
            NO  = can not handle transparency.


Example :

   DEFXPR(YES)

The default transparency capability of the  device  is  that  the
device can operate in the transparency mode.

1.7.4  DEFGRT  - Default Greeting Message

Syntax : DEFGRT(label1,label2) or DEFGRT(NONE)

Default : NONE.

Description :

This macro defines the default label for macro GREET(arg).

The values of the argument are the following :







Page 27                  PBHERS.DOC







PBH                                           April 13, 1990




            label1 = a label defined in macro MSGTXT for
                     the first greeting message.
            label2 = a label defined in macro MSGTXT for
                     the second greeting message, it is optional.
            NONE   = there is no greeting message sent to host.


Example :

   DEFGRT(GRTMSG)

The default greeting  message  is  the  message  with  the  label
GRTMSG.

1.7.5  DEFMDS - Default Multiple Disconnect Sequence


Syntax : DEFMDS(NONE/label)

Default : The default value is NONE or defined  by  the  previous
DEFMDS macro.

Description :

This  macro  defines the  default  label for macro MDS(arg).

label = a label defined in macro MLTDMS for multiple disconnect.

none = device does not have multiple disconnect sequence.

Example : DEFMDS(MUL1) The  disconnect  sequence  has  the  label
MUL1.

1.7.6  DEFZAP  - Default Zap Message

Syntax : DEFZAP(label) or DEFZAP(NONE)

Default : NONE.

Description :

This macro defines the default for macro ZAP(arg).

The values of the argument are the following:









Page 28                  PBHERS.DOC







PBH                                           April 13, 1990




           label = label defined in MSGTXT macro for zap message.
           NONE  = zap message is not required.



Example :

   DEFZAP(ZAPMSG)

The default zap message is the message with the label ZAPMSG.

1.7.7  DEFASO  - Default Associated Device

Syntax : DEFASO(address) or DEFASO(NONE)

Default : NONE.

Description :

This macro defines the default for macro ASSOC(arg).

The values of the argument are the following:


           address = the address of associated printer device.
           NONE    = no associated printer device is required.


Example :

   DEFASO(0C3)

The default associated device is a printer of address 0C3.

1.7.8  DEFNDL  - Default Dynamic Greeting Needle Message

Syntax : DEFNDL(YES/NO)

Default : NO.

Description :

This macro defines the default for macro NEEDLE(arg).

The values of argument are the following:








Page 29                  PBHERS.DOC







PBH                                           April 13, 1990




            YES = dynamic greeting message is required.
            NO  = dynamic greeting message is not required.


Example :

   DEFNDL(NO)

As default, no dynamic greeting message is required.

1.7.9  DEFIAT  - Default Inactive Timer

Syntax : DEFIAT(t)

t is in seconds if t = 0 the inactivity timer is disabled for the
slot.  Unless the macro INACT is defined for a device.

Default : 3600 Seconds (1 hour).

Description :

This macro defines the default for macro INACT(t).

The value of the time interval  of  inactivity  (no  transfer  of
data)  before the user is disconnected. If no inactivity timer is
required t can be set to 0. This disables the timer for the  slot
unless  the  macro  INACT  is  defined  for  the devices. If CMTI
release 4.02 and up is used with its associated inactivity  timer
a timer on the host interface side is not necessary


Example :

   DEFIAT(90)

The default inactivity interval is 90 seconds.

1.7.10  DEFLUD  - Default Local User Directory

Syntax:  DEFLUD(label1,label2,...,label16)  OR  DEFLUD(NOLUD)  OR
DEFLUD(ALNAM)

Default : The first LUD entry  (all  usernames  can  access  this
device).

Description :

This macro defines the default for the macro LUDTRY.

LABEL = label of name entry defined by macro LUDTRY.



Page 30                  PBHERS.DOC







PBH                                           April 13, 1990



NOLUD = indicated that all usernames except the the name  defined
in macro LUDTRY can access current device.

ALNAM = all usernames can access current device.


Example :

DEFLUD(LUD0)

The default LUD entry is defined by the label LUD0.

1.7.11  DEFCHR - Define Default Character Set


Syntax : DEFCHR(ENG/KANA/KANJI)

Default : The default value is DEFCHR(ENG). if the  macro  DEFCHR
is not defined the default is ENG.

Description :

This macro defines the default for macro KKORKJ(arg).

ENG =  means the session has no  special characters.

KANA =  means the session uses the additional  special  character
set of KATAKANA.

KANJI = means the inclusion  of the KATAKANA CHARACTERS plus  the
KANJI characters.

This default character  set can be defined  on  a  device   basis
and can also be changed by the macro KKORKJ.

Example : DEFCHR(KANA)

The special characters  for  KATA  KANA  will  be  added  to  the
standard set.

1.7.12  DEFTRQ - Default for Send Test Request Msg at Zap



Syntax: DEFTRQ(YES/NO)

Where

YES = enables pbh to send the test request message  when  circuit
for the device is being zapped for the slot.




Page 31                  PBHERS.DOC







PBH                                           April 13, 1990



NO = disables the feature for the slot.

Default : If the  Marco DEFTRQ is not  defined  this  feature  is
disabled as if DEFTRQ(NO) is being defined.

Description :

This  macro defines the "test request" message  feature  for  the
slot.   All devices on the pbh can be configured to send the test
request message to the host when the  network  circuit  is  being
zapped. The test request message is a special sequence defined as
follows:

     SOH % / STX DEV# DEV# ETX BCC BCC

The dev# is the device number for  the  circuit  that  is  to  be
terminated  by the PBH. This macro affects the all the devices on
the slot. Hitachi devices are supported.

Example :

DEFTRQ(NO)

The test request message is not sent for  the  devices  when  the
circuit is zapped.


1.7.13  DEFDSC - Default Disconnect Message


Syntax : DEFDSC(NONE/label)

Default : The default value is NONE or defined  by  the  previous
DEFDSC macro.

Description :

This  macro  defines the  default  message for macro DISCON(arg).

label = a label of a maximum of six characters defined  in  macro
        MSGTXT for the disconnect message.

NONE = there is no disconnedt message required by the host.

Example : DEFDSC(MSG1) A disconect message with the label  "MSG1"
will be sent to the host.








Page 32                  PBHERS.DOC







PBH                                           April 13, 1990



1.8  MACRO TO CHANGE SLOT PARAMETERS

1.8.1  OWLi    - OWL PF-i Key

Syntax : OWLi(n)

Default : As shown in the following table:


                      OWL1250/TYM470 PF Keys Defaults
                      _______________________________

       OWL 1250 or                                           IBM 3270 Key
     TYMSHARE 470 Key        Symbol          Default          Equivalent
     ________________        ______          _______         ____________

         PF-1                OWLPF1            0F1               PF-1
         PF-2                OWLPF2            0F2               PF-2
         PF-3                OWLPF3            0F3               PF-3
         PF-4                OWLPF4            0F4               PF-4
         PF-5                OWLPF5            0F5               PF-5
         PF-6                OWLPF6            0F6               PF-6
         PF-7                OWLPF7            0F7               PF-7
         PF-8                OWLPF8            0F8               PF-8
         PF-9                OWLPF9            06C               PA-1
         PF-10               OWLP10            06E               PA-2
         PF-11               OWLP11            06B               PA-3
         PF-12               OWLP12            06D               CLEAR
         PF-13               OWLP13            0C5               PF-17
         PF-14               OWLP14            0C6               PF-18
         PF-15               OWLP15            0C7               PF-19
         PF-16               OWLP16            0C8               PF-20
         PF-17               OWLP17            0F9               PF-9
         PF-18               OWLP18            07A               PF-10
         PF-19               OWLP19            07B               PF-11
         PF-20               OWLP20            07C               PF-12
         PF-21               OWLP21            0C1               PF-13
         PF-22               OWLP22            0C2               PF-14
         PF-23               OWLP23            0C3               PF-15
         PF-24               OWLP24            0C4               PF-16
         PF-25               OWLP25            07D               ENTER
         PF-26               OWLP26            07D               ENTER
         PF-27               OWLP27            07D               ENTER
         PF-28               OWLP28            000                 *
         PF-29               OWLP29            0C9               PF-21
         PF-30               OWLP30            04A               PF-22
         PF-31               OWLP31            04B               PF-23
         PF-32               OWLP32            04C               PF-24


Description :



Page 33                  PBHERS.DOC







PBH                                           April 13, 1990



This macro specifies the value  for  PERKIN-ELMER  OWL  1250  and
TYMSHARE 470 PF keys.

Example :

   OWL21(ENTER) OR OWL3(PF15)

The PERKIN-ELMER OWL PF-21 key functions as the 3270  ENTER  key.
The PERKIN-ELMER OWL PF-3 key functions as the 3270 PF-15 key.

1.8.2  AIDIBM  - IBM AID Key

Syntax : AIDIBM(PFn/PAn/PFCLR/ENTER)

Default : ENTER key

Description :

This macro specifies the AID that is sent to  the  host  whenever
the 3101 send key is pressed in the virtual host mode.

Example :

   AIDIBM(PF5)

The IBM 3101 Send key functions as the 3270 PF-5 key.




























Page 34                  PBHERS.DOC







PBH                                           April 13, 1990



1.8.3  IBMi    - IBM PF-i Key

Syntax : IBMi(n), i = 1, 24

Default : Shown below.


                     IBM 3101 PF Key Defaults
                     ________________________

       IBM                  ESCAPE                IBM 3270 Key
       3101 Key   Symbol    SEQUENCE    Default   Equivalent
       --------   ------    --------    -------   ------------

        PF-1      IBMP1     ESC a ETX     0F1        PF-1
        PF-2      IBMP2     ESC b ETX     0F2        PF-2
        PF-3      IBMP3     ESC c ETX     0F3        PF-3
        PF-4      IBMP4     ESC d ETX     0F4        PF-4
        PF-5      IBMP5     ESC e ETX     000        NETWORK DISCONNECT
        PF-6      IBMP6     ESC f ETX     06C        PA-1
        PF-7      IBMP7     ESC g ETX     06E        PA-2
        PF-8      IBMP8     ESC h ETX     06D        CLEAR
        PF-9      IBMP9     ESC i ETX     06B        PA-3
        PF-10     IBMP10    ESC j ETX     07A        PF-10
        PF-11     IBMP11    ESC k ETX     07B        PF-11
        PF-12     IBMP12    ESC l ETX     07C        PF-12
        PF-13     IBMP13    ESC m ETX     0C1        PF-13
        PF-14     IBMP14    ESC n ETX     0C2        PF-14
        PF-15     IBMP15    ESC o ETX     0C3        PF-15
        PF-16     IBMP16    ESC p ETX     0C4        PF-16
        PF-17     IBMP17    ESC q ETX     0C5        PF-17
        PF-18     IBMP18    ESC r ETX     0C6        PF-18
        PF-19     IBMP19    ESC s ETX     0C7        PF-19
        PF-20     IBMP20    ESC t ETX     0C8        PF-20
        PF-21     IBMP21    ESC u ETX     0C9        PF-21
        PF-22     IBMP22    ESC v ETX     04A        PF-22
        PF-23     IBMP23    ESC w ETX     04B        PF-23
        PF-24     IBMP24    ESC x ETX     04C        PF-24

       NOTE :

             The Escape sequences begin with the ESC character,
             followed by the lower case alphabets then ETX character.



Description:

This macro specifies the value for IBM 3101 PF keys.

Example :



Page 35                  PBHERS.DOC







PBH                                           April 13, 1990



   IBM2(PF6)

The IBM 3101 PF-2 key functions as the IBM 3270 PF-6 key.

1.8.4  VIRASO - Associated Device Request

Syntax :  VIRASO(YES/NO)

Default: NO.

Description :

This macro specifies whether all virtual host logins  request  an
associated device automatically.

The values for the argument are the following:


             YES =   the virtual host device will have an
                     associated device (printer) assigned to it.
             NO  =   the virtual host device will not have an associated
                     device (printer) assign to it unless an upper case S
                     is specified in project code at login.


Example :

   VIRASO(YES)

The virtual host device will have an associated  device  assigned
to it automatically when it places a call to the HOST INTERFACE.

1.8.5  VIRTYP - Virtual Host Mode Device Type

Syntax : VIRTYP(PER12/TYM47/IBM31)

Default : TYM47

Description :

This macro specifies the default for the terminal type  operating
in  virtual  host.  Users logging in with the default type do not
have to specify device type in the project code.  If  logging  in
with  any  other  types,  then  user must specify the device type
during login.

Device types can be one of the following:







Page 36                  PBHERS.DOC







PBH                                           April 13, 1990




             PER12  = Perkin-Elmer OWL1200, 1250, or 1251 terminal.
             TYM47 = Tymshare 470 terminal.
             IBM31 = IBM 3101 terminal.


Example :

   VIRTYP(IBM31)

The default device type for the virtual host mode is an IBM  3101
terminal.

1.8.6  ECHO - Echo Project code

Syntax : ECHO(YES/ NO)

Default : YES.

Description :

This macro specifies whether the host  interface  will  echo  the
project code in virtual host mode.

The values of the argument and the project codes are as follows:


             YES = Host interface will echo the project code.
             NO  = Host interface will not echo the project code.

             1 = Perkin-Elmer OWL1200, 1250, or 1251 terminal.
             2 = Tymshare 470 terminal.
             3 = IBM 3101 terminal.


Example :

   ECHO(NO)

Host interface will not echo the project code.

1.8.7  MXMAPU - Maximum Number of Simultaneous Users

Syntax : MXMAPU(n)

Default : The default value is 1.

Description :

This macro specifies the maximum number of simultaneous users, (n
in  hexadecimal),  of  any  combination of the following devices:



Page 37                  PBHERS.DOC







PBH                                           April 13, 1990



Perkin-Elmer Owl 1200 or 1250, IBM 3101 or ASCII-type printer.

Example :

   MXMAPU(6)

No more than 6 user of Perkin-Elmer Owl 1200 or 1250, IBM 3101 or
ASCII-type printer that can be logged in simultaneously.

1.8.8  SCNBUF - Screen Buffer

Syntax : SCNBUF(n)

Default : 0

Description :

This  macro  specifies  the  maximum  number   of   devices   (in
hexadecimal)  requiring  screen  buffers  that  may  be logged in
simultaneously. This macro is only useful for IBM 3101,  Tymshare
470 and Perkin-Elmer OWL1200, 1250, and 1251 terminals.

In virtual  host  mode,  screen  buffers  are  required  for  all
printers whether or not they are associated printers.

Example :

   SCNBUF(3)

No more than three devices requiring screen buffers may be logged
in simultaneously.

1.8.9  BUFUSE - Buffer Space Usage

Syntax : BUFUSE(NORM/LOW/MIN)

Default : NORM

Description:

This macro specifies the limits on memory  space  allocated   for
bufferlets use.

        NORM allows up to 64K bytes,
        LOW allows up to 48K bytes, and
        MIN allows up to 32K bytes.








Page 38                  PBHERS.DOC







PBH                                           April 13, 1990



1.8.10  SAVQUE - Save Queue Option

Syntax : SAVQUE(YES/NO)

Default :  YES.

Description :

Save Queue is an option that shortens response time for  selected
host  systems.  If this option is enabled, host interface, before
transmitting data to the host, will save a copy of  the  data  in
SAVE queue.

Upon receiving General Poll from the Front  End  Processor,  host
interface  will send pending responses to the Front End. For some
Access Methods, when General Poll does not imply  Read  Modified,
it  will  issue  a  specific  Read  Modified  command to pull the
response again.

Since the SAVE queue is enabled, the  responses  can  be  quickly
re-transmitted without going all the way back to the terminal for
previous messages. The net result  is  an  increase  of  response
time.

The values of the argument can be :


             YES = enables the Save Queue.
             NO  = disables the Save Queue.


Example :

   SAVQUE(YES)

The Save Queue feature is enabled.

1.8.11  MNPORT - Minimum Port Number

Syntax : MNPORT(n)

Default : 0

Description :

This macro  specifies  the  minimum  number  of  unused  ports(in
hexadecimal)  which  is  required for a particular host. When the
number of unused ports of  a  host  number  is  lower  than  this
predefined  minimum  port  number,  any incoming call targeted to
this host # will be re-directed to  the  second  choice  of  host
number by the Supervisor.



Page 39                  PBHERS.DOC







PBH                                           April 13, 1990



Example :

   MNPORT(2)

Host interface will send "Soft Shut"  message to supervisor  when
there are only 2 ports left.

1.8.12  TOLIAC - Tolerance for Inactivity Timer

Syntax : TOLIAC(t)

Default : 5 Seconds.

Description :

This macro specifies the time  interval,  (in  hexadecimal),  for
checking  the  inactivity  timer  INACT macro. This value must be
less then the value selected for the INACT macro by a multiple of
at least 4.

Example :

   TOLIAC(5)

Host interface will check the polling timer once every 5 seconds.

1.8.13  TOLNPL - Tolerance for No Polling

Syntax : TOLNPL(t)

Default : 5 Seconds.

Description :

This macro specifies  the  time  interval,(in  hexadecimal),  for
checking the NO POLL timer.

Example :

   TOLNPL(5)

The host interface will check the NO Poll timer every 5 seconds.


1.8.14  INVSTA - Zap Sense and Status Message


Syntax: INVSTA(arg1,arg2,arg3,arg4)

Where arg1 = YES or NO




Page 40                  PBHERS.DOC







PBH                                           April 13, 1990



YES = the SENSE AND STATUS messages will be sent to the host at
      circuit zap.

NO =  the SENSE AND STATUS message will not be sent to the
      host at circuit zap.

arg2 = defines the sense and status code in hex to be sent to the
IBM
       host.

arg3 = defines the sense and status code in hex to be sent to the
       FUJITSU host.

arg4 = defines the sense and status code in hex to be sent to the
       HITACHI host.

Default:

If this macro is not defined, the default is no s/s message  will
be  sent to the host at circuit zap. If the first argument is YES
the default sense and status of intervention required is sent for
each  host  is:  IBM host is  4050 FUJITSU host is 4050   HITACHI
host is C2C0.

Description:

This macro specifies whether a Sense and Status message  is  sent
to  the  host when the circuit is being zapped. If yes, there are
options for the user to  define a Sense and Status  message   for
the  three  different  host  types  supported  IBM,  FUJITSU, and
HITACHI. For  this  feature  to  disconnect  the  user  from  the
application  it  will  be  necessary to work with the host system
programmer. Each application in the host may response differently
to  the same sense and status information.

Example: INVSTA(YES,40C2,,0C0C6)

A Sense and Status message "40C2" will be sent to the  IBM  host,
"4050"  to  the FUJITSU host, and "C0C6" to the HITACHI host when
the circuit is being zapped.


1.9  MACROS TO DEFINE HOST INTERFACE DEBUGGING PARAMETERS

1.9.1  NETCON - Network Console

Syntax: NETCON(arg)

        where arg = YES or NO.

Default: If this macro is missed, the default is NO.



Page 41                  PBHERS.DOC







PBH                                           April 13, 1990



Description:

This macro specifies whether the Network Console can  access  the
Bisync  Operations  Monitor(BOM)  and  issue commands to the BOM.
The values of the argument are the following:

YES = the Network Console can access BOM.

NO  = the Network Console can not access BOM.

Example: NETCON(YES)

The Network Console can access BOM and issue commands to the BOM.

ACCESSING BOM THROUGH NETWORK CONSOLE

A new feature to allow the Network Console  to  communicate  with
the  Extended  DDT was implemented in the 3270 Host Interface and
the 3270 Terminal Interface.  With this feature a user can access
the Bisync Operation Monitors (BOM) through the Network Console.

To access the BOM through the Network Console  a  user  must  log
into  the  Network  Console  first.  Once the user is in the main
command level of the Network Console which  is  indicated  by  an
asterisk  prompt  "*",  the  DDT  session can be initiated by the
command "XDDT" (for Extended DDT) followed  by  the  kernel  host
number  and  the  slot number which the interface resides in.  If
the connection is successful, the Network Console  responds  with
the  prompt  "xddt>".   If  the  connection is not successful, an
error  message  "Extended  DDT  unavailable"  is  displayed.   To
terminate  a  DDT  session,  the  user can use one of 3 commands:
"RETURN", "QUIT", "EXIT".  This returns  the  user  to  the  main
command  level  with  an asterisk prompt.  An example is given as
follows:




















Page 42                  PBHERS.DOC







PBH                                           April 13, 1990



     Please log in: <user name>:<network console host>;<password>

     >

     Network Console - Version 3.02

     name: <name>

     password: <password>

     4/29/86 18:16:20

     * xddt host 555 slot 1

     xddt>status

     HBOM -- 3270PBH Bisync Operations Monitor

     NODE  2062    SLOT  3    29Apr86 18:18:09

     HOST#  STATUS  #PORTS  CIRCUITS

       25    ANSR      3       0

       26    ANSR      3       0

     RESTARTS     LAST START      CIRCUITS

         1      24Apr86 19:34:25      0

          BUFFER             CMDLNK              MAPLNK

     LEFT  USED  ZAPS   LEFT  USED   ZAPS   LEFT  USED  ZAPS

      316     3     0    314    17      0    102     0     0

     xddt>return

     *quit



1.9.2  RETCODE - Trace of BSC Receiver Return Codes

Syntax : RETCODE(YES/NO)

Default : YES.

Description :

This macro specifies whether the interface keeps a record of  the



Page 43                  PBHERS.DOC







PBH                                           April 13, 1990



number of occurrences of each return code.


          The values of argument are the following:

            YES = the interface keeps a count of the occurrence of each return code
            NO  = the interface does not keep a count of the occurrence of each
                  return code.


Example :

   RETCODE(YES)

The interface keeps a count of the occurence of each return code.

1.9.3  PRTCON  - Print Tymfile Configuration

Syntax: PRTCON(YES/NO)

Default : YES.

Description :

This macro specifies whether the tymfile  configuration  will  be
displayed when the system is generated.

The values of the argument are the following:


            YES = the tymfile configuration will be displayed.
            NO  = the tymfile configuration will not be displayed.


Example :

   PRTCON(NO)

The configuration defined in the tymfile will  not  be  displayed
when the system is generated.

1.9.4  RTRACE  - BSC Line Receiver Trace

Syntax : RTRACE(n,arglist)

Default : RTRACE(1,OPTCODE,RCVDATA).

Description :

This macro specifies the number of 400-byte  chunks  the  receive
trace table is to be allocated and the receive trace options that



Page 44                  PBHERS.DOC







PBH                                           April 13, 1990



are to be enabled.


          There are six trace options in the arglist :

            (1) trace a received-data character
            (2) trace a ring-empty index
            (3) trace a process-handling byte
            (4) trace operation-complete return code
            (5) trace the time required for data reception
            (6) trace the current received state


These should be used only by  technical  support  representatives
for debugging.

The values of the argument are the following:


           n     = the number of 400-byte blocks allocated for the
                   trace table.
           RVDAT = enables the received-data character trace,
                   optional.
           RGEMP = enables the ring-empty trace, optional.
           PRHAN = enables the process-handling byte trace,
                   optional.
           RVSTA = enables the current received state trace,
                   optional.
           TMRCV = enables the time required for data reception trace,
                   optional.
           PTCOD = enables the operation-complete return codes trace,
                   optional.


Example :

   RTRACE(2,RGEMP,PTCOD,RVDAT)

800 bytes are allocated to the trace buffer.

The options RGEMP, PTCOD and RVDAT are enabled.


1.9.5  STPCRSH - Halt Slot When Crash

Syntax : STPCRSH(YES/NO)

Default : NO.

Description :




Page 45                  PBHERS.DOC







PBH                                           April 13, 1990



This macro specifies whether a slot will halt after a crash. When
the slot crashes, the network service will be interrupted if this
macro defines YES.

The values of argument are the following:


             YES = the slot will halt after a crash.
             NO  = the slot will restart after a crash


Example :

   STPCRSH(YES)

The slot will halt after a crash.

1.9.6  IRINGSZ - IRING Size

Syntax : IRINGSZ(n)

Default : 500 bytes.

Description :

This macro specifies the number of bytes, (in HEX), for the  ISIS
input ring.

Example :

   IRINGSZ(1000)

The size of the ISIS input ring is 1000 HEX bytes.

1.9.7  ORINGSZ - ORING Size

Syntax : ORINGSZ(n)

Default : 500 Hexadecimal Bytes.

Description :

The macro specifies the number of bytes, (in HEX), for  the  ISIS
output ring.

Example :

   ORINGSZ(1000)

The size of the ISIS output ring is 1000 HEX bytes.




Page 46                  PBHERS.DOC







PBH                                           April 13, 1990



1.9.8  BUFLET - Bufferlet Number.

Syntax : BUFLET(n)

Default : Calculated by the code.

Description :

This macro specifies the number (in  hexadecimal)  of  bufferlets
allocated  to  a 3270 interface.  Each bufferlets currently holds
60 characters of data.  The number  n  should  be  based  on  the
number  of  terminals  associated with the slot and the nature of
the traffic in those terminal.

The values of the argument are the following:


             NBBFLT + k = need k more bufferlets, where NBBFLT is the value
                          based on the number of lines and ports assigned
                          to the interface.
             k          = need a fixed number k of bufferlets.
             -1         = set to the maximum number of bufferlets possible.


Example :

   BUFLET(100)

This 3270 interface slot has 100 bufferlets allocated to it.

1.9.9  CMDLNK - Number of Command Link

Syntax : CMDLNK(n)

Default: Based on the # of bufferlets plus a reserved low limit.

Description :

This macro specifies the number (in decimal) of command links for
this interface. The number selected should be based on the number
of bufferlets plus one per device genned.

The values of the argument are the following:


             NCMDLK + n = need n more command links, where NCMDLK is
                          the value based on the number of bufferlets
                          plus a minimum for the number of devices.
             n          = need a fixed number of command links.





Page 47                  PBHERS.DOC







PBH                                           April 13, 1990



Example :

   CMDLNK(NCMDLK+40)

The number of command links is the value based on the  number  of
bufferlets plus a minimum for the number of devices plus 40.

1.9.10  PTRACE - Protocol Trace

Syntax : PTRACE(n)

Default : 1.

Description :

This  macro  enables  the  protocol  trace.  The  protocol  trace
monitors the line between host and host interface.

The protocol trace table contains a series of  code  showing  the
BSC  protocol  exchange  between  HOST  INTERFACE  and  FRONT END
PROCESSOR.  It is very useful in  trouble-shooting  the  protocol
problems.

The possible values of argument are the following:


             positive value = enable the protocol trace and allocate n
                              multiple of 400-byte blocks for the protocol
                              trace table.
             0              = disable protocol trace.


Example :

PTRACE(2)

The protocol trace  is  enabled;  the  protocol  trace  table  is
expanded from 400 hex bytes to 800 hex bytes.


1.9.11  GENNIB - generate the nib file


Syntax: GENNIB(YES/NO)

Default: NO.

Description: This macro defines whether  the  nib  file  will  be
generated  if there is an assembly error, undefined symbol error,
or configuration error during the system generation.   The  value
of the arguments are the following:



Page 48                  PBHERS.DOC







PBH                                           April 13, 1990



YES = the nib file will be generated  if  there  is  an  assembly
error,  undefined  symbol error or configuration error during the
system generation.

NO  = the nib file will not be generated if there is an  assembly
error,  undefined  symbol error or configuration error during the
system generation.

Example:GENNIB(YES)

During the system generation, if  there  is  an  assembly  error,
undefined symbol error, or configuration error, the nib file will
still be generated.


1.9.12  DEFMODE - Default Input Mode

Syntax : DEFMODE(aaa)

Default : If the macro DEFMODE is not defined the  default  value
is ADR.

Description :

This macro defines the default for the BOM command MODE(aaa).

The value of aaa is the mode the input is expected to be in.

Example :

   DEFMODE(REL)         :REL is default mode for HBOM commands

The default input mode is now relative mode.


1.10  MARCO'S TO ALLOW BOM TO CHANGE CONFIGURATION VALUES



Three new macros were added to allow a BOM user to change certain
parameters  without having to create a new tymfile and creating a
new nib file. CAUTION must  be  used  in  dealing  with  on  line
changes   as  problems  will  occur  which  will  make  the  slot
impossible to support.










Page 49                  PBHERS.DOC







PBH                                           April 13, 1990





        - define if the user is allowed to modify dynamically the
          following configuration parameters :

              CU address
              device address
              logon strings
              logon strings labels

        - define the maximum number of modification commands the
          user wants to record.

        - define the password required while accessing sub-menu.





1.10.1  MOTYM - Dynamic Modification Commands Allowed


Syntax : MOTYM (ARG).

         where ARG is YES or NO

Description :

This macro defines if  the  user  is  allowed  to  enter  dynamic
modification commands. If this macro is not selected, the default
value is NO.

Example : MOTYM (YES).

Dynamic modifications commands are allowed.


1.10.2  STNU - Define Storage for On-Line Modifications


Syntax : STNU (ARG)

Where ARG is a number between 1 and 100

Default: The default value is 10.

Description :

This macro defines the number of dynamic modifications that  will
be  kept  in  a  "history"  buffer.  This buffer will be used for
troubleshooting purposes. This macro may not be  present  in  the



Page 50                  PBHERS.DOC







PBH                                           April 13, 1990



Tymfile if the previous one (MOTYM) is missing.

Example : STNU (10).

The history buffer will keep track of the last 10 modifications.



1.10.3  BOMPW - Define Password to Access Sub-Menu in BOM



Syntax : BOMPW (ARG).

where ARG is the string password required for accessing sub-menu.

Default: The default value is "TYMNET".

Description :

This macro defines the sub-menu password.  This  password  is  an
ASCII   string  .  The  password  cannot  contain  the  following
characters : CR,  LF,  " "  or  "," .

Example : BOMPW(BUBNET)

The new password is bubnet.



























Page 51                  PBHERS.DOC







HBOM                                          April 13, 1990



                          2.  HBOM


The HBOM (HIF Bisync Operations Monitor) for  PBH  version  is  a
tool that monitors and controls various features of the 3270 Host
Interface in the Bisync or Network operations.

This monitoring facility will be implemented in the standard 3270
Polled Bisync Host Interface (Operating in EBCDIC).

2.1  ACCESSING HBOM THROUGH DDT

To access the HBOM, the user  must  first  log  into  DDT  either
directly  or  through  NAD.   DDT  is a generalized debugging and
monitoring tool that is part of ISIS, the Tymnet Engine operating
system.

To log into DDT enter:

        USERNAME:KERNEL HOST NUMBER;PASSWORD  <CR>

When prompted, enter the slot number where  3270  host  interface
resides.   Then, at the prompt (*), the HBOM is accessed from DDT
by entering the STAT command.

All command lines are terminated by a carriage return.  Arguments
are  separated  by  a  comma, space, line feed, or tab. If NAD is
used to access HBOM, a tab  is  recommended  for  separating  the
command and argument or between arguments.

The Display Mode is terminated by a  Backslash().  The  Backslash
returns the user to the Command mode.


Limited editing capability is available in HBOM.

ESCAPE aborts the current command line and returns to the  prompt
(:>).  Control-W discards the partial token already input, either
word  or  number.  Control-A  or  Control-H  discards  the   last
character of the token, effectively a backspace.

Control-C can be entered at any time  to  terminate  the  current
process of the HBOM (for example, halt output) and return HBOM to
DDT.

The GMT date is displayed in the form ddmmmyy; where  dd  is  the
day, mmm is the month, and yy is the year (for example, 10APR84).

The HBOM specification refers to the relative line, control unit,
or  device  number,  in  the  order it was defined in the Tymfile
interface. For example, the first line defined  is  line  0,  the



Page 52                  PBHERS.DOC







HBOM                                          April 13, 1990



second is line 1, and so on.

2.2  GENERAL INFORMATION FUNCTIONS

This  section  consists  of   commands   that   provide   general
information  about  the monitor itself and about the state of the
3270  host  interface.  This  includes  information  about   what
commands and functions are available.

2.2.1  List Commands Available - MENU

Syntax : MENU or ?


The MENU command prints a list of commands that are available for
use in the Bisync Operations Monitor.

2.2.2  List Editing Characters - INST

Syntax : INS or INST


The INST command displays a list  and  explanation  of  available
editing  characters  and  also  a  list  of  the  valid delimiter
characters.

2.2.3  Leave HBOM and DDT - EXIT

Syntax : EXI or EXIT


The EXIT command logs off the 3270 PBH Bisync Operations  Monitor
and exits from DDT.

2.2.4  Leave HBOM - QUIT

Syntax : QUIT or Q or CONTROL C


The QUIT command exits the 3270 PBH Bisync Operations Monitor and
returns to the DDT mode.

2.3  NETWORK OPERATION FUNCTIONS

This section describes the functions that  can  be  performed  to
monitor the Network Operations within the slot.

For this  section  and  the  rest  of  the  sections,   arguments
following  each command are represented in ln for line number/ID,
cun for cu number/ID,  dvn for device  number/ID,   and  lna  for
line address,  cua for cu address , and dva for device address.



Page 53                  PBHERS.DOC







HBOM                                          April 13, 1990



Depending on the current mode,  syntax of each command will  vary
using the above notations for arguments.

2.3.1  Query Slot's Version - CODE

Syntax : CODE


The CODE command displays a description of the slot.



     HBOM -- 3270 PBH Bisync Operations Monitor
     NODE  nnnn    SLOT  ss   ddmmmyy hh:mm:ss

     3270 HOST INTERFACE    VERSION xx.xx
     SID xxx    KERNELHOST xxx   ASSEMBLY DATE  ddmmmyy hh:mm:ss

     HOST#  LINE#  #CU  #DEV
     xxxx    xx     xx   xxx


     The display is interpreted as follows:

     VERSION Version number formatted as version.revision level.
             This is displayed in OCTAL to be consistent with DDT
             and the SUPERVISOR.
     ASSM    Date assembled in GMT daymonthyear  hours:min:sec.
     SID     Slot identifier.
     KRNHST  Kernel host number in decimal.
     HOST#   Slot host number(s) in decimal.(3270 host numbers for
             circuit building process initiated from the terminal
             through the Network)
     LINE#   Line number associated with HOST#.
     #CU     Number of control units associated with HOST#.
     #DEV    Number of devices associated with HOST#.


2.3.2  Query Slot's Status  - STATUS

Syntax : STATUS


The STATUS command displays the status of the slot.










Page 54                  PBHERS.DOC







HBOM                                          April 13, 1990




     HBOM -- 3270 PBH Bisync Operations Monitor
     NODE  nnnn    SLOT  ss   ddmmmyy hh:mm:ss

     HOST#  STATUS    #PORTS   CIRCUITS
     xxxx    xxxx       xx        xxx

     RESTARTS   LAST    START     CIRCUITS
         x    ddmmmyy  hh:mm:ss     xxx

          BUFFER            CMDLNK            MAPLNK
     LEFT  USED  ZAPS  LEFT  USED  ZAPS  LEFT  USED  ZAPS
     xxxx  xxxx  xxxx  xxxx  xxxx  xxxx  xxxx  xxxx  xxxx



     The display is interpreted as follows:

     HOST#           Host numbers defined in the tymfile.
     STATUS          State of each host number,  one of the following:
                     GONE : Slot has been restarted ot loaded.
                     SHUT : Slot has been initialized, awaits polling.
                     ANSR : Received polling and is answering calls.
                     DOWN : Line is down due to no poll.
     #PORTS          Total number of ports defined.
     CIRCUITS        Number of circuits being built.
     RESTARTS        Number of restarts.
     LAST START      Time of last start in GMT,
                     daymonthyear hour:minute:second.
     CIRCUITS        Total number of circuits in use.

     BUFFER
     LEFT            Number of buffers left.
     USED            Number of buffers used.
     ZAPS            Number of circuits zapped due to insufficient
                     buffers since the last restart.

     CMDLNK          Command links are descriptors that contain
                     error codes or the location and quantity of
                     data in buffers for a given device.
     LEFT            Number of command links left.
     USED            Number of command links used.
     ZAPS            Number of circuits zapped due to insufficient
                     command links since last restart.

     MAPLNK          Map links are buffers that used to contain
                     information about the screen for virtual
                     host mode terminals.
     LEFT            Number of map links left.
     USED            Number of map links used.
     ZAPS            Number of circuits zapped due to insufficient



Page 55                  PBHERS.DOC







HBOM                                          April 13, 1990



                     map links since last restart.


2.3.3  Query Crash History - CRASH

Syntax : CRASH n

Default : All crashes that are available.


The CRASH command displays  history  information  about  the  nth
crash.  If n is not specified,  then crash table entries plus I/O
rings trace will be displayed  as  many  times  as  specified  in
NCRSAV.

Because the Crash Count is initialized to one when  the  slot  is
started,  no  information other than the Crash Count is displayed
for a slot with a Crash Count of one.

Use care when defining NCRSAV for capturing crash tables. If  the
option  RNGSAV  is  enabled by the macro OPTION(RNGSAV,YES), HBOM
will trap contents in both IRING and ORING as well as STACK  when
crashes  occur.  Buffers  must be set aside in order to store all
the pertinent information;  this will consume memory space.

The  number  of  crash  entries  can  be  defined  by  the  macro
NCRASH(n), where n is the number of crash entries to be saved.

As crashes take place, the oldest crash information is  discarded
and  new  crash  information  is recorded. Thus, depending on the
number defined in the NCRASH, at most, only  n  crashes  will  be
available for reference.

Additional memory required can be calculated as follows:

   (IRSIZE+4+ORSIZE+4+STKSZ) * NCRSAV


















Page 56                  PBHERS.DOC







HBOM                                          April 13, 1990





     HBOM  --  3270 PBH Bisync Operations Monitor
     NODE  nnnn    SLOT  ss   ddmmmyy hh:mm:ss

     CRASH ENTRY :
     CRASH COUNT  xxxx
     TIME  mm/dd/yy  hh:mm:ss
     FASTC  xxxxxxxx
     CRASH POINT  xxxxxxxx
     CRASH CODE  xx
     PSW  xxxxxxxx

     REGISTERS

     xxxxxxxx  xxxxxxxx  xxxxxxxx  xxxxxxxx  xxxxxxxx  xxxxxxxxx
     xxxxxxxx  xxxxxxxx  xxxxxxxx  xxxxxxxx  xxxxxxxx  xxxxxxxxx
     xxxxxxxx  xxxxxxxx  xxxxxxxx  xxxxxxxx

     STACK (LIFO)

     xxxx xxxx xxxx xxxx xxxx xxxx xxxx xxxx xxxx xxxx xxxx xxxx
     xxxx xxxx xxxx xxxx xxxx xxxx xxxx xxxx xxxx xxxx xxxx xxxx

     The following output depends on the setting of switch SAVTRC.

     JUMP INDEX  xxxx

     JUMP TABLE

     xxxxxxxx  xxxxxxxx  xxxxxxxx  xxxxxxxx
     xxxxxxxx  xxxxxxxx  xxxxxxxx  xxxxxxxx
     xxxxxxxx  xxxxxxxx  xxxxxxxx  xxxxxxxx
     xxxxxxxx  xxxxxxxx  xxxxxxxx  xxxxxxxx

     The following output depends on the switches RNGTRC and SVRNGS.

     IRING POINTERS  xxxx  xxxx
     IRSIZE  xxxx

     IRING

     xxxx  xxxx  xxxx  xxxx  xxxx  xxxx  xxxx  xxxx
     xxxx  xxxx  xxxx  xxxx  xxxx  xxxx  xxxx  xxxx
     xxxx  xxxx  xxxx  xxxx  xxxx  xxxx  xxxx  xxxx

     ORING POINTERS  xxxx  xxxx
     ORSIZE  xxxx

     ORING




Page 57                  PBHERS.DOC







HBOM                                          April 13, 1990



     xxxx  xxxx  xxxx  xxxx  xxxx  xxxx  xxxx  xxxx
     xxxx  xxxx  xxxx  xxxx  xxxx  xxxx  xxxx  xxxx
     xxxx  xxxx  xxxx  xxxx  xxxx  xxxx  xxxx  xxxx

     The display is interpreted as follows:

     CRASH ENTRY     Identifying number of the crash, where 0 is the
                     latest crash.
     CRASH COUNT     Number of crashes since slot was loaded.
                     Crash count of one indicates slot was just started.
     TIME            Time of crash in GMT, month/day/year  hour:min:sec
     FASTC           Time of crash in FASTC.  (FASTC, the system clock, is
                     a 32 bit value that is incremented at a rate of
                     600 times per second.)
     CRASH POINT     Address of next instruction at time of crash
     CRASH CODE      The standard ISIS crash codes are:

                     0       Power failure
                     1       Manual restart
                     0E      Parity error
                     10      Dispatcher crash
                     11      Illegal instruction
                     12      Illegal SVC
                     13      System crash
                     14      Protection violation
                     15      Non-recoverable device check
                     16      Watch frog timer - time out

                     Appendix I describes other crash codes
                     defined by the 3270 PBH.


     PSW             Program status word at time of crash.
     REGISTERS       Register values (registers 0 - F) at time of crash.
     STACK           At the time of the crash the entire stack is read
                     out as LIFO.
     JUMP INDEX      Index table of last jump trace.
     JUMP TABLE      Jump trace table of addresses for preceding jumps.
                     The jump trace table is valid only if technical
                     support has restarted the slot and enabled the
                     jump trace.
                     Note:   Please refer to ISIS-II reference manual
                             for the functions of TRACE.LIB and
                             ENGINE.DOC for the description  of how
                             the jump trace works in the trace bit
                             definition.
     IRING POINTERS  Fill and empty pointers for IRING.
     IRSIZE          Size, in bytes, of IRING.
     IRING           Entire IRING (The IRING is a ring buffer
                     which stores all messages from the network
                     to be read by the slot.)



Page 58                  PBHERS.DOC







HBOM                                          April 13, 1990



     ORING POINTERS  Fill and empty pointers for ORING.
     ORSIZE          Size, in bytes, of ORING.
     ORING           Entire ORING (The ORING is a ring buffer
                     which stores all messages from the slot
                     to be sent to the network.)




2.4  ISIS RINGS TRACE FUNCTIONS

This section describes the  commands  that  trace  the  input  or
output rings between the slot and the Network.

The ability to execute the trace commands is  determined  by  the
macro definition in the slot's tymfile as follows:


             OPTION(RNGTRC,YES/NO)

where YES means commands will be  available,  and  NO  means  not
executable.

The default option will be NO for security reasons.

Trace Output is in real time; events are displayed as they occur.
Both  IRING  and  ORING outputs are displayed; however, the IRING
and  ORING  outputs  are  not  related  to  each  other  and   no
association between them should be drawn.

The output of  all  the  commands  will  be  similar  except  the
designator of the I/O ring.  Following is an example:



     O 20004 RQR 0000 00
     I 20508 DAT 001C 09C0 9480 0004 0012 C240            |...@......B@    |
     O 2000C HSR 0000 1000 12F7 001C 0000 0000 8034
     I 20514 SIX 001C BF
     O 2001C HSR 0000 1000 12F7 001C 0000 0000 8034
     I 20518 DAT 001C 0CC0 9400 0007 0000 007D C150 03    |...@.......}AP. |
     I 20538 NOS 001C A0
     O 2007C HSR 0000 1000 12F7 001C 0000 0000 8034
     I 2053C SND 001C A1
     O 2008C HSR 0000 1000 12F7 001C 0000 0000 8034
     I 20540 SIX 001C BF
     I 20544 DAT 001C 0CC0 9400 0007 0000 017D C150 03    |...@.......}AP. |
     I 20564 SIX 001C BF
     I 20568 DAT 001C 0CC0 9400 0007 0000 027D C150 03    |...@.......}AP. |





Page 59                  PBHERS.DOC







HBOM                                          April 13, 1990



Here is the interpretation of the output:

The first field indicates whether it's an Input ring  (I)  or  an
Output  ring  (O).The  second  field,  a  5-digit  number, is the
address where the message is read in the ring. The next field  is
an   abbreviation  of  the  ISIS  message.   The  4-digit  number
following the ISIS message is the RPORT number  assigned  by  the
dispatcher  if  the  circuit has been built, otherwise it will be
port 0 message.  The  first  2  bytes  after  the  RPORT  is  the
inter/intra  message  type  defined in the ISIS manual. If a data
message is found,  then the entire message indicated by the count
will be displayed.

The last field  enclosed  by  bars  of  the  data  message  is  a
translation  of  the  data  message  contents,  interpreting  the
messages in ASCII format by default.

The translation mode can be changed and will be described later.

2.4.1  Display IRING trace only - DIR

Syntax : DIR adr

Default : Entire IRING.


The DIR command traces the IRING from the indicated address.   If
the address is not given, then the entire IRING will be displayed
starting from the beginning and proceeding to where  the  indices
stop.


2.4.2  Display ORING trace only - DOR

Syntax : DOR adr

Default : Entire ORING.


DOR displays the ORING starting from  the  indicated  address  to
where  the indices stop or the entire ORING if the address is not
specified.

2.4.3  Trace both IRING and ORING - DR

Syntax : DR

Default : Always entire rings.


DR command enables the  rings  trace  from  start  of  the  rings



Page 60                  PBHERS.DOC







HBOM                                          April 13, 1990



address  to  where  the  indices  stop,   the  output  will  show
alternately ORING then IRING messages.

2.4.4  Query/Change Mode of Message Translation - DRNG

Syntax : DRNG mode

where mode = asc(ascii) or ebc(ebcdic)

Default : EBCDIC.


The DRNG command, when followed by either one  of  the  two  mode
identifiers, (EBC or ASC), forces translation of data messages to
the mode specified. This  is  a  graphic  representation  of  the
contents of the ring trace.

If the mode is not entered,  HBOM will display  current  mode  of
translation and no actions will be taken to make any changes.



2.5  BSC LINE MONITORING FUNCTIONS

This section describes  the  commands  that  provide  information
about  the  BSC  protocol-related   status  of the lines, control
units, and devices defined in the slot.

2.5.1  Query/Change Input Mode Command - MODE

Syntax : MODE aaa

Default : ADR


The MODE command sets  the  selection  mode,  where  aaa  is  the
desired mode. This determines whether in the applicable commands,
the lines, control units, and devices are specified  by  relative
position  number,  address, or user defined ID.  The default mode
is ADR.  Modes cannot be mixed within a single command line.  The
ID  defined  by  the user can be specified in the LINE, CUNIT, or
DEVICE macros in the TYMFILE.

The modes are:



             REL     Relative position number
             ADR     Address
             USR     User defined ID




Page 61                  PBHERS.DOC







HBOM                                          April 13, 1990



If the MODE command is entered without  specifying  a  mode,  the
current mode is displayed.

The default mode, ADR, may be changed by using the macro  DEFMODE
to define the desired mode in the TYMFILE.  For example:

DEFMODE(REL)          :REL is default mode for HBOM commands

A range check will be done during sysgen and commands  issued  in
HBOM to ensure integrity of HBOM's operations.

2.5.2  Query Slot's Configuration - CONF

Syntax : CONF ln or CONF lna

Default : Displays entire slot's configuration.


CONF, if followed by a line identifier,   displays  configuration
of  that  line  with the output of the line number, address, user
defined ID and the number of control units on the line.

Same type of information will also be displayed for  the  control
units defined in the line and all the devices defined.

If the line identifier is not specified then configuration of the
entire slot will be displayed.

Output of this command is as follows:

























Page 62                  PBHERS.DOC







HBOM                                          April 13, 1990




     LINE  LADR  LID  #CU    HOST
       xx   xx    xx   xx    TYPE

           CUN   CUADR  CID  #DEV
            xx    xxx    xx    xx

                 DEV    DADR  DID  DTYP    COL  XPR  CHAR
                  xx     xxx   xx  xxxxx    x    x   TYPE


     The output is explained as follows:

     LINE    The relative line number.
     LADR    Line address as defined in the tymfile.
     LID     Line ID defined by the LNID macro.
     #CU     Number of control units defined for this line.
     HOST    The type of host connected to the line
     CUN     Relative control unit number.
     CUADR   Control Unit's polling address.
     CID     User ID defined by the CUID macro.
     #DEV    Number of devices on this CU
     DEV     Relative device number.
     DADR    Device polling address.
     DID     User defined ID by macro DID
     DTYPE   Device type as defined by the tymfile.
     COL     Color capability. Y for yes, N for no.
     XPR     Transparent data handling. Y for yes, N for no.
     CHAR    The character set supported by the individual line.


2.5.3  Query Line Status - QLINE


Syntax : QLINE ln or QLINE lna

Default : Displays every line defined.


The QLINE command displays the  line  status  for  the  specified
line.   If  no line is specified, the command displays the status
of all lines.  The line number entered may be the  relative  line
number,  the  line address, or the line ID depending on the state
of the MODE command.










Page 63                  PBHERS.DOC







HBOM                                          April 13, 1990




     HBOM -- 3270 PBH Bisync Operations Monitor
     NODE  nnnn    SLOT  ss   ddmmmyy hh:mm:ss

     LINE LADR LID SPRT #CU #DEV RTS DSR REXMT XERR XTOT NAKS RERR RTOT
      xx   xx   xx  xx   xx  xxx  x   x   xxx   xxx xxxx  xxx xxxx xxx

     Where the display is interpreted as follows:

     LINE    Relative line number.
     LADR    Line address as defined by LINE macro in TYMFILE.
     LID     Line ID number as defined by LINE macro in TYMFILE.
     SPRT    Physical synchronous port as defined by the macro S.REF
             in the node's tymfile where the line is attached to.
             For the Turbo Engine, the physical port has two parts:
             the first part is the VME ID, set by the paddle card switches;
             The second part is the port number.
     #CU     Number of control units per line.
     #DEV    Number of devices per line.
     RTS     YES if RTS/CTS required, NO if not.
     DSR     X if DTR/DSR is "DON'T CARE"
             Y if DSR is high (line is okay),
             N if DSR is low (line is out).
     REXMT   Retransmissions, number of retransmissions (decimal)
             of data sent to the Front End.(count is always
             accumulated, cleared by RESET command).
     XERR    Transmit errors, all detected transmit errors (decimal)
             (count is always accumulated, cleared by RESET command).
     XTOT    Total number of data blocks (decimal) transmitted,
             both ETX and ETB blocks are included in the count
             (count is always accumulated, cleared by RESET command).
             Retransmissions are included in the count.
     NAKS    Negative acknowledgements, number of NAKS (decimal) sent
             to the Front End.
             (count is always accumulated, cleared by RESET command).
     RERR    Receive errors,  all detected receive errors (decimal)
             (count is always accumulated, cleared by RESET command).
     RTOT    Total number of data blocks (decimal) received,
             both ETX and ETB blocks are included in count
             (count is always accumulated, cleared, by RESET command).


2.5.4  Query Control Unit Status - QCU

Syntax : QCU cun or QCU lna,cua

Default : All CU's in the slot or CU's on the line lna.


The QCU command displays status of the specified control unit, if
the cun or the lna,cua argument is entered. If cun is not entered



Page 64                  PBHERS.DOC







HBOM                                          April 13, 1990



in REL/USR mode,  then all control units  in  the  slot  will  be
displayed.

While if in ADR mode,  then the lna must be entered  and  cua  is
optional.  If cua is missing then the output will include all the
control units on the line indicated by lna.



     HBOM -- 3270 PBH Bisync Operations Monitor
     NODE  nnnn    SLOT  ss   ddmmmyy hh:mm:ss

     CUN  CUADR  CID  #DEV  FEPSTAT CUSTAT REXMT  XERR  XTOT  NAKS  RERR  RTOT
     xx    xxx    xx    xx  POLL    ACTIVE xxx    xxx  xxxx   xxx   xxx  xxxx
                            NOPOLL  DWNOPR

     Where the display is interpreted as follows:

     CUN     Relative control unit number
     CUADR   Control unit address as defined
             by CUNIT macro in TYMFILE
     CID     Control unit ID number as defined
             in the CUNIT macro in TYMFILE
     #DEV    Number of devices per control unit.
     FEPSTAT Polling status of the Front End
             POLL   : Host is polling this CU.
             NOPOLL : Host is not polling this CU.
     CUSTAT  Control Unit status
             ACTIVE : CU is up and answering poll
             DWNOPR : CU has been brought down by operator
     REXMT   Retransmissions, number of retransmissions (decimal)
             of data sent to the Front End.(count is always
             accumulated, cleared by RESET command).
     XERR    Transmit errors, all detected transmit errors (decimal)
             (count is always accumulated, cleared by RESET command).
     XTOT    Total number of data blocks (decimal) transmitted,
             both ETX and ETB blocks are included in the count
             (count is always accumulated, cleared by RESET command).
             Retransmissions are included in the count.
     NAKS    Negative acknowledgements, number of NAKS (decimal) sent
             to the Front End.
             (count is always accumulated, cleared by RESET command).
     RERR    Receive errors,  all detected receive errors (decimal)
             (count is always accumulated, cleared by RESET command).
     RTOT    Total number of data blocks (decimal) received,
             both ETX and ETB blocks are included in count
             (count is always accumulated, cleared, by RESET command).







Page 65                  PBHERS.DOC







HBOM                                          April 13, 1990



2.5.5  Query Device Status - QDEV

Syntax : QDEV dvn or QDEV lna,cua,dva

Default : None in REL/USE mode.
     All devices on lna,cua in ADR mode.


The QDEV command displays the status of the specified device.  If
no  device address is specified, the status of all devices on the
specified control unit and line is displayed.

In the REL/USR mode, if the device number or ID is  not  entered,
or  if  in ADR mode and any error in  line/CU address the command
line is rejected.







































Page 66                  PBHERS.DOC







HBOM                                          April 13, 1990




     HBOM -- 3270 PBH Bisync Operations Monitor
     NODE  nnnn    SLOT  ss   ddmmmyy hh:mm:ss

     DVN DVA DID COL XPR DTYPE STATE RPORT SS SCUA SDVA      ONLINE
      xx  xx  xx  x   x   xxxx xxxxx   xx xxxx xxx  xxx  dd:mm:yy hh:mm:ss

     The display is interpreted as follows:

     DVN     Relative device number
     DVA     Device address as defined by the DEVICE macro
     DID     Device ID as defined by the DEVICE macro
     COL     Y : terminal has color capabilities
             N : no color feature
     XPR     Y : terminal supports extended features (transparent)
             N : cannot handle extended features
     DTYPE   Type of the device as defined by TYPE macro. ie.,C1920
     STATE   Indicates operating mode of the device, can be:
             NATIVE  - Native Mode,  TPAD is either
                       3270 PBT or 3270/CMT
             VIRTUAL - Virtual Host Mode,  TPAD is in ASCII mode
             IDLE    - Indicates no circuit yet
             DOWNOP  - Device brought down by operator
             LOGIN   - Indicates there is circuit but mode
                       has not been decided yet.

     The following output will not be shown if no circuit has been built.

     RPORT   Dispatcher port number.
     SS      Last sense/status halfword sent to the host
     SCUA    Source control unit address field from
             CALL USER DATA packet
             00 is displayed for device operating
             in Virtual host mode.
     SDVA    Source device address field from the
             CALL USER DATA packet.
             00 is displayed for device operating
             in Virtual host mode.


2.5.6  Reset CU Error Counts - RESET

Syntax :  RESET ln or RESET lna

Default : All line and CU error counters.


The RESET command sets the value  of  all  error,  transmit,  and
receive  totals  for  all  control  units to zero.  These are the
values reported by the QCU command.




Page 67                  PBHERS.DOC







HBOM                                          April 13, 1990



2.5.7  Restart Line Error Counts - RERR

Syntax :  RERR ln or RERR lna

Default : Every line in the slot.


The RERR command resets the error counts and specifies  the  line
for the error reporting performed by the DERR command.  The value
ln(a), specifies the line for which errors are reported.   If  no
line   is   specified,   the  RERR  command  displays  the  error
information for the entire slot.  All  error  counts  accumulated
for the DERR command are reset to zero.

2.5.8  Display Line Error Statistics - DERR

Syntax :  DERR n

Default : Last 24 hours

The DERR command displays the number of line errors that occurred
in  each  of  the past n hour(s) and the average number of errors
for that period.  The value of n can range from 1 to 24.  If n is
not  specified  only  the  average  number  of  errors  and  line
exceptions for the past 24 hours is displayed.  Any  errors  that
occur  in  the most recent partial hour or other partial hour are
not included in the average.

A bin is maintained for each error type and  line  exception  for
each  hour  in a 24 hour cycle.  At the beginning of the hour the
bin is emptied and each  error  occurring  within  that  hour  is
recorded in the bin.  At the end of the hour the process moves to
the next set of bins.  This process cycles continuously.





















Page 68                  PBHERS.DOC







HBOM                                          April 13, 1990




     HBOM -- 3270 PBH Bisync Operations Monitor

     NODE  nnnn    SLOT  ss   ddmmmyy hh:mm:ss

     LINE xx

                                          BLKCNT(ETB/ETX)
     HOUR   RE-TRAN  XERR   NAKS   RERR     XMT    RCV
      xx      xx      xx     xx     xx      xxx    xxx
      xx      xx      xx     xx     xx      xxx    xxx
      xx      xx      xx     xx     xx      xxx    xxx
      xx      xx      xx     xx     xx*     xxx    xxx

              xxx     xxx    xxx    xxx     xxxx   xxxx   TOTALS

     AVERAGE PER HOUR

              xx     xx      xx     xx      xxx    xxx

     The display is interpreted as follows:

     LINE    Line number, as per current mode, for which
             errors are reported.
             ENTIRE SLOT indicates errors are reported.
             for all lines.
     HOUR    Bin hour in GMT.
     RE-TRAN Retransmissions, number of retransmissions
             of data sent to the Front End.
     XERR    Total transmit errors.
     NAKS    Negative acknowledgements, number of
             NAKS sent to the Front End.
     RERR    Total receive errors.
     BLKCNT  Total number of block counts including ETB or ETX
             for the XMT and RCV
     *       Indicates partial hour included in totals
             but not included in average.

2.5.9  Display CU Not Being Polled - DNPLL

Syntax : DNPLL

Default : Not Available.


The DNPLL command displays a list of the control units  that  are
not being polled.







Page 69                  PBHERS.DOC







HBOM                                          April 13, 1990




     HBOM -- 3270 PBH Bisync Operations Monitor
     NODE  nnnn    SLOT  ss   ddmmmyy hh:mm:ss

     CONTROL UNITS NOT BEING POLLED
         LINE#  LNADR  CU#  CUADR  CUID
          xx     xxx    xx   xxx    xx

     The display is interpreted as follows:

     LINE#   Relative Line number.
     LNADR   Line address.
     CU      Relative control unit number.
     CUADR   Control Unit polling address.
     CUID    Control Unit user defined ID.

2.6  DEBUGGING FUNCTIONS

This section explains the commands that provide  the  ability  to
trace  and  display information about certain events occurring in
the 3270 host interface.  These  include  traces  of  data  flow,
response time, and protocol.

Each trace has a duration that is both defaulted in the code  and
can  be  explicitly  stated  when  the  trace  is enabled (in the
command syntax m represents the duration of the trace).   If  the
duration  is  not  specified,  the default duration is used.  The
default can be changed by setting a label equal to a value in the
TYMFILE.    The   appropriate   label  is  given  in  each  trace
description.  The maximum default value must fit  in  a  halfword
and  be  equivalent  to  less  than  seven  days.   Setting  m to
specified time also sets the default to this new  time.   All  of
the traces degrade the system efficiency.

As an example, the default value of m for the time stamp  can  be
changed  by  setting  the  value  of STMPTM equal to the  desired
number of seconds in the TYMFILE:

OPTION(STMPTM,$A30)

would set the default value of m equal to 30 minutes.

2.6.1  Enable Character Per Second Trace - ECPS

Syntax : ECPS ln(a),m

Label: CPSTM

Default : entire slot, 60 minutes.





Page 70                  PBHERS.DOC







HBOM                                          April 13, 1990



The ECPS command enables the character/second test for the next m
minutes,  where  ln(a) is the specified line number(address).  If
no line is specified, the character per second trace  is  enabled
for  the  entire  slot.   If  m,  the  number  of minutes, is not
specified, the test continues for the default duration  or  until
halted by the DCPS or DISABLE command or the slot is restarted.

The character count, in both native mode and virtual  host  mode,
includes  all  characters transferred across the Bisync line from
the STX  to  the  ETB  or  ETX.   Leading  sync  characters,  pad
characters, and the checksum are not included in the count.


2.6.2  Display Character Per Second Trace Results - DCPS

Syntax : DCPS

Default : Not Available.


The  DCPS  command  halts  and  displays  the  results   of   the
character/second  test.  The  test computes the average number of
characters per second thruput by the slot.



     HBOM -- 3270 PBH Bisync Operations Monitor

     NODE  nnnn    SLOT  ss   ddmmmyy hh:mm:ss

     LINE xx        DUR(min)
     (ENTIRE SLOT)

     CHARS/SEC xxxx    TOTAL CHARS xxxx    PER hh:mm:ss

     The display is interpreted as follows:

     LINE xx         The line on which the thruput is measured,
                     as per the current mode, or entire slot,
                     if no line was specified.
     DUR(min)        The duration for which the trace runs if
                     not halted by the DCPS or DISABLE command.
     CHARS/SEC       The number of characters per second thruput
                     by the slot or the specified line.
     TOTAL CHARS     The total number of characters thruput by
                     the line or slot for the specified period.
     PER             The amount of time the trace actually ran in
                     hours:min:sec.






Page 71                  PBHERS.DOC







HBOM                                          April 13, 1990



2.6.3  Enable Polling Cycle Trace - EPC


Syntax :  EPC cun,m or EPC lna,cua,m

Label : PCTM

Default : entire slot, 60 minutes


The EPC command enables the polling cycle trace for  the  next  m
minutes, cun is the control unit number or ID in REL mode.

While in ADR mode, if the CU address cua is not specified  and  a
line  address  lna  is entered then the trace will be done on all
the control units on that line.

This trace measures the average polling cycle for  the  specified
control unit.  The polling cycle is measured between each General
Poll issued to the  control  Unit,   it's  basically  taking  the
average  number  of G.P.'s received in the duration by default or
specified by the operator.

If no control unit is specified, the polling  cycle  is  measured
for  all control units in the slot.  If m, the number of minutes,
is not specified, the trace continues for the default duration or
until  halted  by  the  DPC  or  DISABLE  command  or the slot is
restarted.

2.6.4  Display Polling Cycle Trace Results - DPC

Syntax :  DPC

Default : NA.


The DPC command halts and displays the  results  of  the  polling
cycle  trace.
















Page 72                  PBHERS.DOC







HBOM                                          April 13, 1990




     HBOM -- 3270 PBH Bisync Operations Monitor
     NODE  nnnn    SLOT  ss   ddmmmyy hh:mm:ss

     (LINE #)
     CU xx    DUR(min) xx
     (SLOT)

     CYCLE&(ms) xxx    POLLS xxxx    PER xx

     The display is interpreted as follows:

     CU        Line # or Control unit # or entire slot being traced.
     DUR(min)  The duration for which the trace runs if not halted
               by the DPC or DISABLE command.
     CYCLE     Average polling time in milliseconds
     POLLS     Number of polls from the FEP in the period traced.
     PER       The actual amount of time the trace ran in hours:min:sec.

2.6.5  Enable Time Stamp Trace - ESTAMP

Syntax : ESTAMP dvn,m or ESTAMP lna,cua,dva,m

Label : STMPTM

Default : 5 minutes


The  ESTAMP  command  enables  the  time  stamp  trace  for  each
transaction of the specified device for the next m minutes, where
dvn is the specified device number/ID if in REL/USR mode, or lna,
cua,  and dva as the line, control unit, and the device addresses
if in ADR mode.

If m,  the  number  of  minutes,  is  not  specified,  the  trace
continues  for the default duration or until halted by the DSTAMP
command, DISABLE command or the slot is restarted.

















Page 73                  PBHERS.DOC







HBOM                                          April 13, 1990



2.6.6  Display Time Stamp Trace Results - DSTAMP

Syntax: DSTAMP

The DSTAMP command halts and displays the time  stamp  trace  for
the  last  two  transactions  for the specified device.  The time
stamp values are in FASTC (FASTC, the system clock, is a  32  bit
value that is incremented at a rate of 600 times per second).



     ISIS/Turbo Engine HBOM -- 3270PBH Bisync Operations Monitor
     NODE  nnnn    SLOT  ss   ddmmmyy hh:mm:ss

     DISPLAYING TIME STAMPING ON DEVICE NUMBER :    #  ISIS PORT # : ####
     DUR(MIN):      xx  PER   hh:mm:ss

                       LAST        PRIOR
     STX IRING       xxxxxxxx    xxxxxxxx
     ETX IRING       xxxxxxxx    xxxxxxxx
     RCV GP          xxxxxxxx    xxxxxxxx
     XMT STX         xxxxxxxx    xxxxxxxx
     XMT ETX         xxxxxxxx    xxxxxxxx
     XMT COMPLETE    xxxxxxxx    xxxxxxxx
     RCV SELECT      xxxxxxxx    xxxxxxxx
     RCV STX         xxxxxxxx    xxxxxxxx
     RCV ETX         xxxxxxxx    xxxxxxxx
     STX ORING       xxxxxxxx    xxxxxxxx
     ETX ORING       xxxxxxxx    xxxxxxxx
     DELAY(ms)           xxxx        xxxx


The time stamp display in HEX  is interpreted  as  follows  where
the  column  labeled  LAST  is  the  stamp  for  the  most recent
transaction and the  column  labeled  PRIOR  is  the  transaction
preceding the most recent.  The contents in DELAY are in decimal.

Time stamping trace will not be executed for terminals  operating
in Virtual Host Mode, unless a circuit has been built.















Page 74                  PBHERS.DOC







HBOM                                          April 13, 1990




     DUR(min)        The duration for which the trace runs if
                     not halted by the DSTAMP or DISABLE command.
     PER             The duration of the trace actually ran hours:min:sec.
     DEV             The device being traced (as per current mode)
     PORT NUMBER     The dispatcher port number associated with
                     the device being traced.
     STX IRING       STX of inbound data read from IRING by background
     ETX IRING       ETX of inbound data read from IRING by background
     XMT STX         STX of inbound data sent to host by foreground
     XMT ETX         ETX of inbound data sent to host by foreground
     XMT COMPLETE    Transmission is completed
     RCV SELECT      The select is received
     RCV STX         Receive STX of incoming message by foreground
     RCV ETX         Receive ETX of incoming message by foreground
     STX ORING       STX of incoming message put into ORING by background
     ETX ORING        ETX of incoming message put into ORING by background
     DELAY           Round trip delay, measured from receipt of STX from
                     the device in the PBT to transmit of STX to the
                     device in the terminal interface, in milliseconds.


2.6.7  Enable and Display Protocol Trace - SCOPE


The  PBH  BOM  _S_c_o_p_e  command  traces  the   Binary   Synchronous
Communication  (BSC)  line  protocol exchange between the PBH and
the host computer.  It displays the BSC control characters  in  a
real time fashion.  Only one line is traced at a time.

The protocol trace macro PTRACE _m_u_s_t _b_e  _e_n_a_b_l_e_d  _f_o_r  _t_h_e  _S_c_o_p_e
_c_o_m_m_a_n_d _t_o _w_o_r_k.


_2._6._7._1  _C_o_m_m_a_n_d__S_y_n_t_a_x


The PBH BOM _S_c_o_p_e command has the following syntax:


             SCOPE <ln>              <ln> = line number


The line number may be one of the  following,  depending  on  the
addressing mode.  It is the line address in the address mode.  It
is the relative line number in the relative mode.  It is the line
ID in the user specified ID mode.

To deactivate the scope trace, type  any  key  during  the  trace
display.




Page 75                  PBHERS.DOC







HBOM                                          April 13, 1990



2.6.7.2  _C_o_m_m_a_n_d__E_r_r_o_r__H_a_n_d_l_i_n_g


If the line number is missing in the _S_c_o_p_e command, the following
message is output to the terminal:


             Line must be specified for this command


If the line number is invalid in the _S_c_o_p_e command, the following
message is output to the terminal:


             LINE ERROR, TOO BIG/SMALL OR ID/ADDRESS UNDEFINED
             COMMAND ABORTED!



2.6.7.3  _S_c_o_p_e__T_r_a_c_e__I_n_f_o_r_m_a_t_i_o_n


This section describes the trace information that is displayed by
the _S_c_o_p_e command.  The scope trace has six columns:


             RCV     XMT     CU DV    STATE          TEXT

             xxxx    xxxx    xx xx    xxxxx          xx xx xx xx xx


     RCV:   BSC Receive Information
     XMT:   BSC Transmit Information
     CU:    Control Unit Number (per addressing mode)
     DV:    Device Number (per addressing mode)
     STATE: PBH Internal State
     TEXT:  First five bytes of the transmitted text (in hex).



2.6.7.4  _P_B_H__R_e_c_e_i_v_e__I_n_f_o_r_m_a_t_i_o_n


The following is the list of possible BSC line information  which
the PBH may receive from the host computer:









Page 76                  PBHERS.DOC







HBOM                                          April 13, 1990



             ABRT -- Abort (ENQ,EOT,NAK in text)
             ACK0 -- Even Acknowledge (DLE/70)
             ACK1 -- Odd Acknowledge (DLE/P)
             ENQ  -- Enquiry
             EOT  -- End Of Transmission
             ETB  -- End Of Transmission Block
             ETX  -- End Of Text
             NAK  -- Negative Acknowledge
             RVI  -- Reverse Interrupt (DLE/@)
             SOH  -- Start Of Header
             STX  -- Start Of Text
             TTD  -- Temporary Text Delay (STX/ENQ)
             WACK -- Wait Before Transmit Positive Acknowledgment (DLE/,).


The scope trace displays an error message if an error is detected
while  processing the received information.  The following is the
list of possible error messages:


             CRC  -- CRC error
             FCOM -- forced RCV completion
             LOST -- lost data (bufferlet unavailable)
             LSYN -- lost SYN
             NBUF -- no initial bufferlet
             ORUN -- overrun
             RTIM -- timeout before message received
             UNKN -- unknown.



2.6.7.5  _P_B_H__T_r_a_n_s_m_i_t__I_n_f_o_r_m_a_t_i_o_n


The following is the list of possible BSC line information  which
the PBH may transmit to the host computer:


             ACK0 -- Even Acknowledge (DLE/70)
             ACK1 -- Odd Acknowledge (DLE/P)
             DATA -- Data followed by ETB or ETX
             ENQ  -- Enquiry
             EOT  -- End Of Transmission
             GPOL -- General Poll Sequence
             NAK  -- Negative Acknowledge
             RVI  -- Reverse Interrupt (DLE/@)
             SEL  -- Selection Addressing Sequence
             SPOL -- Specific Poll Sequence
             TTD  -- Temporary Text Delay (STX/ENQ)
             WACK -- Wait Before Transmit Positive Acknowledgment (DLE/,).




Page 77                  PBHERS.DOC







HBOM                                          April 13, 1990



2.6.7.6  _P_B_H__I_n_t_e_r_n_a_l__S_t_a_t_e_s


The following is  the  list  of  possible  PBH  internal  receive
states.


             SENQ  -- Waiting for response to an abort message sent
                      by the PBH
             SIDLE -- Idle, scanning for polls or selects from host
             SRCV  -- The host has sent the first data block,
                      PBH expects subsequent data blocks
             SRWACK-- PBH receiver is waiting for internal resources,
                      it sent WACKs to the host telling it to wait for
                      a positive acknowledgement before sending more data
             SXMT  -- PBH has control of the line and has sent a data block
                      to the host
             SXTMOT-- PBH has timed out awaiting for the host to respond to
                      its data transmission
             SXRVI -- Waiting for the host to respond to the RVI
             SXTTD -- Waiting for response to a TTD (STX ENQ) that was sent by
                      the PBH.



2.6.7.7  _T_e_x_t


The text field  displays  the  five  bytes  of  data  immediately
following  the  STX  transmitted  to  the  host.   This  field is
meaningful only for BSC transmission that ends with ETB  or  ETX.
It  is  omitted  for  other  message  types.   The five bytes are
displayed in hexadecimal.


2.6.7.8  _S_a_m_p_l_e__S_e_s_s_i_o_n_s


This section contains  sample  sessions  of  the  PBH  BOM  _S_c_o_p_e
command trace.


Host General Poll With No I/O Pending In PBH


The following sample PBH scope trace shows  the  host  sending  a
general  poll  to the PBH (control unit address 40).  The PBH has
no data pending.  It returns an EOT.






Page 78                  PBHERS.DOC







HBOM                                          April 13, 1990



             RCV     XMT     CU DV    STATE          TEXT

             EOT                      SIDLE
             GPOL    EOT     40       SIDLE
             EOT                      SIDLE
             GPOL    EOT     40       SIDLE
             EOT                      SIDLE
             GPOL    EOT     40       SIDLE



Host Select Write To PBH


The following sample PBH scope trace  shows  the  host  selecting
control  unit  40  device 40 and sending a data block to it.  The
PBH is in address mode.


             RCV     XMT     CU DV    STATE          TEXT

             EOT                      SIDLE
             GPO     EOT     40       SIDLE
             EOT                      SIDLE
             SEL     ACK0    40 40    SIDLE
             ETX     ACK1    40 40    SRCV           27 F1 02 13 03
             EOT                      SRCV



2.8.1  TRACE SUPPRESS COMMAND


The Trace Suppress command _t_r_c_s_u_p allows the user to suppress the
tracing of General Poll - EOT sequences in the _s_c_o_p_e command.  It
is available in both the PBH BOM and the PBT  BOM.   The  default
value is on.

The trace suppress command has the following syntax:


             TRCSUP [on or off]      on  = trace suppression
                                     off = no trace suppression


If _t_r_c_s_u_p is entered without an argument, the  current  state  is
displayed.







Page 79                  PBHERS.DOC







HBOM                                          April 13, 1990



2.8.1.1  _S_a_m_p_l_e__S_e_s_s_i_o_n_s


This section contains  sample  sessions  of  the  PBT  BOM  _S_c_o_p_e
command trace with _T_r_c_s_u_p disabled and enabled.


Scope Trace with Trcsup disabled


The following sample PBT scope trace has _T_r_c_s_u_p turned off.


             XMT     RCV     CU DV    STATE          TEXT

             GPOL    EOT      1       SRINIT
             GPOL    EOT      1       SRINIT
             GPOL    EOT      1       SRINIT
             GPOL    EOT      1       SRINIT
             GPOL    EOT      1       SRINIT
             GPOL    ETB      1  0    SRINIT         C1 40 7D 40 40
             ACK1    ETX      1  0    SRCV           11 C6 C1 C2 C3
             ACK0    EOT      1  0    SRCV



Scope Trace with Trcsup enabled


The following sample PBT scope trace is the same as the  previous
example with _T_r_c_s_u_p turned on.


             XMT     RCV     CU DV    STATE          TEXT

             GPOL    ETB      1  0    SRINIT         C1 40 7D 40 40
             ACK1    ETX      1  0    SRCV           11 C6 C1 C2 C3
             ACK0    EOT      1  0    SRCV



2.10.1  Enable Data Trace - EDAT

Syntax : EDAT dvn,m or EDAT lna,cua,dva,m

Label: DATTM

Default : 10 minutes


The EDAT command enables the data trace for the specified  device



Page 80                  PBHERS.DOC







HBOM                                          April 13, 1990



for the next m minutes, where dvn is the device number or ID, and
lna,cua,dva are the line address,  control  address,  and  device
address.

The transmit and receive data are traced.  By default, the  first
ten characters of the message block and the ETB or ETX are saved.
However,   the  size  can  be  changed   by   using   the   macro
OPTION(DATRSZ,$Ann)  to define nn bytes to save including STX and
ETX or ETB.

If no m, number of minutes, is specified, the trace continues for
the default duration or until the DDAT command or DISABLE command
is issued or the slot is restarted.

Data trace is not available for virtual host mode terminals.

2.10.2  Display Data Trace - DDAT

Syntax : DDAT

Default : NA.


The DDAT command disables and displays the transmit  data  trace.
For  the  standard  3270 host interface, the data is displayed in
EBCDIC.




     ISIS/Turbo Engine HBOM -- 3270PBH Bisync Operations Monitor
     NODE  nnnn    SLOT  ss   ddmmmyy hh:mm:ss

     DISPLAYING DATA TRACE ON DEVICE # : ##   DUR(MIN):   ##   PER   hh:mm:ss

     XMT:  02  xx xxxx xxxx xxxx xx  03
     RCV:  02  xx xxxx xxxx xxxx xx  03
     XMT:  02  xx xxxx xxxx xxxx xx  03

     The display is interpreted as follows:

     DEV       Device number, per current mode.
     DUR(min)  The duration for which the trace runs if not halted
               by the DDAT or DISABLE command.
     PER       The amount of the trace actually ran in hours:min:sec.
     XMT:      First ten data bytes transmitted to the host
               ended with ETB or ETX
     RCV:      First ten data bytes received from the host ended
               with ETB or ETX





Page 81                  PBHERS.DOC







HBOM                                          April 13, 1990



2.10.3  Disable All Enabled Traces - DISABLE

Syntax : DISABLE

Default : NA.


The DISABLE command disables all traces that were enabled.


2.11  QUEUE PROCESSOR

This section describes how to stop the  queue  processor  and  to
query any data contained in the queue.

There are two queues,  namely XMT and RCV queue,  that are  being
used between the Foreground(F/G) and Background(B/G).

RCV Q is used in the direction from the F/G to B/G when there  is
data received from the Front End on the BSC line.  Data is put in
RCV Q and awaits B/G RCV Q processor to scan and  transform  into
either  DSP  messages  or  ASCII  strings  to be delivered to the
terminal.

XMT Q  is  used  in  the  direction  from  B/G  to  F/G  whenever
terminal's  data  has  arrived  from  the  network  and  has been
converted either from ASCII or DSP into BSC messages.  The  final
response  is  then placed in XMT Q and awaits transmission to the
Front End.

The captured data will  always  be  displayed  in  normal  EBCDIC
representation  even  though  they  are  usually  reversed before
transmission on XMT queue.

2.11.1  Stop XMT Q Process - STOPXMT

Syntax : STOPXMT dvn or STOPXMT lna,cua,dva

Default : None,  device must be specified.


The STOPXMT command stops the XMT Q  scanner  in  processing  the
data on the XMT Q for the device specified.

The data, if any, remains captured on the Q and is  not  sent  to
the Front End.

There is no telling how this command  would  interfere  with  the
normal  Bisync  line's  operation.  In Limited Conversation Mode,
HIF will send TTD to FEP until the data is again available.




Page 82                  PBHERS.DOC







HBOM                                          April 13, 1990



2.11.2  Query Data On XMT Q - QXMTQ

Syntax : QXMTQ


QXMTQ querys and displays any data on the XMT Q that was captured
by executing STOPXMT command on a device.

The output looks like the following:


     BUFADR      CONTENTS
     xxxxx  xxxx xxxx xxxx xxxx xxxx xxxx xxxx xxxx xxxx xxxx
     xxxxx  xxxx xxxx xxxx xxxx xxxx xxxx xxxx xxxx xxxx xxxx


BUFADR is the buffer address where contents of  the  XMT  Q  were
being displayed.

2.11.3  Start XMT Q Process - STARTXMT

Syntax : STARTXMT


The STARTXMT command restarts  the  XMT  Q  scanner,  which  then
resumes processing data on the Q. Use this command for any device
which ceased transmitting to the host due to  the  implementation
of the STOPXMT command.

Terminal resumes operation  when  this  command  is  executed  if
STOPRCV  has  not  been  executed.  If multiple devices have been
stopped only the last one will be restarted.  Inorder to  restart
another  device, you must use the STOPXMT command on it again and
then the STARTXMT command will restart that device.

2.11.4  Stop RCV Q Process - STOPRCV

Syntax : STOPRCV dvn or STOPRCV lna,cua,dva

Default: None, device must be specified.

STOPRCV stops RCV Q scanner from processing the data on the Q, if
any, device specified by the argument.

Data captured on the Q is from the host and remains on the Q  for
as  long  as STARTRCV is not executed, and can be examined by the
command QRCVQ described below.







Page 83                  PBHERS.DOC







HBOM                                          April 13, 1990



2.11.5  Query Data On RCV Q - QRCVQ

Syntax : QRCVQ


QRCVQ querys and displays any data on the RCV Q that was captured
by executing STOPRCV command on a device.

The output looks like the following:


     BUFADR      CONTENTS
     xxxxx  xxxx xxxx xxxx xxxx xxxx xxxx xxxx xxxx xxxx xxxx
     xxxxx  xxxx xxxx xxxx xxxx xxxx xxxx xxxx xxxx xxxx xxxx



BUFADR is the buffer address where contents of  the  RCV  Q  were
being displayed.

2.11.6  Start RCV Q Process - STARTRCV

Syntax : STARTRCV


STARTRCV command re-starts the RCV Q scanner to process  data  on
the  Q  for the device that has been stopped from transmitting to
the terminal by the command STOPRCV.

Terminal resumes operation when this command is executed  and  if
XMT Q is not stopped by STOPXMT.

If multiple devices have been stopped only the last one  will  be
restarted.   Inorder  to restart another device, you must use the
STOPRCV command on it again and then the  STARTRCV  command  will
restart that device.

2.12  MODIFY TYMFILE PARAMETERS ON LINE

These commands are allowed only after entering the CHPR  subfield
and  responding  to  the proper password as defined in the slot's
tymfile.  The commands which allow the  modification  of  tymfile
parameters  require  that  these  devices   not  be in the active
state. The state for devices must be IDLE.  Parameter must  match
current  existing parameter in the slot. Warning messages will be
displayed if error conditions exist. The  MODE  must  be  address
(adr).







Page 84                  PBHERS.DOC







HBOM                                          April 13, 1990



2.12.1  Modify Control Unit Address - MCU


Syntax: MCU lna,old-cua,new-cua

lna is the line address, old-cua is the old control unit address,
new-cua is the hex control unit address which will take the place
of the existing control unit address.


The MCU command allows you  to  change  the  hex  address  of  an
existing  control  unit  address to another valid address control
unit address.  Duplicate control unit addresses attached  to  the
same line is not valid.

Example:

  MCU 0C1,40,0C2

Control unit address 40 on line 0C1 is being changed to 0C2


2.12.2  Modify Device Address - MDEV


Syntax: MDEV lna,cua,old-dva,new-dva

lna is the line address, cua is the control unit address  old-dva
is  the  old  device  address,  new-dva is the hex device address
which will take the place of the existing device address.


The MDEV command allows you to  change  the  hex  address  of  an
existing   device   address  to  another  valid  device  address.
Duplicate device addresses attached to the same control unit  are
not valid.

Example:

        MDEV 0C1,40,0C2,0C4

Device 0C2 on control unit  address  40  on  line  0C1  is  being
changed to 0C4.


2.12.3  Change Parameters Subfield - CHPR


Syntax: CHPR

The CHPR command and proper password take you to the subfield  of



Page 85                  PBHERS.DOC







HBOM                                          April 13, 1990



commands  MCU  and  MDEV.   Inorder to use this command the macro
MOTYM must be set to yes in the tymfile. The password can also be
defined in the tymfile using the BOMPW macro.

Example:

        CHPR

After responding to the password request you  should  be  in  the
subfield.  Type MENU for a list of commands.


2.13   BSC LINE CONTROL FUNCTIONS



2.13.1  THE DOWN COMMAND


The PBH BOM _D_o_w_n command  zaps  the  circuits  to  the  specified
device  or  to  active  devices  on the specified line or control
unit.  The devices are not allowed to login to the host until the
operator issues the _U_p command for the line, the control unit, or
the device.

After the device is brought down,  the  PBH  updates  the  device
state  to  indicate that it was brought down by the operator.  If
the host selects the downed device, the PBH responds with an RVI.
The  host can then send a specific poll to the device, requesting
status.  The PBH responds  with  the  sense/status  message,  the
Status  and  Sense bytes contain 0xC050, indicating the device is
unavailable.

If only the line number and the control unit number is specified,
the  control  unit and all its devices are brought down.  The PBH
updates the state of the control unit and its devices to indicate
that  they  were brought down by the operator.  If the host polls
the downed control unit or selects any of its  devices,  the  PBH
will not respond, causing the host to timeout.

If only the line number is specified, all control units and their
devices  on the line are brought down.  The PBH updates the state
of all the control units and devices to indicate that  they  were
brought down by the operator.  If the host polls any control unit
or selects any device on that line, the  PBH  will  not  respond,
causing the host to timeout.

The _D_o_w_n command has the following syntax:






Page 86                  PBHERS.DOC







HBOM                                          April 13, 1990



     DOWN    <ln>,<cun>,<dvn>
                                     <ln> = line number
                                     <cun> = control unit number
                                     <dvn> = device number


The line number, the control unit number, and the  device  number
may  be  one  of the following, depending on the addressing mode.
They may be the line address, the control unit address,  and  the
device  address  in  the  address mode.  They may be the relative
line number, the relative control unit number, and  the  relative
device number in the relative mode.  They may be the line ID, the
control unit ID, and the device ID in the user specified ID mode.

The following message is sent to each active device to inform the
user that the device is to be brought down:

             Device brought down by operator

2.13.2  THE UP COMMAND


The PBH BOM _U_p command brings  up  the  specified  downed  device
(i.e.  the  device  is allowed to request logon to the host).  If
the associated control unit was brought down by the operator,  it
is also brought back up.  The PBH updates their state to indicate
that they are up.

If  only  the  line  number  and  the  control  unit  number  are
specified,  all  downed devices on the specified control unit are
brought up.  The PBH updates the state of the  control  unit  and
the devices to indicate that they are up.

If only the line number is specified, all  downed  control  units
and  devices  on  the  line  are brought up.  The PBH updates the
state of the control unit and the devices to indicate  that  they
are up.

The _U_p command has the following syntax:


     UP      <ln>,<cun>,<dvn>
                                     <ln> = line number
                                     <cun> = control unit number
                                     <dvn> = device number


The line number, the control unit number, and the  device  number
may  be  one  of  the following depending on the addressing mode.
They may be the line address, the control unit address,  and  the
device  address  in  the  address mode.  They may be the relative



Page 87                  PBHERS.DOC







HBOM                                          April 13, 1990



line number, the relative control unit number, and  the  relative
device number in the relative mode.  They may be the line ID, the
control unit ID, and the device ID in the user specified ID mode.



















































Page 88                  PBHERS.DOC







3270 REFERENCE MANUAL FOR PBH                 April 13, 1990



              3.  3270 REFERENCE MANUAL FOR PBH

3.1  IBM ENVIRONMENT



3.1.1  IBM FAMILY


     Mainframes      : 370 (370/128,370/138,370/158,370/168)
                       303x (3031,3032,3033)
                       308x (3081,3083)

     Mini-computers  : 43xx (4331,4341)
                       32
                       34
                       36
                       38
                       Series/1
                       8100 (with loop of devices)

     Micro-computers : PC (most frames)
                       PC/XT
                       3270/PC (3270 emulation)
                       PC/AT

     Front-end
     Processor (FEP) : 3705-II/80
     (Communication
     Controller)             - 16 lines max
                             - 4 different channels (hosts)

                       3725

                             - 256 lines max
                             - 8 different channels (hosts)



3.1.2  IBM PRODUCTS



3.1.2.1  _O_v_e_r_v_i_e_w










Page 89                  PBHERS.DOC







3270 REFERENCE MANUAL FOR PBH                 April 13, 1990



Operating Systems



     OS :    OS/VS1                    :Operating System
             OS/VS2=MVS
             MVS/XA

     DOS:    DOS/VS                    :Disk Operating System
             DOS/VSE=VSE

     VM:     VM/370 (VM/370 (VM/CMS))  :Virtual Machine
             (MVS,OS/VS1 virtual operating systems)



Communication Procedures

     Access methods (host) :  ACF/TCAM        :Telecom. Access method
                             ACF/VTAM        :Virtual Telecom Access Method
                             ACF/VTAME       :VTAM Extended

     Network Control Program (FEP) :ACF/NCP/VS     :Network Control Program

                                    VM/VCNA
     Remote Job Entry (RJE)

                              -JES2          :Job Entry System
                              -JES3          :      "
                              -NJE           :Network Job Entry
                              -POWER/VSE
                              -RSCS          :Remote Spooling Comm. System

     NCCF         :Network Communication Controller Facility
     NPDA         :Network Program Determination and Application



Applications Products

     IMS/VS         :Integrated Management System
     CICS/VS        :Comm. Interchange Customer Services
     TSO            :Time-Sharing Option
     VSPC           :Virtual Storage Personal Computing
     DPPX (8100)









Page 90                  PBHERS.DOC







3270 REFERENCE MANUAL FOR PBH                 April 13, 1990



3.4.0.1  _O_p_e_r_a_t_i_n_g__S_y_s_t_e_m


The operating system of a  computer  includes  software  programs
that

     o+ schedule jobs

     o+ allocate resources

     o+ handle physical I/O interrupts

     o+ route logical I/O to devices

     o+ perform security measures

Although operating systems can handle a large pool of  terminals,
most  designs are limited to local channel attached devices. With
the  advent  and  demands  of  telecommunications,  hardware  and
software  had  to  be  developed  to  handle  the  communications
specific functions, such as polling, and network control.



3.4.0.2  _T_e_l_e_c_o_m_m_u_n_i_c_a_t_i_o_n_s__A_c_c_e_s_s__M_e_t_h_o_d_s


Telecommunications Access Methods are programs that  specify  how
data  is  to  be  retrieved  (read) and recorded (written) from a
network process to a CPU application (TP Monitor) process.

The more sophisticated Access Method relieves the user of network
level  concerns.  With  an  Access  Method,  a  user may write an
application  program  with  little  or  no   knowledge   of   the
telecommunications devices.

There  are  many  different  Telecommunications  Access   Methods
available from IBM, the two major ones being:


     o+ Telecommunications Access Method (TCAM)

     o+ Virtual Telecommunications Access Method (VTAM)

The TCAM Access Method allows the application to reduce  its  I/O
responsibilities to reading and writing.

With  TCAM,  devices  addresses  are  assigned  to  specific   TP
monitors.

This access method may  interact  with  the  370X  communications



Page 91                  PBHERS.DOC







3270 REFERENCE MANUAL FOR PBH                 April 13, 1990



controller  Network  Control  Program  (NCP) or Emulation Program
(EP).

VTAM is a TCAM spinoff existing in an IBM  virtual  system.  VTAM
relieves  the  mainframe  of  more  telecommunications tasks than
TCAM. VTAM also relies upon  the  370X  Network  Control  Program
(NCP).

With VTAM, a device is able to choose a TP Monitor at the  access
method  level,  increasing  hardware  efficiency.  The TP Monitor
assignment is established and broken down on a per session basis.


3.4.0.3  _T_E_L_E_P_R_O_C_E_S_S_I_N_G__M_O_N_I_T_O_R_S


The communications applications programs  are  commonly  accessed
through a Teleprocessing Monitor  (TP Monitor). Three of the most
common TP monitors are the Customer  Information  Control  System
(CIC's),the   Information   Management  System  (IM's),  and  the
Conversational Monitor System (CMS).


CUSTOMER INFORMATION CONTROL SYSTEM (CICS)


CICS is a system designed to control and organize information  in
a  modern  interactive  enviornment.  It  serves  as an interface
program between an application program and the Access Method.

CICS is a combination data base/data communications system with a
variety of features. It supports several advanced data processing
concepts such as multitasking and multithreading.


     o+ Multitasking allows several applications to  be  processed
       simultaneously, giving each user time intervals of the CPU
       resources.

     o+ Multithreading allows several users to share one  copy  of
       an  application program, yet defines individual work areas
       in memory.

One of several components of CICS is  the  Basic  Mapping  System
(BMS).  BMS  is  a  screen  design  utility  used  to create user
friendly screen formats. Attributes  such  as  field  protection,
character  intensity  levels and auto-numeric shift are available
with BMS.






Page 92                  PBHERS.DOC







3270 REFERENCE MANUAL FOR PBH                 April 13, 1990



INFORMATION MANAGEMENT SYSTEM (IMS)


Information Management System (IMS) is a set of software programs
that interfaces applications with a data base/data communications
system for a variety of batch and on-line applications.

Implemented under OS and DOS, the leased package may  contain  an
optional data communications component.

A data base language, DL/1 is included for  in-program  or  query
type data retrieval.


CONVERSATIONAL MONITORING SYSTEM (CMS)



The Conversational Monitoring  System  (CMS)  is  an  interactive
timesharing  enviornment.  Developed  for the IBM 370, CMS allows
users a variety of interactive capabilities and access to several
TP Monitors.

For example, Tymshare's CMS capabilities include  direct  support
of  directory  and  file  maintenance,  parameter setting program
execution  and  editing  functions.  In  addition,  command  file
creation  and  debugging  tools, along with a variety of compiler
programs, can be accessed through CMS.

3270 and 3270JCL application programs can be entered and executed
via CMS. An additional feature to command (batch) file processing
is deferred execution. This allows jobs to be executed during low
demand periods.



3270 IDS LOCAL COMMUNICATION


There are provisions in the 3270 IDS to  communicate  with  CRT's
and  printers  attached  to  a  CPU via byte multiplexor channel,
where the cluster controller is a channel address  with  each  of
the  maximum  32  devices  having  a  sub-address.  These devices
communicate directly with the operating system, not requiring  an
FEP.  The data streams to these devices differ greatly.

If CPU addressing is at a premium, local devices are not used. If
extremely  fast  channel  response time is desired, local devices
provide extremely responsive service.





Page 93                  PBHERS.DOC







3270 REFERENCE MANUAL FOR PBH                 April 13, 1990



3.8.0.1  _F_R_O_N_T__E_N_D__P_R_O_C_E_S_S_O_R_


In  IBM   system   architecture,   management   of   the   remote
communications  facilities  for  data links is called a Front End
Processor.


FUNCTIONALITY


The management of the remote communications facilities can either
be performed by a set of integrated programs within the CPU or by
a separate processor.

If a separate processor is used, it is referenced by any of three
names:  an FEP (Front End Processor), a TCU (Transmission Control
Unit) or a CC (Communications Controller). FEP usually refers  to
one of IBM's 37XX machines, TCU to IBM's 27XX machines and CCu to
look-alike products manufactured by other vendors.

The primitive FEP units performed an  address  driven  conversion
from   parallel   channel   transmission   to  serial  data  link
transmission.  The subsequent intelligent  units  began  to  take
over  aspects  of  line  management and distribution from the CPU
Access  Method.   The   latest   generation   of   Communications
Controllers  provide complete independence between the lines, the
protocols and devices handled on those lines, and the CPU system.


3705 COMPATIBLE PROGRAMS


Int the current IBM environment, the most common FEP is the  370X
Communications  Controller.  The "x" can be a 1,2,3,4,5 or 6. The
most common is the 3705. The 270x  series  is  the  unintelligent
predecessor  of  the  370x.  The most common programs used in the
3705 are the Emulation Program (EP), the Network Control  Program
(NCP) and the Partitioned Emulation Program (PEP).


EP


The Emulation Program emulates the functional  operation  of  the
IBM  270x Communications Controllers. It allows many CPU programs
written for operation on the  2701.  2702  and  2703  to  operate
through the 370x Communications Controllers without modification.






Page 94                  PBHERS.DOC







3270 REFERENCE MANUAL FOR PBH                 April 13, 1990



NCP


The 370x Network Control Program off-loads  the  network  control
functionality   from   the   Access   Method.  NCP  provides  the
flexibility  necessary  to  meet   increasing   telecommunication
demands.

There are several versions of the Network Control Program.  These
are described as follows:

NCP-1 is compatible with the OS/VSand  OS/MFT  through  the  TCAM
Teleprocessing  Monitor.  It handles logical and physical control
of the TP Network and performs Bisync (BSC) and  async  functions
otherwise handled by the Teleprocessing Access Method.

NCP-2 is compatible with the OS/MVT through TCAM  Version  1  and
includes a PEP extension.

NCP-3 is compatible  with  OS/VS  and  DOS/VS  through  the  VTAM
Teleprocessing  Monitor.  NCP-3  performs  all the functions that
NCP-1 and NCP-2 perform. In  addition,  NCP-3  allows  SDLC  with
certain cluster types.

NCP-4, which can be used with OS/VS and DOS/VS through  the  VTAM
Teleprocessing  Monitor,  combines  the  functionality  of NCP-1,
NCP-2 and NCP-3 while allowing SDLC to  extended  cluster  types,
SDLC over a switched network and SDLC to remote controllers.


PEP


A feature  of  NCP  operation,  called  the  Partioned  Emulation
Programming  (PEP)  Extension, allows the program to operate some
communication  lines  in  Network  Control  Program  mode   while
operating  others in Emulation Program mode. Lines can be defined
for both NCP and EP and then switched from one mode to the  other
by host operator control.

PEP relies upon either TCAM or VTAM.


DATA LINKS


A data link consists of  the  communications  lines,  modems  and
other  communications equipment arranged for data and used in the
transmission of information between two  or  more  stations.  The
terminal  equipment  making  up  a  station can vary from a basic
send/receive reader and printer to a control  unit  with  several



Page 95                  PBHERS.DOC







3270 REFERENCE MANUAL FOR PBH                 April 13, 1990



input and output devices attached to it.

The communications facilities may be obtained from communications
common  carriers  (the  phone  company) or may be provided by the
customer.  The specific data set equipment used at  each  channel
termination   point  (station)  is  determined  by  the  type  of
communications channel and the operational speed of the  terminal
equipment located at each station.

All transmissions are  sent  over  the  line  as  a  sequence  of
binary-coded  signals.  Control  of  a  synchronous  data link is
accomplished by  the  transmission  and  recognition  of  special
line-control characters.


DEFINITION AND ESTABLISHMENT OF DATA LINKS


There are five fundamental phases involved in data  link  control
between any two stations in a communications system.

     o+ Establishment of the  physical  connection  (commonly  RS-
       232C)

     o+ Information exchange

     o+ Release of the logical connection

     o+ Release of the physical connection

The term "physical connection" refers to  a  hardware  connection
between  two  stations.  The  "logical  connection" occurs in the
software when the two stations begin communicating. There can  be
several  logical  connections  simultaneously  occurring over one
physical connection.

The physical connection between two stations can be established:

     o+ via  dialing,  using  one  of  several  station-connection
       procedures.

     o+ via auto-answer at the dialed station.

     o+ via permanent connection over a leased line.

The logical connection is established:

     o+ via contention (bidding for control on a line).

     o+ via polling.




Page 96                  PBHERS.DOC







3270 REFERENCE MANUAL FOR PBH                 April 13, 1990



     o+ via addressing or selection.

     o+ via  identification  exchange  between  the  sending   and
       receiving station.

The information exchange consists of three steps:

     o+ the message - start of message header,  start  of  message
       text, end of text.

     o+ an accuracy check of the information exchange (BCC)

     o+ an acknowledgement of the accuracy of the exchange.

In the 3270 IDS, the Start of Message Header is optional.

The logical connection is  released  at  the  termination  point,
usually when the user issues a LOGOUT command.

The physical  connection  is  broken  by  both  the  sending  and
receiving stations hanging up.


3.16  3270 LINE DISCIPLINE



3.16.1  GENERAL BSC BLOCK FORMAT


The logical data link  connection  is  controlled  by  a  message
synchronization  technique  commonly  called  a "synchronous link
protocol".

Protocols are required for

     o+ BIT SYNCHRONIZATION, so that the receiver knows when a bit
       starts and ends so that it can by sampled.

     o+ CHARACTER  SYNCHRONIZATION,  so  that  the  receiver   can
       determine which bits belong to a specific character.

     o+ MESSAGE  SYNCHRONIZATION,  so  that   the   receiver   can
       recognize   special  character  sequences  that  delineate
       messages.

Minimum requirements for data link control are:

     o+ Bracket information being sent,  thus  distinguishing  the
       information  from other (noise) signals and indicating the
       bits to which the checking mechanism should apply.



Page 97                  PBHERS.DOC







3270 REFERENCE MANUAL FOR PBH                 April 13, 1990



     o+ Identity and thus permit  addressing  of  the  sender  and
       receiver.

     o+ Detect errors and provide recovery.

     o+ Manage the sharing of the link among multiple stations.

Typical protocols  include  the  blocking  of  transmission  into
messages,  employing START-OF TEXT (STX) and END-OF TEXT (ETX) or
other  similar  markers   and   a   positive/negative   (ACK/NAK)
acknowledgment   procedure.    Additional   error  detection  and
correction is provided by block checking.

The three most  common  link  protocols  used  to  transfer  3270
information are BSC, SDLC and DSP.


BSC (Binary Synchronous Communication) was the first  attempt  to
control a line using clocks instead of start/stop characters with
marking in between.

In a clocked  environment,  there  are  bit  changes  continually
occurring  in blocks called characters. It was decided that these
characters would be either EBCDIC (an 8-bit code) or ASCII (a  7-
bit  code  with  one parity bit, totaling 8-bits). In addition to
alphanumeric characters, delineating characters,  indicating  the
beginning  of  a  message (STX) and the end of the message (ETX),
were devised. Special characters to flag link bit synchronization
(PAD/SYN)  and  to  indicate  status and errors data link control
characters were defined. It included an  addressing  scheme  that
allowed multiple users to share a line.

This set of control characters and  control  character  sequences
for  the  synchronized  transmission of binary coded data between
stations in a data communications system  became  the  data  link
protocol, BISYNC or BSC.

When BSC is used as a data link protocol, the control exchange is
determined   by  the  application  being  transmitted.  For   our
purposes, this is the 3270 IDS.

Some of the characteristics of 3270 BSC data link control are :
        1. Half duplex - one direction of data at a time.

        2. Device availability determined by polling.

        3. Master (host system)/Slave (Device Control Unit)
           Master controls the line; Slave must bid for it.

        4. Addressing within text to identify Control Unit and
           Device.



Page 98                  PBHERS.DOC







3270 REFERENCE MANUAL FOR PBH                 April 13, 1990



        5. Application Device status/error indication separate
           from link error control.

        6. Block error checking only done on data messages (and
           only on data portion of message).

        7. Every message individually acknowledged.


NON-TRANSPARENT MODE.


     S S S S                           E  B B P
     Y Y Y T            D.A.T.A        T  C C A
     N N N X                           X  C C D

     32   02                           03     FF (HEX)


                       E B           E B
          BLOCK 1      T C  BLOCK 2  T C
                       B C           B C


TRANSPARENT MODE.


     S S S D S                     D E B B P
     Y Y Y L T       D.A.T.A       L T C C A
     N N N E X                     E X C C D




     NOTE :
     ----           - Two "SYN" character minimum

                    - "BCC" generated by the hardware

                    - Dynamic switch from NON-TRANSPARENT to TRANSPARENT
                      mode




3.16.2  CATAGORIES OF COMMANDS








Page 99                  PBHERS.DOC







3270 REFERENCE MANUAL FOR PBH                 April 13, 1990



3.16.2.1  _P_o_l_l_

     o+ General     Poll

     o+ Specific    Poll


3.16.2.2  _S_e_l_e_c_t_i_o_n__A_d_d_r_e_s_s_i_n_g__o_r__S_e_l_e_c_t_i_n_g



3270 Operations

     o+ WRITE

     o+ READ

     o+ CONTROL


ORDERS

     o+ 2 kinds

     o+ Used to position, define and format data  written  in  the
       buffer,  to  erase  selected unprotected data field and to
       reposition the cursor.

     o+ Specify the printer format


3.18.1  POLL COMMAND 1

PURPOSE : Polling sequences are selection sequences used
          specifically to obtain pending status at a device.

General polls request  status  from  all  devices.  This  command
examines  each  attached  device  in  sequence  to determine if a
status/sense  or  manually  entered  command  is  waiting  to  be
transferred  to  the FEP. Each message is followed by the address
of the device from which it originated.


3.18.1.1  _G_e_n_e_r_a_l__P_o_l_l__F_o_r_m_a_t_


        3270 CU Poll Address
        3270 CU Poll Address
        7F   (hex)
        7F   (hex)




Page 100                 PBHERS.DOC







3270 REFERENCE MANUAL FOR PBH                 April 13, 1990



Example : Polling on CU : C1

             ---------------------------------------------------------
             | S | S | P | E | S | S | CU | CU | 7F | 7F | ENQ | PAD |
             | Y | Y | A | O | Y | Y |Add |Add |    |    |     |     |
             | N | N | D | T | N | N |    |    |    |    |     |     |
             ---------------------------------------------------------

             32   32  FF  37  32  32  C1   C1   7F   7F   2D    FF



3.18.1.2  __N_o_r_m_a_l__a_n_s_w_e_r_s__t_o__G_E_N_E_R_A_L__P_O_L_L

        - EOT   : No operator action has occurred and Status/Sense
                operation is not pending.

        - Status/sense : If status/sense information is pending, this
                 information is sent to the FEP.


        - READ MODIFIED/ SHORT READ : If and operator action has
                occurred that requires reading by the FEP and
                status/sense is not pending, Read Modified
                command is performed.


3.18.2  POLL COMMAND 2


PURPOSE : Same as general poll.

Specific poll sequence requests status from a particular  device.
This  command  addresses  the  3270  Cluster  and  one  device to
determine if a status/sense message or a manual  entered  message
is  awaiting  transfer.  This transfer is automatically done once
the specific poll is detected.



3.18.2.1  _S_p_e_c_i_f_i_c__P_o_l_l__F_o_r_m_a_t

       3270 CU Poll Address

       3270 CU Poll Address

       Device Address

       Device Address

Example : Polling on CU : C1, Device C2



Page 101                 PBHERS.DOC







3270 REFERENCE MANUAL FOR PBH                 April 13, 1990



             -------------------------------------------------------------
             | S | S | P | E | S | S | CU  | CU  | DEV | DEV | ENQ | PAD |
             | Y | Y | A | O | Y | Y | Add | Add | Add | Add |     |     |
             | N | N | D | T | N | N |     |     |     |     |     |     |
             -------------------------------------------------------------

              32  32  FF  37  32  32   C1    C1    C2    C2    2D    FF

             Answer : ---> same as GENERAL POLL





3.18.3  SELECTION ADDRESSING COMMAND


PURPOSE : Selects a 3270 CU and an attached device for
           subsequent operations (WRITE/READ/CONTROL)



3.18.3.1  _F_o_r_m_a_t

        3270 CU Address

        3270 CU Address

        Device Address

        Device Address


NOTE  :  Same  format  as  specific  poll,  but   different   hex
representation for CU (cluster).


Example : Selection Addressing on CU : C1 device C2
















Page 102                 PBHERS.DOC







3270 REFERENCE MANUAL FOR PBH                 April 13, 1990



             -------------------------------------------------
             |  S  |  S  | CU  | CU  | DEV | DEV | ENQ | PAD |
             |  Y  |  Y  | Add | Add | Add | Add |     |     |
             |  N  |  N  |     |     |     |     |     |     |
             -------------------------------------------------

              32     32    E1    E1    C2    C2    2D    FF


             Normal answer :

             - ACK : Address successfully received

             - WACK : (Wait for Acknowledgement) : Device busy

             - RVI : (Reverse Interrupt) : Pending status waiting




3.18.4  3270 OPERATIONS



3.18.4.1  _W_R_I_T_E

                                    CU<======== DATA ==== FEP

       - Write

       - Erase/Write

       - Erase/Write alternate (3274/3276 only)


3.18.4.2  _R_E_A_D

                                    CU ===== DATA =======> FEP


       - Read buffer

       - Read modified

       - Read modified all (3274-1A/1C, 3276-11/12/13/14 only)









Page 103                 PBHERS.DOC







3270 REFERENCE MANUAL FOR PBH                 April 13, 1990



3.18.4.3  _C_O_N_T_R_O_L_

       - Copy

       - Select RM/RB/RMP/RBY/WRT

       - Erase all unprotected (fields)

       - Status/sense

       - NOP (No Operation)


3.18.4.4  _O_R_D_E_R_S_


              SF      Start Field
              SBA    Set Buffer Address
              IC      Insert Cursor
              PT      Program Tab
              RA      Repeat to Address
              EUA    Erase Unprotected Address
































Page 104                 PBHERS.DOC







3270 REFERENCE MANUAL FOR PBH                 April 13, 1990



3.18.4.5  _W_R_I_T_E_

       - Used to load, format and erase device buffer area.

       - Data blocks and orders transferred from host to CU.

Three kinds of WRITE commands :

       ---> Write :  Used to modify existing buffer data.

       ---> Erase/Write:  Used to erase the device buffer
                          before the write operation.

       ---> Erase/Write alternate : Item erase/write.
                          Can handle expanded print capacity mode.

Format





































Page 105                 PBHERS.DOC







3270 REFERENCE MANUAL FOR PBH                 April 13, 1990



             SYN
             SYN
             SYN
             STX
             ESC                    Data link framing
     ------------------------------------------------

             WRITE code
     ------------------------------------------------

             WCC  (Write Control Character)
     ------------------------------------------------

             DATA and ORDERS
     ------------------------------------------------

             ETX
             BCC
             BCC
             PAD                     Data link framing


             WCC      Write Control Character

             Bit 0   :        * (determined by bit 2 through 7)
             Bit 1   :        1 (reserved)
             Bit 2/3 :        Printed-out format (132/40/64/80 char/lines)
             Bit 4   :        Start print (at completion of a WRITE)
             Bit 5   :        Sound alarm
             Bit 6   :        Keyboard restore (lock "1" / unlock "0")
             Bit 7   :        Reset MDT bits (Modified Data Tag)

             Normal answer;

             - ACK   : Operation successfully completed

             - WACK  : Device busy



3.18.4.6  _R_E_A_D_

      - Used to transfer 3270 buffer data, keyboard key data, status
        info from the cluster to the FEP (or host).

Three kinds of READ commands :

       ---> Read buffer ;  All data transferred.

              - from buffer address 0
              - from current buffer address.



Page 106                 PBHERS.DOC







3270 REFERENCE MANUAL FOR PBH                 April 13, 1990



Format


             SYN
             SYN
             SYN
             STX                  Data link framing
     ----------------------------------------------
             CU Address
     ----------------------------------------------
             Device Address
     ----------------------------------------------
             AID   (Attention Identifier)
     ----------------------------------------------
             Cursor Address(SBA)
     ----------------------------------------------
             Order (SF)
             Attribute character
             User DATA
     ----------------------------------------------
             Order (SF)
             Attribute char
             User DATA
     ----------------------------------------------
             TEX
             BCC
             BCC
             PAD



                ---> Read modified : All modified unprotected fields set by
                     the MDT (*) bit are transferred from the CU to the FEP.
                     (NULL characters are not transmitted)

                           - from buffer address 0
                           - from current buffer address.


            ---> Read Modified ALL : (Used with SNA/SDLC enviornment)

Format












Page 107                 PBHERS.DOC







3270 REFERENCE MANUAL FOR PBH                 April 13, 1990



            SYN
            SYN
            SYN
            STX
     --------------------------------------
            CU Address
     --------------------------------------
            Device Address
     --------------------------------------
            READ MODIFIED code
     --------------------------------------
            AID
            Cursor address          Read heading
     --------------------------------------
            Order (SBA)
            Attribute Add+1         First modified field
            DATA
     --------------------------------------
            Order (SBA)
            Attribute Add+1         Second modified field
            DATA
     --------------------------------------
            ETX
            BCC
            BCC
            PAD


            ---> SHORT READ : If CLEAR/PA key is depressed, only AID
                              is transferred to main storage.

            ---> TEST REQUEST READ : If SYS REQ key, this 3270 command is
                                     executed

Format



















Page 108                 PBHERS.DOC







3270 REFERENCE MANUAL FOR PBH                 April 13, 1990



                   SOH
                   %
                   /
                   STX
     ---------------------------------------------------
                   DATA (without AID and cursor address)
     ---------------------------------------------------

     MDT (*) : Modified Data Tag (Bit Array)

               Each bit set represents a modifies unprotected field

            Normal answer :

            - ACK : read operation acknowledged
                    Data transfer is initiated



PURPOSE :       To initiate certain CU/device operations not involved
                  with data transfer

CONTROL           Causes certain printer and display operations.

        ---> COPY : Used to transfer buffer data from one device
                    to another device attached to the same CU>
                    The selected device is the "to" device.


Format
























Page 109                 PBHERS.DOC







3270 REFERENCE MANUAL FOR PBH                 April 13, 1990



             SYN
             SYN
             STX
             ESC
     -----------------------------------------------------
             COPY code
     -----------------------------------------------------
             CCC  (Copy Control Character)
     -----------------------------------------------------
             "FROM" device address
     -----------------------------------------------------
             ETX
             BCC
             BCC
             PAD


             ---> SELECT : Immediate command (3272, 3274-1B only)
                           Device to CU buffer transfer.

                    RM     Read modified (performed before READ MODIFIED)
                    RB     Read Buffer (performed before READ BUFFER)
                    RMP    Read Modified Position (performed before WRITE
                                                   and READ MODIFIED )
                    RBP    Read Buffer Position (performed before WRITE
                                                   and READ BUFFER)
                    WRT    Write (performed before WRITE)


             --->   EAU :  Erase All Unprotected
                           - clear all unprotected fields
                           - reset MDT bits
                           - unlock keyboard
                           - reposition the cursor


                    CCC   Copy Control Character

                    Bit 0 :       *
                    Bit 1 :       1
                    Bit 2/3:      Printout format
                    Bit 4 :       Start Print
                    Bit 5 :       Sound alarm
                    Bit 6/7:      Type of data to be copied

           Normal answer :

           Same as WRITE operation






Page 110                 PBHERS.DOC







3270 REFERENCE MANUAL FOR PBH                 April 13, 1990



            ---> Status/sense :     (3272/3274-1B only)

                            0       CR      COMMAND REJECT
                            1       IR      INTERVENTION REQUIRED
                            2       BOC     BUS OUT CHECK
                            3       EC      EQUIPMENT CHECK
                            4       DC      DATA CHECK
                            5       US      UNIT SPECIFY
                            6       CC      CONTROL CHECK
                            7       OC      OPERATION CHECK


            CR      :       Set if INVALID COMMAND received
            IR      :       Set if addressed device is UNAVAILABLE
                            or NOT READY (device switched off)

            BOC     :       Set if BAD PARITY detected on data during
                            CU-device transfer

            EC      :       Set if DEVICE ERROR

            DC      :       Set if BAD PARITY detected on data during
                            CU-device transfer

            US      :       Set if DEVICE ERROR

            CC      :       Set if TIME-OUT condition detected

            OC      :       Set if received COMMAND can't be executed
                            (Invalid Buffer Address, bad chained command.)



            ---> NOP :      No operation. To retrieve pending status.



3.18.4.7  _O_R_D_E_R_S


PURPOSE : End-user data formatting


START FIELD : SF (2 bytes).    Hex : 1D

        Allows identification and notifies the CU that  the  next
byte
        is an attribute character.


SET BUFFER ADDRESS : SBA (3 bytes).   Hex : 11



Page 111                 PBHERS.DOC







3270 REFERENCE MANUAL FOR PBH                 April 13, 1990



        Specifies new buffer address from which WRITE operations
        are to start or to continue.

INSERT CURSOR : IC (1 Byte).   Hex : 13

        Repositions the cursor to the location specified  by  the
current
        buffer address.


PROGRAM TAB : PT (1 Byte).     Hex : 05

        Advances the current buffer address to the address of the
next
        unprotected field.


REPEAT TO ADDRESS : RA (4 bytes).   Hex ; 3C

        Repeats special character (NULL, space) from the current
        buffer position to the address specifies with this order.


ERASE UNPROTECTED TO ADDRESS : EUA (3 bytes).

        Inserts  NULLs  in  all  unprotected   buffer   character
locations
        from the current address to the end.
        If stop address = current  address  ==>  all  unprotected
locations
                        in the buffer are erased.
        If stop address < current address ==> the  EUA  operation
wraps
                        from the bottom row of the buffer to  the
top
                        row.



3.18.5  ADDITIONAL COMMENTS


The 3270 Application Program

A host application program controls the  operation  of  the  3270
IDS,  directing  the  flow of information and performing read and
write operations on specific devices.

Reading operations occur when the 3270 host  application  program
polls  a  CU  with  one  or  more  devices that require servicing
(because a user at the device depressed an  attention  generating



Page 112                 PBHERS.DOC







3270 REFERENCE MANUAL FOR PBH                 April 13, 1990



key  (ENTER,  PF).  Data  in the buffer of the display station is
transferred into the CU's buffer where it will  be  formatted  as
required and then transmitted to the host.

For write operations, the 3270 host application program assembles
a  data  stream,  sends  a  select  command indicating a specific
device to the CU and, if the device is available,  transfers  the
data stream to the CU buffer. The CU processes the data as needed
and then transfers it into the intended device's buffer where  it
will be displayed or printed.

The data stream sent  from  the  3270  host  application  program
includes  user data and control information. Control information,
which is in the form of 3270 commands and orders,  tells  the  CU
how the data should appear on the intended device.

The 3270 commands include READ, WRITE and  COPY  commands.  WRITE
commands  cause  data to be written to the screen with or without
first erasing the current contents of the buffer.  READ  commands
specify  that  the  HOST  read  either  the  entire contents of a
device's buffer or only those  fields  that  have  been  modified
since the last operation.

The 3270 commands use address information to identify fields  and
attribute characters to specify its characteristics.

ORDERS specify the beginning fields, position the  cursor,  do  a
program  tab or repeat characters in the data stream. Orders also
control printer operations such as carriage return and form feed.

In any given 3270 IDS, a 3270 application program talks to a  CU.
The 3270 application program always thinks that the CU is locally
attached regardless of the actual hardware configuration. It  the
CU  is  at a remote location, a front end process establishes and
maintains the logical connection to the CU. A program called  the
"network  control program" is continuously communicating with the
CU, either POLLING "Are you there and do you  have  something  to
send?"  or  SELECTING  "Is a specific device there and may I send
something to it?". The network control function can  be  part  of
the  Teleprocessing  Access  Method  (TCAM)  or a part of the FEP
Network Control Program (NCP).

The CU may be an IBM 327X product or it may be a program  running
on a small system (System/34, etc.) or on a micro computer (PC).


Although the 3270 devices think that they are responding directly
to the 3270 host application messages, all communication from the
host is actually being directed to the CU.  The  CU  responds  to
each  message  sent by the host, whether the attached devices are
active or not.



Page 113                 PBHERS.DOC







3270 REFERENCE MANUAL FOR PBH                 April 13, 1990



BISYNC protocol  uses  a  Master/Slave  premise  for  half-duplex
communication. Half-duplex means that data can travel in only one
direction at a time. The network control program  is  the  Master
station  on  the  circuit  and  the CU is the Slave. All data and
status transfer is accomplished by the use of a command structure
which  is  always  initiated  by the Master station. All commands
require a response from the Slave station, even if  the  response
is  "no",  "Wait"  or  "Instead  of  you sending, I would like to
send".

There are three types of commands: READs, WRITEs and  COPYs.  See
Appendix A for a detailed explanation of each of these commands.

The following is the 3270 BSC Protocol for a READ command


     DISPLAY         CONTROL         FRONT           HOST
     STATION         UNIT            END             APPLICATION
     -----------------------------------------------------------

                             <-------POLL
                     NO DATA-------->
     (User hits
      AID key)
     DATA----------->        DATA
                             <-------POLL
                     DATA----------->
                                     DATA---------->DATA
                                             <------DATA OK

                             <-------DATA OK
                     NO DATA-------->
                             <-------POLL


     -----------------------------------------------------------




The following is the 3270 BSC Protocol for a WRITE command.













Page 114                 PBHERS.DOC







3270 REFERENCE MANUAL FOR PBH                 April 13, 1990



     DISPLAY         CONTROL         FRONT           HOST
     STATION         UNIT            END             APPLICATION
     -----------------------------------------------------------

                             <-------POLL
                     NO DATA-------->
                                             <-------DATA SELECT
                             <-------SELECT
              <-------CHECK DEVICE
     OK
                      DEVICE READY--->
                                            <-------DATA
                              <-------DATA
               <------DATA
     DATA
                      OK------------->
                              <-------NO DATA
                              <-------POLL


     -----------------------------------------------------------


Here are some facts to remember concerning READ commands:
        * In remote 3270 BISYNC, only two READ commands are supported:
          READ BUFFER and READ MODIFIED. A poll is an implied READ
          MODIFIED.

        * The response to the READ sent by the CU is limited to a
          maximum of 256 characters per message. If the response
          message is larger than 256 characters, it is sent in blocks.
          Message blocks preceding the final transmission are
          terminated with the ETB control character. The final block
          of the message ends with the ETX control character.

        * The CU is responsible for all responses to READ commands.
          Generally responses are formatted from a buffer in the
          Control Unit facility. It is an internal matter between the
          CU and the 3270 device how the device communicates with the
          CU.

        * While the response originating from a display station
          can include a command or a status message, a response
          originating from a printer can only be a status message.
          All 3270 printers are output only.

These are important facts about WRITE commands"
        * A SELECT command issued from the 3270 host application
          identifies the device to which data is to be written.
          The SELECT always precedes a WRITE command because there
          is no address field in the WRITE command format./



Page 115                 PBHERS.DOC







3270 REFERENCE MANUAL FOR PBH                 April 13, 1990



        * The SELECT is identical in format to the specific poll,
          but the CU address is different by one bit.

        * The text portion of the WRITE command contains control
          characters, called Orders, that indicate how the display
          screen is to be formatted.

        * There is no limit to the length of the text portion of
          the message

        * It is the responsibility of the Control Unit function to
          respond whether data has been written to the device
          correctly. In cases where acknowledgment between the
          device and the CU is delayed, a Temporary Text Delay is
          issued in lieu of the acknowledgment.

        * The receipt of an ETX at the end of the WRITE command is
          considered to be and implied READ MODIFIED command to the
          CU function. So the CU may respond to it with data.
          This is called Limited Conversational Mode (LCM).


3.18.6  EXAMPLES OF INTERCHANGES































Page 116                 PBHERS.DOC







3270 REFERENCE MANUAL FOR PBH                 April 13, 1990



     HOST                                     TERMINAL

     GENERAL POLL

     [SYN SYN CUA CUA DVA DVA ENQ PAD] ----->
      32  32  C3  C3  7F  7F  2D  FF

     RESPONSE

     <----- [SYN SYN EOT PAD]
             32  32  37  FF

     GENERAL POLL

     [SYN SYN CUA CUA DVA DVA ENQ PAD]
      32  32  C3  C3  7F  7F  2D  FF

     RESPONSE - SHORT READ

     <----- [SYN SYN STX CUA DVA AID BCC BCC PAD]
             32  32  02  C3  D2  6D          FF

     RESPONSE

     [SYN SYN ACK  0 PAD] ----->
      32  32  10  70 FF

     LINE TURNAROUND

     <----- [SYN SYN EOT PAD]
             32  32  37  FF

     GENERAL POLL

     [SYN SYN CUA CUA DVA DVA ENQ PAD] ----->
      32  32  C3  C3  7F  7F  2D  FF

     RESPONSE

     <----- [SYN SYN EOT PAD]
             32  32  37  FF

     SELECT

     [SYN SYN SCUA SCUA DVA DVA ENQ PAD] ----->
      32  32  E3   E3   D2  D2  2D  FF



     RESPONSE




Page 117                 PBHERS.DOC







3270 REFERENCE MANUAL FOR PBH                 April 13, 1990



     <----- [SYN SYN ACK  0 PAD]
             32  32  10  70 FF

     WRITE COMMAND

     [SYN SYN STX ESC SMD WCC SBA ADR ADR G O O D sp M O R N I N G SF ATR
      32  32  02  27  F5  C3  11  40  40                           1D F0

     SBA ADR ADR A C C O U N T sp N U M B E R : SF ATR IC SBA ADR ADR
     11  C2  60                                 1D  50 13  11  C2  F6

     SF ATR 1 6 8 SF ATR ETX BCC BCC PAD] ----->
     1D 7D        1D F8  03          FF

     RESPONSE

     <----- [SYN SYN ACK  1 PAD]
             32  32  10  70 FF

     LINE TURNAROUND (OPTIONAL IF IMMEDIATELY FOLLOWED BY GENERAL POLL)

     [SYN SYN EOT PAD] ----->
      32  32  37  FF

     GENERAL POLL

     [SYN SYN CUA CUA DVA DVA ENQ PAD] ----->
      32  32  C3  C3  7F  7F  2D  FF

     RESPONSE

     <----- [SYN SYN EOT PAD]
             32  32  37  FF

     GENERAL POLL

     [SYN SYN CUA CUA DVA DVA ENQ PAD] ----->
      32  32  C3  C3  7F  7F  2D  FF

     RESPONSE - LONG READ

     <----- [SYN SYN STX CUA DVA AID ADR ADR SBA ADR ADR 0 1 3 5 6 9
             32  32  02  C3  D3  70  C2  F0  11  C2  F0

            SBA ADR ADR 1 6 8 ETX BCC BCC PAD]
            11  C2  F7        03          FF


     RESPONSE

     [SYN SYN ACK  0 PAD] ----->



Page 118                 PBHERS.DOC







3270 REFERENCE MANUAL FOR PBH                 April 13, 1990



      32  32  10  70  FF

     LINE TURNAROUND

     <----- [SYN SYN EOT PAD]
             32  32  37  FF

     GENERAL POLL

     [SYN SYN CUA CUA DVA DVA ENQ PAD] ----->
      32  32  C3  C3  7F  7F  2D  FF

     RESPONSE

     <----- [SYN SYN EOT PAD]
             32  32  37  FF

     SELECT

     [SYN SYN SCUA SCUA DVA DVA ENQ PAD] ----->
      32  32  E3   E3   D2  D2  2D  FF

     RESPONSE

     <----- [SYN SYN ACK  0 PAD]
             32  32  10  70 FF

     WRITE

     [SYN SYN STX ESC CMD WCC SBA ADR ADR I L L E G A L sp L O G O N . sp
      32  32  02  27  F5  C7  11  4B  F2

     T R Y sp A G A I N SF ATR ETX BCC BCC PAD] ------>
                        1D  60  02

     RESPONSE

     <----- [SYN SYN ACK  1 PAD]
             32  32  10  61 FF

     LINE TURNAROUND

     [SYN SYN EOT PAD] ----->
      32  32  37  FF










Page 119                 PBHERS.DOC







3270 REFERENCE MANUAL FOR PBH                 April 13, 1990



3.18.7  SDLC OVERVIEW



3.18.7.1  _I_n_t_r_o_d_u_c_t_i_o_n_


In the above description of BSC, there are as many  disadvantages
and   inefficiencies  as  good  points.  As  data  communications
matured, so did the requirements  of  the  link  control.  Higher
speeds  of  transmission  imposed a new set of possibilities. IBM
responded with a data link control mechanism both  simpler  (from
an application point of view) and more efficient.

SDLC (Synchronous Data Link Control) in an  SNA  (System  Network
Architecture)   enviornment   removed   the   need  for  polling,
individual acknowledgment of messages and data  link  application
dependency.   Areas, such as application error/status indication,
were moved to the text level and the remaining functions of  pure
data link control were streamlined.

These are some of the characteristics of SDLC:
        1. Full duplex.

        2. Messages acknowledged in groups, called "windows".

        3. Devices availability determined by session establishment
           at the application level, the only knowledge of physical
           transmission media necessary in SDLC.

        4. Master/Slave application level does not affect link
           utilization.

        5. Link addressing independent of device.

        6. Only link error checking on all characters.

        8. Smaller set of control characters/bit sequences.

SDLC is a bit synchronous error  control  system  with  flags  in
front   of   and  behind  data  messages.  This  flag  (01111110)
interrupts the idle line spacing state to indicate the  beginning
of  a message. Within the message, anytime a contiguous string of
five high bits occurs (indicating the possibility of a  data  bit
string  being interpreted as a flag) the sending program "stuffs"
a zero bit. At the receiving program, anytime  the  bit  sequence
01111110  is detected, the trailing 0 bit is stripped, preserving
the integrity of the data and the flag.

For error control checking, a 16 bit  sequence  called  an  "FCS"
(Frame  Check  Sequence),  is  placed  within the flag delimiters



Page 120                 PBHERS.DOC







3270 REFERENCE MANUAL FOR PBH                 April 13, 1990



(subject to bit stuffing) and it checks everything following  the
first flag.

This section provides the in-depth discussion of the IBM SNA/SDLC
protocols.  Most  of  the SDLC functions, features and procedures
are  discussed  here,  except  the  SDLC   loop   configurations.
Synchronous  Data  Link  Control  (SDLC),  developed by IBM, is a
discipline for serial-by-bit information  transfer  over  a  data
communication  channel.  Transmission  exchanges  may  be two-way
simultaneous or  two-way  alternate.  The  communication  channel
configuration  may  be  point-to-point or multipoint; a point-to-
point configuration may be nonswitched or switched. SDLC includes
comprehensive  detection and recovery procedures for transmission
errors that may be introduced by the communication channel.

To summarize, there are five basic data link configurations:
- Half-duplexed, point-to-point, switched
- Half-duplexed, point-to-point, nonswitched
- Half-duplexed, multipoint, nonswitched
- Duplexed, point-to-point, nonswitched
- Duplexed, multipoint, nonswitched

Note  :  an  additional  configuration  half-duplexed,multipoint,
switched, can also be achieved by using SDLC discipline.


3.18.7.2  _S_D_L_C__O_p_e_r_a_t_i_n_g__C_h_a_r_a_c_t_e_r_i_s_t_i_c_s_


Bit synchronization and Invert-On-Zero Coding :

A  synchronous  transmission  is   time-based   to   enable   the
identification  of  sequential  binary  digits.  SDLC  procedures
assume that bit synchronization is provided by either the DCE  or
the DTE.

When DCE's do not provide  received-data  timing,  the  DTE  must
provide  invert-on-zero transmission coding method (also known as
NRZi, Non-Return to Zero Inverted) to reduce the  probability  of
losing  synchronization. If invert-on-zero transmission coding is
used, it must be used by all DTE's on the data link.

Zero insertion, a  characteristic  of  SDLC  procedures,  creates
transition when extended periods of binary 1 transmission occur.










Page 121                 PBHERS.DOC







3270 REFERENCE MANUAL FOR PBH                 April 13, 1990



3.18.7.3  _P_r_i_m_a_r_y__a_n_d__S_e_c_o_n_d_a_r_y__S_t_a_t_i_o_n_s_


Two types of stations are used in SDLC communications  :  primary
and  secondary stations. A primary station has the responsibility
for controlling  a  data  link;  it  issues  commands.  Secondary
stations    receive    commands   and   return   responsed.   All
communications on a data link are from the primary station to one
or  more  secondary stations, and from a secondary station to the
primary station. There can be only one primary station on a  data
link at one time.



3.18.7.4  _T_r_a_n_s_m_i_s_s_i_o_n__S_t_a_t_e_s_


Three transmission states can exist on a communication channel :
        - Transient state
        - Idle state
        - Active state
Only one of these states can exist on a channel at any one time.

The transient state exists  when  the  communication  channel  is
being  conditioned  before  initial  transmission  and after each
transmit-receive reversal or turnaround.

A station perceives the existence of an  idle  link  when,  after
receiving a succession of 15 consecutive binary 1's, it continues
to receive binary 1's. The channel configuration  determines  the
appropriate action, as follows :
        - Half-duplex, primary or secondary - no signal (carrier off)
        - Duplex, multipoint, secondary - no signal (carrier off)
        - Duplex, multipoint, primary - all 1's (mark hold)
        - Duplex, point-to-point, primary or secondary - all 1's (mark
          hold)
When a station is transmitting or receiving either information or
data  link  control  signals, the active state exists. The active
state also exists when a series of flags are being transmitted. A
duplex  data  link may be active in one direction and idle in the
other.


3.18.7.5  _F_r_a_m_e__F_o_r_m_a_t_


Each SDLC transmission frame has the same specific format :
        - A beginning flag (F) that indicates the beginning of the
          frame
        - An address (A) field that identifies the secondary station
          that is sending (or is to receive) the frame



Page 122                 PBHERS.DOC







3270 REFERENCE MANUAL FOR PBH                 April 13, 1990



        - A control (C) field that specifies the purpose of the
          particular frame
        - An optional, information (I) field that contains information
          data
        - A frame check sequence (FCS) field that enables the receiving
          station to check the transmission accuracy of the frame
        - An ending flag (F) that signals the end of the frame.
Each of these fields contains either 8 bits or a  multiple  of  8
bits.


                     -------------------------------------
                     |                                   |
                     |  F  |  A  |  C  |  I  | FCS |  F  |
                     |                                   |
                     -------------------------------------

Both beginning and ending flags  have  the  binary  configuration
01111110

The control field defines the function of the frame. The  control
field  can  be  in  one  of  three  formats  : unnumbered format,
supervisory format, or information transfer format.  Each  format
includes a special P/F bit among its 8 bits.

A P (poll) bit is sent to a secondary station to require that  it
initiate  transmission;  an  F  (final)  bit  is  sent to primary
stations  by  a  secondary  station  in  the  last  frame  of   a
transmission.

The information field must be a multiple of 8 bits. In each 8 bit
grouping  (octet),  the low-order bit is sent first and the high-
order bit is sent last.



3.18.7.6  _C_o_n_t_r_o_l__F_i_e_l_d__F_o_r_m_a_t_s


The control field contains a command or a response, and  sequence
numbers where applicable.

Three types of control field formats (see figure 4.0) are used to
perform   numbered  information  transfer  (I  frames),  numbered
supervisory functions (S frames) and unnumbered control functions
(U frames).








Page 123                 PBHERS.DOC







3270 REFERENCE MANUAL FOR PBH                 April 13, 1990



3.18.7.7  _I_n_f_o_r_m_a_t_i_o_n__T_r_a_n_s_f_e_r__F_o_r_m_a_t__-__I


The I format is used to  perform  an  information  transfer.  The
functions of N(S), and N(R) and P/F are independent; i.e., each I
frame has an N(S), and N(R) which  may  or  may  not  acknowledge
additional I frames received by the primary or secondary station,
and a P/F bit.



3.18.7.8  _S_u_p_e_r_v_i_s_o_r__F_o_r_m_a_t__-__S_


The  S  format  is  used  to  perform  link  supervisory  control
functions such as acknowledge I frames, request retransmission of
I frames, and to request a temporary suspension  of  transmission
of I frames.



3.18.7.9  _U_n_n_u_m_b_e_r_e_d__F_o_r_m_a_t__-__U_


The  U  format  is  used  to  provide  additional  link   control
functions. This format contains no sequence numbers.



3.19  3270 TYMNET NETWORK SUPPORT



3.19.1  ACT Network Environment Specifications

--->   Tymnet Engine running under ISIS-II operating system.

--->   One bisynchronous/synchronous port for each line configured for
       up to 9.6 kbps.

--->   3270 HI and TI provide access to users on switched and
       leased lines in a point-to-point or multipoint
       environment.

--->   One terminal and host interface for ISIS-II job slot.

--->   The terminal interface will automatically shift between
       normal or slow poll modes and will be based upon line
       activity.

--->   Each device (terminal or printer) uses a separate



Page 124                 PBHERS.DOC







3270 REFERENCE MANUAL FOR PBH                 April 13, 1990



       virtual circuit through the network.

--->   Different terminals on the same cluster may be targeted
       to different hosts and different applications.

--->   The terminal or host interface provides local control
       of the polling, selecting and acknowledgement of 3270
       cluster or host.

--->   Two separate polling process.

--->   A logon from a device to a specific host can be done

               either manually         : MANUAL LOGON
               or automatically        : STORED LOGON

--->   Several additional features are available :

               - PVC : Permanent Virtual Circuit

               - EDF : Early Data Forwarding

               - DSP : Display System Protocol (IIX Dialect)

               - LUD : Local User Directory

               - TGP : Tymnet Gateway Protocol

               - TRANSPARENCY

               - VIRTUAL MODES

               - CMT/3270

--->   3 Modes

               - Native Mode

               - Virtual Terminal Mode

               - Virtual Host Mode


NOTE : Only DATA is carried across the network (not the polling)










Page 125                 PBHERS.DOC







3270 REFERENCE MANUAL FOR PBH                 April 13, 1990



3.19.2  HARDWARE LEVEL

       3270 protocol is working on Synchronous/Bisynchronous ports:
       Sync port :     TC,RC,TD,RD,RTS
       Bisync port :   TC,RC,TD,RD,RTS,CTS,DTR,DSR

       Sync/Bisync ports can be attached to :
             Universal CROSS-OVER
             MODEM

       RTS/CTS handshake :
       The 3270 is a half-duplex protocol. Before sending data,
       the DTE must raise its 'RTS', waits for 'CTS', sends data and
       lowers its 'RTS'. Once these transmission is finished, the DCE
       can proceed in the same way.
       For the Full-Duplex modem especially, we can raise 'RTS' and
       wait for 'CTS' answer at the line set-up. That's it.
       ---> Finally, in such cases, we don't need to wait for the
       turn around time (modem stabilization).


       The 3270 Level 1 handling respects the V.24 recommendations.
       ---> So, we have DTR/DSR handshake between DTE and DCE (if
            needed) and then RTS/CTS handshake (if needed)


       Either LEASED and SWITCHED lines can be defined

       --->  Leased  : No DTR/DSR handshake is required
                       DTR is always provided by the Sync/Bisync port.

       --->  Switched lines : DTR/DSR handshake required


       On SYNC port, the RTS signal is always in high position.


3.19.2.1  _I_I_X__:__I_N_F_O_R_M_A_T_I_O_N__I_N_T_E_R_F_A_C_E__E_X_C_H_A_N_G_E


Several interfaces in the network need to communicate information
at  a  level above the network layer. Both the originator and the
terminator of a circuit need to know  what  form  of  message  is
acceptable to the other end before this communication can begin.
First :         Determine if both ends are intelligent enough to
                communicate their intelligence level.

                - SMART or DUMB interfaces.

--->    IIX is invoked only when both ends are SMART.




Page 126                 PBHERS.DOC







3270 REFERENCE MANUAL FOR PBH                 April 13, 1990



Second :       A method of communicating these capabilities is defined.




DETERMINING INTELLIGENCE


Each end of a circuit must know if the other end  is  capable  of
supporting  IIX. An interface capable of IIX is considered SMART.
When  a  caller  requests  a  circuit  from  the  supervisor   an
indication  of whether this caller is SMART or DUMB is also sent.
If this information is lacking, the caller is considered DUMB.

When the circuit is completed the supervisor  will  inform  smart
interfaces  (both  ends  if  both are smart) whether the other is
smart or dumb.

Dumb ends are told nothing of the intelligence of the other  end.
Therefore,  if  one end is smart, it will expect an indication of
the other end's intelligence  before  it  considers  the  circuit
completed.

At this point, both ends are either smart or dumb. If  both  ends
are  dumb,  then  the  interaction  is complete and communication
continues as if IIX had never been  invoked.  If  both  ends  are
smart, then IIX is invoked.

NOTE :
                 SMART interfaces :     PBT/PBH/XCOM/CMT

                 DUMB  interfaces :     ACOM(tymcom)/ISCS(consat)




DETERMINING THE IIX DIALECT



Before any other information can be exchanged, the called and the
caller  must  know what dialect (if any) will be used. Therefore,
the caller of a circuit will send this information as soon  as  a
circuit  from a smart caller is established. The caller will then
wait for a response from the called. The called will send nothing
on  a  circuit  to  a  smart  caller  until  it has received this
response from the caller.


This first message from the circuit caller is a list of  all  the
dialects that the caller is willing to support at this time. They



Page 127                 PBHERS.DOC







3270 REFERENCE MANUAL FOR PBH                 April 13, 1990



are listed in descending order of desirability. The  caller  will
pick  one of these dialects and a dialect accepted message to the
caller that indicates the chosen dialect. The called cannot  send
anything  until it receives the response from the caller. It then
may start using the chosen dialect. The caller may us the dialect
as soon as it sends the response.

A dialect exchange may be initiated again  at  any  time  and  by
either end of the circuit.


IIX MESSAGE STRUCTURE



     1/      SIIX flag.  Start IIX.

     2/      COMMAND (type command : 2 bytes)
             RESPONSE

     3/      FIELD LENGTH (optional)

     4/      COMMAND or
             RESPONSE (optional)

     5/      TIIX flag (terminate IIX)


TWO KINDS OF MESSAGES

GLOBAL (supported by all SMART interfaces)

8080    SELECT DIALECT COMMAND
8081    SELECT DIALECT RESPONSE
8082    GATEWAY REACHED SMART HOST
8083    GATEWAY REACHED DUMB HOST
8084    NORMAL LOGON STATUS
8085    RESYNCHRONIZE INTERFACE EXCHANGE
8086    INTERFACE ID AND VERSION
8087    REQUEST INTERFACE ID AND VERSION

DIALECT DEPENDENT

IIX is a general name defining that two kinds of interfaces  have
to communicate (including protocol conversion).  Depending on the
different interfaces, the IIX dialects were given  the  following
names:







Page 128                 PBHERS.DOC







3270 REFERENCE MANUAL FOR PBH                 April 13, 1990




             X.75                            X.25
                        ---TURKEY---


             3270                            X.25/X.75
                        ---D.S.P.---


             ASCII                           X.25
                        --- T. PAD---


             TYMCOM                          X.25
                        --- H. PAD---





3.22.0.1  _D_._S_._P__:__D_I_S_P_L_A_Y__S_Y_S_T_E_M__P_R_O_T_O_C_O_L


In an SNA environment, SDLC was an excellent  solution.  However,
many  IBM  shops  had  a  large  investment  in  BSC hardware and
software that needed to be supported efficiently as well.

In addition, the advent of Public Packet Switched Networks  as  a
cost  effective  alternative  for data transmission imposed a new
set  of  problems  and  possibilities.  The  challenge   was   to
transparently  place a Bisync 3270 exchange in a packet switching
environment  without  the  wasteful  end-to-end  poll  and   link
control.  This  exchange must not detract from any of the current
3270 capabilities. Yet it must be compatible with many  different
public networks.

The CCITT (Consultative Committee of International Telephone  and
Telegraph  Companies)  had already defined a uniform standard for
Public Data Network access. This standard is known  as  x.25.  It
became  the  chosen  transport  mechanism  for  the  3270  Bisync
exchange.

The design and  implementation  team,  including  TYMNET,Canada's
DATAPAC  and GTE-Telenet, defined a basic mandatory and secondary
optional implementation called "3270 DSP" or 3270 Display  System
Protocol.  Since  its  introduction,  many vendors have developed
either Front End Processor programs (to run in a FEP 370x  or  in
an  IBM-like  FEP)  or Cluster Controller programs to communicate
via x.25 in a 3270 DSP format. The x.25 connection is  maintained
by  the  public  network. The DSP is exchanged across networks to
another DSP connection at the Device end or to  another  x.25  or



Page 129                 PBHERS.DOC







3270 REFERENCE MANUAL FOR PBH                 April 13, 1990



network  interface  able  to  decode  the  DSP into a 3270 Bisync
exchange.

By using  an  HDLC  (High-Level  Data  Link  Control)  data  link
protocol,  all  of  the  advantages  of  SDLC  are  gained  while
utilizing older Bisync equipment and  host  system  software.  In
addition,  the ability of SNA VTAM to choose application programs
per device is implemented. Each device creates  its  own  virtual
connection  through  the  networks  with  preceding  host address
requests  allowing  for  each  session  to  access  a   different
application program.

DSP is an IIX Dialect  system  between  x.25/x.75  and  the  3270
interfaces.  It allows 3270 devices to communicate with x.25/x.75
through the network.

The 3270 DSP has been endorsed  by  the  carriers  operating  the
following packet switched networks :
                        DATAPAC - TELENET - TYMNET

The 3270 DSP enables an EBCDIC 3270 type  device  to  communicate
through  an  x.25  interface  to  other  hosts  or networks which
support the 3270 DSP protocol.

The 3270 DSP is a fourth layer of protocol on top  of  the  three
layers  of  x.25  that is used to pass 3270 specific information.
This includes  start  and  end  of  screen  data  indicators  and
terminal  address.  The FEP must be programmed to understand x.25
and to convert the 3270 DSP messages and  data  to  the  internal
representation  they would have had, had they arrived on the 3270
line. By doing so, the 3270 host applications are indifferent  to
whether  the  actual  data communication are 3270 or 3270 DSP via
x.25

This  access  can  be  international,  passing  through  multiple
networks using x.75 gateways as well.

The use of 3270 DSP frees the  host  FEP  from  the  overhead  of
polling  and  more importantly, allows a single network interface
access from many 3270 terminals.

Asynchronous  terminals   converted   to   a   packet   assembler
disassembler (PAD) and other x.25 hosts on the networks. The 3270
bisynchronous protocol os limited to a maximum speed of 9.6  kbps
while  x.25  is  operational today at 64 kbps. The elimination of
the polling in the FEP  together  with  higher  speed  lines  can
significantly  improve  the  capacity  of  the FEP, thus reducing
further the cost of the service offered.

DSP calls will be originated from the network toward the  x-line.
Dialect  choice of DSP will be offered when receiving a call from



Page 130                 PBHERS.DOC







3270 REFERENCE MANUAL FOR PBH                 April 13, 1990



the network. Then a virtual circuit will be built  from  the  DSP
interface to the XCOM.

When we receive the call request from the  x-line,  we  can  tell
that  it  is  a DSP originated call by looking at the protocol ID
field. The circuit destination in this  case  has  to  be  a  DSP
interface. (DSP dialect value : 8084)

Code :

              87     CALLED ADDRESS
              88     CALLING ADDRESS
              89     CALL USER DATA
              8A     INTERRUPT
              8B     INTERRUPT CONFIRMATION
              8C     NETWORK UTILITY
              8D     FACILITY
              91     RESET CONFIRAMTION
              92     CALL ACCEPT
              93     TURKEY LEVEL
              94     DATA
              95     CLEAR INDICATION
              96     RESET INDICATION
              97     CLEAR INFORMATION
              98     RPOA SELECTION
              99     PVC REQUEST
              9A     PVC CONFIRMATION


3.22.0.2  _L_U_D__:__L_O_C_A_L__U_S_E_R__D_I_R_E_C_T_O_R_Y


The LUD feature implemented in the PBH (3270 HIF)  only  provides
an  additional security. In fact, it allows or disallows login by
specific usernames.  The LUD defines  the  device  access  rights
that  are  associated  with  a  particular  username  or group of
usernames. If the LUD is not defined, any  usernames  may  access
any interface device.

When specified, each LUD  entry  describes  a  list  of  relative
device numbers that a given username may access.

Each entry consists of two parts :

        - A name definition specifies the first two characters of
          the username

        - A device definition specifies which device a username with
          the required first two characters may access.

The login process rejects any usernames not in the LUD  unless  a



Page 131                 PBHERS.DOC







3270 REFERENCE MANUAL FOR PBH                 April 13, 1990



list of devices accessible by unlisted names is provided.

--->    The first LUD entry determines this option when "0" (zero)
        is the LUD value of the entry

If devices are assigned to the first LUD entry,  then  names  not
appearing in the remaining entries may be assigned.

If devices are not assigned, then only  names  appearing  in  the
list may access an interface device.

Thus, the LUD provides a second security level in addition to the
Supervisor  one.  Access  can  restricted  from  certain users to
certain host applications.



NOTE : LUD is a PBH feature ONLY (not for PBT)


3.22.0.3  _V_i_r_t_u_a_l__H_o_s_t__M_o_d_e__:__V_H_M_


An ASCII terminal attached to a ISCS (consat)  can  be  access  a
3270 host through a PBH (3270 HI).

With this configuration, the PBH translates ASCII to  EBCDIC  and
formats data.

The terminals supported are :
        - PERKIN-ELMER 1200
        - TYMSHARE 470
        - IBM 3101

The ASCII terminal acts as a 3270 terminal by emulating  most  of
the IBM PK keys.

ASCII printers are supported either :
        - attached to a terminal ---> Associate(or Hardcopy) printer
        - attached to a printer port --> real printer


3.22.0.4  _C_M_T__:__C_H_A_R_A_C_T_E_R__M_O_D_E__T_R_A_N_S_L_A_T_O_R


The purpose of CMT is quite similar  to  the  Virtual  Host  Mode
feature except :
        . CMT is a separate slot from PBT/PBH

        . CMT supports up to 6 kinds of terminals now, which are




Page 132                 PBHERS.DOC







3270 REFERENCE MANUAL FOR PBH                 April 13, 1990



                VT100 (DEC)
                SCANSET
                ADM-3A
                TELEVIDEO 920/925
                HAZELTINE 1500
                DISPLAYPHONE

           These terminals are character mode oriented only (no block
           mode supported as of today).

         . CMT can access x.25/x.75 slots via DSP IIX dialect.

ASCII character mode terminals may  access  3270  host  computers
through the 3270 character mode terminal (CMT) emulator.


The CMT 3270 emulator supports terminals operating  in  character
mode, which allows less intelligent terminals to communicate with
a PBH.  Furthermore, the first printer support has been  released
for VT 100 terminals.


The ASCII terminal is attached to a CONSAT. A  first  circuit  is
built  once  the  CMT  access is performed. A second one is built
from the CMT to PBH once the IBM access is done.


The communication between the CONSAT and  CMT  is  based  on  the
normal  mode  (no IIX dialect). The communication between the CMT
and PBH slot is based on DSP dialect (both are smart interfaces).
The CMT slot can be located :

        - in the same node as the CONSAT is
        - in the same node as the PBH is
        - in a separate node
depending on the criteria (response time, echo...).


3.23  LOGON - LOGOUT PROCEDURES



3.23.1  GENERALITIES


Once the polling is established on both  sides,  the  first  menu
received by the device is:







Page 133                 PBHERS.DOC







3270 REFERENCE MANUAL FOR PBH                 April 13, 1990



                     ---------------
              --->   | MENU SCREEN |
                     ---------------

If a STORED LOGON string is selected,  no  other  screen  appears
(the STORED LOGON string allows automatic logon).

If MANUAL logon is selected, the second menu is displayed:

                     ----------------------
             --->    | BASIC LOGON SCREEN |
                     ----------------------

Upon successful logon the user is placed in ASCII mode if a  dumb
or  ASCII  host  is  reached.  When  a gateway is reached and the
username is not a Transparent  Gateway  Username,  the  following
menu is displayed :

                     ------------------------
              --->   | GATEWAY LOGON SCREEN |
                     ------------------------

When a 3270 host is reached from a PBT or  through  an  x.25/x.75
host, the following screen is used :

                     --------------------
              --->   | DSP LOGON SCREEN |
                     --------------------



3.23.1.1  _S_t_o_r_e_d__l_o_g_o_n_


The stored logon mechanism is provided in the current  PBT.  This
implementation   allows   the   user  to  choose  among  multiple
destination addresses using descriptions for  those  destinations
that are familiar to the user.



3.23.1.2  _P_V_C__:__P_e_r_m_a_n_e_n_t__V_i_r_t_u_a_l__C_i_r_c_u_i_t_


If the PBT is configured for a PVC,  the  menu  screen  will  not
appear.   The  logon  process  is  done automatically, as defined
during the configuration of the PBT. For PVC  defined  terminals,
the flexibility to access various hosts no longer exists.






Page 134                 PBHERS.DOC







3270 REFERENCE MANUAL FOR PBH                 April 13, 1990



3.23.1.3  _M_e_n_u__s_c_r_e_e_n_


By striking any key on the keyboard, this menu is displayed. This
menu  separates  a  list  of  one-line  descriptions  of possible
destinations:
        ACTION : Position the cursor to the desired line
                 Strike the ENTER key.
If you select MANUAL, you enter the MANUAL logon  procedure.  The
BASIC LOGON SCREEN is displayed.

If one of the STORED LOGON strings  is  selected,  the  AUTOMATIC
LOGON  procedure  is entered. Then the logon string as defined at
generation time and embedded in the  PBT  will  be  sent  to  the
supervisor, checked and an SVC will be built through the network.

In case of failure, a brief error text is displayed and the  user
is  given the option of selecting another choice or repeating the
same one.


3.23.1.4  _B_a_s_i_c__l_o_g_o_n__s_c_r_e_e_n_


The user enters his username and may specify  a  host  number  by
entering a colon. The host number immediately follows the colon.

Depending on the options defined at validation time, the username
does not need to enter a host number if the home host is the host
desired. After  that,  the  password  is  entered  without  echo.
Finally the ENTER key is pressed to send this data.

When the logon attempt is successful, the cursor is positioned at
the  top  left  corner of the screen. At this time the circuit is
built. The CLEAR, ENTER, PF and PA keys can then be used.

Summary :
        A) USERNAME : USERNAME:host number (TAB)
        B) PASSWORD : PASSWORD
        C) 'ENTER'
          USERNAME:TNSM:180
          PASSWORD ..........
          'ENTER'


3.23.1.5  _G_a_t_e_w_a_y__l_o_g_o_n__s_c_r_e_e_n_


To fill this screen, the process is the same as  defined  in  the
BASIC LOGON SCREEN.




Page 135                 PBHERS.DOC







3270 REFERENCE MANUAL FOR PBH                 April 13, 1990



3.23.1.6  _D_S_P__l_o_g_o_n__s_c_r_e_e_n_


The menu aims at defining :  ---> 3270 - x.25 connection
                             ---> CONNECTION REQUEST MODE


A) DO YOU WANT TO USE ASCII MODE ?

This question  appears  when  accessing  an  x.25/x.75  interface
supporting  both  ASCII and DSP. The user should enter Y(yes) for
ASCII Mode
                      N(no)  for DSP Mode


B) CONNECTION REQUEST MODE (CRM)

The CRM allows the PBH to select the right last port  :  this  is
called the MAPPING PROCESS.

In fact, the PBH contains terminal  ports,  printer  ports  color
support  ports...and  so  on. So, depending on the CRM value, the
PBH will assign and select a port on the FEP (FEP port definition
matches the PBH one's) according to the PBT request.

The CRM has three values

1) ONE TO ONE SELECTION

The user desires to log in to the logical CU and  device  address
that corresponds exactly to the physical addresses.

Note : The user may specify the application identifier.

2) SPECIFIC SELECTION

The user desires the exact application identifier, CU address and
Device address as specified in the next three fields.


3) FREE (or DYNAMIC) SELECTION

The user will select the first available port on the  host  side,
starting from the bottom to the top.

C) APPLICATION IDENTIFIER

Represents the destination line address

DESTINATION CONTROL UNIT




Page 136                 PBHERS.DOC







3270 REFERENCE MANUAL FOR PBH                 April 13, 1990



Represents the Cluster address (host port address)

DESTINATION DEVICE ADDRESS

Represents the port address on the FEP.

The three above values must be entered :
either in  GRAPHIC character
or     in  ASCII
but not in EBCDIC


     Ex :                EBCDIC           ASCII          GRAPHIC
     -----------------------------------------------------------
     Line address :       40               20             space
     CU address :         C2               42               B
     Device address :     C5               45               E


D) DO YOU WANT EXTENDED ATTRIBUTES ? (Y/N)

"Y" is needed  for  highlighting,  programmable  characters,  APL
char. set

E) DO YOU WANT COLOR ? (Y/N)

"Y" is needed for color terminal



3.23.1.7  _N_S_S__:__N_e_t_w_o_r_k__S_e_r_v_i_c_e_s__S_c_r_e_e_n_


When the 3270 terminal user successfully logs into the 3270 Host,
he is operating in NATIVE MODE.

In native mode, the NSS:  Network  Services  Screen  is  used  to
perform :
                - TERMINAL LOGOUT functions
                - PRINTER Control functions
                - NETWORK LOGOUT functions
A specific key is dedicated to  the  network  services  functions
when the interface is generated (see SYSGEN).

Any PF (Program Function) or PA (Program Attention)  key  may  be
specified as a network services key.

The NSS format has been altered to supply more information on the
status  of  printers  available and to identify a printer in more
familiar terms for the user.




Page 137                 PBHERS.DOC







3270 REFERENCE MANUAL FOR PBH                 April 13, 1990



To chose a printer, the user simply places the cursor next to the
desired printer number and strikes the 'ENTER' key.


3.24  DIFFERENT CASES

                              CASE #1
                              -------

                      (NATIVE - SVC - TERM - AUTO)

     LOGON :
     -----

              ---> MENU Screen displayed
                   ----
              ---> Positions the cursor to the right message identifying the
                   destination
              ---> Press 'ENTER'
              ---> You are logged in your Host application
                   (WELCOME screen from the Host application)


     LOGOUT
     ------

              ---> Call NSS (press 'PF4', 'ENTER')
              ---> NSS message: CRT IS CURRENTLY LOGGED IN
              ---> Press 'PF1'
              ---> NSS Message : CRT IS CURRENTLY NOT LOGGED IN
              ---> Press 'CLEAR,ENTER'
              ---> MENU screen displayed




                              CASE   #2
                              ---------

                  (NATIVE - PVC - TERM - AUTO)

     LOGON      The logon process is done automatically.
     -----      The only action to do is to check the circuit
                built with the NSS


     LOGOUT
     ------

               ---> Call NSS ('PF4', 'ENTER')
               ---> NSS message : CRT IS CURRENTLY LOGGED IN



Page 138                 PBHERS.DOC







3270 REFERENCE MANUAL FOR PBH                 April 13, 1990



               ---> Press 'PF1'
               ---> NSS message : CRT IS CURRENTLY NOT LOGGED IN
               ---> Press 'CLEAR, ENTER'
               ---> MENU screen displayed

               Note : Depending on a timer, the PVC will be rebuilt
                      automatically (default value after 5 minutes)





                              CASE   #3
                              ---------

                      ( VHM - SVC - TERM - MAN)

     LOGON
     -----

            ---> Enter USERNAME, host number, password, project
                 (only the 2 first fields of the PC). The password and
                 PC are separated by a semicolon.


     LOGOUT
     ------

            ---> The disconnection key depends on the type of terminal
                 used. IBM 3101 ---> Enter "SHIFT F12"

            ---> The 'PLEASE LOG IN' message is displayed.






3.25  INTERFACES GENERATION



3.25.1  GENERATION LAYOUT


In order to prepare codes to be loaded in the Tymnet Engine (mini
or micro), the following procedure should be used :







Page 139                 PBHERS.DOC







3270 REFERENCE MANUAL FOR PBH                 April 13, 1990



                     a - Create input files
                     b - Run assembly
                     c - Create output files

     a - Input files
     ---------------

     TYMFILE : Contains all macros representing customer's configuration.

            PBT TYMFILE :   Definition of all devices, clusters, lines
                            with their respective addresses.
                            Definition of logon procedures, MENUS, security
                            accesses.


            PBH TYMFILE :   Definition of addressable ports matching FEP
                            generation.
                            Definition of security access.


            CMTI TYMFILE :  Definition of logon procedures, MENUS and
                            security accesses.
                            Definition of terminals types used.


     COMMAND FILE : Contains NAD commands in order to automatically produce
                    object file (NIB file).


     SOURCE CODE :  Contains all LIBRARIES and MODULES which compose the
                    PRODUCT source code. These files reside on PDP-10
                    (SOURCE) directory. Different files are :

                    INIT FILE (.I) :       ALL MACROS definitions
                                           ALL DEFAULT values

                    SOURCE FILE (.R) :     ALL source instructions
                                           structured into modules and
                                           libraries

                    PATCH FILE (.P) :      Optional file containing all
                                           patch instructions to fix bugs.


     b - Assembly
     ------------

     NAD (Node Assembler Debugger) is our PDP-10 system tool to assemble all
     files, modules and libraries defined in the command file in order to
     produce the object (or NIB) file.




Page 140                 PBHERS.DOC







3270 REFERENCE MANUAL FOR PBH                 April 13, 1990



     c - Output files
     ----------------

     NAD produces at the end of assembly an object file whose name is NIB
     file (NAD IMAGE BINARY). This file can be either :

             - directly loaded in an ISIS slot
             - bound with other slots to prepare a complete engine code


     Moreover, depending on certain parameters defined in the command files,
     a file containing CROSS Reference table can be generated by NAD.





3.25.2  CMTI TYMFILE


             SUBTTL   C.M.T TYMFILE


             CMT HOST NUMBER DEFINITION
             **************************

             DEFHST(110,04)

             HEADER DEFINITION
             *****************

             DEFHDR(WELCOME TO THE WONDERFUL TYMNET NETWORK)

             LOGON STRING AND MAPPING DEFINITION (AUTOMATIC LOGON)
             *****************************************************

             DEFELE(CMT1,TEST1"BA420"BBONE"8D)     :ELEMENT 0 circuit to 420
             DEFELE(CMT2,TEST1"BA421"BBONE"8D)     :ELEMENT 1 circuit to 421
             DEFELE(CMT3,TEST1"BA422"BBONE"8D)     :ELEMENT 2 circuit to 422
             DEFELE(CMT4.TEST2"BA450"BBTWO"8D)     :ELEMENT 3 circuit to 450
             DEFELE(CMT5,TEST3"BA470"BBTHREE"8D)   :ELEMENT 4 circuit to 470
             DEFELE(CMT6,TEST3"BA471"BBTHREE"8D)   :ELEMENT 5 circuit to 471
             DEFELE(CMT7,TEST3"BA472"BBTHREE"8D)   :ELEMENT 6 circuit to 472
             DEFELE(CMT8,TEST4"BA473"BBFOUR"8D)    :ELEMENT 7 circuit to 473
             DEFELE(CMT9,TEST4"BA474"BBFOUR"8D)    :ELEMENT 8 circuit to 474

             DEFELE(LAB,3"8D"8D"8D"8D)             :CRM = 3 DYNAMIC MAPPING

             ELEMENTS OF MENUS
             *****************




Page 141                 PBHERS.DOC







3270 REFERENCE MANUAL FOR PBH                 April 13, 1990



             DEFSTR(W420, CONNECTION TO HOST 420,CMT1,LAB)
             DEFSTR(W421, CONNECTION TO HOST 421,CMT2,LAB)
             DEFSTR(W422, CONNECTION TO HOST 422,CMT3,LAB)
             DEFSTR(W450, CONNECTION TO HOST 450,CMT4,LAB)
             DEFSTR(W470, CONNECTION TO HOST 470,CMT5,LAB)
             DEFSTR(W471, CONNECTION TO HOST 471,CMT6,LAB)
             DEFSTR(W472, CONNECTION TO HOST 472,CMT7,LAB)
             DEFSTR(W473, CONNECTION TO HOST 473,CMT8,LAB)
             DEFSTR(W474, CONNECTION TO HOST 474,CMT9,LAB)


             MENUS DEFINITION
             ****************

             DEFMEN(MENU1,W420,W421,W422,W450,W470,W471,W472,W473,W474)
             DEFMEN(MENU2,W420,W421)
             DEFMEN(MENU3,W472)

             MENUS-USERS ASSOCIATION
             ***********************


             DEFUSR("00"00"00"00"00"00"00"00)      :NO Restriction access
             DEFTTY(-1)                            :Terminal Type selection
             MENUSR(MENU1)                         :MENU1 displayed

             DEFUSR(TNSM)                          :TNSM access allowed
             DEFTTY(-1)                            :Terminal Type selection
             MENUSR(MENU2)                         :MENU2 displayed for TNSM

             DEFUSR(COL"00"00"00"00"00)       :Usernames starting with 'COL'
             DEFTTY(-1)                       :Terminal Type selection
             MENUSR(MENU3)                    :MENU3 displayed for COL...


             DEFCAL("01"02"03"04"05"06"07)         :X.25 CALLED ADDRESS
                                                   :DUMMY ADDRESS HERE

             TERMINAL TYPES DEFINITION
             *************************

     DEFTRM  MACRO [
             VT100
             TELE92
             ADM3AM
     ]
     CRSTOP  EQ      1                             :CRASH STOP SET







Page 142                 PBHERS.DOC







3270 REFERENCE MANUAL FOR PBH                 April 13, 1990



3.25.3  COMMAND FILES


           TITLE 3270 HOST INTERFACE, VERSION 7.03
               SUBTTL

     ;;Parameters for listing file
     LIST L,F,X,-R

     ;;Init File PBH for 7.03 (Baseline M)
     ;@(SOURCE)PBH07.I03

     ;;TYMFILE
     ;@PBH.T02

     ;;SOURCE file for PBH 7.03 (Baseline M)
     :@(SOURCE)PBH07.R03

     ;;PATCH file for PBH 7.03 (Baseline M)
     ;@(SOURCE)PBH07.P03

     ;;NIB file creation
     1;FPBH.N02

     ;;Segment 'E' (or CTA) copied in NIB file
     SEGE,SESIZE;P

     ;;Segment '0' (DATA) copied in NIB file
     SEG0,S0SIZE;P

     ;;Segment '1' (CODE) copied in NIB file
     SEG1,S1SIZE;P

     ;;Segment '5' (MENUS) copied in NIB file
     SEG5,S5SIZE;P

     ;;Symbols copied in NIB file
     %P

     ;;Exit NAD
     %Q













Page 143                 PBHERS.DOC







3270 REFERENCE MANUAL FOR PBH                 April 13, 1990



3.26  INTERNAL STRUCTURE



3.26.1  LIBRARIES




     Main libraries generally used in Tymnet codes are as follows:

     START.LIB---->ISIS ASSEMBLY SWITCH DEFINITIONS.
                     Used for defining SVC names, registers functions,
                     location of codes, data, buffers, patches within
                     segment rings and buffers based addresses.
                     Note : 1st library assembled.

     TRACE.LIB---->ENGINE HARDWARE TRACES ROUTINES.

     TIMOUT.LIB--->STANDARD TIMEOUT ROUTINES.

     FRING.LIB---->ISIS RINGS HANDLING ROUTINES.
                     Routines for storing or extracting data from
                     IRING/ORING and for updating pointers.

     CONVRT.LIB--->BINARY TO DEC/HEX CONVERSION ROUTINES.

     CRASH.LIB---->SOFTWARE AND HARDWARE CRASH HANDLING PACKAGES.

     BBFLET.LIB--->BIG BUFFERLETS POOL.

     FRNTND.LIB--->ISIS FRONT-END INTERFACE.

     (STAUS.LIB)->EXTENDED DDT COMMANDS (BOM)

     PATCH.LIB---->PATCH INSTRUCTIONS DEFINITION.

     FINISH.LIN---->CONTROL TABLE AREA ALLOCATION AND DIAG.
                     Assembly errors message, segment size definition.





3.26.2  MODULES


cf. slides






Page 144                 PBHERS.DOC







3270 REFERENCE MANUAL FOR PBH                 April 13, 1990



3.26.3  PROCESSES


ISIS divides job processes into three processes all of which  are
broken down into hierarchical levels.

These three processes are:
        - FOREGROUND
        - BACKGROUND
        - DDT's (Dynamic Debugging Tool)
Every slot contains these three processes.

A. FOREGROUND

Scheduled to  execute  every  25  msec  (milliseconds).  Time  is
allocated  in  clock ticks (1 tick = 1/600 sec, 1,666 msec called
FASTC).

The minimum for a FOREGROUND process is 2 ticks, and for every  3
logical units, there is an additional tick of execution time.

Note : There are only 16 ticks of execution  time  available  for
the
       entire machine. The KERNEL uses 1 tick, leaving 15 for
       the remaining slots (15 x 1,666 msec = 25 msec).

The FOREGROUND is used to control  external  devices,  to  handle
lines  (for  example  transfers data from the input buffer to the
background). The FOREGROUND must answer very  fast  and  is  used
very often.


B. BACKROUND

This process is the workhorse of the machine which  performs  the
major  effort  of the interface. BACKROUND is allocated 5 msec of
CPU time, but are scheduled  on  execution  chain,  round  robin,
after execution they go to the end of the list.

These timeslices can be interrupted by FOREGROUND process.
Note : In a well balanced machine BACKROUND jobs will get
       100 shots at the CPU and execute only 8 msec.
A job can dismiss at any time during its timeslice. In this  case
a new timeslice is then created for the next job.


C. DDT

Dynamic Debugging Tool can be loaded into throughout the  network
to:
        - control



Page 145                 PBHERS.DOC







3270 REFERENCE MANUAL FOR PBH                 April 13, 1990



        - modify
        - debug
        - reload a slot
As with the BACKROUND, DDT also receives 50 msec timeslices,  but
will  only  use  the  time needed which is generally less than 10
msec.


SLOT PROCESS RULES
        1. KERNEL will step in when it gets an interrupt,
           taking the CPU time it needs to service the
           interrupt, then it will give the CPU back to
           the process that has been interrupted.

        2. If the slot is running only one process, it can
           only be BACKROUND or DDT.


3.26.4  SUMMARY




                            When            How long        Control
     -------------------------------------------------------------------
     INTERRUPTS             Any time        No limit         No
     -------------------------------------------------------------------
     FOREGROUND             Every 25 msec   Ft               Yes
     -------------------------------------------------------------------
     BACKROUND              Next in queue   50 msec          Yes
     -------------------------------------------------------------------
     DDT (Services)         Each command    50 msec          Yes
     -------------------------------------------------------------------


3.26.5  SEGMENTATION


The MEMORY MANAGEMENT is  provided  by  the  MAC  (MEMORY  ACCESS
CONTROLLER). The MAC provides 2 major functions:
        - relocation
        - protection
The relocation permits any of the interface programs available to
be  loaded  into  any  slot  on  the machine, without any need to
modify the program. The relocation permits also  any  combination
of slots loaded into a single engine.

The protection prevents any slot from crashing th ISIS  operation
system  or  any of the other slots in the machine if the software
in that slot fails.




Page 146                 PBHERS.DOC







3270 REFERENCE MANUAL FOR PBH                 April 13, 1990



3.26.5.1  _M_a_c__s_e_g_m_e_n_t_a_t_i_o_n_


Each slot is divided into 16 segments numbered from 0 to F.  Each
segment  uses  up  to  64 K. This means that 1 slot could use the
total amount of physical memory which is 1 megabyte.

This involves the  relocation  process.  The  software  addresses
(VIRTUAL  ADDRESSES)  are  relocated  to real addresses (PHYSICAL
ADDRESSES).


     Segment 0 uses virtual addresses 00000 - 0FFFF
     Segment 1 uses virtual addresses 10000 - 1FFFF
     Segment 2 uses virtual addresses 20000 - 2FFFF
     --------------------------------------------------
     --------------------------------------------------
     Segment E uses virtual addresses E0000 - EFFFF
     Segment F uses virtual addresses F0000 - FFFFF


The user has no access control over segments E and F.  Segment  E
maps  into  the  beginning  of  the  user's physical address area
UNCONDITIONALLY!

Segment F is located in the KERNEL and shared by all slots.

Segment E is the slot's CTA (Central Table Area), which  contains
all  necessary  descriptors to describe the running configuration
of the slot as
         - pointers to variables
         - memory layout
Segment 0 is the DATA area. This segment contains the constants.

Segment 1 is the CODE area. It is the program itself.

Segment 2 contains rings.

Segment 3 and others are generally buffers.

Note : for PBT, segment 5 contains the menu.

Segment 4 contains DCB (Device Control Block)











Page 147                 PBHERS.DOC







3270 REFERENCE MANUAL FOR PBH                 April 13, 1990



3.27  INTERFACES MONITORING and DEBUGGING



3.27.1  GENERAL DDT COMMANDS



For remote access, the following commands are a good sampling  of
what you will find useful.

1. H - halt slot

2. E - execute slot

3. R <address>, <byte count of read> <cr> - read from engine memory
   specified number of bytes starting at specified address

4. Z - logoff, responds with "logging off?" and a second Z is required
       to complete the logoff

5. \ - reset DDTm, used to recover from an error condition

6. | <slot #> - switch to another slot (if it is available)

The following question  mark  commands  all  require  a  carriage
return to terminate:



























Page 148                 PBHERS.DOC







3270 REFERENCE MANUAL FOR PBH                 April 13, 1990



     a. ?MAC - outputs table that displays the slot's current MAC
               configuration

     b. ?SLOT - outputs current slot number

     c. ?VERN - output ISIS and slot's code version numbers

     d. ?BT - outputs current background PSD

     e. ?FT - outputs current foreground PSD

     f. ?BRR R,N - outputs the current values of the running backround
                   registers. This is approximate. R is the beginning
                   register number and N is the total number of registers
                   you wish displayed.
                   Example : to read all the registers, type ?BRR 0,10 (hex)

     g. ?FRR R,N - outputs the current values of running foreground
                   registers. Same arguments as above.

     h. ?CT - outputs a table of dispatcher circuits attached to that slot
              and the other end including the RPORT numbers at both ends.

     i. ?USE - outputs a table of the dispatcher ports currently active,
               and the maximum (decimal) number of characters that the
               dispatcher needs to buffer in each direction.

     j. ?HOST - outputs a table of the hosts declared to the Supervisor
                from that slot, the host state (gone!, down!, shut, and
                answered), the total number of dispatcher ports for that
                slot, and the number of ports in use.

     k. ?WHO - outputs a table for each slot showing the current DDT
               status of that slot, and the two most recent usernames to
               log into that slot's DDT. This provides a short history of
               who may have been making changes.

     l. ?STAT - connects you to an extended DDT function you may have
                running in your slot. For example, XRAY or XCM.

     m. ?PORT - lists all current DDT users.

     n. ?HANG - destroys the DDT circuit for the port specified. This is
                necessary when a partial DDT circuit remains upon
                disconnect. Until the remnant is destroyed, users will not
                be able to access that slot.

     o. ?TIME - outputs current system time (time elapsed since node was
                last loaded).

     p. ?HIST - all diagnostic messages in the node system diagnostic queue



Page 149                 PBHERS.DOC







3270 REFERENCE MANUAL FOR PBH                 April 13, 1990



                will be displayed, starting with the oldest.

     q. ?CPU - a "snapshot" of the fast clock and the appropriate local
               clocks is performed, then DDT dismisses for approximately
               one second. The elapsed time is calculated, converted to a
               percentage, and displayed. Further, the total "span" used
               (number of bytes processed) of the dispatcher input and
               output rings is displayed.

     r. ?LU - outputs a list of logical units and the associated device
              type and unit number.


     (NOTE : the ?BRR and ?FRR commands are to be used with caution,
     especially when reading a string of registers. The program may be
     dismissed in the middle of the read, and after it has picked up the
     following registers reflect a different point in time than those
     already displayed. This command can be useful if the slot is in a loop
     or frozen.)





3.27.2  DATASCOPE TRACES


cf slides




3.27.3  CRASH TABLES


cf slides




3.27.4  BUFFER TRACES


cf slides










Page 150                 PBHERS.DOC







3270 REFERENCE MANUAL FOR PBH                 April 13, 1990



3.27.5  TROUBLESHOOTING


     a) Monitoring
     -------------

     b) Procedures
     -------------
     BOM/DDT/NCCF

     Events

     Slot crash

             DUMP the slot (with LOADII)
             RESTART the slot (*E DDT command)
             RELOAD the slot (if RESTART is inefficient)

     Cannot login.  Check :

             PBT menus displayed (polling)
             Error messages displayed (which one)
             Login string correct (validation)
             Mapping correct (CRM? Color port?)
             PVC?
             PBH answered?
             Out of ports?
             Logon time-out?
             New slot, new IBM device?

     Circuit zapped.

            Logout message displayed (no traffic?)
            Timers (IACTIM, POLT3)
            Bad CRC (too many NAK's ---> datascope traces?)

     No polling.

            Modem signals (switched/leased)
            Synchronous port? (exchange)
            FEP line active?

     Slow response time.

             Retransmission (NAK)
             Network load (?CPU)
             Number of circuits built (BOM)







Page 151                 PBHERS.DOC







3270 REFERENCE MANUAL FOR PBH                 April 13, 1990



3.28  CONFIGURATION



3.28.1  FIGURES



                            PBT
                            ###


     Memory   Configuration                    Automatic logon
     Size     Line(s)    Device(s)   Element   (stored)


     66       1          1
     81       1          9           6         4
     85       2          9           6         4
     124      3          27          13        15
     204      3          255         13        15




                            PBH
                            ###

     Memory   Line(s)    Port(s)     Buffer    Mapped
     Size                            Screen    Ports


     122      1          1
     148      1          6           2         5
     160      2          7           2         10
     166      3          19          4         10
     235      5          255         4         10




                            CMT
                            ###


     Memory size     Simultaneous            Terminal type
                        User

     30K                 1                           1
     54                  5                           2




Page 152                 PBHERS.DOC







3270 REFERENCE MANUAL FOR PBH                 April 13, 1990



     ===> 30K (base)
        +  4K/simultaneous user (w/o printer)
        +  5K/simultaneous user (w/ printer)
        +  2K/terminal type

     Limitations (PBT/PBH)

            ---> Up to 255 devices / slot
            ---> Up to 16 lines / slot
            ---> Up to 16 CU / lines
            ---> Up to 32 devices / CU (depending on the type of CU)
            ---> Up to 8 or 10 simultaneous users




3.28.2  CONSTRAINTS




              ---> ASCII 3270 TERMINALS NOT SUPPORTED

              ---> CU3275 in dial-up with contention mode NOT SUPPORTED

              ---> 3270 command test request key NOT SUPPORTED

              ---> Special features (i.e. APL) NOT FULLY SUPPORTED

              ---> IBM 3101 numeric fields NOT SUPPORTED

              ---> CMT NO MANUAL LOGON
                       NO PVC







3.29  SCHEDULES













Page 153                 PBHERS.DOC







3270 REFERENCE MANUAL FOR PBH                 April 13, 1990






     PBT/PBH

             ---> Complete redesign of the PBT/PBH tymfile

             ---> New  BOM  version

             ---> Disconnection procedure improvements

             ---> Additional information on NSS

             ---> Commands sent to applications at end of session

             ---> Recovery of transaction screen

             ---> DSP logon removed


     CMT

             ---> Printer support

             ---> MANUAL LOGON option

             ---> CMT Operations Monitor

             ---> Additional terminals supported :

                      - HP Series 262X/December 84

                      - ADM11 Support (Printer ADM #1178)

                      - ADDS Viewpoint 60

                      - VT200 Support (and family)

                      - DASHER (Data General)





3.30  GLOSSARY









Page 154                 PBHERS.DOC







3270 REFERENCE MANUAL FOR PBH                 April 13, 1990





     OS/VS1        Operating System/Virtual Storage 1

     MVS           M Virtual Storage

     DOS/VS        Disk Operating System/Virtual Storage

     DOS/VSE       Disk Operating System/Virtual Storage Extended

     VM/3270       Virtual Machine/370

     VM/CMS        Virtual Machine/Conversational Management System

     RJE           Remote Job Entry

     JSE2          Job Entry System 2

     NJE           Network Job Entry

     POWER/VS      IBM POWER running under VSE

     NTO           Network Terminal Option

     NCCF          Network Communication Controller Facility

     NPDA          Network Programs Diagnostic Application

     IMS/VS        Information Management System

     CICS/VS       Customer Information Control System

     TSO           Time Sharing Option

     VSPC          Virtual Storage Personal Computing

     DPPX          Data Programming Process Executive

     SDLC          Synchronous Data Link Control

     BSC           Bisynchronous Characters

     ACF/NCP/VS    Advanced Communications Function for the Network Control
                   Program. A program product that provides communication
                   controller support for single-domain and multiple-domain
                   data communication.

     ACF/TCAM      Advanced Communication Function for the
                   Telecommunications Access Method. A program that provides
                   single-domain data communications capability and,
                   optionally, multiple-domain capability.



Page 155                 PBHERS.DOC







3270 REFERENCE MANUAL FOR PBH                 April 13, 1990



     ACF/VTAM      Advanced Communication Function for the Virtual
                   Telecommunications Access Method. A program product that
                   provides single-domain data communication capability and,
                   optionally, multiple-domain capability.

     ACF/VTAME     Advanced Communications Function for VTAM Entry. A program
                   product that provides single-domain and multiple-domain
                   capability for an IBM 4331 that may include communication
                   adapters.













































Page 156                 PBHERS.DOC







THE TURBO ENGINE ENVIRONMENT                  April 13, 1990



              4.  THE TURBO ENGINE ENVIRONMENT


PBH 16.00 is converted to run on both the Engine  and  the  Turbo
Engine.  This section covers information specific to the PBH.


4.1  SOFTWARE NOTES"



4.1.1  PBH Code

The PBH code has to be assembled through  _N_a_d_6_8  to  run  on  the
Turbo  Engine.  It is functionally equivalent to the Engine (i.e.
have the same function).  The performance may be  different  from
the Engine.

The Turbo Engine PBH code segment is 3 times that of the  Engine.
It  occupies  segment  1 to 3.  The data segments remain the same
size.  The total memory requirement  of  the  PBH  is  about  40%
larger than the Engine version.


4.1.2  Loading Code


The PBH code should be loaded through _B_i_t_s onto the Turbo  Engine
disk.  The file server then copy it into the GP slot.


4.2  HARDWARE NOTES


The Turbo Engine hardware is very different from the Engine.   It
has  to  be  set up correctly to run the PBH.  Refer to the Turbo
Engine Primer by Omar Serang for installation details.


4.2.1  GP

The general processor (GP) executes the PBH code.   It  is  where
the PBH code and data resides.


4.2.2  IOCP

The I/O Communication Processor (IOCP) performs the communication
function,  similar  to the Engine Sync cards.  Each IOCP port has
to be set up individually to  perform  sync  communications.   To
configure  an  IOCP port, the operator gets into the IOCP monitor



Page 157                 PBHERS.DOC







THE TURBO ENGINE ENVIRONMENT                  April 13, 1990



and issue the _S_C command to set  up  all  the  parameters.   This
configures  the  specific  port  for sync transmission.  When the
configuration is finished, the parameters should  be  saved  into
the non-volatile memory on the IOCP.

The Turbo Engine IOCP does not have primative ports.   All  ports
support RTS/CTS function.


4.2.3  Paddle Card

The paddle  card  connects  the  IOCP  port  to  external  lines.
Currently, only the 8-Port IOCP supports the RS-232 paddle cards.
The paddle  card  DIP  switches  determine  the  VME  ID  of  the
connected   IOCP.    It   should  be  set  up  according  to  the
recommendation outlined in the Turbo Engine Primer.






































Page 158                 PBHERS.DOC







MCP                                           April 13, 1990



                          5.  MCP


    Tymnet has   been  requested  by   Network  Services  Company
(NSC)  to develop a product to  provide mutual conversion between
IBM, Fujitsu, and Hitachi 327X terminals   and  hosts.   A  joint
Tymnet/NSC   task  force  evaluated   the  options  to  implement
this  capability  and selected  development  of   a  new  network
server,  called Mutual  Conversion Pass- Through (or MCP), as the
best choice.

    This  document  provides   an  overview  of  MCP   functions,
identifies  system   limitations,  addresses  issues relating  to
MCP   usage  through  gateways,   and    summarizes    additional
documentation  to  be produced during development.


          References:

         o   NSC Project Report, Version 1.0, October 16, 1985
         o   PIR 2031, Project 1515




5.1  Functions



5.1.1  Overview

                                    **********
                          **********          *
                         *                     ****
                        *                          *
          |------|   |-----|       |-----|       |-----|   |----------|
          |      |   |     |       |     |       |     |   |          |
          | Host |===| HIF |<------| MCP |<------| TIF |===| Terminal |
          |      |   |     |       |     |       |     |   |          |
          |------|   |-----|       |-----|       |-----|   |----------|
                        *                           *
                         *                         *
                          *                       *
                           ********              *
                                   *            *
                                    ************

                                    Figure 1






Page 159                 PBHERS.DOC







MCP                                           April 13, 1990



    In  a  typical  application,  as  illustrated  in  figure  1,
the  terminal  user  selects  a  destination   host  from  a menu
provided   by  the  TIF.    The   TIF   establishes   a   virtual
circuit   to   MCP   and  passes information in the call  request
packet which allows MCP  to determine the   type  of   conversion
needed  and the  network host  number  of the target HIF.

    MCP then builds  a virtual circuit to  the HIF and passes  on
the  call request packet, which is slightly modified, to the HIF.
The HIF sends a call accept packet  back to MCP, which passes the
call  accept  on  to  the TIF.  At this  point data traffic flows
between TIF  and HIF with all necessary  data  stream  conversion
being performed by MCP.




5.1.2  Features



5.1.2.1  _T_a_r_g_e_t__D_e_v_i_c_e_s


    MCP is  intended to  provide data  stream conversion  between
IBM  3277/8/9,  Fujitsu  F-9525/6   F-6650  and  Hitachi T-560-20
terminals and hosts.  The  conversions will make  it possible  to
access  any   of the three types of  hosts from any of  the three
types of  terminals, with certain restrictions as  noted  in  the
section on limitations.



5.1.2.2  _T_r_a_n_s_p_a_r_e_n_c_y


    As far as possible, MCP will be transparent to the TIF,  HIF,
host application, and terminal user.



5.1.2.3  _C_o_m_p_a_t_i_b_i_l_i_t_y


    MCP  will  support  3270  Data  Stream   Protocol   with   no
modifications.   MCP  will  interpret  the  called DTE address to
determine the destination  host   number   and  the   destination
host type.   The  following Tymnet interfaces will be supported:

     3270 Polled Bisync Terminal Interface
     3270 Polled Bisync Host Interface



Page 160                 PBHERS.DOC







MCP                                           April 13, 1990



     X.25/X.75 Interface
     SNA Virtual Terminal Interface
     SNA Virtual Host Interface



5.1.2.4  _D_e_s_t_i_n_a_t_i_o_n__m_a_p_p_i_n_g


    MCP will be designed so that alternate schemes of determining
the  destination  and  it's  type  will be possible with  minimal
development.  This is  to allow  service extension via  X.25/X.75
gateways  to other public and private data networks.





5.1.3  Call Establishment


          TIF                     MCP                     HIF
          ---                     ---                     ---
           |    virtual circuit    |                       |
           |---------------------->|                       |
           |                       |                       |
           |      IIX              |                       |
           |<--------------------->|                       |
           |                       |                       |
           |  call request         |                       |
           |---------------------->|    virtual circuit    |
           |                       |---------------------->|
           |                       |                       |
           |                       |      IIX              |
           |                       |<--------------------->|
           |                       |                       |
           |                       |   call request        |
           |                       |---------------------->|
           |                       |                       |
           |                       |   call accept         |
           |   call accept         |<----------------------|
           |<----------------------|                       |
           |                       |                       |

                                   Figure 2



    Figure 2 illustrates a typical exchange between TIF, MCP, and
HIF  in  the process  of establishing virtual  calls.  TIF builds
a virtual circuit to MCP  and  then   enters  into  IIX  protocol



Page 161                 PBHERS.DOC







MCP                                           April 13, 1990



exchange.    TIF  then sends  a  call request  packet,  which MCP
examines  to  identify the  protocol   ID,   character  set   (in
call  user   data),   destination  host  number  (in   called DTE
address),  and  destination   host  type   (also  in  called  DTE
address).

    Assuming  all  the elements  are   correct,  MCP   builds   a
virtual  circuit  to  the  HIF   using  a  pre-defined  username,
configurable within MCP  at system  generation,   and  the   host
number   extracted   from  the  called  DTE  address.   After IIX
protocol  exchange, MCP passes  on the call request  packet after
extracting   the  destination  host   type  from  the  called DTE
address.  The  HIF returns  a  call  accept   packet,  which  MCP
forwards unmodified to the TIF.




5.1.3.1  _C_a_l_l_e_d__D_T_E__A_d_d_r_e_s_s__F_o_r_m_a_t


    The  called DTE  address must   be  in   one  of   the   four
following formats:

        DNIC + 0 + HOST + DTYPE + SPID
        DNIC + 9 + HOST + DTYPE + SPID
        0 + HOST + DTYPE + SPID
        9 + HOST + DTYPE + SPID


    The  HOST number  must always  be five   (5)   digits.   Sub-
process  identifier digits (SPID) are optional.  Host destination
type (DTYPE) must be one of the following values:

        0  IBM
        1  Fujitsu
        2  Hitachi


    Note  that MCP  will  delete DTYPE   from  the   called   DTE
address before passing the call request packet on to the HIF.

    When  the  NTN  is prefixed  with  a  0, a  logon  string  of
the  following  format will be used to place the call to the host
interface:









Page 162                 PBHERS.DOC







MCP                                           April 13, 1990




             MCP.xxxxx:yyyyy;password

             where:

                 MCP. is the user name prefix and is sysgen redefinable.
                 xxxxx is the MCP originating host number (as specified
                 in the HOST statement in the Tymfile).
                 yyyyy is the first five digits of the NTN following the
                 the 0 prefix.
                 password is the password provided in the Call User Data
                 of the Call Request packet.
                 Note:  At this time it is not possible to supply
                 the password in the Call User Data and
                 therefore makes this form of the Called
                 Address unusable for MCP circuit building.


         When  the  NTN  is prefixed  with  a  9, a  logon  string  of the
     following format will be used to place the call to the host interface:

             9yyyyy

             where:

                 yyyyy are all the digits of the NTN following the
                     9 prefix.
                     Note:  This numeric user name must be homed to
                     the destination host and must not require
                     a password.  It should also have a Class
                     that indicates that it may only originate
                     from the MCP host number specified in the
                     HOST statement of the Tymfile.  Note also,
                     that if multiple customers are to use the
                     same MCP server, there should be a separate
                     HOST statement for each, in order to preserve
                     security, since this host number is the only
                     way to control access when using this form
                     of called NTN.





5.1.3.2  _P_r_o_t_o_c_o_l__I_D


    The originator of the circuit must identify it's own   device
type by means of the  protocol ID in the call  user data field of
the call request packet.  The protocol IDs defined are:




Page 163                 PBHERS.DOC







MCP                                           April 13, 1990



        56  IBM host initiated call
        57  IBM terminal initiated call
        66  Fujitsu host initiated call
        67  Fujitsu terminal initiated call
        76  Hitachi host initiated call
        77  Hitachi terminal initiated call




5.1.3.3  _C_a_l_l__U_s_e_r__D_a_t_a


    The  call user  data field   of  the   call  request   packet
will  be  modified  in  the  "Character  Set"  bits  to  have two
additional values:

        4  Katakana
        5  Kanji




5.1.4  Data Transfer


    Once the call has  been accepted MCP performs conversion   on
data  messages    as   needed.     ISIS    messages,   with   the
exception  of backpressure, and non-data  packets  are  forwarded
unmodified by MCP.




5.1.4.1  _C_o_n_v_e_r_s_i_o_n__P_r_o_c_e_s_s


    MCP will convert attribute  characters,  control  characters,
buffer  addresses,   and  Kanji   code  set.    All  other   data
is  passed transparently.   Details   concerning  the  conversion
process  are   to be provided by  Network Service Company.   Most
of these  conversions are described in the Bit Mappings chapter.

    Untranslatable or unknown data characters will  be  converted
to a Tymfile specifiable character.









Page 164                 PBHERS.DOC







MCP                                           April 13, 1990



5.1.4.2  _F_o_r_w_a_r_d__A_b_o_r_t


    If  a forward  abort  (data  frame   ending  with   ENQ)   is
detected  during   conversion,  conversion  will  cease  and  the
block  will be forwarded.  The contents of this block  should  be
of  no   importance due to the abort being signalled at the frame
level.

    Forward  abort  can cause  problems  with respect  to   Early
Data  Forwarding  (EDF).  This is due to the fact the the forward
abort only applies to the  block in which  it   occurs.   If  for
example,   the  setup being used is Fujitsu terminal to  IBM host
and the host sends  a 3000 byte block  to the terminal   and  the
block  is terminated with  an ENQ (Forward Abort), MCP  must hold
onto all  data in the block  until the terminator is seen.   This
is necessary even though it  is re-blocking into 256 byte blocks.
This is because when the Forward Abort  is  seen,  all  the  "re-
blocked" blocks must be discarded.  It is not necessary to inform
the terminal or terminal interface that the forward   abort  took
place because the host should resend the block.

    Since it is necessary for MCP to hold onto all data  in   the
block  from  the  host, MCP must  have buffering capacity for the
whole block.  This  will  cause  EDF  from   the   host   to   be
defeated,   causing  an  additional  serialization  delay in  MCP
greater than  or equal  to the size  of the   frame  divided   by
the   throughput  class   of   the  circuit (typically 2400 cps).
case more that one second.




5.1.4.3  _L_e_v_e_l_-_2__K_a_n_j_i


    The level-2 definition of Kanji  is  to  be  supported,  this
will be included as a  sysgen option.  This  is due to  the large
size  of the conversion  table  and  the   fact   that   it  will
only  be  needed when accessing IBM equipment.




5.1.4.4  _A_u_t_o_s_k_i_p__f_o_r__H_i_t_a_c_h_i


    If  a  protected  numeric  autoskip  attribute  is   detected
flowing to a Hitachi device, it will  be converted to a protected
alpha  autoskip  attribute.    A  protected   numeric    autoskip
attribute   from   a  Hitachi  device   will  be  converted to  a



Page 165                 PBHERS.DOC







MCP                                           April 13, 1990



protected  alpha attribute  if  it is destined for a  non-Hitachi
device.




5.1.4.5  _D_a_t_a__R_e_-_B_l_o_c_k_i_n_g


    If during the conversion process the  data  message   expands
beyond  the  maximum  block   size  MCP will forward  the current
contents  of the conversion block and start a new block.   Orders
will  not  be  split  when re-blocking is  performed.  This  is a
more  restrictive rule  than is required but will allow  an  easy
implementation.




5.1.4.6  _P_r_i_n_t_e_r_s


    Support for printers will be included.




5.1.4.7  _R_e_p_e_a_t__t_o__A_d_d_r_e_s_s


    This  order  normally  consists   of  the  order  byte   (3C)
followed by two bytes of  screen address and the  character to be
repeated.  When this order  is  found  in   Kanji  fields  it  is
handled  differently   by IBM and Hitachi.  IBM assumes that  the
character to be repeated  is KANJI and therefore  includes a   2-
byte  character   to  be  repeated.  Hitachi treats the order the
same as  it  does  in  non-Kanji  fields  and  expects  a  1-byte
repetition  character.   It  is assumed that Fujitsu  treats this
order in the same manner as IBM.

    When MCP  receives this order  in an IBM  or  Fujitsu   Kanji
field  going  to  a  Hitachi  device, it will check to see if the
character  is a space or asterisk.  If it is, it will convert the
character  to  it's  1- byte representation.  Otherwise, MCP will
replace the character with  a  user  defined  (sygenable)  1-byte
character  to  represent   the conversion failure.  For Repeat to
Address  orders  flowing  from  a   Hitachi  device  the  reverse
conversion will be applied.






Page 166                 PBHERS.DOC







MCP                                           April 13, 1990



5.1.5  Call Clearing




5.1.5.1  _C_o_n_v_e_r_s_i_o_n__F_a_i_l_u_r_e


    In the event of a conversion failure MCP  will  send  a  text
message  (sysgen  redefinable)   indicating  the   nature of  the
problem  and then clear the call.



5.1.5.2  _I_n_c_o_r_r_e_c_t_l_y__f_o_r_m_a_t_t_e_d__C_a_l_l_e_d__D_T_E__A_d_d_r_e_s_s


    MCP will clear calls back  to  the  TIF  if  the  called  DTE
address  is not  formatted  according to  the  formats listed  in
the  Called DTE Address section.



5.1.5.3  _Z_a_p_p_e_r_s


    On receipt  of a zapper  MCP will zap  the associated TIF  or
HIF circuit.



5.1.6  MCP Generated Messages



    All  text  messages generated  by  MCP will  be   redefinable
with  Tymfile  statements.   The default  messages will  identity
MCP  as the originator.




5.1.7  Write Structured Field



    There is one IBM Structured  field  that  will  have  to   be
supported  by  MCP   when  talking  to an IBM  host.  It  is Read
Partition (Query) which is used to identify the  capabilities  of
the  terminal.   This  will have  to  be  implemented  as  canned
message   that   will   be   sysgen  definable.     The   default



Page 167                 PBHERS.DOC







MCP                                           April 13, 1990



response  to  this structured  field  will be supplied by Network
service Company.




5.1.8  Hitachi Print Control Characters



    Hitachi supports four  print control characters that  Fujitsu
and  IBM don't.  They  are Shift Out (0E),  Cancel (18), Vertical
Tab (0B) and  Bell (2F).   These  characters   will  be   ignored
(discarded) when found.




5.1.9  Re-blocking for Hitachi



    Both IBM and  Fujitsu support block   sizes  of  3000   bytes
maximum  for  frames  traveling to the  terminal.  Hitachi has  a
limit  of 1024 bytes for these frames  and  they  are  terminated
with an ETB  except for the  last frame  in a  command.  IBM  and
Fujitsu  treat ETBs  in this direction as ETX.

    Therefore, ETB frames from a Hitachi host will be   reblocked
into  a  single  ETX  frame  before   being sent to a non-Hitachi
terminal.  The 3000 byte limit will not be checked because it  is
not  anticipated that this limit will be exceeded for a 1920 byte
screen.

    ETX frames flowing to a Hitachi terminal from a   non-Hitachi
host  will   have to  be split  into  ETB frames  if they  exceed
256 bytes.  Orders including KANJI shift will not be split.





5.2  Monitoring


    There will be a  number  of  displays  available  with   this
product.   Included  will  be  a dispatcher ring trace capable of
displaying EBCDIC translated data.






Page 168                 PBHERS.DOC







MCP                                           April 13, 1990



5.2.1  Port Display


    The Extended DDT command  "PORT" will produce a display  with
the following information for currently active sessions:


            o Port number
            o Associated Port number
            o DCB pointer
            o Associated DCB pointer
            o Host number
            o Circuit Sate
            o Calling address from the Call Request packet
            o Called address from the Call Request packet




5.2.2  Log Display


    The Extended DDT command "LOG"  will  produce  a   historical
display  of   past   MCP  sessions.   The  display  will  include
the  following information:


            o Host number
            o Text of the call clearing message (displayed in English)
            o GMT time of the call clearing
            o DCB pointer
            o Input port number
            o Associated DCB pointer
            o Output (associated) port number
            o Circuit state at the time of clearing
            o Calling address from the Call Request packet
            o Called address from the Call Request packet






5.3  Limitations










Page 169                 PBHERS.DOC







MCP                                           April 13, 1990



5.3.1  81st column on IBM terminals


    Support for 81st  column  is  not  included.   MCP  will  not
attempt  to  detect  any  use of this  feature and will pass data
without attempting to correct for this.  The  formatting  of  the
screen  is  not guaranteed when  communicating between  terminals
and  applications that  are not compatible with respect to this.



5.3.2  Kanji Shift Character


    Kanji  shift characters  flowing from  an  IBM   host  to   a
non-IBM  terminal  will  be  preceded  or   followed  by  a  null
character  which will cause the display on the  non-IBM  terminal
to  appear  as it would  on an IBM terminal.  This  is due to the
fact that IBM terminals  display a shift in  or out  as a  space,
whereas   Fujitsu  and   Hitachi  terminals  don't  display   the
character at  all.  If the  display is read  with a  Read  Buffer
command  these  nulls will  not be  removed from  the data stream
and will  most likely cause  problems for the   IBM  application.
Kanji  shift  characters flowing  from or to  Hitachi or  Fujitsu
hosts will  not be  modified.  Therefore,   when  using   an  IBM
terminal  with  these  hosts,   the  screen may  not be displayed
correctly if  Kanji is being used.



5.3.3  Break Key


    Hitachi hosts support the break key for various applications,
but  IBM  and  Fujitsu do not.  The break key, when received from
an Hitachi terminal logged into an IBM or Fujitsu host,  will  be
discarded and the keyboard unlocked by MCP.



5.3.4  Unsupported Commands













Page 170                 PBHERS.DOC







MCP                                           April 13, 1990




         Receipt of unsupported orders  or commands will result in  a text
     message to the TIF and the call being cleared.

         This is a partial list of the unsupported commands:

                             Fujitsu       Hitachi
                             -------       -------
     Commands:
     ---------
     Erase/Write Alternate                    X
     Read Modified All                        X


5.3.5  Terminal and Host Timeouts


    It  may be  necessary to   adjust  timeout   values  in   the
host   or  terminal  when  using   MCP  to  compensate   for  any
additional  network or processing delays.



5.3.6  Screen Sizes


    MCP will  not be capable   of  converting  from   one  screen
size to another.  The only supported screen size will be 1920.



5.3.7  Gateway Access


    MCP  will  support access  from  remote  TIF's   on   another
Tymnet  network through a  Tymnet gateway.  However, MCP  must be
in  the same network as the HIF.



5.3.8  Write Structured Field Command


    The IBM Write Structured Field command is  not  supported  by
either  Fujitsu  or  Hitachi.   Except  for  the  Read  Partition
(Query) structured field, this command will be ignored.








Page 171                 PBHERS.DOC







MCP                                           April 13, 1990



5.3.9  Test Request


    The Test Request (TRQ) bit of a  DSP  Response  message  will
not be supported.  When found it will be ignored.



5.3.10  Multiple User DSP Circuits


    Multiple User DSP Circuits, that is,  ones  requiring  a  DSP
Circuit  Request  message  will not be supported.  When found, it
will  cause the circuit to be cleared.



5.3.11  Command Chaining


    Due to the implementation of DSP within PBT and PBH, MCP will
not   support    Command   Chaining  as   defined   in  the   DSP
Reference Manual.  Instead, ETB blocks  flowing from a host  will
be treated the  same as ETB blocks flowing from a terminal.  That
is,  it  will  be  considered  to  represent   segmenting   (text
blocking).



5.3.12  Connection Request Mode


    DSP Connection Request  Mode  4  (CRM  =   4)  will  not   be
supported.  When found it will cause the circuit to be cleared.



5.3.13  DSP Protocol Violations


    There are two known violations of the DSP protocol that   MCP
will  have  to   conform to. This  is due to  the implementations
used  in the Polled BiSync Terminal (PBT),   Polled  BiSync  Host
(PBH)  and Character Mode Terminal Interface (CMTI) products.

    The first is that the  Sense/Status  (S/S)  bytes  that   are
supposed  to  be  appended to the end of Response Undelivered and
Response Aborted messages will not be  expected  or  provided  by
MCP.

    The second is due to the  fact  that  Hitachi  performs  text



Page 172                 PBHERS.DOC







MCP                                           April 13, 1990



blocking  in  non-transparent  mode   from host to  terminal.  In
order  to support this, it was   decided  to  use  the   DSP  ETB
terminator  to   indicate  text  blocking  under  this  condition
instead  of  the  ETB's  standard DSP definition of  representing
command chaining.

    Because  of these   violations,  MCP   is  implemented   such
that  it assumes  that command  chaining will  never be  used (by
an  IBM host interface) and that ETBs in DSP frames  will  always
indicate  that Text Blocking (DSP segmenting) is being performed.












































Page 173                 PBHERS.DOC







MCP                                           April 13, 1990



5.4  Bit Mappings

                    Hitachi to IBM Copy Control Character

           Hitachi CB1                               IBM CCC

      Bit  Usage                                     Usage           Bit
     ---------------------                          ---------------------
     | 0 | Fixed (1)     |                          | *             | 0 |
     ---------------------                          ---------------------
     | 1 | Fixed (1)     |                          | Fixed (1)     | 1 |
     ---------------------                          ---------------------
     | 2 | Not Used      |                          | Printout      | 2 |
     ---------------------     -------------------> -          (00) -----
     | 3 | Print Control | ---/                     | Format        | 3 |
     ---------------------                          ---------------------
     | 4 | Start Print   | -----------------------> | Start Print   | 4 |
     ---------------------                          ---------------------
     | 5 | Sound Alarm   | -----------------------> | Sound Alarm   | 5 |
     ---------------------                          ---------------------
     | 6 | Type of Data  |                          | Type of Data  | 6 |
     -----               - -----------------------> -               -----
     | 7 | to be Copied  |                          | to be Copied  | 7 |
     ---------------------                          ---------------------



                    IBM to Hitachi Copy Control Character

           IBM CCC                                Hitachi CB1

      Bit  Usage                                  Usage               Bit
     ---------------------                       -------------------------
     | 0 | *             |                       | Fixed (1)         | 0 |
     ---------------------                       -------------------------
     | 1 | Fixed (1)     |                       | Fixed (1)         | 1 |
     ---------------------                       -------------------------
     | 2 | Printout      |                       | Not Used (0)      | 2 |
     -----               - -----                -------------------------
     | 3 | Format        |       --------------> | Print Control (1) | 3 |
     ---------------------                       -------------------------
     | 4 | Start Print   | --------------------> | Start Print       | 4 |
     ---------------------                       -------------------------
     | 5 | Sound Alarm   | --------------------> | Sound Alarm       | 5 |
     ---------------------                       -------------------------
     | 6 | Type of Data  |                       | Type of Data      | 6 |
     -----               - --------------------> -                   -----
     | 7 | to be Copied  |                       | to be Copied      | 7 |
     ---------------------                       -------------------------

                             Hitachi CB2 to IBM WCC



Page 174                 PBHERS.DOC







MCP                                           April 13, 1990



           Hitachi CB2 (0)                         IBM WCC

      Bit  Usage                                   Usage              Bit
     -------------------------                    ------------------------
     | 0 | Fixed (1)         |                    | *                | 0 |
     -------------------------                    ------------------------
     | 1 | Fixed (0)         |                    | Reset Bit (0)    | 1 |
     -------------------------                    ------------------------
     | 2 | Fixed (0)         |                    | Printout         | 2 |
     -------------------------     -------------> -          (00)    -----
     | 3 | Print Control     | ---/               | Format           | 3 |
     -------------------------                    ------------------------
     | 4 | Start Print       | -----------------> | Start Print      | 4 |
     -------------------------                    ------------------------
     | 5 | Sound Alarm       | -----------------> | Sound Alarm      | 5 |
     -------------------------                    ------------------------
     | 6 | Keyboard Restore  | -----------------> | Keyboard Restore | 6 |
     -------------------------                    ------------------------
     | 7 | Reset TF Bits     | -----------------> | Reset MDT Bits   | 7 |
     -------------------------                    ------------------------

          Hitachi CB2 (1)

     -------------------------
     | 0 | Fixed (1)         |
     -------------------------
     | 1 | Fixed (0)         |
     -------------------------
     | 2 | Fixed (0)         |
     -------------------------
     | 3 | Screen            |
     -----                   -
     | 4 | Size              |
     -------------------------
     | 5 | Modulas           |
     -------------------------
     | 6 | Fixed (0)         |
     -------------------------
     | 7 | Fixed (1)         |
     -------------------------


                             IBM WCC to Hitachi CB2

           IBM WCC                                 Hitachi CB2 (0)

      Bit  Usage                                  Usage               Bit
     ------------------------                    -------------------------
     | 0 | *                |                    | Fixed (1)         | 0 |
     ------------------------                    -------------------------
     | 1 | Reset Bit        |                    | Fixed (0)         | 1 |



Page 175                 PBHERS.DOC







MCP                                           April 13, 1990



     ------------------------                    -------------------------
     | 2 | Printout         |                    | Fixed (0)         | 2 |
     -----                  -                    -------------------------
     | 3 | Format           |                    | Print Control (1) | 3 |
     ------------------------                    -------------------------
     | 4 | Start Print      | -----------------> | Start Print       | 4 |
     ------------------------                    -------------------------
     | 5 | Sound Alarm      | -----------------> | Sound Alarm       | 5 |
     ------------------------                    -------------------------
     | 6 | Keyboard Restore | -----------------> | Keyboard Restore  | 6 |
     ------------------------                    -------------------------
     | 7 | Reset MDT Bits   | -----------------> | Reset TF Bits     | 7 |
     ------------------------                    -------------------------

                                                       Hitachi CB2 (1)

                                                 -------------------------
                                                 | 0 | Fixed (1)         |
                                                 -------------------------
                                                 | 1 | Fixed (0)         |
                                                 -------------------------
                                                 | 2 | Fixed (0)         |
                                                 -------------------------
                                                 | 3 | Screen            |
                                                 -----        (00)       -
                                                 | 4 | Size              |
                                                 -------------------------
                                                 | 5 | Modulas (0)       |
                                                 -------------------------
                                                 | 6 | Fixed (0)         |
                                                 -------------------------
                                                 | 7 | Fixed (1)         |
                                                 -------------------------


                              Hitachi CB0 to IBM WCC

          Hitachi CB0                              IBM WCC

      Bit  Usage                                   Usage              Bit
     -------------------------                    ------------------------
     | 0 | Fixed (1)         |                    | *                | 0 |
     -------------------------                    ------------------------
     | 1 | Fixed (1)         |                    | Reset Bit (0)    | 1 |
     -------------------------                    ------------------------
     | 2 | Reserve           |                    | Printout         | 2 |
     -------------------------     -------------> -          (00)    -----
     | 3 | Print Control     | ---/               | Format           | 3 |
     -------------------------                    ------------------------
     | 4 | Start Print       | -----------------> | Start Print      | 4 |
     -------------------------                    ------------------------



Page 176                 PBHERS.DOC







MCP                                           April 13, 1990



     | 5 | Sound Alarm       | -----------------> | Sound Alarm      | 5 |
     -------------------------                    ------------------------
     | 6 | Keyboard Restore  | -----------------> | Keyboard Restore | 6 |
     -------------------------                    ------------------------
     | 7 | Reset TF Bit      | -----------------> | Reset MDT Bit    | 7 |
     -------------------------                    ------------------------


                             IBM WCC to Hitachi CB0

          IBM WCC                                 Hitachi CB0

      Bit Usage                                   Usage               Bit
     ------------------------                    -------------------------
     | 0 | *                |                    | Fixed (1)         | 0 |
     ------------------------                    -------------------------
     | 1 | Reset Bit        |                    | Fixed (1)         | 1 |
     ------------------------                    -------------------------
     | 2 | Printout         |                    | Reserved (0)      | 2 |
     -----                  -                    -------------------------
     | 3 | Format           |                    | Print Control (1) | 3 |
     ------------------------                    -------------------------
     | 4 | Start Print      | -----------------> | Start Print       | 4 |
     ------------------------                    -------------------------
     | 5 | Sound Alarm      | -----------------> | Sound Alarm       | 5 |
     ------------------------                    -------------------------
     | 6 | Keyboard Restore | -----------------> | Keyboard Restore  | 6 |
     ------------------------                    -------------------------
     | 7 | Reset MDT Bit    | -----------------> | Reset TF Bit      | 7 |
     ------------------------                    -------------------------


                         Hitachi DFC to IBM Field Attribute

           Hitachi DFC I
     --------------------------
     | 7 | Intensity          |
     -----                    - ---------| 6 |                    |          |
     --------------------------          |
     | 5 | Blink              |          |
     --------------------------          |
     | 4 | Score Line         |          |
     --------------------------          |
     | 3 | Color              | -------->|        IBM Field Attribute
     --------------------------          |      --------------------------
     | 2 | Reserved           |    /---- | ---> | MDT                | 7 |
     --------------------------    |     |      --------------------------
     | 1 | Fixed (1)          |    |     |      | Reserved           | 6 |
     --------------------------    |     |      --------------------------
     | 0 | Fixed (1)          |    |     |      | D/SPD              | 5 |
     --------------------------    |     ----> -       (A)          -----



Page 177                 PBHERS.DOC







MCP                                           April 13, 1990



                                   |            |                    | 4 |
                                   |            --------------------------
           Hitachi DFC II          |            | Alpha/Numeric      | 3 |
     --------------------------    |     /----> - - - - - - - - (B) ------
     | 7 | TF                 | -- /     |      | Protection         | 2 |
     --------------------------          |      --------------------------
     | 6 | Print              |          |      | *                  | 1 |
     --------------------------          |      --------------------------
     | 5 | Alpha              |          |      | *                  | 0 |
     -----                    - ---------/      --------------------------
     | 4 | Numeric            |
     --------------------------
     | 3 | Fixed (0)          |                     (A)
     --------------------------                     --------------------
     | 2 | DFC III Identify   |                     |  DFC I   | ATTR. |
     --------------------------                     | b3 b6 b7 | b4 b5 |
     | 1 | Fixed (1)          |                     |----------|-------|
     --------------------------                     |  x  0  0 |  0  0 |
     | 0 | Fixed (1)          |                     |  x  0  1 |  0  1 |
     --------------------------                     |  x  1  0 |  1  0 |
                                                    |  0  1  1 |  1  1 |
                                                    |  1  1  1 |  1  0 |
                                                    --------------------































Page 178                 PBHERS.DOC







MCP                                           April 13, 1990




     Hitachi DFC III
     --------------------------
     | 7 | Auto               |
     -----                    -               (B)
     | 6 | Skip               |               ----------------------------
     --------------------------               | DFC II| DFC III || ATTR. |
     | 5 | Ignore             |               | b4 b5 |  b6 b7  || b2 b3 |
     --------------------------               |-------|---------||-------|
     | 4 | Ignore             |               |  0  0 |   x  x  ||  0  0 |
     --------------------------               |  0  1 |   x  x  ||  0  0 |
     | 3 | Ignore             |               |  1  0 |   0  0  ||  1  1 |
     --------------------------               |  1  0 |   x  x  ||  1  0 |
     | 2 | Fixed (0)          |               |  1  1 |   x  x  ||  0  1 |
     --------------------------               ----------------------------
     | 1 | Fixed (0)          |
     --------------------------
     | 0 | Fixed (1)          |
     --------------------------


                         IBM Field Attribute to Hitachi DFC

                                                      Hitachi DFC I
                                                --------------------------
                                                | Intensity          | 7 |
                                   /----------> -           (A)      -----
                                   |            |                    | 6 |
                                   |            --------------------------
                                   |            | Blink (0)          | 5 |
                                   |            --------------------------
                                   |            | Score Line (0)     | 4 |
                                   |            --------------------------
           IBM Field Attribute     |            | Color (0)          | 3 |
     --------------------------    |            --------------------------
     | 7 | MDT                | -- | ------    | Reserved (0)       | 2 |
     --------------------------    |       |    --------------------------
     | 6 | Reserved           |    |       |    | Fixed (1)          | 1 |
     --------------------------    |       |    --------------------------
     | 5 | D/SPD              |    |       |    | Fixed (1)          | 0 |
     -----                    - ---/---   |    --------------------------
     | 4 |                    |        |   |
     --------------------------        |   |
     | 3 | Alpha/Numeric      |        |   |          Hitachi DFC II
     -------------------------- ---   |   |    --------------------------
     | 2 | Protection         |    |   |   --> | TF                 | 7 |
     --------------------------    |   |        --------------------------
     | 1 | *                  |    |   ------> | Print              | 6 |
     --------------------------    |            --------------------------
     | 0 | *                  |    |            | Alpha              | 5 |
     --------------------------    ----------> -         (B)        -----



Page 179                 PBHERS.DOC







MCP                                           April 13, 1990



                                                | Numeric            | 4 |
                                                --------------------------
     (A)                                        | Fixed (0)          | 3 |
     ---------------------------                --------------------------
     | ATTR. || DFC I | DFC II |                | DFC III Identify   | 2 |
     | b4 b5 || b6 b7 |   b6   |                --------------------------
     |-------||-------|--------|                | Fixed (1)          | 1 |
     |  0  0 ||  0  0 |    0   |                --------------------------
     |  0  1 ||  0  1 |    0   |                | Fixed (1)          | 0 |
     |  1  0 ||  1  0 |    0   |                --------------------------
     |  1  1 ||  1  1 |    1   |
     ---------------------------
                                                Hitachi DFC III
                                                --------------------------
     (B)                                        | Auto               | 7 |
     -----------------------------              -      (B)           -----
     | ATTR. || DFC II | DFC III |              | Skip               | 6 |
     | b2 b3 || b4 b5  |  b6 b7  |              --------------------------
     |-------||--------|---------|              | Ignore (0)         | 5 |
     |  0  0 ||  0  0  |   0  1  |              --------------------------
     |  0  1 ||  1  1  |   0  1  |              | Ignore (0)         | 4 |
     |  1  0 ||  1  0  |   0  1  |              --------------------------
     |  1  1 ||  1  0  |   0  0  |              | Ignore (0)         | 3 |
     -----------------------------              --------------------------
                                                | Fixed (0)          | 2 |
                                                --------------------------
                                                | Fixed (0)          | 1 |
                                                --------------------------
                                                | Fixed (1)          | 0 |
                                                --------------------------



                       Hitachi Sense/Status to IBM Sense/Status

     ---------------------------------------           -----------
     | S/S 0 BITS ARRAY | S/S 1 BITS ARRAY |           | IBM S/S |
     | 0 1 2 3 4 5 6 7  | 0 1 2 3 4 5 6 7  |           |         |
     |------------------|------------------|           |---------|
     | 0 0 0 0 0 0 0 0  | 0 0 0 0 0 0 0 0  | -- (A) -> |  ----   |
     | 1 1 X X 1 X X X  | 1 1 X X X X X X  | --------> |  C4C4   |
     | 1 1 X X 0 1 X X  | 1 1 X X X X X X  | --------> |  C240   |
     | 1 1 X X 0 0 1 X  | 1 1 X X X X X X  | --------> |  4050   |
     | 1 1 1 X 0 0 0 X  | 1 1 X X X X X X  | --------> |  C240   |
     | 1 1 0 1 0 0 0 X  | 1 1 X X X X X X  | --------> |  C250   |
     | 1 1 0 0 0 0 0 X  | 1 1 X X X X X 1  | --------> |  C240   |
     | 1 1 0 0 0 0 0 1  | 1 1 X X X X X 0  | --------> |  C8C1   |
     | 1 1 0 0 0 0 0 0  | 1 1 X X X X 1 0  | --------> |  40C1   |
     | 1 1 0 0 0 0 0 0  | 1 1 X X X 1 0 0  | --------> |  4060   |
     | 1 1 0 0 0 0 0 0  | 1 1 X X 1 0 0 0  | --------> |  C840   |
     | 1 1 0 0 0 0 0 0  | 1 1 X 1 0 0 0 0  | -- (B) -> |  ----   |



Page 180                 PBHERS.DOC







MCP                                           April 13, 1990



     | 1 1 0 0 0 0 0 0  | 1 1 0 0 0 0 0 0  | -- (C) -> |  ----   |
     ---------------------------------------           -----------

             (A)  Circuit ZAP with "Sense/Status lost" message.

             (B)  Circuit ZAP with "GAIJI Found" message.

             (C)  Circuit ZAP with "Invalid Sense/Status" message.

          Note:  The Hitachi S/S should be checked in the order specified.


                        IBM Sense/Status to Hitachi Sense/Status

      IBM S/S                        HITACHI S/S
     ----------                      ----------
     |  4060  | -------------------> |  C0C4  |
     ----------                      ----------
     |  40C1  | -------------------> |  C0C2  |
     ----------                      ----------
     |  C4C1  | -------------------> |  C1C0  |
     ----------                      ----------
     |  4050  | -- Set Bit Flag A -> |  C2C0  |
     ----------                      ----------
     |  40D1  | -------------------> |  C1C0  |
     ----------                      ----------
     |  40C4  | -------------------> |  C0C2  |
     ----------                      ----------
     |  C4C4  | -------------------> |  C8C0  |
     ----------                      ----------
     |  C4C5  | -------------------> |  C0C2  |
     ----------                      ----------
     |  C6C4  | -------------------> |  C8C0  |
     ----------                      ----------
     |  C250  | -- Set Bit Flag B -> |  D0C0  |
     ----------                      ----------
     |  C6C8  | -------------------> |  C8C0  |
     ----------                      ----------
     |  C6D8  | -------------------> |  C8C0  |
     ----------                      ----------
     |  C840  | -------------------> |  C0C8  |
     ----------                      ----------
     |  4C40  | -------------------> |  C0C8  |
     ----------                      ----------
     |  C8C1  | -------------------> |  C1C0  |
     ----------                      ----------
     |  C240  | -------------------> |  C4C0  |  (A)
     ----------                      ----------
            (A)
             If C240 is received on a printer circuit, the following
             table is used for the conversion.  Bit flags A and B



Page 181                 PBHERS.DOC







MCP                                           April 13, 1990



             are reset following this conversion.  Their initial
             setting will be A = 1, B = 0.

                 ----------------
                 | FLAG || S/S  |
                 | A B  ||      |
                 |------||------|
                 | 0 0  || C0C1 |
                 | 0 1  || E0C0 |
                 | 1 X  || C4C0 |
                 | 1 X  || C4C0 |
                 ----------------










































Page 182                 PBHERS.DOC







MCP                                           April 13, 1990



5.5  Sysgen

5.5.1  Statements

5.5.1.1  _B_E_G_I_N_T_Y_M

    The BEGINTYM statement must be  the  first  in  the  Tymfile.
It  is  used  to   delineate  the beginning  of the configuration
statements and perform necessary initializations in  addition  to
printing a banner.



5.5.1.2  _O_P_T_I_O_N



         This  is a  general  utility statement  that is  used  whenever a
     single parameter is to be set.  This is equivalent to an assembler GL
     and EQ statement.  It's format is as follows:

             OPTION(parameter,value)

             where:

                 parameter is the name of the parameter to the defined

                 value is the value to which the parameter is to be set.
                     value may be 1, ON, or YES for a true setting
                                  2, OFF or NO for a false setting
                                  or it may be a hex value (preceded
                                  with a 0)

          See the section on Defaults for it's specific usage.





5.5.1.3  _M_E_S_S_A_G_E














Page 183                 PBHERS.DOC







MCP                                           April 13, 1990





         This statement is used to redefine the default text of the server
     generated error messages.  It's format is as follows:

             MESSAGE(name,text)

             where:

                 name is the name of the text string to be replaced.
                     See below for the list and text of all the
                     default messages.

                 text is the text to be substituted for the default.
                     Slashes must be entered as "AF and semi-colons must
                     be entered as "BB


     Name   Text
     ----   ----
     8X8X   /UNDEFINED GLOBAL IIX MESSAGE FOUND/
     8085   /UNSUPPORTED IIX MESSAGE = RESYNCRONIZE/
     C0XX   /UNDEFINED LOCAL IIX MESSAGE FOUND/
     C0891  /UNSUPPORTED PROTOCOL ID - NON-DSP INDICATED/
     C0892  /UNSUPPORTED DSP CALL USER DATA CONTROL BYTE/
     C0893  /THE CALLED DNIC DOES NOT MATCH THE LOCAL NET/
     C0894  /NOT ENOUGH DIGITS IN THE CALLED NTN - NEED 6 OR MORE/
     C0895  /UNSUPPORTED CONVERSION COMBINATION/
     C0896  /UNSUPPORTED DESTINATION TYPE/
     C089A  /CRM VALUE OUT OF RANGE IN CALL USER DATA/
     C089B  /CRM=4 NOT SUPPORTED/
     C0931  /UNSUPPORTED TURKEY LEVEL - MUST BE LEVEL 1/
     C0941  /RECEIVED FORWARD ABORT/
     C0942  /BAD HITACHI START"AFSTOP KANJI SEQUENCE/
     C0943  /UNTRANSLATABLE SENSE"AFSTATUS/
     C0944  /NEW DSP MESSAGE STARTED BEFORE THE PREVIOUS COMPLETED/
     C094A  /UNTRANSLATABLE AID/
     C094B  /ERASE"AFWRITE ALTERNATE ORDER NOT TRANSLATABLE/
     C094C  /READ MODIFIED ALL ORDER NOT TRANSLATABLE/
     C094D  /UNDEFINED DSP MESSAGE ID/
     C094E  /ETX FOUND, STRUCTURED FIELD NOT TERMINATED PROPERLY/
     C094H  /GRAPHIC ESCAPE NOT TRANSLATABLE/
     C094J  /UNDEFINED ORDER FOUND/
     C094K  /ILLEGAL BLOCK TERMINATOR FOUND/
     C094L  /ETX FOUND, ORDER NOT TERMINATED PROPERLY/
     C094M  /UNDEFINED ATTRIBUTE TYPE IN SET ATTRIBUTE ORDER/
     C094N  /UNDEFINED ATTRIBUTE TYPE IN START FIELD EXTENDED ORDER/
     C094P  /UNDEFINED FIELD ATTRIBUTE IN START FIELD EXTENDED ORDER/
     C094Q  /UNDEFINED ATTRIBUTE TYPE IN MODIFY FIELD ORDER/
     C094R  /ESCAPED GRAPHIC NOT TRANSLATABLE IN REPEAT TO ADDRESS ORDER/
     C094S  /INVALID CHARACTER IN REPEAT TO ADDRESS ORDER/



Page 184                 PBHERS.DOC







MCP                                           April 13, 1990



     C094T  /TRIGGER ACTION OR CLEAR PARTITION AID NOT SUPPORTED/
     C094U  /SYSTEM REQUEST AID NOT SUPPORTED/
     C094Y  /INVALID ADDRESS BYTE (VALUE OUT OF RANGE)/
     C094Z  /INVALID HITACHI DFC BYTE (VALUE OUT OF RANGE)/
     00001  /MCP HOST OUT OF PORTS/
     00002  /CALLED BY A NON-IIX INTERFACE - UNSUPPORTED/
     0900   /SLOT 0 WILL HONOR REQUEST AT THIS TIME...TRY LATER/
     0901   /FORMAT ERROR/
     0902   /BAD USER NAME/
     0903   /BAD MUD/
     0904   /SYSTEM UNAVAILABLE/
     0905   /DOWN-LINE LOAD OR DIAL-OUT REQUEST FAILURE/
     0906   /TIMEOUT/
     0907   /ACCESS NOT PERMITTED/
     0908   /OUT OF ORIGINATION PORTS/
     0909   /SUP WILL NOT HONOR REQUEST AT THIS TIME...TRY LATER/
     9D00   /RECEIVED NON-3270 FORMATTED DATA/
     9E00   /RECEIVED DETACH/
     9F00   /RECEIVED ZAP/
     A400   /RECEIVED BLACK BALL/
     A500   /RECEIVED GREY BALL/
     AF00   /RECEIVED HANG/
     B800   /RECEIVED SUPER-HANG/
     XX00   /NON-PORT 0 ISIS MESSAGE RECEIVED/
     LTMO   /TIMEOUT DURING LOGON/
     B600   /MCP REACHED IIX HOST - NOT SUPPORTED/
     BNTN   /BAD CALLED NTN - IT MUST BEGIN WITH A 0 OR 9/
     SSLST  /SENSE"AFSTATUS LOST/
     GAIJI  /GAIJI FOUND/
     INVSS  /INVALID SENSE"AFSTATUS/
     B400   /CONTINUE/
     B401   /PLEASE LOG IN/
     B402   /ERROR, TYPE USERNAME/
     B403   /ERROR, TYPE PASSWORD/
     B404   /USERNAME/
     B405   /PASSWORD/
     B406   //
     B407   //
     B408   /PLEASE SEE YOUR REPRESENTATIVE/
     B409   /BAD MUD/
     B40A   /CIRCUITS BUSY/
     B40B   /HOST NOT AVAILABLE THROUGH NET/
     B40C   /HOST OUT OF PORTS/
     B40D   /HOST DOWN/
     B40E   /HOST SHUT/
     B40F   /TRY AGAIN IN 2 MINUTES/
     B410   /ACCESS NOT PERMITTED/
     B411   /NO HOST SPECIFIED/
     B412   /BAD HOST NUMBER/
     B413   /MUD ERROR/
     B414   //



Page 185                 PBHERS.DOC







MCP                                           April 13, 1990



     B415   //
     B416   //
     B417   //
     B418   //
     B419   //
     B41A   //
     B41B   //
     B41C   //
     B41D   //
     B41E   //
     B41F   //
     B500   /ISIS UNABLE OT COMPLETE REQUEST/
     B501   /FORMAT ERROR/
     B502   /BAD USER NAME/
     B503   /BAD MUD/
     B504   /SYSTEM UNAVAILABLE/
     505   /DOWN-LINE LOAD OR DIAL-OUT FAILURE/
     B506   /TIMEOUT/
     B507   /ACCESS NOT PERMITTED/
     B508   /OUT OF ORIGINATION PORTS/
     B509   /TRY AGAIN LATER/
     B50A   /BAD REQUESTING-HOST NUMBER/
     B50B   /REQUESTING-HOST NOT UP ON REQUESTING NODE/
     B50C   //
     B50D   //
     B50E   //
     B50F   //





5.5.1.4  _H_O_S_T


         This statement  is used to  define a host  number and to  begin a
     host  group.   A  host  group consists  of  two  statements,  HOST and
     SESSIONS.  There must be at least one pair of these statements  in the
     Tymfile.  There may be multiple groups that will allow security  to be
     provided between groups of users.   The format of this statement  is a
     follows:

          HOST(host number)

             where:

                 host number is the Tymnet technology host number assigned
                 by the network administrator.






Page 186                 PBHERS.DOC







MCP                                           April 13, 1990



5.5.1.5  _S_E_S_S_I_O_N_S



         This is  a required  statement and  must immediately  follow each
     HOST statement in the Tymfile.  It defines the number  of simultaneous
     sessions the specified host is  to allow.  That is, it  represents the
     number  of users  that can  use  the MCP  host specified  in  the HOST
     statement.  Each additional  session specified causes extra  memory to
     be required, so this parameter should be set to a reasonably low value.
     It's format is as follows:

             SESSIONS(number of simultaneous sessions for this host)

             where:

                 the number of simultaneous sessions defines he maximum
                 number of users that can access this host at once.
                 The maximum number of sessions that can be specified
                 is approximately 24.





5.5.1.6  _E_N_D_T_Y_M


    This statment  delineates the end  of the Tymfile  statements
and  performs  enables  consistency  checking  of  the  specified
statements.




5.5.1.7  _D_e_f_a_u_l_t_s


















Page 187                 PBHERS.DOC







MCP                                           April 13, 1990





         There  are a  number  of parameters  in this  interface  that are
     defaulted to general and reasonable values.  These parameters  may be
     redefined if  a need is  found via the  OPTION statement  (see above).
     The following is a brief list of these parameters, their defaults and
     their range of redefinable values.

             CRSTOP - Default = OFF
                 ON causes the interface to halt on a software or hardware
                     detected fault.  This is invaluable for debugging
                     from a dump.
                 OFF causes the crash cause and location to be recorded
                     in the crash table (CRAT) and then a warm restart
                     of the slot is preformed.

             DEBUG - Default = OFF
                 ON enables consistency checking code within the
                    interface that will cause it to crash on an internal
                    fault.  OFF causes many internal consistency checks
                    to be ignored.

             BBF.Dx - Default = OFF (x = 1 to 4)
                 ON enables consistency checks within the buffering
                     package.  This is recommended for BETATEST code.
                 OFF disables the buffering consistency checks

             LNDNIC - Default = 0000 (no DNIC for the local net)
                 It may specify any valid DNIC assigned by the CCITT.
                 It is used as a check against the Called Address in
                 in a Call Request packet.  MCP must reside in the
                 same net as the destination host.  If no DNIC is
                 specified in the Called Address (address begins with
                 0 or 9) the host is assumed to reside in the local
                 net.  An LNDNIC value of 0000 indicates that the
                 local net has no DNIC (it is not operated by an
                 Recognized Public Operating Agency (RPOA)) and a
                 DNIC should not be supplied in the Called Address.
                 Example: OPTION(LNDNIC,3106).  This specifies that
                 TYMNET is the local net.

             KANJI - Default = ON
                 ON enables translation between IBM KANJI and JEF
                     KANJI.
                 OFF disables this translation and saves about 30k of
                     slot memory.  It should only be set to this
                     value if IBM equipment is not to be supported.

             HERRCH - Default = 04040x
                 This parameter is used to replace a KANJI character
                     that fails the standard translation to JEF KANJI.



Page 188                 PBHERS.DOC







MCP                                           April 13, 1990



                     It may be set to the ordinal for any valid
                     Hitachi JEF KANJI character.

             IERRCH - Default = 04040x
                 This parameter is used to replace a KANJI character
                     that fails the standard translation to IBM KANJI.
                     It may be set to the ordinal for any valid
                     IBM KANJI character.

             FERRCH - Default = 0A1A1x
                 This parameter is used to replace a KANJI character
                     that fails the standard translation to JEF KANJI.
                     It may be set to the ordinal for any valid
                     Fujitsu JEF KANJI character.

             IHRAKC - Default = 60x (EBCDIC dash)
                 This parameter is used to replace a Kanji character
                     in a Repeat to Address order for conversions
                     from IBM to Hitachi, if the character to be
                     repeated is not a space or asterisk.  It may be
                     set to any valid EBCDIC graphic character.

             HIRAKC - Default = IERRCH (See above)
                 This parameter is used to replace an EBCDIC character
                     in a Repeat to Address order for conversions
                     from Hitachi to IBM, if the character to be
                     repeated is not a space or asterisk.  It may be
                     set to any valid Hitachi JEF Kanji character.

             FHRAKC - Default = 60x (EBCDIC dash)
                 This parameter is used to replace a Kanji character
                     in a Repeat to Address order for conversions
                     from Fujitsu to Hitachi, if the character to be
                     repeated is not a space or asterisk.  It may be
                     set to any valid EBCDIC graphic character.

             HFRAKC - Default = FERRCH (See above)
                 This parameter is used to replace an EBCDIC character
                     in a Repeat to Address order for conversions
                     from Hitachi to Fujitsu, if the character to be
                     repeated is not a space or asterisk.  It may be
                     set to any valid Hitachi JEF Kanji character.












Page 189                 PBHERS.DOC







BELCOR                                        April 13, 1990



                          6.  BELCOR



     This  document describes  the implementations  of the   3270
Bisync   support     in     Tymnet's     3270    Polled    Bisync
Terminal   and  Host Interfaces(PBT/PBH).

     This  document also  describes  the  3270   Display   System
Protocol  implemented   by   Tymnet,  and   the  special  feature
of   Early  Data Forwarding.  The EDF has   been  implemented  in
both  the   To-Terminal  and the To-Host directions in the latest
releases of PBH and PBT.




6.1  HOW TYMNET IMPLEMENTS 3270 BSC




6.1.1  PBH - POLLED BISYNC HOST INTERFACE



     In  the   Bisync  environment,  there   is  a   master-slave
relationship  between  the  Front  End  Processor and the control
unit.

     Tymnet's  PBH,  while   connected  to  the  FEP,   maintains
this   relationship    by    acting   like   a   slave   station,
performing  certain functions that the control unit does.

     For an idle line with  no traffic, PBH always  answers   the
general  polls by responding  EOT, so that the  connection always
appears  to be active to  the  host.   The   active  status  also
enables  the  PBH  to become ANSWERED  in  the network,  so  that
circuits can   be   built   from  the  terminal  interface.   The
polling  status  of  the  FEP  is  recorded   so  that  it can be
monitored by the Operations Monitor.

     Through  system  generation  processes,  PBH   maintains   a
logical  configuration  of the lines, control units on each line,
and  devices on each control unit.  The  logical configuration in
the PBH  matches that in the Front End Processor.

     The  network  circuits   are  assigned  according  to    the
configuration  in the PBH, as  well as the polling status  of the
FEP.  Users have the option of selecting the  target  device  for
the  desired  application  systems,  or   they   can   leave  the



Page 190                 PBHERS.DOC







BELCOR                                        April 13, 1990



assignments  up  to the  PBH  based upon the availability of  the
devices.

     Once the  circuit is  built for the   device,  the   command
messages from the  host are  scanned.  PBH  validates the  format
of  the bisync frame, looking for missing control characters, STX
or ESC, and  it also validates the command codes.

     The Write control character  is  also  checked  for  printer
device  if  there  is  any  request  for   Start Print.  The data
portion of  the bisync frame is never interpreted or changed, and
is passed on to the terminal after being converted to DSP format.

     It is an option for Limitted Conversion Mode operations,  if
enabled, to minimize substantial delays in the network.

     Usually,   when  a   response  message   comes   from    the
terminal,  PBH  saves  a  copy of it in the SAVE Queue.  With the
response  message saved in the queue, it can be sent  immediately
to the host if a Read Modified command is received from the host.

     If  the SAVEQ  option is  not  enabled, PBH   has  to   pass
on  this  command  message  to  the  terminal,  and  wait for the
response to come back  again   from  the   control  unit,   while
keeping  FEP contented  with TTD.  This delay in the network  and
on the line degrades the  performance of both the network and the
interface.

     Through the username structure in the network,  and  in  the
PBH,  for  security reasons, illegal users  can be prevented from
using sensitive application systems.

     There is a greeting message feature that provides  automatic
logon  for  the users, when circuits  are built to the PBH.  This
feature puts users in to the host application immediately without
user's interventions for host logon.

     There  is   also  a   Multiple   Disconnect    Exchange   to
disconnect   the  host  sessions  when  circuits  are  terminated
abnormally.  This is done by going through a  predefined sequence
of   exchanges  between the  PBH and the host.  This ensures that
sessions are terminated gracefully, and no other users can assume
the unauthorized sessions.











Page 191                 PBHERS.DOC







BELCOR                                        April 13, 1990



6.1.2  MODES OF OPERATIONS




6.1.2.1  _N_A_T_I_V_E__M_O_D_E


     Operating in the native mode,  the  TYMNET  3270    Terminal
Interface  replaces   leased   lines  between   hosts  and  3270-
compatible terminals.  This  allows   for  sharing   of   network
facilities   among   multiple  3270  applications or for  sharing
among  3270   applications  and  batch    BSC   or   asynchronous
applications.

     The 3270  native  mode  protocol   also  enables  users   to
communicate  through  an  X.25   interface  to  other   hosts and
networks  supporting the 3270 Display System Protocol (3270 DSP).

     The   document  3270   Display    Systems   Protocol,    2nd
edition,  June  1983,   GTE  Telenet Communications  Corporation,
and   Telecom Canada, describes the standard end-to-end  protocol
to support IBM  3270 devices on an X.25 packet-switched network.































Page 192                 PBHERS.DOC







BELCOR                                        April 13, 1990




                                         *****
                                        *     *
                                       * 3270  *
                                       * TERM  *
                                        *     *
                                         *****
                                           |
                                           |
                                      3270 | BSC
                                           |
                                       ---------
                                      |         |
                                      |   3270  |
                                      | TERMINAL|
                                      |INTERFACE|
                                      |         |
                                       ---------
                                           |
                                           | DSP
                                           |
                                           |
                                       ---------
                                      |         |
                                      |  3270   |
                                      |  HOST   |
                                      |INTERFACE|
                                      |         |
                                       ---------
                                           |
                                      3270 | BSC
                                           |
                                           |
                                       ---------
                                      |  3270   |
                                      |  HOST   |
                                      |COMPUTER |
                                      | SYSTEM  |
                                      |         |
                                       ---------

                                      NATIVE MODE












Page 193                 PBHERS.DOC







BELCOR                                        April 13, 1990



6.1.2.2  _N_A_T_I_V_E_/_S_N_A_-_H__M_O_D_E

     In   this   mode   of   operations,   3270   terminals   are
capable   of  accessing  SNA hosts through the connections of the
SNA host interface.

     SNA host interface does  the  translations  of  SNA/SDLC  to
and from 3270 DSP formats.














































Page 194                 PBHERS.DOC







BELCOR                                        April 13, 1990




                                         *****
                                        *     *
                                       * 3270  *
                                       * TERM  *
                                        *     *
                                         *****
                                           |
                                           |
                                      3270 | BSC
                                           |
                                       ---------
                                      |         |
                                      |   3270  |
                                      | TERMINAL|
                                      |INTERFACE|
                                      |         |
                                       ---------
                                           |
                                           | DSP
                                           |
                                           |
                                       ---------
                                      |         |
                                      |  SNA    |
                                      |  HOST   |
                                      |INTERFACE|
                                      |         |
                                       ---------
                                           |
                                      SDLC |
                                           |
                                           |
                                       ---------
                                      |  SNA    |
                                      |  HOST   |
                                      |COMPUTER |
                                      | SYSTEM  |
                                      |         |
                                       ---------

                                    NATIVE/SNA-H MODE












Page 195                 PBHERS.DOC







BELCOR                                        April 13, 1990



6.1.2.3  _S_N_A_-_T_/_N_A_T_I_V_E__M_O_D_E

     In this mode of  operations,  terminals  connected  to  SDLC
lines  can  access   3270    BSC   hosts.    The    SNA  terminal
interface   does  the  translations   between  SNA/SDLC   to  and
from  3270   DSP.   3270   BSC host interface treats the terminal
interface like the 3270 PBT.

     This connection mode is currently under development.













































Page 196                 PBHERS.DOC







BELCOR                                        April 13, 1990




                                         *****
                                        *     *
                                       * 3270  *
                                       * TERM  *
                                        *     *
                                         *****
                                           |
                                           |
                                      SDLC |
                                           |
                                       ---------
                                      |         |
                                      |   SNA   |
                                      | TERMINAL|
                                      |INTERFACE|
                                      |         |
                                       ---------
                                           |
                                           | DSP
                                           |
                                           |
                                       ---------
                                      |         |
                                      |  3270   |
                                      |  HOST   |
                                      |INTERFACE|
                                      |         |
                                       ---------
                                           |
                                      3270 | BSC
                                           |
                                           |
                                       ---------
                                      |  3270   |
                                      |  HOST   |
                                      |COMPUTER |
                                      | SYSTEM  |
                                      |         |
                                       ---------

                                   SNA-T/NATIVE MODE












Page 197                 PBHERS.DOC







BELCOR                                        April 13, 1990



6.1.2.4  _V_I_R_T_U_A_L__H_O_S_T__M_O_D_E


     The virtual host  mode makes it  possible for certain  ASCII
block  mode  terminals  to access  3270  protocol host  computers
through the TYMNET 3270 Host Interface.  This mode increases  the
number of users of 3270 applications.




                                          *****
                                        *       *
                                      *  SPECIAL  *
                                     *  BLOCK MODE *
                                      *   TERM    *
                                        *       *
                                          *****
                                            |
                                            | ASCII
                                            |
                                        ---------
                                       |         |
                                       |  TYMSAT |
                                       |         |
                                        ---------
                                            |
                                            |
                                     TYMNET | ASCII PROTOCOL
                                            |
                                        ---------
                                       |  3270   |
                                       |  HOST   |
                                       |INTERFACE|
                                        ---------
                                            |
                                            |
                                       3270 | BSC
                                            |
                                        ---------
                                       |  HOST   |
                                       |COMPUTER |
                                       | SYSTEM  |
                                        ---------

                                    VIRTUAL HOST MODE








Page 198                 PBHERS.DOC







BELCOR                                        April 13, 1990



6.1.2.5  _X_._2_5_/_D_S_P__M_O_D_E


     The 3270 DSP allows  an X.25 network connection to   provide
access  to  3270 applications.  The 3270 DSP is a fourth layer of
protocol above the  three  X.25  protocol   layers  and  is  used
to   transfer  3270 information.

     A Packet  Assembler/Disassembler(PAD)   can  substitute  for
the  host  or  terminal  interface.  The PAD  communicates with a
device by  a BSC line.   A  terminal  can  access  a  3270   host
application,   which is connected to a Front-End Processor (FEP).
A host PAD must exist  in  the  FEP  when  interfacing  with  the
network  using  a  standard   X.25  interface.  The FEP wraps the
data in DSP and  sends   it  to  the  terminal   using  the  X.25
interface.   In  turn,  the X.25 interface strips the X.25  layer
and sends the DSP data to the terminal interface.





































Page 199                 PBHERS.DOC







BELCOR                                        April 13, 1990



     This picture shows  the  network  connections  for  X.25/DSP
support in Tymnet.




















































Page 200                 PBHERS.DOC







BELCOR                                        April 13, 1990





                                         ************
                                       *     3270     *
                                       *   TERMINAL   *
                                         ************
                                 BSC /                  | BSC
                                    /                    |
                          ___________                    ___________
                         |   3270    |                  |    3270   |
                         | TERMINAL  |                  |  TERMINAL |
                         |   PAD     |                  | INTERFACE |
                         |___________|                  |___________|
                               |                         /     |
                           DSP |                        /      |
                          -----------                  /       |
                         |   X.25    |                /        |
                         | INTERFACE ||              /         |
                         |___________| | X.25       / DSP      |
                               |        |          /           |
                               |          ___________          |
                               |         |   X.25    |         |
                          X.25 |         | INTERFACE |         | DSP
                               |         |___________|         |
                               |        /      | |             |
                          ___________  / X.25  |  | DSP        |
                         |   X.25    |         |   |           |
                         | INTERFACE |         |    |          |
                         |___________|         |     |         |
                               |               |      |        |
                           DSP |          X.25 |       |       |
                               |               |        |      |
                          ___________          |         ___________
                         |   3270    |         |        |   3270    |
                         |   HOST    |         |        |   HOST    |
                         |   PAD     |         |        | INTERFACE |
                         |___________|         |        |___________|
                                  |            |            /
                               BSC |           |           / BSC
                                    | ---- --------- ---- /
                                     |    | SPECIAL |    |
                                     |FEP |   FEP   | FEP|
                                     ---------------------
                                     |       HOST        |
                                     |     COMPUTER      |
                                      -------------------

                                         X.25/DSP MODE






Page 201                 PBHERS.DOC







BELCOR                                        April 13, 1990



6.2  HOW POLLINGS ARE HANDLED BY TYMNET



     All the bisync protocol   activities  are  handled  by   the
foreground  processes to maintain the real-time processing of the
lines.

     PBH and  PBT foreground  processes  are   scheduled  by   an
execution  loop.   This  loop  is  composed  of multiple lists of
processes  for every line configured  in the  slot.  Due to   the
half-duplex  nature   of  the bisync protocol,  processes for one
line can be  dismissed when  it is waiting for the start  of  the
next transmission from the control unit, for example. Process for
the next line can then be activated, ie. to select the device for
the command message pending to be transmitted.

     The execution loop is  constructed in three smaller   loops.
These  are  protocol  loop,  transmit loop, and the receive loop.
Every line has an  entry in  the loop  that defines  the  process
to be  executed when activated by the scheduler.

     Because of the structure  of  the  scheduling,  even  though
one line may be waiting for a response from the control unit, the
other line may be transmitting the command at the same time.



6.2.1  HOST TO PBH



     As a  slave  station,  PBH  always  waits  for  the  polling
sequences to come from the host.

     On an idle line, the host would send general  polls  to  the
PBH,  and  would get back answers  of EOT.  If the  host tries to
select  a device that does not have a network circuit built  from
the  terminal  interface, PBH responds with an  RVI and generates
an Intervention   Required  Sense  and  Status  message  for  the
specific  poll  from  the host.  If the command messages from the
host are invalid, or  are trying to  perform illegal  operations,
PBH  will  reject  the  messages  and  generate Sense  and Status
messages  locally.   This  ensures  network  resources  are   not
wasted delivering illegal messages.

     The  bisync  protocol   is   maintained   locally   by   the
PBH,   the acknowledgements(positive or negative),  the line turn
around,  and the error recovery processes.





Page 202                 PBHERS.DOC







BELCOR                                        April 13, 1990



6.3  3270 DISPLAY SYSTEM PROTOCOL



     There   is   an   internal    Tymnet    protocol,     called
IIX(Interface  Information  Exchange),   that  carries   the  DSP
messages.  DSP  is among various  other dialects  that  the  host
interface  can   provide   and  is negotiated during call set  up
with the terminal interface.   Both must agree  on  the  dialect,
otherwise the call will be rejected.




6.3.1  DSP CONTROL MESSAGES IN TYMNET



     The DSP control  messages  are  used  for  passing   control
information between PBT and PBH, or to other interfaces that talk
DSP.

     During call set up, there are DSP messages to  present   the
CALLING  ADDRESS, or  the CALLED ADDRESS,  or the CALL  USER DATA
FIELD  or CALL REQUEST.   Once  PBH  accepts  the  call,  CIRCUIT
ENABLE is returned  to the PBT indicating the  acknowledgement of
the  call request.  In  the CALL USER DATA FIELD, the information
about the origination, and the desired destination  is  presented
to  the  host interface.   PBH  examines the  characteristics  of
the  originating  device,  ie.  CRT or printer, and the requested
connection mode, then a search is made in  the  device   list  to
match the request.

     For   bisync   related   errors,    there    are     COMMAND
ABORTED/UNDELIVERED,  and  RESPONSE ABORTED/UNDELIVERED. In these
messages, the reason for the error is indicated, and sometimes, a
DSP STATUS message follows the DSP error message.



6.3.2  DSP DATA MESSAGE FORMAT IN TYMNET



6.3.2.1  _C_O_M_M_A_N_D__M_E_S_S_A_G_E


     Command messages are generated by the host and are used   to
format  the  screen  or  to  perform  certain  functions  at  the
operator's terminal.




Page 203                 PBHERS.DOC







BELCOR                                        April 13, 1990



                      FIRST BLOCK

                    ---------------------------------------------
                0   |              RPORT                        |
                    ---------------------------------------------
                1   |     ISIS DATA BYTE COUNT                  |
                    ---------------------------------------------
                2   |               C0                          |
                    ---------------------------------------------
                3   |               94                          |
                    ---------------------------------------------
                4   |Q = 0|                                 | M |
                    ---------------------------------------------
                5   |   DSP DATA COUNT BYTE 0(TYMNET DEFINED)   |
                    ---------------------------------------------
                6   |   DSP DATA COUNT BYTE 1(TYMNET DEFINED)   |
                    ---------------------------------------------
                7   |F/S=0|          UCN = 0                    |
                    ---------------------------------------------
                8   | LCM | ACK | XPR | TRQ |  0 |  0 |  0 |  0 |
                    ---------------------------------------------
                9   |        DSP SEQUENCE NUMBER                |
                    ---------------------------------------------
               0A   |            ESC ( 27 )                     |
                    ---------------------------------------------
               0B   |              COMMAND                      |
                    ---------------------------------------------
                N   |  DATA OR ITB/ETX/ENQ/ETB IF SINGLE BLOCK  |
                    ---------------------------------------------

                 NOTE :

                   1. M=1 IF THIS IS NOT A SINGLE BLOCK MESSAGE,
                      IT'S THE MORE BIT DESIGNATOR IN X.25
                   2. Q=0 FOR DATA QUALIFIER, Q=1 FOR CONTROL MESSAGES.

                   3. FS=1 IF PREVIOUS BLOCK IS ENDED WITH ETB.



                    SECOND OR LAST BLOCK

                    ---------------------------------------------
                0   |              RPORT                        |
                    ---------------------------------------------
                1   |     ISIS DATA BYTE COUNT                  |
                    ---------------------------------------------
                2   |               C0                          |
                    ---------------------------------------------
                3   |               94                          |
                    ---------------------------------------------



Page 204                 PBHERS.DOC







BELCOR                                        April 13, 1990



                4   |Q = 0|                               |M = 1|
                    ---------------------------------------------
                5   |   DSP DATA COUNT BYTE 0(TYMNET DEFINED)   |
                    ---------------------------------------------
                6   |   DSP DATA COUNT BYTE 1(TYMNET DEFINED)   |
                    ---------------------------------------------
                7   |             DATA BYTE 0                   |
                    ---------------------------------------------
                N   |  DATA  OR ETX/ENQ/ITB/ETB IF LAST BLOCK   |
                    ---------------------------------------------


                 NOTE :

                   1. M=0 IF THIS IS THE LAST BLOCK.




                      EXAMPLES OF COMMAND MESSAGES

               First Block, previous block is ended with ETX

                 0024 4C C0 94 01 0047 00 00 01 27 F2 C2 ...

               First Block, previous block is ended with ETB

                 0024 4C C0 94 01 0047 80 00 01 27 F2 C2 ...

               Second and Subsequent Blocks

                 0024 45 C0 94 01 0040 DATA ...

               Last Block

                 0024 25 C0 94 00 0020 DATA ... 03(2D)




6.3.2.2  _R_E_S_P_O_N_S_E__M_E_S_S_A_G_E__F_O_R_M_A_T_S


     Response  messages  are  generated  by  the  operator   when
function keys are  being entered  from the  terminal, ie.   after
entering  the order entries.








Page 205                 PBHERS.DOC







BELCOR                                        April 13, 1990




                     FIRST BLOCK

                     -------------------------------------------
                0   |              RPORT                        |
                     -------------------------------------------
                1   |     ISIS DATA BYTE COUNT                  |
                     -------------------------------------------
                2   |               C0                          |
                     -------------------------------------------
                3   |               94                          |
                     -------------------------------------------
                4   |Q = 0|                                 | M |
                     -------------------------------------------
                5   |   DSP DATA COUNT BYTE 0(TYMNET DEFINED)   |
                     -------------------------------------------
                6   |   DSP DATA COUNT BYTE 1(TYMNET DEFINED)   |
                     -------------------------------------------
                7   |F/S=0|          UCN = 0                    |
                     -------------------------------------------
                8   | LCM | ACK | XPR | TRQ |  0 |  0 |  0 |  0 |
                     -------------------------------------------
                9   |        DSP SEQUENCE NUMBER                |
                     -------------------------------------------
               0A   |                AID                        |
                     -------------------------------------------
               0B   |           BUFFER ADDRESS 0                |
                     -------------------------------------------
               0C   |           BUFFER ADDRESS 1                |
                     -------------------------------------------
                N   |  DATA OR ETX/ETB/ITB/ENQ IF SINGLE BLOCK  |
                     -------------------------------------------




                      SECOND OR LAST BLOCK

                    ---------------------------------------------
                0   |              RPORT                        |
                    ---------------------------------------------
                1   |     ISIS DATA BYTE COUNT                  |
                    ---------------------------------------------
                2   |               C0                          |
                    ---------------------------------------------
                3   |               94                          |
                    ---------------------------------------------
                4   |Q = 0|                               |M = 1|
                    ---------------------------------------------
                5   |   DSP DATA COUNT BYTE 0(TYMNET DEFINED)   |
                    ---------------------------------------------



Page 206                 PBHERS.DOC







BELCOR                                        April 13, 1990



                6   |   DSP DATA COUNT BYTE 1(TYMNET DEFINED)   |
                    ---------------------------------------------
                7   |             DATA BYTE 0                   |
                    ---------------------------------------------
                N   |    DATA BYTE N-7 OR ETX/ENQ/ITB           |
                    ---------------------------------------------




                      EXAMPLES OF RESPONSE MESSAGES

               First Block, previous block was ended with ETX

                 0024 4C C0 94 01 0047 00 00 00 7D C1 40 ...

               First Block, previous block was ended with ETB

                 0024 4C C0 94 01 0047 80 00 00 F1 C1 40 ...

               Second and Subsequent Blocks

                 0024 45 C0 94 01 0040 DATA ...

               Last Block

                 0024 25 C0 94 00 0020 DATA ... 03(2D)







6.4  EARLY DATA FORWARDING




6.4.1  THEORY OF OPERATIONS



     In  the BSC  protocol,  the receiving  of  a  bisync   frame
is  not  processed  until  the  BCC is received and validated. If
there is  an  error  in  the  BCC,  a  NAK  is  returned  to  the
transmitter to request retransmission.

     With the   network  delays  involved,   it  certainly  takes
longer for the 3270 PBH/PBT to receive bisync data and deliver it
to  the network, then  to   destination.   So   to  minimize  the



Page 207                 PBHERS.DOC







BELCOR                                        April 13, 1990



network delays,  Early Data Forwarding is introduced.

     EDF   mechanism   allows  the   PBH   or  PBT    to    start
delivering  the  converted bisync data to the  network as soon as
the minimum  number of data  held is  reached.  It   also  allows
the  destination   interface  to start sending the bisync data to
the DTE as soon as  the   data  received  from  the  network  has
reached  the  threshold.   This allows  the receiving process and
the transmitting process  to take place at almost  the same time,
with a slight delay controlled by the threshold.

     If there is an error condition, the bisync frame may or  may
not  be  sent to  the network.  This  depends on if  the frame is
the beginning portion and if it is less than the threshold.

     For shorter messages, the  whole bisync frame  is  discarded
at the receiving end.

     For larger bisync frames,  some  portions  of  the  messages
will  have already been delivered to the network.  If a BCC error
is detected, the interface detecting the BCC  error  generates  a
Forward   Abort  condition  by  sending  the  data  link  control
character 2D at the end of the converted bisync frame.




6.4.2  FOREGROUND/BACKGROUND COMMUNICATIONS



     Before   going    into   implementations   of    EDF,   some
understanding  of  how   the   PBT   or  PBH  passes  control  as
well  as  data information internally is necessary.




















Page 208                 PBHERS.DOC







BELCOR                                        April 13, 1990




                     PBH


              ----- ---------------------- --------------------- -----------
             | FEP |      FOREGROUND      |    BACKGROUND       |   NETWORK
              ----- ---------------------- --------------------- -----------
             |     |                      |                     |
             |     |               ________________            ---
             |     |  -----       |                |          | O |
             | --->| | BSC |----> |      RCV       |          | R |
             |     | |RING |      |       Q        |--------> | I |
             |     |  -----       |                |          | N |
             |     |               ----------------           | G |
             |     |                      |                    ---
             |     |                      |                     |
             |     |                _______________            ---
             |     |  ------       |               |          | I |
             |     | | ISIS |      |      XMT      | <--------| R |
             |     | |ROTOR |<-----|       Q       |          | I |
             | <---| | LIST |      |               |          | N |
             |     |  ------        ---------------           | G |
             |     |                      |                    ---
             |     |                      |                     |
              --------------------------------------------------------------



     The  data  or  control  information  is  passed   via    the
implementation of queues which are  collections of command links.
A queue is processed on a per device basis.

     Foreground   handles  the   real-time  processing   of   the
bisync line disciplines, ie. transmit or receive.

     Background handles the interface between the  slot  and  the
network,  providing  necessary  processing   of  network  control
messages  and conversions of bisync to and from  network  message
formats.

     The conversion processes are done between RCV Q to ORING and
IRING to IN Q.












Page 209                 PBHERS.DOC







BELCOR                                        April 13, 1990



6.4.3  TO-TERMINAL DIRECTION



     In this direction, the EDF starts  when  3270  PBH  receives
BSC data frames from  the Front End  Processor and the  amount of
data received exceeds the  threshold  defined   by  RCVMIN.   The
default  is   64  decimal  bytes, and it can be customized by the
tymfile macro OPTION.

     When  the  termination  character,   ie.  ETB  or  ETX,   is
received,  the threshold is not checked,  and unconditionally the
whole frame  is sent from the Foreground to the Background.

     Background  processes  convert   the   bisync   frame   into
3270  DSP  formats enveloped by the Tymnet protocol, and send the
DSP packets into the network.  Network then delivers the messages
to the 3270  PBT where the circuit is originated.




6.4.4  TO-HOST DIRECTION



     The EDF logic is similar to  the  To-Terminal  direction  in
the  PBT.   However,  the  dynamic buffer adjustment is performed
more  frequently in the To-Host direction than in the To-Terminal
direction,  due  mainly to the fact  that response  messages from
the terminal  are limited  to a maximum of 256 bytes per block.





6.4.5  DYNAMIC BUFFER ADJUSTMENT



6.4.5.1  _F_O_R_E_G_R_O_U_N_D


     Foreground  does not  perform any   adjustment.   It   does,
however, play an important role in the adjustment process.

     Usually,    Bisync    frames    are    queued    from    the
background,    and   transmitted  by  the  foreground.   Whenever
foreground runs out of data to send,  and the   end   of  message
has  not reached  the  foreground, SYN characters are injected to
the bisync line to synchronize  the control unit.



Page 210                 PBHERS.DOC







BELCOR                                        April 13, 1990



     During the   SYN  insertion  process,   the  duration   that
foreground has  to inject  the SYN  characters is  calculated and
recorded.   This  piece  of  information  is  then  used  by  the
background in  calculating the adjustment for the EDF.

     Foreground  also keeps  track of  the number  of  characters
being   transmitted   so   that   it   can   be   used   by   the
background  for  the adjustment.




6.4.5.2  _B_A_C_K_G_R_O_U_N_D


     The  dynamic  buffer  adjustment   is   performed   in   the
background when an ETB or ETX or ENQ is received.

     Background keeps track of the  number  of  characters  being
processed  in   the   background  as  the data  is  sent  to  the
foreground.  Upon receiving  the   termination   character,   the
dynamic   buffer   size   is  adjusted according to the following
algorithm.



              N0' =  N0 + #SYN - [ MIN(M,N0) / 2 ]

              where

               N0'  = New dynamic buffer size.
               N0   = Current dynamic buffer size.
               #SYN = Number of SYN characters injected while waiting for
                      data.
               M    = Number of data bytes that remain in the background.



     There are minimum  and  maximum  numbers  that  the  dynamic
buffer size can be adjusted to.

     The new adjusted number will then be  used  to  control  the
speed   of   sending   data   to  the  foreground  for  the  next
transmission.










Page 211                 PBHERS.DOC







HITACHI                                       April 13, 1990



                          7.  HITACHI




7.1  Design Objectives



    This    product    is    designed    to    implement    HSC3,
HITACHI's Bisynchronous Protocol, in Japan's Tymnet network.

    This documentation  describes the  specifications  for   3270
Polled  Bisync  Terminal  and  Host  interfaces to support Native
Mode operations for HITACHI terminals and host.

    This implementation is initiated by  the  PIR  #  1973,   and
submitted by NSC for Japan's Tymnet network.

    The BSC  native  mode  operations  with  KATAKANA  have  been
tested   and  proven   working  for   IBM  and   FUJITSU,  unless
specifically  noted, any comparisons made to IBM will also  apply
to FUJITSU..




7.2  HSC Characteristics



    There are  various  differences  between  HITACHI's  HSC  and
IBM's BSC environments.

    These differences are broken down as follows:




7.2.1  Data Link Control



    The CRC  checksum  calculation   on  HITACHI  environment  is
based upon CCITT standard, which is different from CRC-16 that is
currently being used by 3270 PBT and PBH.

    The Data Link Control characters are the  same  for  IBM  and
HITACHI,  however,  HITACHI  does  not use ITB for large block of
data, it  uses ETB instead and will cause line  turn  around  for
validation.



Page 212                 PBHERS.DOC







HITACHI                                       April 13, 1990



    The polling  sequences in  HITACHI is not   using  the   same
Control  Unit  and  Device  addresses  assignments,  the  format,
though, is the same.

                       IBM/FUJITSU               HITACHI

                         SSCC  EP               SSS    EP
       GENERAL POLL      YYUU77NA               YYYSSEENA
                         NNAAFFQD               NNNAA00QD

                         SSCCDDEP               SSS    EP
       SPECIFIC  OR      YYUUVVNA               YYYSSUUNA
       SELECT POLL       NNAAAAQD               NNNAAAAQD


    As can be seen above,  General Poll is using  device  address
of 7F in IBM as oppose to E0 in HITACHI.

    With   HITACHI,   the   addresses  for   Control   Unit   and
device  are  referring  to  the  same  table  for Select Poll and
General  Poll, whereas for Specific  Poll, the  device  addresses
assignment is  using another table.

    With IBM, the control unit and device addresses are using the
same  table  for  General  Poll  and Specific Poll as well as the
response from the terminal with fixed return addresses.  However,
for  SELECT  Poll  and  test  request  messages, the control unit
addresses are using a different table.

    Also, the format  of the  response   from  the  terminal   is
different  from   that   of the  IBM/FUJITSU  mode. Only  station
address(or device address as in IBM/FUJITSU) is indicated and not
the  Control  Unit/Device address pair to identify the responding
device.

    The above also applies  to the COPY  command,  Test   Request
Message and the Sense and Status messages.

    The unit address in  the returned response, ie. S/S  message,
uses the same table as the Specific Poll does.




7.2.1.1  _C_r_o_s_s__R_e_f_e_r_e_n_c_e__o_f__D_e_v_i_c_e__A_d_d_r_e_s_s__A_s_s_i_g_n_m_e_n_t_s

        IBM
           Examples :






Page 213                 PBHERS.DOC







HITACHI                                       April 13, 1990



                  General  Poll - 40 40 7F 7F 2D   on CU 0
                  Specific Poll - 40 40 40 40 2D   on CU 0 DEV 0
                  Select   Poll - 60 60 40 40 2D   on CU 0 DEV 0


             ------------------------------------------------
                    |                   |
             CU or  | Device Selection  | 3274 CU
             DEVICE | CU and Device     | Selection Address
             Number | Addresses for     |
                    | General/Specific  |
                    | Polls             |
             -------|----------------------------------------
                0   |       40          |      60
             -------|----------------------------------------
                1   |       C1          |      61
             -------|----------------------------------------
                2   |       C2          |      E2
             -------|----------------------------------------
                3   |       C3          |      E3
             -------|----------------------------------------
                4   |       C4          |      E4
             -------|----------------------------------------
                5   |       C5          |      E5
             -------|----------------------------------------
                6   |       C6          |      E6
             -------|----------------------------------------
                7   |       C7          |      E7
             -------|----------------------------------------
                8   |       C8          |      E8
             -------|----------------------------------------
                9   |       C9          |      E9
             -------|----------------------------------------
               10   |       4A          |      6A
             -------|----------------------------------------
               11   |       4B          |      6B
             -------|----------------------------------------
               12   |       4C          |      6C
             -------|----------------------------------------
               13   |       4D          |      6D
             -------|----------------------------------------
               14   |       4E          |      6E
             -------|----------------------------------------
               15   |       4F          |      6F
             -------|----------------------------------------
               16   |       50          |      F0
             -------|----------------------------------------
               17   |       D1          |      F1
             -------|----------------------------------------
                 18 |       D2          |      F2
             -------|----------------------------------------



Page 214                 PBHERS.DOC







HITACHI                                       April 13, 1990



                 19 |       D3          |      F3
             -------|----------------------------------------
                 20 |       D4          |      F4
             -------|----------------------------------------
                 21 |       D5          |      F5
             -------|----------------------------------------
                 22 |       D6          |      F6
             -------|----------------------------------------
                 23 |       D7          |      F7
             -------|----------------------------------------
                 24 |       D8          |      F8
             -------|----------------------------------------
                 25 |       D9          |      F9
             -------|----------------------------------------
                 26 |       5A          |      7A
             -------|----------------------------------------
                 27 |       5B          |      7B
             -------|----------------------------------------
                 28 |       5C          |      7C
             -------|----------------------------------------
                 29 |       5D          |      7D
             -------|----------------------------------------
                 30 |       5E          |      7E
             -------|----------------------------------------
                 31 |       5F          |      7F
             -------|----------------------------------------




             Hitachi

               Examples :

                 General  Poll - C0 C0 E0 E0 2D on CU 0
                 Specific Poll - C0 C0 A0 A0 2D on CU 0 DEV 0
                 Select   Poll - C0 C0 C0 C0 2D on CU 0 DEV 0


                    | Station Address   | Unit Address
                    | Specific/General  | in Return Response
                    | Polls             |
                    |                   | Unit Address
               NO.  | Station & Unit    | for
                    | Address for       | Specific Poll
                    | Select Poll       |
             -------|----------------------------------------
                0   |       C0          |      A0
             -------|----------------------------------------
                1   |       C1          |      A1
             -------|----------------------------------------



Page 215                 PBHERS.DOC







HITACHI                                       April 13, 1990



                2   |       C2          |      A2
             -------|----------------------------------------
                3   |       C3          |      A3
             -------|----------------------------------------
                4   |       C4          |      A4
             -------|----------------------------------------
                5   |       C5          |      A5
             -------|----------------------------------------
                6   |       C6          |      A6
             -------|----------------------------------------
                7   |       C7          |      A7
             -------|----------------------------------------
                8   |       C8          |      A8
             -------|----------------------------------------
                9   |       C9          |      A9
             -------|----------------------------------------
               10   |       CA          |      AA
             -------|----------------------------------------
               11   |       CB          |      AB
             -------|----------------------------------------
               12   |       CC          |      AC
             -------|----------------------------------------
               13   |       CD          |      AD
             -------|----------------------------------------
               14   |       CE          |      AE
             -------|----------------------------------------
               15   |       CF          |      AF
             -------|----------------------------------------
               16   |       D0          |      B0
             -------|----------------------------------------
               17   |       D1          |      B1
             -------|----------------------------------------
               18   |       D2          |      B2
             -------|----------------------------------------
               19   |       D3          |      B3
             -------|----------------------------------------
               20   |       D4          |      B4
             -------|----------------------------------------
               21   |       D5          |      B5
             -------|----------------------------------------
               22   |       D6          |      B6
             -------|----------------------------------------
               23   |       D7          |      B7
             -------|----------------------------------------
               24   |       D8          |      B8
             -------|----------------------------------------
               25   |       D9          |      B9
             -------|----------------------------------------
               26   |       DA          |      BA
             -------|----------------------------------------
               27   |       DB          |      BB



Page 216                 PBHERS.DOC







HITACHI                                       April 13, 1990



             -------|----------------------------------------
               28   |       DC          |      BC
             -------|----------------------------------------
               29   |       DD          |      BD
             -------|----------------------------------------
               30   |       DE          |      BE
             -------|----------------------------------------
               31   |       DF          |      BF
             -------|----------------------------------------







7.2.2  WRITE Group Commands



    The   WRITE  group   commands  include   WRITE,  Erase    All
Unprotected,  Erase  Write,  Erase  Write  Alternate,  and  Write
Structured Field.

    The  command  codes  for  WRITE  group  are  the   same   for
IBM/FUJITSU   and   for   HITACHI,    except  that   Erase  Write
Alternate, and   Write  Structure  Field  are  not  supported  by
HITACHI.  For  FUJITSU,  Structure  Field  is  not  supported  by
either,  and Read   Modified  All   is  not   used  in   the  BSC
environment.

    The COPY is supported by  HITACHI and the code is  compatible
with IBM/FUJITSU.




7.2.3  READ Group Commands


    The  READ   group  commands  include   Read  Modified,   Read
Buffer, and Read Modified  All. The command  codes in READ  group
are the  same for IBM, FUJITSU, and HITACHI.

    HITACHI, however,  does not  support Read  Modified All,  nor
does  Tymnet support  this command and  will not be  supported in
any  of the PIR's involving BSC PBH.







Page 217                 PBHERS.DOC







HITACHI                                       April 13, 1990



7.2.4  Syntax of WRITE Group Commands


    Current Tymnet implementation of WRITE Group commands expects
only one Write Control Character following the command itself.

    HITACHI's    implementation   uses    either   one    Control
Byte(CB0)  for  WRITE  command,   or 2 Control  Bytes(CB2 byte 0,
CB2 byte 1)  for Erase Write command  if   the  terminal  is   T-
560/20.  For  terminal   type  H-9415, the Erase Write command is
followed by the Control Byte 0(CB0).

    In  the  case  of  COPY   command,   instead   of    CCC(Copy
Control Character), HITACHI calls it Control Byte 1.

    Only PBH  scans   through  the  WCC's,  thus   code  must  be
modified  to  expect  either  1 or 2  control bytes if conditions
call  for examination of certain bits that can not  be  found  in
the first byte.



                  Following is the definitions of the WCC and CCC.

             Formats associating WCC with WRITE or ERASE WRITE command :

                   IBM          FUJITSU            HITACHI
                                                H-9415   T-560/20

             WRITE Command ( F1 )

                  E W W          E W W          E W C    E W C
                  S R C          S R C          S R B    S R B
                  C T C          C T C          C T 0    C T 0

             Erase Write Command ( F5 )

                  E E W          E E W          E E C    E E C C
                  S / C          S / C          S / B    S / B B
                  C W C          C W C          C W 0    C W 2 2
                                                             0 1
             Erase Write Alternate Command ( 7E )

                  E E W          E E W          Not Supported
                  S W C          S W C
                  C A C          C A C

             COPY Command ( F7 )

                  E C C          E C C          E C C
                  S O C          S O C          S O B



Page 218                 PBHERS.DOC







HITACHI                                       April 13, 1990



                  C P C          C P C          C P 1






             Differences of WCC(Write Control Characters) among hosts.


     H   B   |      |      |    |       |       |       |          |       |
      O   I  |      |      |    |       |       |       |          |       |
       S   T |  0   |  1   |  2 |   3   |   4   |   5   |    6     |   7   |
        T   #|      |      |    |       |       |       |          |       |
     --------|-------------------------------------------------------------|
             |Based | WCC  |   Width    |       |       |          |       |
     I   W   | on   |      |  00 : 132  | Start | Sound | Unlock   |  MDT  |
     B   C   | bit  |Reset |  01 : 40   |       |       |          |       |
     M   C   | 1-7  |      |  10 : 64   | Print | Alarm | Keyboard | Reset |
             |      |      |  11 : 80   |       |       |          |       |
     ----------------------------------------------------------------------|
     F       |      |      |            |       |       |          |       |
     U       |Based |      |            |       |       |          |       |
     J   W   | on   |      |   Same     | Same  | Same  |   Same   | Same  |
     I   C   | bit  |  1   |    as      |  as   |  as   |    as    |  as   |
     T   C   | 1-7  |      |   Above    | Above | Above |   Above  | Above |
     S       |      |      |            |       |       |          |       |
     U       |      |      |            |       |       |          |       |
     ----------------------------------------------------------------------|
         C   |      |      |    | Use   | Same  | Same  |   Same   | Same  |
         B   |  1   |  1   |  0 | Print |  as   |  as   |    as    |  as   |
         0   |      |  *   |    |Control| Above | Above |   Above  | Above |
     H       |      |      |    |  Char |       |       |          |       |
     I---------------------------------------------------------------------|
     T   C   |      |      |    | Use   | Same  | Same  |   Same   | Same  |
     A   B 0 |  1   |  0   | 0  | Print |  as   |  as   |    as    |  as   |
     C   2   |      |  *   |    |Control| Above | Above |   Above  | Above |
     H       |      |      |    |  Char |       |       |          |       |
     I  -------------------------------------------------------------------|
             |      |      |    | Screen Size   | Modulo|          |       |
         C   |      |      |    | 00 : 1920     |0 : 10 |          |       |
         B 1 |  1   |  0   | 0  | 01 : 960      |1 : 11 |    0     |   1   |
         2   |      |      |    | 10 : 2560     | Check |          |       |
             |      |      |    | 11 : Reserved |       |          |       |
     -----------------------------------------------------------------------
             (* : CB0 bit #1 indicates single CB0 byte or CB2 byte pair)




         Differences of CCC(Copy Control Character) among hosts :



Page 219                 PBHERS.DOC







HITACHI                                       April 13, 1990



     H   B   |     |     |   |       |       |       |        |         |
      O   I  |     |     |   |       |       |       |        |         |
       S   T |  0  |  1  | 2 |   3   |   4   |   5   |    6   |    7    |
        T   #|     |     |   |       |       |       |        |         |
     --------|----------------------------------------------------------|
             |     |     |   Print   |       |       | Data Type Copied |
     I  C    |Based|     |  Format   |       |       |  00 : Attribute  |
     B  C    | on  |  1  | 00 : 132  | Start | Sound |  01 : Att & Unp  |
     M  C    | 1-7 |     | 01 : 40   | Print | Alarm |  10 : Att & Pro  |
             |     |     | 10 : 64   |       |       |  11 : Entire Buf |
             |     |     | 11 : 80   |       |       |                  |
     -------------------------------------------------------------------|
     F       |     |     |           |       |       |                  |
     U       |     |     |           |       |       |                  |
     J  C    |Based|     |    Same   |  Same |  Same |      Same        |
     I  C    |  on |  1  |     as    |   as  |   as  |       as         |
     T  C    | 1-7 |     |    Above  |  Above|  Above|      Above       |
     S       |     |     |           |       |       |                  |
     U       |     |     |           |       |       |                  |
     -------------------------------------------------------------------|
     H       |     |     |   |       |       |       |                  |
     I       |     |     |   |Use    |  Same |  Same |      Same        |
     T  C    |  1  |  1  | 0 |Print  |   as  |   as  |       as         |
     A  B    |     |     |   |Control|  Above|  Above|      Above       |
     C  1    |     |     |   |Char   |       |       |                  |
     H       |     |     |   |       |       |       |                  |
     I       |     |     |   |       |       |       |                  |
     -------------------------------------------------------------------|

       Note :

       Hitachi's bit numbering is reversed as opposed to IBM and Fujitsu.




7.2.5  Orders



    The codes for Orders are the same for HITACHI as in IBM.

    For  orders   that   use    2-byte   buffer    address,   the
assignments for buffer locations, ie. row and column numbers, are
quite different.

    All the messages  sent by terminal interface   will  have  to
be re- written to use the  corresponding buffer addressing scheme
for HITACHI terminals.

    The Network Service  Screens also have  to   be  modified  to



Page 220                 PBHERS.DOC







HITACHI                                       April 13, 1990



use the different addressing scheme.




7.2.6  Attribute Bytes



    The attribute  bytes used by  HITACHI can either  be 2 or   3
bytes depending on whether the basic or extended field is used.

    The Network Service Screens and all the other  messages  sent
by  the terminal interface will  have to be  modified to use  the
corresponding  characteristic  of  attribute  bytes  defined   by
HITACHI.




7.2.7  Print Control Characters



    There are 4 print control characters that are  not  supported
by IBM nor by FUJITSU and will be supported by HIATCHI.

    These characters are  Shift  Out(0E),  Cancel(18),   Vertical
Tab(0B) and BELL(2F).



7.2.8  Program Function Keys


    Selector  Pen   Attention(7E)  and  Magnetic    Slot   Reader
AID(E7)  are  not  supported  by   HIATCHI, but BREAK(7F) key  is
supported and  must be delivered end to end.



7.2.9  Sense and Status Messages


    The   bit   definitions   of  2-byte   Sense    and    Status
messages  are  totally different from IBM and  must be re-defined
at PBH end  for PBH- generated status messages, and at PBT end as
well.

Structure of Sense and Status Information for HITACHI host :




Page 221                 PBHERS.DOC







HITACHI                                       April 13, 1990




     S/S 0

             -------------------------------------------------------------
             BIT # |       DESCRIPTION
             -------------------------------------------------------------
               0   | Always 1
             -------------------------------------------------------------
               1   | Always 1
             -------------------------------------------------------------
               2   | Indicates Printer error has been recovered
             -------------------------------------------------------------
                   | Printer has an error due to the following:
                   |  1. Paper out.
                   |  2. Printer cover is opened.
               3   |  3. SELECT lamp is off.
                   |  4. Printer power is off.
                   |  5. Printer is not connected.
                   |  6. Other mechanical/electrical problem.
             -------------------------------------------------------------
                   | Hardware Error due to the following :
               4   |  1. Parity error occurred during buffer read.
                   |  2. Transmission error occurred between
                   |     Terminal and Control Unit.
             -------------------------------------------------------------
                   | Not Ready becomes Ready
               5   |  1. Terminal becomes ready, ie. power is on.
                   |  2. Power is turned on on Stand Alone type
                   |     terminals.
             -------------------------------------------------------------
                   | Not Ready (For Multi-VDT type only)
               6   |  1. Indicating terminal(VDT or PRC) is not ready
                   |     because of the power is off or other reasons.
             -------------------------------------------------------------
                   | From device is not ready (For Multi-VDT type only)
                   |  1. The FROM device in the COPY command is in one
               7   |     of the following modes:
                   |       Writing     Sending
                   |       Printing    Not Ready
             -------------------------------------------------------------

     S/S 1
             -------------------------------------------------------------
             BIT # |       DESCRIPTION
             -------------------------------------------------------------
               0   | Always 1
             -------------------------------------------------------------
               1   | Always 1
             -------------------------------------------------------------
               2   | Always 0
             -------------------------------------------------------------



Page 222                 PBHERS.DOC







HITACHI                                       April 13, 1990



               3   | Always 0
             -------------------------------------------------------------
               4   | Device Busy
             -------------------------------------------------------------
                   | Illegal Command due to the following :
                   |  1. Undefined command.
                   |  2. A command chaining was sent to the device
               5   |     that was executing a WRITE or COPY command
                   |     with Start Print bit set.
                   |  3. From device is the same as the To device.
             -------------------------------------------------------------
                   | Operation Check caused by the following :
                   |  1. Buffer capacity is overflowed or
                   |     receipt of an invalid buffer address.
               6   |  2. No CB0 or CB2 in WRITE or ERASE WRITE command.
                   |  3. CB1 is missing in the COPY command.
                   |  4. Use of special character.
                   |  5. ESC character is missing in the command sequence.
             -------------------------------------------------------------
                   | Completion of printing operation after the following:
                   |  1. A command that started the print operation.
               7   |  2. When the print key(local copy) is pressed and
                   |     the host sends a SELECT poll, which caused the
                   |     terminal to send a WACK while it is printing.
             -------------------------------------------------------------



             Sense and Status bit mappings between IBM and Hitachi :


                 --------------------------------------
                 |    HITACHI      |     IBM          |
                 -------------------------------------|
                 |    SS0  B0      |                  |
                 -------------------------------------|
                 |    SS0  B1      |                  |
                 -------------------------------------|
                 |    SS0  B2      |     SS0 B6       |
                 -------------------------------------|
                 |    SS0  B3      |   SS1 B3, B4     |
                 -------------------------------------|
                 |    SS0  B4      |   SS1 B4, B5     |
                 -------------------------------------|
                 |    SS0  B5      |     SS0 B6       |
                 -------------------------------------|
                 |    SS0  B6      |     SS1 B3       |
                 -------------------------------------|
                 |    SS0  B7      |     SS1 B3       |
                 -------------------------------------|




Page 223                 PBHERS.DOC







HITACHI                                       April 13, 1990



                 -------------------------------------|
                 |    SS1  B0      |                  |
                 -------------------------------------|
                 |    SS1  B1      |                  |
                 -------------------------------------|
                 |    SS1  B2      |                  |
                 -------------------------------------|
                 |    SS1  B3      |                  |
                 -------------------------------------|
                 |    SS1  B4      |     SS0 B4       |
                 -------------------------------------|
                 |    SS1  B5      |     SS1 B2       |
                 -------------------------------------|
                 |    SS1  B6      |     SS1 B7       |
                 -------------------------------------|
                 |    SS1  B7      |     SS0 B6       |
                 -------------------------------------|






7.3  Error Recovery Procedures



    This   section   describes   the   control   flow   and   the
associated procedures for recovering the errors.




7.3.1  HSC Line Disciplines



    This   section   describes   the   line    disciplines    for
HITACHI HSC operations.

    Please refer  to the  diagrams on next  section, the  numbers
here correspond to the numbers in the diagrams.

1. Unit Address will  indicate  General  Poll  or  Specific  Poll
Sequence.

2. CU or VDT(Standalone Type) responds with EOT when it receives
   a General Poll or Specific Poll with correct sequence and
   valid Station Address while it has no data to send.

3. When CU receives correct polling sequence and VDT has pending



Page 224                 PBHERS.DOC







HITACHI                                       April 13, 1990



   data  or  status  to  send,  a  Read  Modified  is   generated
automatically
   and data will be transmitted in the block beginning with STX.
   In the case of status message, text will begin with SOH.

4. When the text message from the control unit begins with STX
   but ended with ENQ(TTD), this indicates that an error has been
   detected by the Control Unit while reading from the terminal.
   Host responds to TTD with a NAK.
   When NAK is received, terminal responds with an EOT to
   cause the Line Turn Around and release the line to the Host.
   Host sends a Specific Poll when EOT is received in order
   to  read  the  Status  Message  from  the  Control  Unit   for
examination.
   If Sense and Status message indicates hardware error, host
   sends Specific Poll several times,  and  if  the  response  is
still
   TTD  then  the  application  is  responsible  for  this  error
recovery.

5. If CU does not receive polling sequence or if Station  Address
is
   in error or if Cu does not exist or is powered off, there will
   be No Response to the host end.
   In this case, Host should retry polling several times.

6. If the terminal's  data  message  has  an  invalid  CRC,  host
responds
   with a NAK and Control Unit re-transmits last data message.

7. If host receives data with no error, it responds with either
   ACK 0 or ACK 1.

8. If host has more important message  to  send  while  receiving
data
   from the Control Unit, it can send an RVI in place of ACK 0/1
   to stop CU from sending. This RVI also applies to ETB blocks.
   CU responds with EOT to turn the line around.

9. If host does not have enough buffer or is still processing
   previous message, it  responds  with  WACK  to  stop  CU  from
sending
   data temporarily.
   Terminal sends ENQ once every 3 seconds to enquire the status
   of the Host and continues to send ENQ if receives WACK
   or sends next block of data if ACK 0/1 is received.

10. If no response is received, terminal will send ENQ once every
    3 seconds to request for last response.
    If after 10 retries and there is still no response,  terminal
will



Page 225                 PBHERS.DOC







HITACHI                                       April 13, 1990



    turn on alert light and sound the buzzer.
    No Sense/Status message will be generated, and terminal goes
    into neutral mode.

11. When host requests re-transmission by sending NAK, as  in  6,
to the
    data message as in 3, it can send EOT to the terminal if  too
many
    retries to cancel the transmission.
    When terminal receives EOT, it turns  the  alert  light,  and
sounds
    the buzzer. No Sense/Status message will be generated.
    Terminal goes into neutral mode.

12. When data message as in 3 is  received  correctly,  host  can
respond
    with a WRITE command. This only  applies  to  terminal's  ETX
block.

13. Terminal continues to send data when host responds  with  ACK
0/1
    to previous message.
    If terminal has no more data, it sends  EOT  and  returns  to
neutral
    mode.

14. Terminal sends data and host responds with ACK 0/1.
    If terminal has more ETB blocks or if the other VDT has data
    to send, terminal sends that data. This only applies to the
    General Poll from the host.

15. If text as in 12 is a WRITE type command,  terminal  executes
it.

16. If text as in 12 is a READ command, this is illegal.

17. Unit Address indicates a Select Poll.

18. When terminal receives a correct Select Poll, but it has
    Sense and Status pending or is waiting to send  data  because
of
    the ENTER key or BREAK is pressed by the operator, terminal
    sends an RVI in response to Select Poll.

19. When terminal receives correct Select Poll sequence, but
    the selected device is  either  in  printing  operation(Print
Mode)
    or is receiving data from the operator(Input Mode), terminal
    responds with WACK.
    Host  should  send  Specific  Poll  after  a  while,  because
terminal



Page 226                 PBHERS.DOC







HITACHI                                       April 13, 1990



    will send Sense and Status message when Printing is done or
    will send data when operator presses ENTER key.

20. When terminal receives correct Select Poll sequence, and the
    terminal is in neutral mode, it responds with ACK 0.

21. A No Response error occurs when the terminal does not receive
    correct Select Polling sequence or  the  Station  Address  is
wrong,
    or power of the terminal is off.
    In this case, host should send Select Poll several times.

22. If terminal does not receive a text beginning with STX within
    30 seconds after responding  an  ACK  0  to  a  Select  Poll,
terminal
    will turn on alert light and sound the buzzer.
    This condition will happen when the host cannot receive ACK 0
    that is sent by the terminal to answer the Select Poll, or
    the terminal cannot receive the correct STX character.
    Terminal does not generate Sense and Status message, and
    will go into neutral mode.

23. When host receives an ACK 0 to its Select Poll,
    it sends data blocks.

24. If host is not able to send more data, it sends TTD(STX ENQ)
    to the terminal.
    Terminal responds with NAK to the TTD.
    Host continues to send TTD if it is still not ready  to  send
more
    data or the data when it is ready to  avoid  the  30  seconds
time
    out supervision.

25. If the text from the host is a WRITE command with data,
    terminal executes it.

26. If the text from the host is a READ command,
    terminal executes it.

27. If the text (WRITE command block or any other part of the
    message) has CRC error, terminal sends NAK.
    Host should re-transmit the same block.

28. There is a case when terminal responds an RVI to the command
    text from the host.
    This happens when the BREAK key is pressed which is valid
    even when the terminal is in sending or receiving mode.
    In this case, host sends polling to read the AID(INC).

29. If terminal receives an ETB block or command chaining, and



Page 227                 PBHERS.DOC







HITACHI                                       April 13, 1990



    it has Sense and Status pending because of executing the
    command, terminal sends EOT and releases the line.
    Host sends polling to read the status message.

30. If terminal receives command text correctly, it
    responds with ACK 0/1.
    Host continues to send next ETB block or new command
    text in the case of command chaining.

31. There will be No Response if the terminal cannot receive
    the command text from the host correctly or when the host
    does not get the  response  from  the  terminal,  or  if  the
terminal
    is powered off.
    In this case, host will send ENQ to inquire last response.

32. Host sends EOT and releases the line when it has no more
    data to send, this is after the data blocks are being
    received  correctly  and  ACK  0/1  are  received  from   the
terminal.

33. This is the text block that's separated by the ETB
    or by next command text in the case of command chaining.

34. If there an error(CRC) in the  READ  command  text  from  the
host,
    terminal responds with a NAK.
    Host will re-transmit the same text.

35. If the terminal receives READ command sequence correctly,
    it will send the text which has command and terminal status.




7.3.2  Diagram of Line Disciplines


    Following  are  the  diagrams  of  the  HSC  line   protocol,
the  descriptions  are  on  the  previous  section.  SYN(32)  and
PAD(FF/55) characters  are not  included  in the  diagrams,   but
are  used  on the interface lines.

    The diagrams assume the  master  station  on  the  left  hand
side, and the slave station on the right hand side.

    Terminal  interface  follows  the   rules  for   the   master
station, and Host interface follows the rules for salve station.






Page 228                 PBHERS.DOC







HITACHI                                       April 13, 1990



7.3.2.1  _P_o_l_l_i_n_g

                  E   E
             ...> O SUN   ---- 1 -------------------------------->+<-------+
             .    T AAQ                                           |        |
     <..............................................EOT.... 2 ....|<.....  |
             .                                             13     |     .  |
             .                                                  _____   .  |
             .                                                  |STX|   .  |
             .                                                  | T |   .  |
             .                                                  | E |   .  |
             .                                                  | X |   .  |
             .                                                  | T |   .  |
             .  ....................( TTD ).........ENQ.... 4 ..|   |   .  |
             .  |..... NAK ...............................      |ETX|   .  |
     <.......+......................................EOT..|      | / |   .  |
             .                                                  |ETB|   .  |
             .                                                  |CRC|   .  |
             .                                                  -----   .  |
             .                                                    |     .  |
     -------->---+-------------------------------------- 3 --------     .  |
     |       .   |                                       14             .  |
     |       .<..|................ 5 ....... (NR) ??? <.....            .  |
     |           |                                                      .  |
     |           |---> NAK ....... 6 ....................................  |
     |           |                                                         |
     |           |---> ACK 0/1 --- 7 --------------------------------------+
     |           |
     |           |---> RVI ....... 8 .....................
     <...........|..................................EOT..|
         .       |
         .       |---> WACK ...... 9 ....................
         ........|..................................ENQ..|
         "       |
         .       |---> EOT ...... 11 .....................
         .       |
         .       |          ??? (NR) ..... 10 ............
         ........|..................................ENQ..|
                 |   12
               -----
               |STX|
               | T |
               | E |
               | X |
               | T |
               |ETX|
               | / |
               |ETB|
               |CRC|                    +------ 15 ----> WRITE Command
               -----                    |
                 +----------------------------- 16 ----> READ Command



Page 229                 PBHERS.DOC







HITACHI                                       April 13, 1990



7.3.2.2  _S_e_l_e_c_t_i_o_n




                  E   E
        ........> O SUN  ---------------------------------------------->+
        .   .     T AAQ                                                 |
        .   .                                                           |
     <..........+......................................... RVI <.. 18 ..+
        .   .   .                                                       |
        .   .   .....> (EOT)                                            |
     <..+................................................ WACK <.. 19 ..+
            .                                                           |
        ........>+-------------------------------------- ACK 0 <-- 20 --+
        .   .    |
        .   .....|........................ (NR) ??? <.. 21 ...
        .        |
        .        |  23            .... ??? (NR) ....... 22 .......>
        .      -----
        .      |STX|
        .      | T |
        .      | E |.....> ENQ .. 24 ....... (TTD) ..............
        .      | X |                                            .
        .      | T |                                            .
        .......|   |................................. NAK <......
               |ETB|
               | / |
               |ETX|
               |   |
               |CRC|
               -----                  ---- 25 --> WRITE Type Command
                 |                    |
                 +--------------------+
                                      |
                                      ---- 26 --> READ Type Command


















Page 230                 PBHERS.DOC







HITACHI                                       April 13, 1990



7.3.2.3  _W_R_I_T_E__T_y_p_e__C_o_m_m_a_n_d





















































Page 231                 PBHERS.DOC







HITACHI                                       April 13, 1990




          ......>|
          .    -----
          .    |STX|
          .    | T |
          .    | E |
          .    | X |
          .    | T |
          .    |ETX|
          .    | / |
          .    |ETB|
          .    |CRC|                                          +<------+
          .    -----                                          |       "
          .      |                                            |       |
          .      +--------------------------------------------+<....  |
          .                                                   |    .  |
          ...................................... NAK <.. 27 ..|    .  |
                                                              |    .  |
     <.......................................... RVI <.. 28 ..|    .  |
                 |.....> EOT                                  |    .  |
     <.......................................... EOT <.. 29 ..|    .  |
                                                              |    .  |
         .......>+-------------------------- ACK 0/1 <-- 30 --|    .  |
         .       |                                                 .  |
         .   ....|............ 31 .. ( NR ) ??? ....               .  |
         .   .   |                                                 .  |
         .   ....|.....> ENQ........................................  |
         .       |                                                    |
         .       |.....> EOT  32                                      |
         .       |  33                                                |
         .     -----                                                  |
         .     |STX|                                                  |
         .     | T |                                                  |
         .     | E |                                                  |
         .     | X |.. 24 ..> ENQ ....(TTD)...................        |
         .     | T |                                         .        |
         ......|...|................................. NAK ....        |
               |   |                                                  |
               |ETB|                                                  |
               | / |                                                  |
               |ETB|                                                  |
               |CRC|                                                  |
               -----                 +--- 25 --> WRITE Type Command --+
                 |                   |
                 +-------------------|
                                     |
                                     +--- 26 --> READ Type Command ---->







Page 232                 PBHERS.DOC







HITACHI                                       April 13, 1990



7.3.2.4  _R_E_A_D__T_y_p_e__C_o_m_m_a_n_d

          ......>|
          .    -----
          .    |STX|
          .    | T |
          .    | E |
          .    | X |
          .    | T |
          .    |ETX|
          .    | / |
          .    |ETB|
          .    |CRC|
          .    -----
          .      |
          .      +--------------------------------------------+<....
          .                                                   |    .
          ...................................... NAK <.. 34 ..|    .
                                                              |    .
     <.......................................... RVI <.. 28 ..|    .
                 |.....> EOT                                  |    .
     <.......................................... EOT <.. 29 ..|    .
                                                              |    .
             ....................... ( NR ) ??? <.... 31 ..        .
             .                                                     .
             ..........> ENQ........................................
                                                              |
                                                          35  | <.....+
                                                            -----     .
                                                            |STX|     .
                                                            | T |     .
              ....................(TTD)..... ENQ .. 4 ......| E |     .
              .                                             | X |     .
              .........> NAK ..................             | T |     .
                                              .             |   |     .
       <.............................. EOT ....             |   |     .
                                                            |ETB|     .
                                                            | / |     .
                                                            |ETB|     .
                                                            |CRC|     .
                                                            -----     .
              ------------------------------------------------+       .
         ....>|.....> NAK ........ 6 ................................>+
         .    |                                                       .
         .    |-----> ACK 0/1 ---- 7 -------------------------------->+
         .    .                                                       |
     <...+....+........................................... EOT <--13--+
         .    .               ... ??? (NR) ... 10 .......>.
         .    .                                           .
         .    ......> EOT  11                             .
         ......................................... ENQ <...



Page 233                 PBHERS.DOC







HITACHI                                       April 13, 1990



7.3.3  Network Error Recovery


    Unlike  direction  connections,  both  HIF  and  TIF   handle
local  Poll/Response  exchanges as well  as Data Transfer between
Terminal and Host.



7.3.3.1  _F_E_P__-__H_I_F


    When Host issues a poll,  it will be  answered  by  the   HIF
provided  that   the Control  Unit/Device addressing  assignments
conform  to each other.

    If for some reason, HIF does not get  any  type  of  pollings
from the Host, it declares the line  being down after the polling
timer expires and no circuits can be built until the HIF comes up
and   answered  after  the  polling  sequences  are detected once
again.

If there are users on the  line before it goes  down,  then   all
the  network  circuit  connections  will   be terminated and thus
user sessions  broken.  Unless  PVC(Permanent   Virtual  Circuit)
mechanism  is   enabled  on  the   terminal  interface, otherwise
when  HIF comes  up  and answered, previous circuits will not  be
restored and users will have  to initiate logon process again.



7.3.3.2  _T_I_F__-__C_U


    On the TIF end, Terminal Interface acts as the master station
and, when line is in the  idle state, polls the control unit  for
invitation to send if there is any data pending to be processed.

    If no response is detected after TIF sends out the poll,  TIF
goes into slow poll mode and continues to poll the Control  Units
controlled by slow  poll  timers  to  avoid  degrading  the  line
performances.

    If when "No Response" is detected and there  are  devices  on
the  CU, then all the network circuits  for those devices will be
terminated to encure the integrity of the network services.








Page 234                 PBHERS.DOC







HITACHI                                       April 13, 1990



7.3.3.3  _C_o_m_m_a_n_d___-__T_o__T_e_r_m_i_n_a_l__D_i_r_e_c_t_i_o_n


    Data  sent by  the host  is  defined  as   the  Command   and
will be acknowledged by the HIF if  there exists a circuit in the
network that has been established by the user  at the TIF end. If
no  circuit exists then HIF will reject the select  poll from the
Front End and  thus data block will not reach the HIF.

    The HSC data received from the FEP will be converted into DSP
data  format  and  sent across the network. However, HIF does not
wait  for the entire HSC block to arrive from the FEP  before  it
sends the data out.

    The Early  Data  Forwarding  logic   will  accumulate  enough
data  in the  buffer  and  send  it  on  so  that  the  receiving
from   FEP  and  transmitting   to  terminal   will  take   place
parallelly  to  shorten the delay time within the network.

    If partial data block has  been sent to the TIF, and   should
there  be any error  on the balance  of the block,  HIF will send
the Forward Abort indicator at end of the DSP data block so  that
terminal interface or terminal can take error recovery action and
flush the data  block in error.

    When TIF receives DSP data from the HIF, it converts the data
back  to  HSC formats. If enough data has been received, TIF will
go ahead and send them on to the line and  not  waiting  for  the
terminating characters to come. Should there be any  delay in the
host or in the  network, TIF will  send out  SYN  characters   to
sync   up  the   line and  to  keep the Control Unit  in selected
mode. Once  more  data   is  received   from  the  network,   SYN
insertions  will be  terminated and  normal  traffic will resume.

    If there are  protocol problems on either   TIF  or  HIF  end
and  the  terminal  is in session with the host applications, ie.
receive time out on HIF or  SELECT  failure  on   TIF,  any  data
received  by  HIF  or   TIF will be flushed away after  both have
gone through the  DSP  Command/Response  Undelivered/Aborted  and
Invitation  to  Clear  exchange,  this is to ensure that both are
synchronized on the error condition.

    In the course  of the error recovery,  both TIF and HIF  will
send out ISIS message to report to the supervisor's log about the
error and the zapping of the circuit.









Page 235                 PBHERS.DOC







HITACHI                                       April 13, 1990



7.3.3.4  _R_e_s_p_o_n_s_e__-__T_o__H_o_s_t__D_i_r_e_c_t_i_o_n


    The screen entered by the terminal user  is  defined  as  the
response  and  will be locally acknowledged by the TIF, and after
converting into DSP data  format it will  be  delivered   to  the
Host  if there  exists a circuit.

    EDF logic is also used  in this  direction  of  the  traffic,
and  the  Forward Abort indicator will be used the same way as in
the to terminal direction. The HIF sends out SYN insertions  when
it  has received a partial block and is not seeing the balance of
the block.

    The error  recovery procedures  are the same   when  terminal
is  in session with the host. Both HIF and TIF will report to the
supervisor's log the failure and the zapping of the circuit.





7.4  Test Facilities



    This section describes the   test  facilities  that  will  be
used   for   verifying  the  functional  specifications  of  HSC3
implemented on  TIF and HIF.




7.4.1  Host Emulation


    The Telenex will  be as the  primary   host  emulator.  There
will  be  some   BASIC   programs   written  to  accept  terminal
input,  decode the function key and send out  predefined  command
accordingly.

    However,  with Telenex,  it will  be difficult  to test   the
error  recovery   processes   due  to  the  lack  of  it  on  the
emulator.  An alternative is  to use  Test host  if   the  actual
host system  cannot be found in time for testing.









Page 236                 PBHERS.DOC







HITACHI                                       April 13, 1990



7.4.2  Terminal Emulation


    The terminal emulation will be performed by using an IBM   PC
model  5550 that's marketed in Japan, and by running an emulation
program for HITACHI terminal T560-20. The  printer  support  will
also be tested along with the CRT.

    Since the major market is  the new type of  terminal,   T560-
20,  and without  the equipment,  the  old type  of terminal,  H-
9415,  will be supported but not included in the initial testing.




7.4.3  Test Host Environment


    This test facility is employing the  characteristics  of  the
TIF  and  HIF in that TIF is always the master and HIF the slave,
hence, when TIF sends out  the polls  they will  be answered   by
the   HIF  and   the  line  connection  can  then  be  maintained
actively.

    As the name implies, THOST will  be  acting  like  front  end
processor  and  looped  back to a host interface so that terminal
users can  sign on to this HIF which in terms talk to  the  faked
host.

    The  THOST  slot  can  be generated  to  include  8  sets  of
test  messages,  4  sets   for  CRTs and 4  sets for printers, so
when terminals sign on to the HIF, the messages will be sent  out
to  the   terminal  when  THOST receives any input data from that
terminal.




















Page 237                 PBHERS.DOC







CRM4 DEVELOPMENT                              April 13, 1990



                  8.  CRM4 DEVELOPMENT


    The Connection Request  Mode 4 (CRM4)  in the  3270   Display
System  Protocol  (DSP)  is  used  to  request a connection for a
printer  which is associated with a CRT.

    With  CRM3,  a   datastream  could  be   mis-routed  on   the
printer.   If  the end user  logs off, the associated  printer of
this CRT  may become available before the  disconnection  process
is  completed  on  this  CRT.  In  this case, this printer may be
assigned to another end user  logging on but it may still receive
data   from  the  prior end user, since  the host may have simply
queued up the print job for later execution.

    CRM2  may  be  used  to  solve   this   problem.   But   CRM2
requires  dedicated  mappings  for each username which causes the
number of control units to  grow rapidly.   Thus slot  size grows
and  so   hardware costs rise. CRM4  is a dynamic  association of
CRT  and printer, so  no fixed mappings are required.   Thus  the
number  of  control  units  in  CRM2  is  for the total number of
usernames, while the number of  control  units  in  CRM4  is  the
number of concurrent users.

    This work  is coordinated  with the 3270  BSC host  interface
CRM4  project.  The SNA  host interface CRM4  project will follow
later. The BSC host interface is sufficient for testing.

    With  CRM4  implementation,  the   CRT  and  its   associated
printer can be tied together so that data mix-up can be avoided.




8.1  LOGON PROCEDURE



    During   the   CRT   with   printer    logon,    two    logon
sequences  are required; the first logon  is for the CRT  and the
second logon  is for the associated printer.



8.1.1  CRT LOGON


    During  the   CRT  logon,   inside  the  "CALL   USER   DATA"
message, the attached printer  bit will be  set to 1.  Therefore,
when the host interface receives the "CALL USER DATA" message, it
knows that this CRT has an associated printer.



Page 238                 PBHERS.DOC







CRM4 DEVELOPMENT                              April 13, 1990



    When  the   CRT  is   connected,  the  host   interface  will
provide the Additional Destination Designator  Information in the
"CIRCUIT ENABLE" message. When the CMT requests a connection  for
the   associated  printer,  it   will  include   this  Additional
Destination  Designator  Information  data   as   part   of   its
"CALL  USER  DATA"  message.    This  'echoed' information  makes
this  CRT  and printer  tie  together  in  the host interface.


8.1.2  PRINTER LOGON


    During  printer   logon,  inside   the  "CALL    USER   DATA"
message,   the   Connection  Request  Mode  (CRM)  should  be  4,
application id should  be 0, the destination cua  should  be   0,
the  destination dva should be  0, and the Additional Destination
Designator Information is from   the  previous  "CIRCUIT  ENABLE"
message of the CRT.

    Before  CMT  sends  out  the   "CALL   USER   DATA"   message
for  the  associated  printer,  it  should  wait for the "CIRCUIT
ENABLE"  message of the CRT  to come  from the   host  interface.
In this  case, one  of the following happens :


   a. "CIRCUIT ENABLE" message of the CRT comes from the host
      interface.  Therefore,  CMT  sends  out  "CALL  USER  DATA"
message
      of the printer to the host interface.


   b.  "INVITATION  TO  CLEAR"  message  comes  from   the   host
interface.
      Therefore, CMT  sends  "DESTINATION  RESOURCE  UNAVAILABLE"
message
      to the terminal and zaps the  printer,  CRT,  and  terminal
circuit.

    After the CRT logs on successfully, CMT sends the "CALL  USER
DATA"  message  of  the associated printer to the host interface.
CMT  waits for the "CIRCUIT ENABLE"  message  of  the  associated
printer to come from the host interface. In this case, one of the
following happens :

   a. "CIRCUIT ENABLE" message of the associated printer comes
      from the host interface. The associated printer circuit
      is built.

   b.  "INVITATION  TO  CLEAR"  message  comes  from   the   host
interface.
      Therefore, CMT  sends  "DESTINATION  RESOURCE  UNAVAILABLE"



Page 239                 PBHERS.DOC







CRM4 DEVELOPMENT                              April 13, 1990



message
      to the terminal and zaps the  printer,  CRT,  and  terminal
circuit.




8.2  CMT TYMFILE CONFIGURATION


    Macros in the  Tymfile should be properly  set  up  in  order
to  tie the CRT with  the associated printer  together during the
stored logon procedure.

For example,


     DEFELE(label1,username"BAhost#"BBpassward"8D)
     DEFELE(label2,crm#destinationinterfaceaddress"8Dappidcuadva)
     DEFELE(label3,4destinationinterfaceaddr"8Dappidcuadva)


         ** label1 - Host interface network logon (CRT or printer).

         ** label2 - CRT DSP logon.

                   - Crm# is 2 or 3.
                     With 4, CMT zaps the CRT circuit.

         ** label3 - Printer DSP logon.

                   - Crm# is 4.

                   - Printer network logon refers to the label1.

                   - The printer network logon does not have to refer to
                     the label1, but may refer to another DEFELE macro. In
                     this case, if the host# is different from the host# of
                     the CRT, the host interface will zap the CRT circuit.
                     Normally without CRM4 the printer may logon to any host
                     in the network; CRM4 restricts this.

         ** With the CRM4 printer DSP logon, CMT puts 0 to appid, 0 to cua,
            and 0 to dva in the "CALL USER DATA" message. CMT ignores the
            value defined in the appidcuadva of the CRM4, and no message is
            given during assembly or run time.








Page 240                 PBHERS.DOC







CRM4 DEVELOPMENT                              April 13, 1990



8.3  RESTRICTIONS



    The CRM4  is used  to request a  connection  for   a  printer
in  the  stored  logon,  but  not  used in the manual logon. This
restriction is due to  the fact  that the  increased  development
time  is   not  felt   to be justified by the minimal increase in
functionality.













































Page 241                 PBHERS.DOC







CRM4 IMPLEMENTATION                           April 13, 1990



                  9.  CRM4 IMPLEMENTATION


    In the current 3270 Host  Interface, if  the  end  user  logs
off  the  CRT,  the  associated  printer  of  this CRT may become
available before the disconnection  process is  completed on  the
CRT.    In  this   case, this printer may  have been assigned  to
another end  user but it  may still receive data from  the  prior
end  user.   To  avoid the data mix-up  on the printer,  the 3270
Host Interface  has to  tie the   associated  printer  until  the
disconnection is  completed on the CRT.  Conversely,  the CRT may
become  available before  the  disconnection  is   completed   on
the  associated printer, the  3270 Host Interface has  to tie the
CRT until the associated printer becomes available.

    The associated device Connection  Request Mode (CRM4) in  the
3270  Display   System  Protocol  (DSP) can  be used  by the  CMT
and  the 3270 Terminal Interface to request a  connection  for  a
printer  which is to be associated with an existing connection to
another CRT device.

    The CRM4 in the 3270 DSP gives a way to  always  associate  a
printer with an CRT in the 3270  Host Interface and thereby keeps
one  end user from getting the data meant for another user.


9.1  Scenario

             This  section  gives  an  example  to  describe  the
scenario.
























Page 242                 PBHERS.DOC







CRM4 IMPLEMENTATION                           April 13, 1990





                         ---------    (1)     ---------     -------
                        |         |<---------|         |   |       |
              ----      |         |   (2)    |  3270   |  /|CONTROL|---CRT1
             |    |     |  3270   |--------->|TERMINAL | / | UNIT  |---PRT1
             |HOST|-----|  HOST   |   (3)    |INTERFACE|/  |       |
             |    |     |INTERFACE|<---------|   or    |    -------
              ----      |         |   (4)    |  CMT    ||
                        |         |--------->|         | |  ------
                        |         |---       |         |  ||      |   --CRT1
                         ---------    |       ---------    |CONSAT|--|
                                      |                    |      |   --PRT1
                                 ---------------            ------
                                |    CONTROL    |
                                |     UNIT      |
                                 ---------------
                               /   |    |    |   |
                              /    |    |    |    |
                             /     |    |    |     |
                          HCRT1 HPRT1 HCRT2 HPRT2 HCRT3


        The following assumptions have been made  for  the  above
diagram:

        ==========================================================

        The status of the devices in the 3270 Host Interface are:
        HCRT1 : a terminal in "IDLE" state
        HPRT1 : an associated printer of HCRT1 in "BUSY" state
        HCRT2 : a terminal in "IDLE" state
        HPRT2 : an associated printer of HCRT2 in "IDLE" state
        HCRT3 : a terminal in "IDLE" state

        ==========================================================


    An  end user tries to log into the IBM Host from the terminal
CRT1 which has an associated printer  PRT1.   The  procedures  to
establish  the  circuits  between the 3270 Host Interface and the
3270 Terminal Interface/CMT are as follows:


    (1) The 3270 Terminal Interface/CMT sends a "CALL USER  DATA"
message  to  the  3270 Host Interface to request a connection for
CRT1.  The fourth bit of byte 4 in the "CALL USER DATA" is set to
indicate the source has an associated printer.

    (2)  On  the 3270  Host  Interface, the  terminal  which   is
being assigned to the new circuit must have an associated printer



Page 243                 PBHERS.DOC







CRM4 IMPLEMENTATION                           April 13, 1990



and both of them  must  be  in  "IDLE"   state.   In  this  case,
HCRT1/HPRT1  and   HCRT3  do  not  qualify.    So, the  3270 Host
Interface assigns  HCRT2 to  the  new  circuit   and  returns   a
"CIRCUIT  ENABLE" message  to confirm  that the circuit has  been
established.   The Additional  Destination Designator Information
in  this   "CIRCUIT  ENABLE"   message  contains   the  necessary
information to  uniquely identify  the   terminal  HCRT2.   After
the Host Interface assigns the terminal HCRT2 to the new circuit,
the HCRT2 will be in the "BUSY" state and the associated  printer
HPTR2 will be  in the "WAIT" state.

    (3) The  3270 Terminal Interface/CMT  sends "CALL USER  DATA"
with  the  CRM4  format  to  the 3270 Host Interface to request a
connection for the  associated  printer  PRT2.  This  "CALL  USER
DATA"    message   also  includes   the  Additional   Destination
Designator  Information  which is part of  the previous  "CIRCUIT
ENABLE"  message.   After  receiving this message, the 3270  Host
Interface  will  get the  information   from  the  message  which
uniquely  identifies  the   terminal  HCRT2  ,and  then finds the
associated  printer HPRT2.  Before  the Host  Interface   assigns
the  HPRT2 to the new circuit, some checks have to be done.  They
are:

     (a) HCRT2  must still be  in "BUSY" state  and HPRT2  should
be  in "WAIT" state.  Otherwise, an "INVITATION TO CLEAR" message
with reason code  "03"  (facilities failure  detected)   will  be
sent  to  the 3270 Terminal Interface/CMT to request to clear the
printer circuit.

     (b)  The configuration  of the  source  associated   printer
PRT1   -   device   format    size,  host   number,  host   type,
transparency,  color and character  set, must  match with   those
of   the   destination  associated  printer HPRT2.  Otherwise, an
"EBCDIC" message will be sent to the 3270 Terminal Interface/CMT,
and the end user to indicate the mis-match.



















Page 244                 PBHERS.DOC







CRM4 IMPLEMENTATION                           April 13, 1990




              . If the device format size does not match,
                the message "CANNOT MATCH THE DEVICE TYPE OF
                ASSOCIATED DEVICE" will be sent to the terminal.

              . If the host number does not match,
                the message "INVALID HOST NUMBER OF ASSOCIATED
                DEVICE" will be sent to the terminal.

              . If the host type does not match,
                the message "CANNOT MATCH THE HOST TYPE OF
                ASSOCIATED DEVICE" will be sent to the terminal.

              . If the capability of the transparency does not match,
                the message "CANNOT MATCH THE TRANSPARENCY CAPABILITY
                OF ASSOCIATED DEVICE" will be sent to the terminal.

              . If the capability of the color does not match,
                the message "CANNOT MATCH THE COLOR CAPABILITY
                OF ASSOCIATED DEVICE" will be sent to the terminal.

              . If the character size does not match,
                the message "CANNOT MATCH CHARACTER SIZE OF ASSOCIATED
                DEVICE" will be sent to the terminal.


    Followed by  this "EBCDIC" message,  the 3270 Host  Interface
will send  an "INVITATION TO CLEAR" message with reason code "03"
to request to clear the printer circuit.

    (4)  After  the  3270  Host  Interface  successfully  assigns
the  associated  printer HPRT2 to the new circuit, both HCRT2 and
HPRT2 will be in the  "BUSY" state and  will not be  available to
other   users.   A  "CIRCUIT  ENABLE"  message   is  returned  to
confirm that the  circuit for the  associated  printer  has  been
established.


    Now, the  terminal and  its   associated  printer  are   tied
together.  If one of  them loses the circuit,  both circuits will
be disconnected and both devices will become available (in "IDLE"
state).   In   the  3270  Host  Interface,   each  device  has an
inactivity  timer.  Only  when the inactivity  timers  for   both
devices are  expired, the circuits  will be disconnected and both
devices will become available.

    The HCRT2 can be assigned  to  another  end  user  only  when
both  the HCRT2 and HPRT2 are in the "IDLE" state.  The HPRT2 can
be  assigned to an end user only when the HPRT2 is in the  "IDLE"
state  and  the  HCRT2 is in the "IDLE" state, or the HPRT2 is in
the "WAIT" state and  the HCRT2 is in the "BUSY" state.



Page 245                 PBHERS.DOC







ADDENDUM TO 3270 INTERFACE REFERENCE MANUAL   April 13, 1990



      10.  ADDENDUM TO 3270 INTERFACE REFERENCE MANUAL


Versions 7.04/5.04


10.1  Summary of changes



10.1.1  Host Interface PBH07.?04


           1. Multi-targeting (7.02 and up)
           2. Disconnect message sequences (7.02 and up)
           3. Second greeting message (7.04)
           4. Test Request Message (7.04)
           5. 3101 24 PF keys support. (7.04)
           6. 3101 printer support. (7.04)
           7. 3101 read buffer and read modified command support.(7.04)
           8. Error messages to supervisor log. (7.04)

10.1.2  Terminal Interface PBT05.?04


           1. Host number associated with Terminal Interface (HSTPRT).
              (5.02 and up)
           2. Parameter to skip DSP screen (DSPSCN). (5.04)
           3. Screen recovery after Network Services. (5.04)
           4. Node information in network service screen. (5.04)
           5. Quick key sequence to bypass Network service screen. (5.04)
           6. Interval parameter to record polling time to supervisor log
              (SPLTYM).
              (5.04)
           7. Error messages to Supervisor Log. (5.04)
           8. Bisync operations monitor. (5.02 and up)


10.2  Host Interface



10.2.1  Multi-targeting


Multi-targeting  is  implemented  to  allow  the   user   to   be
automatically  assigned  to  another  host whenever the number of
unused ports of a host is lower than the predefined minimum  port
number MINPRT.

    Syntax:  MINPRT EQ n



Page 246                 PBHERS.DOC







ADDENDUM TO 3270 INTERFACE REFERENCE MANUAL   April 13, 1990



    Default: 0

Host Interface will report "HOST SHUT" to the Supervisor whenever
the  number  of  unused  ports is lower than "n".  The Supervisor
will assign another available  host  to  the  user  if  there  is
another  host  defined in the same slot.  If there is not another
host available, the user will receive the message  "Host  out  of
ports".

    Example:

         MINPRT EQ 1

Host Interface will send a "Host Shut" message to the  Supervisor
when there is only 1 port left.




10.2.2  Disconnect message sequences


This function is implemented for customer's host, which  requires
a  special disconnect message sequence to logoff the terminal for
job security. Three macros are required for this function.  There
are DMSSND, DMSRCV and DMSDEV.




























Page 247                 PBHERS.DOC







ADDENDUM TO 3270 INTERFACE REFERENCE MANUAL   April 13, 1990



         1) Define disconnect message to be sent to host

            Syntax:  DMSSND(Ascii data string)
                     Ascii data string = AID + Cursor Address + Text

     This macro defines the disconnect message which is to be sent to host
     whenever a circuit is zapped.

        2) Define the response message sent by host for a response to the
            disconnect message sent by host interface.

            Syntax:  DMSRCV(Ascii data string)
                     Ascii data string = WCC + orders and text

     Each character defined in DMSRCV will be compared to the character
     of the local data string received by the host interface.   If there
     is any difference detected, the disconnect message sequence will be
     terminated and the circuit will be zapped.

        3) Define special devices:

            Syntax:  DMSDEV(DMS,device list)

     This macro is similar to MSGUSE.  It defines the usage of the
     previously defined messages.  This macro is used for the disconnect
     message sequence only.   The "DMS" must be used to turn on the switch
     for this special function.

     DMSSND and DMSRCV can be defined several times for customer's
     convenience. However, these two macros must be defined in order and
     alternatively.   Ascii data strings must be used to define these dis-
     connect messages.   Table 1 is the EBCDIC-ASCII translation table
     for the orders which might be included in the disconnect messages.




                   Table 1.  Translation table for orders*

           Order                                 EBCDIC       ASCII

      Start Field (SF)                            X'1D'       X'1D'
      Start Field Extended (SFE)                  X'29'       X'29'
      Set Buffer Address (SBA)                    X'11'       X'11'
      Set Attribute (SA)                          X'28'       X'28'
      Modify Field (MF)                           X'2C'       X'2C'
      Insert Cursor (IC)                          X'13'       X'13'
      Program Tab (PT)                            X'05'       X'09'
      Repeat to Address (RA)                      X'3C'       X'14'
      Erase Unprotected to address (EUA)          X'12'       X'12'
      Graphic Escape (GE)                         X'08'       X'08'



Page 248                 PBHERS.DOC







ADDENDUM TO 3270 INTERFACE REFERENCE MANUAL   April 13, 1990



      *Note: Please refer to IBM 3270 Information Display System Data
             Stream Programmer's Reference (GA23-0059-0) for the
             restriction on ASCII code orders.




     Example:

         DMSSND("5F)                      :clear key
         DMSRCV("0C3"91"20"2ELOGOFF?)     :WCC + orders(SBA,cur pos,cur pos)
                                          :+ TEXT
         DMSSND("27"20"2EYES)             :AID + Cu. Pos. + text
         DMSRCV("0C2)                     :Unlock keyboard
         DMSSND("27"20"2EBYE BYE)         :AID + Cu. Pos. + text
         DMSDEV(DMS,0,5,7-9)              :Turn on DMS switch and messages
                                          :will be handled for devices 0,5,7
                                          :8 and 9.

         Following handshaking sequence will be done whenever a
         circuit is zapped on device 0,5,7,8 and 9:

                  Host                 Host Interface

                         <-------------   Clear key
                "Logoff?" ------------->
                         <-------------   "Yes"
                Unlock keyboard ------->
                         <-------------   "Bye Bye"

10.2.3  Second greeting message


This function is an option for the user to send a second greeting
message  to  the  host  if  one greeting message is not enough to
build a session whenever a circuit is connected.

Macros required to perform this function are the  same  as  those
for  GRT,  DSC and ZAP.   These macros are: STMSG, MSGTEX, ENDMSG
and MSGUSE.  Parameter "GR1" must be  used  in  the  position  of
"fcn"  in  MSGUSE  macros.  The First greeting message (parameter
GRT)  should  be  defined  before  a  second   greeting   message
(parameter GR1) is used.  No greeting message will be sent if the
first greeting message (GRT) is undefined.   After receiving  the
first  greeting  message,  the host should respond with an unlock
keyboard message to host interface.  Host interface  will  detect
the  response  message.  If it is an unlock keyboard message, the
host interface will send a second greeting message.  If it is not
or  the  response  message is missing, the circuit will be zapped
and logon will be rejected.




Page 249                 PBHERS.DOC







ADDENDUM TO 3270 INTERFACE REFERENCE MANUAL   April 13, 1990




      Example:

           STMSG
             MSGTEX(AIDCLR)
           ENDMSG
           MSGUSE(GRT,0-6)         :first greeting message is "clear" key
           STMSG
             MSGTEX(AIDENT,SP.,SP.,L.,O.,G.,SP.,O.,N.)
           ENDMSG
           MSGUSE(GR1,0-6)         :second greeting message is AID+Cursor
                                   :Position+ Text

         Following handshaking sequence will be done whenever a circuit
         is connected on device 0 to 6.

                     Host                    Host Interface

                            <--------------  Clear key
                  Unlock keyboard --------->
                            <--------------  "Log on"


10.2.4  Test Request Message


    Syntax: TRQUSE(TRQ,DEV)

This macro is similar to MSGUSE.  Parameter TRQ is used  to  turn
on  the  Test  Request Message switch. Parameter DEV represents a
list of devices or device ranges which is described exactly as in
MSGUSE  macro.  If  this macro is defined, a test request message
will be sent to the host whenever a circuit is disconnected.  The
following is the exact data format which is sent to the host:

       SOH % / STX DEV# DEV# ETX

This is a standard test request message format where DEV# is  the
device number of the device which sends this message.

 EXAMPLE:

 TRQUSE(TRQ,0,2-6)

Device 0 and 2 to 6 will send a test request message to the  host
whenever its circuit is zapped.








Page 250                 PBHERS.DOC







ADDENDUM TO 3270 INTERFACE REFERENCE MANUAL   April 13, 1990



10.2.5  3101 24 PF keys support


This function is implemented to support emulators of  3101  which
have  24 PF keys.   The parameters in table 2 define the defaults
for those keys.


                         Table 2. PF key defaults

                                                              IBM 3270 key
     3101 PF key         Symbol        Default            Equivalent

        PF-1             IBMPF1          0F1                  PF-1
        PF-2             IBMPF2          0F2                  PF-2
        PF-3             IBMPF3          0F3                  PF-3
        PF-4             IBMPF4          0F4                  PF-4
        PF-5             IBMPF5          000                 Network
                                                           Disconnect
        PF-6             IBMPF6          06C                  PA1
        PF-7             IBMPF7          06E                  PA2
        PF-8             IBMPF8          06D                  Clear
        PF-9             IBMPF9          06B                  PA-3
        PF-10            IBMP10          07A                  PF-10
        PF-11            IBMP11          07B                  PF-11
        PF-12            IBMP12          07C                  PF-12
        PF-13            IBMP13          0C1                  PF-13
        PF-14            IBMP14          0C2                  PF-14
        PF-15            IBMP15          0C3                  PF-15
        PF-16            IBMP16          0C4                  PF-16
        PF-17            IBMP17          0C5                  PF-17
        PF-18            IBMP18          0C6                  PF-18
        PF-19            IBMP19          0C7                  PF-19
        PF-20            IBMP20          0C8                  PF-20
        PF-21            IBMP21          0C9                  PF-21
        PF-22            IBMP22          04A                  PF-22
        PF-23            IBMP23          04B                  PF-23
        PF-24            IBMP24          04C                  PF-24







10.2.6  3101 printer support


Version 7.04 supports associate printers for 3101 and 470. Please
refer  to  3270  Host  Interface  reference  manual for associate
printer configurations.



Page 251                 PBHERS.DOC







ADDENDUM TO 3270 INTERFACE REFERENCE MANUAL   April 13, 1990



10.2.7  3101 read modify command and read buffer command.


The read modify command on the  IBM 3101 is  fully  supported  in
version  7.04.    Read  buffer  command   is  not fully supported
because  nulls are not transmitted from  IBM  3101  when  a  read
buffer  command is received.  In response, the IBM 3101 transmits
all data in screen buffer except nulls to host interface.  In the
real  3270  environment,  nulls  are  transmitted whenever a read
buffer command is received.


10.2.8  Error messages to supervisor log. 7.04


All error messages detected by the  3270  terminal  interface  or
detected  by  the  host  interface  via the established DSP error
reporting mechanism are logged to the supervisor. An operator may
access  this  log  via PROBE. The log message for each error will
have the following format:


      NODE REPORT 2001 FROM SLOT# 6 PBH TYPE 20 414549

      Where 2001 is the node number

      6    is the slot of the 3270 host interface.
      PBH  stands for Polled Bisync Host, and is the mnemonic for
      3270 host interface in the standard TYMNET terminology
      20   is the error type, where in this case "20" means circuit zapped.
      41   is the line address, as defined in the TYM file
      45   is the control unit address, as defined in the TYM file
      49   is the terminal address, as defined in the TYM file


     The error type is derived from the standard DSP error codes as listed
     in the DSP manual under COMMANDS/RESPONSE UNDELIVERED and ABORTED. The
     derivation is performed in the following manner :

                                 CMD/RES    ORIGINAL      INPUT      OUTPUT

      3270 Terminal Interface     XMT        10XX ---->   10XX ----> 00-3F
                                  RCV        11XX ---->   11XX ----> 40-7F
      3270 Host Interface         XMT        10XX ----->  12XX ----> 80-BF
                                  RCV        11XX ----->  13XX ----> C0-FF
      Where ORIGINAL  is the error code as defined by DSP
                      10XX undelivered with code XX
                      11XX aborted with code XX

            OUTPUT    is the error type as displayed in the Supervisor log




Page 252                 PBHERS.DOC







ADDENDUM TO 3270 INTERFACE REFERENCE MANUAL   April 13, 1990



     Below is the list of current error types and corresponding
     descriptions :

         Detected     Detected
         by 3270      by 3270
         Terminal     Host
         Interface    Interface

         Command/Response Undelivered

            01*       81     message undelivered due to receipt of EOT
            02        82     message undelivered due to receipt of RVI
            03        83     facilities failure detected
            04        84     failure to respond to message (timeout)
            05        85     message undelivered due to repeated NAKS
            06        86     message undelivered due to repeated WACKS
            07               message undelivered due to repeated wrong ACKS
            08        88     invalid message format
            09        89     unrecognizable response from remote
            10               bad UCN
            11               message out of sequence
            12               CU not responding to polls
            13               time out wait for ETX or ETB after STX
            20               circuit zapped


         Command/Response Aborted
            43        C3     facility failure detected
            44        C4     failure to response to message (timeout)
            45        C5     receipt of repeated NAKS
            4A        CA     repeated (STX...SUB...ENQ) sequence
            50               repeated request to resend ACKS
            51               no ETX after ETB...sent repeated TTDs
            52               circuit reset message from Host Pad


     * Note : Unfortunately, at present Type 1 Node Report message may also
              refer to the slot being restarted.  If so, then the address
              field would be meaningless and a host up message should
              immediately follow this node report.  An example of such a
              report would be :

              NODE REPORT 2023 FROM SLOT# 1 PBH TYPE 1 10200
              HOST 142 UP










Page 253                 PBHERS.DOC







ADDENDUM TO 3270 INTERFACE REFERENCE MANUAL   April 13, 1990



10.3  Terminal Interface




10.3.1  Parameter to skip DSP screen


         Syntax:  DSPSCN EQ #

         Default: 1

      This parameter specifies whether DSP logon screen is displayed in the
      login process.

            1   DSP logon screen will be displayed.
            0   DSP logon screen will not be displayed.

      If DSPSCN is set to 0, connection request mode (CRM) will be assigned
      to 3 automatically, i.e. host interface will provide the destination
      terminal address at call set up time.

         Example:

              DSPSCN EQ 0

          DSP logon screen will be skipped.

10.3.2  Screen recovery after network services.


Whenever a network service is requested, terminal interface  will
send  a  read  buffer  command  to read all data in the addressed
display buffer and stores received data  in  "SAVEQ".  After  the
service  is  completed,  All data in "SAVEQ" will BE sent back to
the terminal to recover the  original  screen.  Transparent  data
used  in  extended  features  (such  as  color,  high-lighting or
programmable symbols) are not currently supported. Therefore, the
original  screen  might not be correctly recovered if transparent
data described above is included.  Clear key is defined  to  exit
network service to get original screen.



10.3.3  Node information in network service screen


Node number, slot number, line address, control unit address  and
device  address  are  included  in  network  service screen.  All
addresses are displayed in symbols.  A period is followed to  end
the  field.   For  example,  "A."  for  "0C1" and " ." (space and



Page 254                 PBHERS.DOC







ADDENDUM TO 3270 INTERFACE REFERENCE MANUAL   April 13, 1990



period) for "40".  Table 3. is  an  example  of  network  service
screen.


               Table 3.  An example of network service screen

      ------------------------------------------------------------------
      |                                                                |
      |               NETWORK SERVICES                                 |
      |    NODE: 2062.  SLOT: 4.  LINE: 1.  CU ADR:  .  DEV ADR: D.    |
      |    CLR   RETURN TO CONVERSATION                                |
      |    PF1   LOGOFF CRT                                            |
      |    PF2   LOG ON PRINTER                                        |
      |    PF3   LOG OFF PRINTER                                       |
      |      CRT IS CURRENTLY LOGGED IN                                |
      |    POSITION CURSOR TO SELECT PRINTER                           |
      |    NO.  ADR  STAT   LABEL                                      |
      |     0    A   IDLE                                              |
      |     1    B   IDLE                                              |
      |     2    E   IDLE                                              |
      |                                                                |
      ------------------------------------------------------------------

     The node information in network service screen above is:
     Node is 2062, slot is 4, line number is 1, control unit address is 40
     and device address is 0C4.



10.3.4  Quick key sequence to bypass network service screen


Three more network service  keys  are  defined  to  log  off  the
current  circuit and to logon to the desired destinations.  There
are PFMEN, PFMEN1 and PFMEN2. Table 4 describes the functions  of
these key sequences:


















Page 255                 PBHERS.DOC







ADDENDUM TO 3270 INTERFACE REFERENCE MANUAL   April 13, 1990




                Table 4.  Functions of network key sequence

      Key sequence                      Function
      NETKEY + PFMEN     Logoff current circuit and get the menu screen
      NETKEY + PFMEN1    Logoff current circuit and logon to the first
                         destination defined in menu screen.
      NETKEY + PFMEN2    Logoff current circuit and logon to the second
                         destination defined in menu screen.
      NETKEY + NETKEY    Send NETKEY to host.
      NETKEY + Others    Get network service screen.




          Followings are the defaults for these parameters:

          Symbol:             Default:              IBM3270 key

          PFMEN                  0F3                   PF-3
          PFMEN1                 0F1                   PF-1
          PFMEN2                 0F2                   PF-2
          NETKEY                 0F4                   PF-4

          Below is the default key sequence and result:

          Key Sequence           Result

           PF-4 + PF-3          Menu screen
           PF-4 + PF-1          Logon to first destination
           PF-4 + PF-2          Logon to second destination
           PF-4 + PF-4          Send PF-4 key
           PF-4 + Others        Network service

          Example:

               PFMEN1 EQ 0F8

           Press PF4 and PF8 sequence will disconnect current circuit and
           logon to  the first destination.


10.3.5  Interval time to supervisor log.











Page 256                 PBHERS.DOC







ADDENDUM TO 3270 INTERFACE REFERENCE MANUAL   April 13, 1990




         Syntax:  SPLTYM  EQ  $A N

         Defaults: $A 5 (5 minutes)

     This parameter specifies the time interval which the Terminal Interface
     records the polling time to the supervisor log.  An operator may access
     this log via probe. The log message for each line will have the follow-
     ing format:

      NODE REPORT 2001 FROM SLOT# 6 PBT TYPE 3F 1134F

     Where 2001 is the node number
           6    is the slot number
           PBT  stands for polled bisync terminal, and is the mnemonic for
           3270 terminal interface in the standard Tymnet terminology
           3F is the report type for this kind of message.  Any message type
              other than 3F is nothing related to polling time. (Refer to
              section 3.7)
           1   is the line number.  If the line number is 0, then this byte
               will be skipped, i.e., there are only four bytes left in this
               log message to display the average polling time for line 0.
           134F is the average polling time in ticks for this line.

10.3.6  Error messages to Supervisor Log





























Page 257                 PBHERS.DOC







ADDENDUM TO 3270 INTERFACE REFERENCE MANUAL   April 13, 1990





     All error messages detected by the 3270 terminal interface or detected
     by the host interface via the established DSP error reporting mechanism
     are logged to the supervisor.  An operator may access this log via
     PROBE. The log message for each error will have the following format:

       NODE REPORT 2001 FROM SLOT 6 PBT TYPE 20 414549

     Where 2001 is the node number
           6    is the slot of the 3270 terminal interface.
           PBT  stands for Polled Bisync Terminal, and is the mnemonic for
           3270 terminal interface in the standard TYMNET terminology
           20   is the error type, where in this case "20" means circuit
                zapped.
           41   is the line address, as defined in the TYM file
           45   is the control unit address, as defined in the TYM file
           49   is the terminal address, as defined in the TYM file


     The error type is derived from the standard DSP error codes as listed
     in the DSP manual under COMMANDS/RESPONSE UNDELIVERED and ABORTED. The
     derivation is performed in the following manner :

                                CMD/RES    ORIGINAL      INPUT      OUTPUT

     3270 Terminal Interface     XMT        10XX ---->   10XX ----> 00-3F
                                 RCV        11XX ---->   11XX ----> 40-7F
     3270 Host Interface         XMT        10XX ----->  12XX ----> 80-BF
                                 RCV        11XX ----->  13XX ----> C0-FF
     Where ORIGINAL  is the error code as defined by DSP
                     10XX undelivered with code XX
                     11XX aborted with code XX

           OUTPUT    is the error type as displayed in the Supervisor log


     Below is the list of current error types and corresponding
     descriptions* :

         Detected     Detected
         by 3270      by 3270
         Terminal     Host
         Interface    Interface

     Command/Response Undelivered

        01**      81     message undelivered due to receipt of EOT
        02        82     message undelivered due to receipt of RVI
        03        83     facilities failure detected
        04        84     failure to respond to message (timeout)



Page 258                 PBHERS.DOC







ADDENDUM TO 3270 INTERFACE REFERENCE MANUAL   April 13, 1990



        05        85     message undelivered due to repeated NAKS
        06        86     message undelivered due to repeated WACKS
        07               message undelivered due to repeated wrong ACKS
        08        88     invalid message format
        09        89     unrecognizable response from remote
        10               bad UCN
        11               message out of sequence
        12               CU not responding to polls
        13               time out wait for ETX or ETB after STX
        20               circuit zapped


     Command/Response Aborted
        43        C3     facility failure detected
        44        C4     failure to response to message (timeout)
        45        C5     receipt of repeated NAKS
        4A        CA     repeated (STX...SUB...ENQ) sequence
        50               repeated request to resend ACKS
        51               no ETX after ETB...sent repeated TTDs
        52               circuit reset message from Host Pad


     Note:
     *   : Report type "3F" is defined to report average polling time to
         supervisor log in terminal interface.  Please refer to section 3.6.
     **  : Report message Type 1 may also refer to the slot being restarted.
           If so, then the address field would be meaningless and a host up
           message should immediately follow this node report.

          An example of such a report would be :

          NODE REPORT 2023 FROM SLOT# 1 PBT TYPE 1 10200
          HOST 142 UP


10.3.7  Bisync Operation Monitor BOM


Bisync  operations  monitor  is  implemented  to   provide   some
monitoring  facilities for the 3270 Terminal Interface.  By using
these facilities the operator can display the  status  of  lines,
control  units  and devices, or start/stop polling on a line or a
control unit.

(NOTE!  The BOM was rewritten for Version 5.05  of  the  Terminal
Interface.  None  of  the  commands  described here are valid for
Version 5.05 (or later) of the Terminal Interface  -  except  for
status,  however it will have a little different display then the
one shown here.)





Page 259                 PBHERS.DOC







ADDENDUM TO 3270 INTERFACE REFERENCE MANUAL   April 13, 1990



10.3.7.1  _L_O_G_G_I_N_G__I_N_T_O__T_H_E__B_I_S_Y_N_C__O_P_E_R_A_T_I_O_N_S__M_O_N_I_T_O_R_


A USER WITH APPROPRIATE NETWORK VALIDATION CAN ACCESS THE BOM  BY
TYPING "?STAT" COMMAND IN DDT.  THE BOM WILL PROMPT THE USER WITH
THE COMMAND PROMPT ":>".  WHEN THE PROMPT ":>" OCCURS,  THEN  THE
COMMAND IN THE FOLLOWING SECTION CAN BE USED.




10.3.7.2  _C_O_M_M_A_N_D


     1. STOP POLLING A LINE (STOPLN)

             SYNTAX: STOPLN N

             THIS COMMAND IS USED TO STOP A POLLING ON THE LINE N.
             LINE NUMBER N IS DECIMAL .
             EXAMPLE:
                         STOPLN 1        :STOP POLLING ON LINE 1

     2. START POLLING A LINE (STRTLN)

             SYNTAX: STRTLN N

             THIS COMMAND IS USED TO START A POLLING ON THE LINE N.
             LINE NUMBER N IS DECIMAL.
             EXAMPLE:
                         STRTLN 0        :STOP POLLING ON LINE 0


     3. STOP POLLING A CONTROL UNIT (STOPCU)

             SYNTAX: STOPCU M,N

             THIS COMMAND IS USED TO STOP A POLLING ON THE CONTROL UNIT N
             on line M. Where line number M is decimal and N is the control
             unit address.

             EXAMPLE:
                         STOPCU 0,40     :STOP POLLING CONTROL UNIT 40 on
                                         :LINE 0

     4. START POLLING A CONTROL UNIT (STRTCU)

             SYNTAX: STRTCU M,N

             THIS COMMAND IS USED TO START A POLLING ON THE CONTROL UNIT N
             ON LINE M. Where line number M is decimal and N is the control



Page 260                 PBHERS.DOC







ADDENDUM TO 3270 INTERFACE REFERENCE MANUAL   April 13, 1990



             unit address.

             EXAMPLE:
                         STRTCU 2,0C1    :START POLLING CONTROL UNIT 0C1 ON
                                         :LINE 2

     5. STATUS

          SYNTAX: STATUS

          THIS COMMAND LIST THE STATUS OF ALL DEVICES, CONTROL UNITS AND
          LINES IN THIS INTERFACE.  (SEE FIG. 1)
          EXAMPLE:    STATUS


      .............................................................

            STATUS OF 3270 DEVICES, CONTROL UNITS AND LINES

      *************************************************************
                LINE:     LU = NN      PU = NN        DSR = N
                CU:       ADDR. = NN   RETRANS = NN   NAKS = NN
                DEV:      ADDR. = NN   STATE = _____
                DEV:      ADDR. = NN   STATE = _____
                   :                   :
                   :                   :
                CU:       ADDR. = NN   RETRANS = NN   NAKS = NN
                DEV:      ADDR. = NN   STATE = _____
                  :                    :
                  :                    :
                LINE:     LU = NN      PU = NN        DSR = N
                  :                    :
                  :                    :
        ********************************************************
          LU = LOGICAL UNIT ADDRESS
          PU = PHYSICAL UNIT ADDRESS
          DSR = DATA SET READY STATE, ON, OFF OR NOT REQUIRED
          RETRANS = RETRANSMISSION COUNT
          NAKS = COUNT OF NAKS RECEIVED
          STATE = IDLE, LOGON OR CIRCUIT BUILT
          ADDR. = CONTROL UNIT ADDRESS OR DEVICE ADDRESS
       -----------------------------------------------------------

                           FIG. 1


         DATA RETRANSMITTED COUNT (RETRANS) AND NAKS RECEIVED COUNT (NAKS)
         ARE BASED ON A TIME PERIOD PARAMETER "CNTPED" WHICH IS DEFAULTED
         TO 24 HOURS.  CNTPED CAN BE RE-DEFINED IN THE TYMFILE FOR THE
         USER'S CONVENIENT.
         EXAMPLE:



Page 261                 PBHERS.DOC







ADDENDUM TO 3270 INTERFACE REFERENCE MANUAL   April 13, 1990



                     CNTPED      EQ      $A10        :SET COUNT TIME PERIOD
                                                     :FOR CONTROL UNIT'S
                                                     :STATUS TO 10 HOURS



















































Page 262                 PBHERS.DOC







ADDENDUM TO 3270 INTERFACE REFERENCE MANUAL   April 13, 1990



10.3.7.3  _L_O_G_G_I_N_G__O_U_T__T_H_E__B_I_S_Y_N_C__O_P_E_R_A_T_I_O_N_S__M_O_N_I_T_O_R


USER CAN USE THE FOLLOWING TWO COMMANDS TO EXIT FROM BOM.

1. QUIT COMMAND

        SYNTAX: QUIT(CR), Q(CR)

        THIS COMMAND IS USED TO EXIT TO DDT.

2. EXIT COMMAND.

        SYNTAX: EXIT(CR), EXI(CR)

        THIS COMMAND IS USED TO LOG OFF.


10.4  ATM3624

This  document  is  the  general  external  design  of  the  3624
enhancements  to  the 3270 PBH. These enhancements allow a Tandem
host running ACI financial switch  software  to  communicate  via
Tymnet  with  the  IBM  3624  Automated Teller Machine (ATM). The
Tymnet 3270 Polled Bisync Host Interface (PBH) is polled  by  the
Tandem  host and the Tymnet 3270 Polled Bisync Terminal Interface
(PBT) polls the ATM. In that the NCR 5058 emulates  the  3624  it
should be compatible, but compatibility is not guaranteed.


























Page 263                 PBHERS.DOC







ADDENDUM TO 3270 INTERFACE REFERENCE MANUAL   April 13, 1990



10.4.1  3624 BISYNC PROTOCOL


When communicating directly with a  system/370  application,  the
3624  uses  a  subset  of  the  BSC protocol. For a more complete
description than follows here, see the  following  IBM  documents
within  document  GC66-0009-2  (IBM  3600  Finance  Communication
System).



     o+ PR254 Messages Between The  Application  Program  And  The
       3624.

     o+ PR255 Message Header And Communication Enciphering.

     o+ PR256  Communication  Between  A  System/370   Application
       Program And A BSC 3624.

     o+ PR257 3624 Binary Synchronous Communication Protocols.



10.4.1.1  _A_P_P_L_I_C_A_T_I_O_N__L_E_V_E_L__M_E_S_S_A_G_E_S


All communication messages between the 3624 and  the  application
program are sent in BSC transparent text mode. Each message has a
maximum length of 256  bytes.  The  data  in  these  messages  is
enciphered  and  is  not  processed by either the PBH or the PBT.
Non-transparent text and status BSC  messages  are  not  sent  in
either direction.






















Page 264                 PBHERS.DOC







ADDENDUM TO 3270 INTERFACE REFERENCE MANUAL   April 13, 1990



10.4.1.2  _B_S_C__L_E_V_E_L__M_E_S_S_A_G_E_S


The 3624 follows the BSC protocol in transparent text mode  only.
The following are formats for the BSC messages used.


     EOT SEQUENCE

        P   P   P   S   S   E   P
        A   A   A   Y   Y   O   A
        D   D   D   N   N   T   D

     POLL/SELECT

        P   P   P   S   S   C   C   D   D   E   P
        A   A   A   Y   Y   U   U   V   V   N   A
        D   D   D   N   N   A   A   A   A   Q   D

     BSC RESPONSES

        P  P  P  S  S  A  P         P  P  P  S  S  E  P
        A  A  A  Y  Y  K  A         A  A  A  Y  Y  N  A
        D  D  D  N  N  0  D         D  D  D  N  N  Q  D

        P  P  P  S  S  A  P         P  P  P  S  S  R  P
        A  A  A  Y  Y  K  A         A  A  A  Y  Y  V  A
        D  D  D  N  N  1  D         D  D  D  N  N  I  D

        P  P  P  S  S  N  P         P  P  P  S  S  W  P
        A  A  A  Y  Y  A  A         A  A  A  Y  Y  A  A
        D  D  D  N  N  K  D         D  D  D  N  N  K  D

     TEXT FORMAT

        P   P   P   S   S   D   S            D   E   B   B   P
        A   A   A   Y   Y   L   T .. text .. L   T   C   C   A
        D   D   D   N   N   E   X            E   X   C   C   D
















Page 265                 PBHERS.DOC







ADDENDUM TO 3270 INTERFACE REFERENCE MANUAL   April 13, 1990



BISYNC CONTROL CHARACTERS USED BY THE 3624


        BSC     EBCDIC (HEX)   DESCRIPTION

        AK0     1070           Acknowledgement (2 bytes)
        AK1     1061           Acknowledgement (2 bytes)
        BCC     xx             Checksum (1 byte)
        CUA     xx             Control Unit Address
        DLE     10             Data Link Escape
        DVA     xx             Device Address
        ENQ     2D             Enquiry
        EOT     37             End Of Transmission
        DLE ETX 1003           End Of transparent Text (2 bytes)
        RVI     107C           Reverse Interrupt (2 bytes)
        NAK     3D             Negative Acknowledgement
        PAD     FF             Padding
        DLE STX 1002           Start Of transparent Text (2 bytes)
        SYN     32             Synchronization
        WAK     106B           Wait Acknowledgement (2 bytes)



BISYNC CONTROL CHARACTERS NOT USED BY THE 3624


        BSC     EBCDIC (HEX)   DESCRIPTION

        ETB     1026           End of intermediate transparent
                               text block
        SOH     01             Start Of Header
        STX     02             Start Of Text
        TTD     022D           Temporary Text Delay





















Page 266                 PBHERS.DOC







ADDENDUM TO 3270 INTERFACE REFERENCE MANUAL   April 13, 1990



POLLING AND BSC RESPONSES


All polls to the 3624 are specific polls, not general polls. WACK
and RVI are not transmitted to the host by the 3624.




SENSE AND STATUS MESSAGES


Sense and status messages are not transmitted to the host by  the
3624.




TEXT AND ACKNOWLEDGEMENTS


Text is the positive response by the 3624  to  a  poll  from  the
host.   EOT  is the negative acknowledgement to a poll.  Only one
text message at a time is  sent  to  the  host  by  the  3624  in
response  to a poll.  ACK1 is the normal positive response by the
host to the text  message  sent  from  the  3624.   ACK0  is  the
positive  response  by  the  3624  to the select message from the
host.




ADDRESSING


The address in a control message is four bytes long.   The  first
two  bytes of the address are the control unit address. The third
and fourth bytes are the device address.  Since the control  unit
address  and  the device address are actually only one byte each,
they are repeated to fill the four bytes in the control message.

The address bytes in a specific poll message have bits  0  and  1
(the  high  order  bits)  set  to  11.   For a select message the
address bytes have bits 0 and 1 set to 10.

The addressing range of the poll address is from C0 to  DF.   The
range  of  the  select  address  is from 80 to 9F, This allows 32
control units per line.

For example, if the poll address  for  a  specific  poll  has  an
address  of  "C1" for the control unit and an address of "C2" for



Page 267                 PBHERS.DOC







ADDENDUM TO 3270 INTERFACE REFERENCE MANUAL   April 13, 1990



the device then the four bytes of address in the control  message
would  be "C1 C1 C2 C2". For the corresponding select message the
four bytes of address would be "81 81 82 82".

Usually, the device address is  the  same  as  the  control  unit
address  because the 3624 device contains the control unit.  That
is, there is only one device per control unit.



TRANSMIT SYNCHRONIZATION


A DLE  SYN  character  sequence  is  inserted  within  long  text
messages  to  maintain synchronization.  This is done either on a
timed basis or on a number of text characters sent  basis  (every
80 to 81 or 160 to 161 text characters sent).  The 3270 interface
will by default insert a DLE SYN every 160 text characters.   The
default  can  be changed in the PBH by use of the OPTION macro in
the configuration.  Note that the synchronization is  always  the
same for all 3624 lines in the configuration.

The OPTION macro for changing synchronization is as follows:

Syntax: OPTION(SYNFIL,value)

     where value is any number between $A 80 and $A 255

Default: OPTION(SYNFIL,$A 160)







10.9.1  PBH AND THE 3624



10.9.1.1  _C_O_N_F_I_G_U_R_I_N_G__A__3_6_2_4__D_E_V_I_C_E


The following is a sample of the section of a tymfile configuring
a  line  with  two  3624  terminals.   The  line is configured to
address 40 and the control unit / device  addresses  of  the  two
3624s are C1/C1 and C2/C2.







Page 268                 PBHERS.DOC







ADDENDUM TO 3270 INTERFACE REFERENCE MANUAL   April 13, 1990



           LINE(40)
           LINTYP(ATM3624)

              CUNIT(0C1)
                 DEVICE(0C1);XPRNT(YES)

              CUNIT(0C2)
                 DEVICE(0C2);XPRNT(YES)




For configuring a 3624 device:


     o+ Only one device per control unit is allowed.

     o+ The device must be configured in transparent mode.

     o+ The line  must  be  configured  as  type  "ATM3624".   All
       control units on the line must be 3624 ATMs.  Other LINTYP
       parameter values are "IBM", "FUJITSU" and  "HITACHI".  See
       the  PBH  ERS,  section  1.2.2 for more information on the
       LINTYP macro.

     o+ The DEFLIN macro has the same possible parameter values as
       the  LINTYP  macro. DEFLIN is used to set the default line
       type at the beginning of the configuration.  See  the  PBH
       ERS,  section  1.5.1  for  more  information on the DEFLIN
       macro.
























Page 269                 PBHERS.DOC







ADDENDUM TO 3270 INTERFACE REFERENCE MANUAL   April 13, 1990



10.9.1.2  _D_I_F_F_E_R_E_N_C_E_S__B_E_T_W_E_E_N__3_6_2_4__B_S_C__A_N_D__3_2_7_0__B_S_C__P_R_O_T_O_C_O_L




ADDRESSES


The address bytes are different depending on whether the  control
message  is  a select message or poll message.  The address bytes
are graphic characters in the hex range of C0 to FF.  Bits 0  and
1  (the two high order bits) must be 11 for a poll message and be
10 for a select message.  Therefore, the PBH  must  decode  these
bits from 10 to 11 when receiving a select message from the host.

For example, if the  control  unit  address  is  defined  in  the
configuration  as  C1 hex and the device address is defined as C2
hex then the address would normally appear in a  control  message
as  C1C1C2C2.  For a 3624 line, in a poll message it would appear
as C1C1C2C2.   And  in  a  select  message  it  would  appear  as
81818282.



ILLEGAL BISYNC CONTROL MESSAGES


When the PBH receives an illegal  bisync  character  there  is  a
protocol  violation.   The  PBH  discards the message and sends a
suplog message to the network supervisor to log the error.

The following bisync control messages are considered  illegal  by
the PBH:


     o+ RVI messages

     o+ WAK messages

     o+ TTD temporary text delay messages

     o+ DLE ETB messages in transparent mode

3270 status and sense messages are not transmitted  by  the  PBH.
3270  status  and sense messages sent from the PBT to the PBH are
not transmitted to the host either.








Page 270                 PBHERS.DOC







ADDENDUM TO 3270 INTERFACE REFERENCE MANUAL   April 13, 1990



PBH RESPONSES TO POLLS AND SELECTS


If the host polls the PBH for a configured 3624 device and  there
is  no  data to be sent to the host then the PBH responds with an
EOT whether or not the  corresponding  PVC  for  that  device  is
built.

If  the  host  selects  a  configured   3624   device   and   the
corresponding  PVC  for  that  device  is  not built then the PBH
ignores the the select.



TRANSPARENT TEXT


Internally the PBH treats the transparent text messages  as  3270
write commands.



































Page 271                 PBHERS.DOC







ADDENDUM TO 3270 INTERFACE REFERENCE MANUAL   April 13, 1990



10.13.0.1  _T_Y_M_N_E_T__C_I_R_C_U_I_T__C_H_A_N_G_E_S



PERMANENT VIRTUAL CIRCUIT


The PBH accepts a Permanent Virtual Circuit  (PVC)  built  to  it
from  the  PBT regardless of wether or not the associated control
unit for which the PVC is destined is being polled.



DSP LOGON


The Display System Protocol (DSP) is  an  IIX  dialect  used  for
communication  between  the PBT and PBH.  The PBH accepts the DSP
logon only if its protocol ID matches the protocol ID sent in the
logon  message  from  the  PBT.  The protocol ID for a 3624 is 87
hex.

































Page 272                 PBHERS.DOC







ADDENDUM TO 3270 INTERFACE REFERENCE MANUAL   April 13, 1990



START/STOP POLLING



The PBT only polls 3624 control  units  when  the  PBH  is  being
polled  by the host. When the PBH is not being polled by the host
the PBT will not poll the corresponding 3624 control units.

The PBH informs the PBT whether or  not  its  control  units  are
being  polled by sending the stop poll and start poll messages to
the PBT. The stop poll message is the DSP status message with the
status  code  of  4050  sent to the PBT. It is sent when the host
stops polling a given control unit. The start poll message is the
DSP  status  message  with the status code of C240. It is sent to
the PBT when the host resumes polling a given control unit. If no
circuit  is  currently  built  for a given 3624 device, no status
message is sent to the PBT.  Also,  the  current  status  of  the
associated  control unit is sent to the PBT whenever a circuit is
successfully built to the PBH. This is to ensure  proper  polling
status coordination.

The PBT builds PVCs associated with 3624 devices very soon  after
initialization.  These  circuits remain up continuously.  The PBH
will not zap these circuits when the host is  not  polling  their
associated  control  units.  The  PBT will build a PVC for a 3624
device even if the control unit for that device is not  answering
polls.  Also,  the PBH will not zap 3624 circuits if they have no
activity for any length of time.

The PBT BOM NOPOLL  command  has  priority  over  the  stop  poll
message.  If the PBT receive the NOPOLL command from the operator
and then the stop poll message from the PBH.  It  will  not  poll
the ATM until it gets the POLL command.

The PBH records which control units have been polled or  selected
in the past 90 seconds. It compares the result with the record of
which control units have been polled or selected in the  previous
90  seconds. If there has been a change of status for any control
unit the appropriate action is taken by the PBH.  If the host has
stopped  polling a control unit, the stop polling message is sent
by the PBH to the PBT for the device on that control unit. If the
host  has  started  polling  a  control  unit,  the start polling
message is sent to the PBT for the first device on  that  control
unit.

The time interval of 90 seconds  can  be  changed  by  using  the
TOLNPL configuration macro.

        TOLNPL(60)

The time interval for examining polling status in the PBH  is  60



Page 273                 PBHERS.DOC







ADDENDUM TO 3270 INTERFACE REFERENCE MANUAL   April 13, 1990



seconds in the example.

After detecting that polling for a control unit has  stopped  and
the  stop  poll message has been sent to the PBT, the PBH flushes
any messages from the PBT for  the  device  associated  with  the
stopped control unit.

Any messages received from the host after a stop poll message has
been  sent  to  the  PBT but before a start poll message has been
sent are held in the PBH receive buffers. These messages  may  be
flushed  at  any  time  the  buffer  usage capacity in the PBH is
exceeded.

After detecting that polling for a control unit has  resumed  and
the  start  poll  message has been sent to the PBT, messages that
were received from the host prior to the start poll message being
sent are now forwarded to the PBT.





































Page 274                 PBHERS.DOC







ADDENDUM TO 3270 INTERFACE REFERENCE MANUAL   April 13, 1990



MONITOR COMMAND


The Bisync Operations Monitor (BOM)  configuration  command  CONF
displays  the  host  type  of  a line as either "IBM", "FUJITSU",
"HITACHI",  or  in  the  case  of  a  3624  line  "ATM3624"  when
displaying  the  line configuration.  For more information on the
CONF command see the PBH ERS section 2.5.2.














































Page 275                 PBHERS.DOC







APPENDICES                                    April 13, 1990



                           APPENDICES





















































Page 276                 PBHERS.DOC







CRASH CODES FOR 3270 PBH INTERFACE            April 13, 1990



          I.  CRASH CODES FOR 3270 PBH INTERFACE




     Crash   Nearest         Localize        Crash Reason
     Code    Label           Module

     60      INDCR           FRNTND          NO ACTIVATION ROUTINE
     60      INCN1           FRNTND          NO DCB WAS ASSIGNED
                                             NO STATE TABLE WAS ASSIGNED
                                             NO ACTIVATION ROUTINE WAS
                                             ASSIGNED
     61      SPECL           FRNTND          INVALID PORT 0 MESSAGE
     62      INVAL           FRNTND          INVALID MESSAGE
     63      INPUT3          FRNTND          INVALID PORT NUMBER,WHICH HAS
                                             BEEN ACTIVE TO RECEIVE THE
                                             NEEDLE
     80      POM30           MAIN            INVALID PORT 0 MESSAGE
     81      ZCRASH          MAIN            NO BIG BUFFERLET
     81      SCRASH          MAIN            NO BIG BUFFERLET
     81      PUTBC           MAIN            SAME
     81      PUTBH           MAIN            SAME
     81      PUTBX           MAIN            SAME
     81      PUTBHX          MAIN            SAME
     81      PBCRAS                          NO BIG BUFFERLETS
     81      TSTMCR                          NBB
     82      GETR05          MAIN            RELATIVE HOST NUMBER NOT FOUND
     83      NXTSC                           NO NEXT ELEMENT FOR STORED
                                             LOGON
     84      GCL             CMDLST          COMMAND LINK LIST LOCKED FOR
                                              'GET'  PROCESS
     84      GCL01           CMDLST          SAME AS ABOVE
     85      PCL             CMDLST          COMMAND LINK LIST LOCKED FOR
                                              'PUT'  PROCESS
     86      SRVCRA          BSCSRV          SVC ERROR,TRY TO CONNECT INPUT
                                             TWICE FOR RECEIVE PROCESS.
     86      BSX030          BSCSXM          SVC ERROR,TRY TO CONNECT INPUT
                                             TWICE FOR TRANSMIT PROCESS
     86      DSR020          BSCDTR          CONNECT INPUT SVC ERROR
     86      DTRCRA                          SVC OUTPUT ERROR
     86      DTR220          BSCDTR          CONNECT INPUT SVC ERROR
     87      BSXCRA          BSCSXM          SVC ERROR,FORCE OUTPUT FAILED
     87      BSXWCR          BSCSXM          TRANSMIT LIST TOO SMALL
     87      BSXCRA          BSCSXM          FORCE OUTPUT SVC ERROR
     87      BSXCRA          BSCSXM          FORCE OUTPUT SVC ERROR
     88      BSXCRA          BSCSXM          ILLEGAL TRANSMIT OP CODE
     89      BSXD02                          ILLEGAL BUFFER CHARACTER COUNT
     8A      DAT120                          ILLEGAL IIX MSG
     8B      GETBC           MAIN            NO BUFFER ASSIGNED TO GET NEXT
                                             CHARACTER



Page 277                 PBHERS.DOC







CRASH CODES FOR 3270 PBH INTERFACE            April 13, 1990



     8D      DA.R11          MAIN            RAN OUT OF UNBUSY LINKS
     8D      DA.X11          MAIN            RAN OUT OF UNBUSY LINKS
     8E      FNTVH                           CAN'T FIND ASSOCIATED PRINTER
     98      CLBUG           CMDLST          BUG IN COMMAND LIST USAGE
     99      NOLNK           MAIN            NO LINK FOR MAP PROCESSING
     99      CLFULL          CMDLST          COMMAND LINK HAS NO FREE LINK
     D0      BUFERR          BBUFER          BIG BUFFERLET LISTS LOCKED WHEN
                                              'GET'
     D0      PBB20           BBUFER          BIG BUFFERLET LISTS LOCKED WHEN
                                              'PUT'
     D3      BBCKD                           BAD CHAIN ADDRESS
     0F      TPT2            TIMEOUT         TIMEOUT FREE LIST EXHAUSTED
     FF      PCRASH          BSCPTP          BISYNC LINE CRASH









































Page 278                 PBHERS.DOC







SAMPLE HIF TYMFILE                            April 13, 1990



                  II.  SAMPLE HIF TYMFILE



     :
     :SAMPLE TYMFILE FOR THE 3270 HOST INTERFACE
     :
     :host number 900 has one BSC line and two login devices.
     :host number 901 has one BSC line and three login devices.

     :define the default value for line

     DEFPOL(10)                      :host down if 10 sec. of no poll
     PRTCON(YES)
     DEFLIN(HITACHI)         : DEFINE DEFAULT HOST TYPE
     DEFPOL(7200)
     DEFRTS(NO)
     OPTION(RNGTRC,YES)      : TURN ON RING TRACE
     DEFMODE(REL)            : DEFAULT MODE IS RELATIVE

     :define the default values for device

     DEFTYP(C1920)                   :1920-character buffer terminal
     DEFCOL(YES)                     :color capable
     DEFXPR(YES)                     :transparency capable
     DEFLUD(ALNAM)                   :all usernames can access this device
     DEFMDS(MUL1)                    :multiple dsc by sequence mult1
     DEFZAP(ZAPG)                    :zap message from host
     DEFGRT(GRM1)                    :one greeting message to host
     DEFNDL(YES)                     :dynamic greeting message to host
     DEFIAT(120)                     :inactivity interval of 120 seconds


     :The first line  has one control unit and three devices.

     LINTYP(IBM)                     :line type is IBM
     HSTPRT(900,3)                   :three devices

     LINE(40)                        :line 0, address 40
        HOST(900)                    :host 900 associated with this BSC line

        CUNIT(40)                    :CU# 0, address 40 attached to line 0

           DEVICE(40)                :device 0, address 40
             DISCON(DSCG)            :send single disconnect message
             KKORKJ(ENG)             :Character set type is english
              INACT(90)              :inactivity interval of 90 seconds

           DEVICE(0C1)               :device 1, address 0C1
              LUD(LUD2)      :usernames start with IS can access the device
              ASSOC(0C2)             :an associated printer of address 0C2



Page 279                 PBHERS.DOC







SAMPLE HIF TYMFILE                            April 13, 1990



              GREET(GRT1,GRT2)       :has two greeting message to host

           DEVICE(0C2)               :device 2, address 0C2
              TYPE(P1920)            :printer with screen size 1920
              XPRNT(NO)              :can not handle transparency

     :define the new default value for device parameters

     DEFGRT(NONE)                    :no greeting message to host
     DEFZAP(ZAPG)                    :zap message from host
     DEFXPR(NO)                      :cannot handle transparency


     :The second line with one control unit and three devices

     HSTPRT(901,3)

     LINE(0C1)               :line 1, address 0C1
        HOST(901)            :this line is associated with host 901
        CUNIT(40)            :control unit 0, address 40 attached to line 1
           DEVICE(40)        :device 3, address 40
             KKORKJ(KANA)    :character type kata kana

           DEVICE(0C1)       :device 4, address 0C1
              INACT(0)       :disable inactivity timer if cmti release 4.02
                             :and up are using  cmti timer and crm4
              MDS(MUL1)      :special exchange sequences is required
                             :by the host when doing disconnect
              NEEDLE(NO)     :no dynamic greeting message to host
              ASSOC(0C2)     :an associated printer of address 0C1
              TYPE(C1920)    :a CRT with the screen of 1920

           DEVICE(0C2)       :device 5, address 0C2
              INACT(0)       :disable inactivity timer if cmti release 4.02
                             :and up are using  cmti timer and crm4
             INVSTA(YES,40C2):intervention status message will be sent
              TYPE(P1920)    :associated printer with the screen of 1920
              LUD(LUD1,LUD2) :username start with MN or IS can access
                             :this device

     :macros to define messages
     :
     : Send two Greeting Messages at the time circuit building completed
     :
     MSGTXT(GTM1,AIDENT,SP.,J.,N.,E.,T.,W.,O.,R.,K.,SP.,L.,O.,G.,O.,N.)
     MSGTXT(GTM2,AIDENT,SP.,G.,A.,R.,E.,SP.,Y.,O.,U.,SP.,R.,E.,A.,D.,Y.)
     :
     : Message to send when network circuit is broken either
     : by user or by network
     :
     MSGTXT(DSCG,N.,E.,T.,W.,O.,R.,K.,SP.,L.,O.,G.,O.,F.,F.)



Page 280                 PBHERS.DOC







SAMPLE HIF TYMFILE                            April 13, 1990



     :
     : Multiple message exchange when circuit is broken either
     : by user or network to terminate the session with the host
     :
     : First, Send Clear Key
     MSGTXT(DSN1,A.CLR)
     :
     :Then expect a WRITE command with the sequence in the following order
     :WCC + orders (SBA+cur. pos.,cur. pos.) + text
     :
     MSGTXT(DRC1,A.SBA,40,4B,L.,O.,G.,O.,F.,F.,?.)
     :
     : Respond with a text message of YES plus an enter key to host
     :
     MSGTXT(DSN2,A.ENT,40,4B,Y.,E.,S.)
     :
     : Expect to see Unlock Keyboard  from host
     :
     MSGTXT(DRC2,WCCK)
     :
     : Then send another text message to host
     :
     MSGTXT(DSN3,A.ENT,40,7D,B.,Y.,E.,SP.,B.,Y.,E.)
     :
     : Define message from host to force user off the network
     : Unlock Keyboard WCC + GET OFF THE NETWORK
     :
     MSGTXT(ZAPG,B.,G.,E.,T.,SP.,O.,F.,F.,SP.,T.,H.,E.,SP.,N.,E.,T.)
     MSGTXT(CONT,W.,O.,R.,K.)
     :
     : Define sequence of events for Multiple Disconnect exchange.
     :
     MLTDMS(MUL1,DSN1,DRC1,DSN2,DRC2,DSN3)
     :
     : Macro to define Local User Directory(LUD) entry
     :
     LUDTRY(LUD1,M,N)                :usernames started with MN
     LUDTRY(LUD2,I,S)                :usernames started with IS
     :
     : Macros to define slot parameters
     :
     STPCRSH(YES)                    :slot will halt after a crash
     SAVQUE(YES)                     :enable the Save Queue feature
     MAXPORT(2)                      :the maximum simultaneous users are two
     SCNBUF(3)                       :three devices requiring screen
                                     :buffers may be logged in
                                     :simultaneously







Page 281                 PBHERS.DOC







BISYNC RCV RECEIVE CODES                      April 13, 1990



             III.  BISYNC RCV RECEIVE CODES


     The following is a list of the internal bisync receive codes
     as display in certain commands such the SCOPE command.

     0       rcdatx          good data etx received
     1       rcdatb          good data etb received
     2       rcenq           enq received
     3       rceot           eot received
     4       rcnak           nak received
     5       rcdisc          dle,eot (disconnect signal)received
     6       rcack1          ack1 received
     7       rcwack          wack received
     8       rcack0          ack0 received
     9       rcrvi           rvi received
     A       rcttd           ttd(stx,enq) received
     B       rcmbid          multi-leaving bid (soh,enq)
     C       rcdabt          data abort(enq,eot,nak in text)
     D       rclsyn          lost synchronization
     E       rcovrn          overrun(more data than bufferlets specified)
     F       rcnrom          no initial bufferlet available
     10      rctmot          timeout before msg received
     11      rcbadd          crc error in data message
     12      rclost          lost data due to unavailability of bufferlet
     13      rcunid          unidentifiable msg
     14      rcfcom          forced completion by background



























Page 282                 PBHERS.DOC







BISYNC XMIT RETURN CODES                      April 13, 1990



              IV.  BISYNC XMIT RETURN CODES


The following bisync operation codes are used to send data.


     0       xcdata          send data
     1       xcenq           send enq
     2       xceot           send eot
     3       xcnak           send nak
     4       xcttd           send ttd
     5       xcack1          send ack1
     6       xcwack          send wack
     7       xcack0          send ack0
     8       xcrvi           send rvi
     9       xcdisc          send disconnect(dle,eot)






































Page 283                 PBHERS.DOC







3270 PBH SLOT DEFINED CRASH CODES             April 13, 1990



          V.  3270 PBH SLOT DEFINED CRASH CODES





















































Page 284                 PBHERS.DOC







3270 PBH SLOT DEFINED CRASH CODES             April 13, 1990




     Following is a list of all the 3270 PBH slot-defined crash codes

      Nearest   Localize  Crash
      label     Module    Code   Crash Reason

       TPT2      TIMEOUT   0F    Timeout Free List exhausted
       ENTRY2    MAIN            In CRASH library.
       GCL05     CMDLST    0A    Command Link List locked for 'GET' process
       GCL1      CMDLST    0A    Same as the above
       PCL1      CMDLST    0A    Command Link List locked for 'PUT' process
       CLFULL    CMDLST    99    Command Link has no free link
       CLBUG     CMDLST    98    Bug in Command List usage
       BSCSRV    BSCSRV    0A    SVC error, Try to connect input twice
                                  for receive process
       BSX030    BSCSXM    0A    SVC error, Try to connect input twice
                                  for Transmit process
       BSXRTS    BSCSXM    0A    SVC error,  Force Output failed
       BSXWRT    BSCSXM    0A    Illegal Transmit OP code
       BSXWCR    BSCSXM    0A    Transmit List too small
       BSXWTO    BSCSXM    0A    Force output SVC error
       BSXOTZ    BSCSXM    0A    Force Output SVC error
       BUFERR    BBUFER    D0    Big Bufferlet Lists Locked when 'GET'
       PBB20     BBUFER    D0    Big Bufferlet lists locked when 'PUT'
       PCRASH    BSCPTP    FF    Bisync Line crash
       DSR020    BSCDTR    0A    Connect input SVC error
       DTR220    BSCDTR    0A    Same
       SPECL     FRNTND    61    Invalid Port 0 message
       INDCR     FRNTND    60    No Activation routine
       INPUT3    FRNTND    63    Invalid port number,  which has been
                                  active to receive the needle
       INCN1     FRNTND    60    No DCB was assigned
                                 No State Table was assigned
                                 No Activation routine was Assigned
       INVAL     FRNTND    62    Invalid Message
       PUTBC     MAIN      0A    No Big Bufferlet
       PUTBH     MAIN      0A    Same
       PUTBHX    MAIN      0A    Same
       GETBC     MAIN      0A    No Buffer assigned to get next character
       POM30     MAIN      0A    Invalid port 0 message
       BCRASH    MAIN      0A    No Big Bufferlet for creating
                                 Bisync Frame,  called by PUTBX
       NOLNK     MAIN      99    No link for Map processing

     Note :

       1. Module MAIN is global to all codes,  need not be localized.
       2. Crash type of 0A simply means unknown reason.






Page 285                 PBHERS.DOC







3270 PBH SLOT DEFINED CRASH CODES             April 13, 1990

























































Page 286                 PBHERS.DOC











                            CONTENTS


  1.  PBH  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001
      1.1   SYNTAX
            AND
            FORMATS  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001
      1.2   MACRO
            DEFINITIONS
            FOR
            LINE  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002
            1.2.1   HSTPRT
                    -
                    Host
                    Number
                    and
                    Ports  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002
            1.2.2   LINTYP
                    -
                    Change
                    Host
                    Line
                    Type  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000003
            1.2.3   LINE
                    -
                    Line
                    Address  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000003
            1.2.4   HOST
                    -
                    Associating
                    Host
                    Number  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000004
            1.2.5   RTSCTS
                    -
                    RTS/CTS
                    Handshake
                    Signals  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000004
            1.2.6   NOPOLL
                    -
                    No
                    Poll
                    Duration  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005
      1.3   MACRO
            DEFINITIONS
            FOR
            CONTROL
            UNIT  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005







                           - i -











            1.3.1   CUNIT
                    -
                    Control
                    Unit
                    Address  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005
      1.4   MACRO
            DEFINITIONS
            FOR
            DEVICE  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006
            1.4.1   DEVICE
                    -
                    Device
                    Address  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006
            1.4.2   TYPE
                    -
                    Device
                    Type  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000007
            1.4.3   COLOR
                    -
                    Color
                    Feature  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000007
            1.4.4   XPRNT
                    -
                    Transparent
                    Data
                    Handling  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000008
            1.4.5   KKORKJ
                    -
                    Change
                    Character
                    Set  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000008
            1.4.6   GREET
                    -
                    Greeting
                    Message
                    When
                    Log
                    On  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000010
            1.4.7   DISCON
                    -
                    Disconnect
                    Message
                    On
                    Logoff  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000011
            1.4.8   MDS
                    -
                    Define
                    Multiple
                    Disconnect
                    Sequence  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000011




                           - ii -











            1.4.9   ZAP
                    -
                    Zap
                    Message
                    From
                    The
                    Host  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000012
            1.4.10  ASSOC
                    -
                    Associated
                    Device  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000013
            1.4.11  NEEDLE
                    -
                    Needle
                    Message  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000014
            1.4.12  INACT
                    -
                    Timeout
                    Interval
                    For
                    Inactivity  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000015
            1.4.13  LUD
                    -
                    Local
                    User
                    Directory  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000016
            1.4.14  MSGTXT
                    -
                    Message
                    Text  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000017
            1.4.15  LUDTRY
                    -
                    LUD
                    Entry  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000017
            1.4.16  TSTREQ
                    -
                    Send
                    Test
                    Request
                    Message
                    at
                    Zap  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000018
            1.4.17  MLTDMS
                    -
                    Define
                    Sequence
                    of
                    Multiple
                    Disconnect
                    Exchange  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000019




                          - iii -











      1.5   CHANGING
            DEFAULT
            LINE
            HOST
            TYPE
            FOR
            THE
            SLOT  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000024
            1.5.1   DEFLIN
                    -
                    Define
                    Default
                    Host
                    Line
                    Type  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000024
      1.6   CHANGING
            DEFAULT
            VALUES
            FOR
            LINE  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000024
            1.6.1   DEFHST
                    -
                    Default
                    Host
                    Number  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000024
            1.6.2   DEFRTS
                    -
                    Default
                    RTS/CTS
                    Handshake
                    Signal  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000025
            1.6.3   DEFPOL
                    -
                    Polling
                    Timeout
                    From
                    Host  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000025
      1.7   CHANGING
            DEFAULT
            VALUES
            FOR
            DEVICE
            PARAMETER  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000026
            1.7.1   DEFTYP
                    -
                    Default
                    Device
                    Type  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000026






                           - iv -











            1.7.2   DEFCOL
                    -
                    Default
                    Color
                    Capability  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000026
            1.7.3   DEFXPR
                    -
                    Default
                    Transparency
                    Capability  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000027
            1.7.4   DEFGRT
                    -
                    Default
                    Greeting
                    Message  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000027
            1.7.5   DEFMDS
                    -
                    Default
                    Multiple
                    Disconnect
                    Sequence  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000028
            1.7.6   DEFZAP
                    -
                    Default
                    Zap
                    Message  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000028
            1.7.7   DEFASO
                    -
                    Default
                    Associated
                    Device  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000029
            1.7.8   DEFNDL
                    -
                    Default
                    Dynamic
                    Greeting
                    Needle
                    Message  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000029
            1.7.9   DEFIAT
                    -
                    Default
                    Inactive
                    Timer  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000030
            1.7.10  DEFLUD
                    -
                    Default
                    Local
                    User
                    Directory  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000030





                           - v -











            1.7.11  DEFCHR
                    -
                    Define
                    Default
                    Character
                    Set  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000031
            1.7.12  DEFTRQ
                    -
                    Default
                    for
                    Send
                    Test
                    Request
                    Msg
                    at
                    Zap  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000031
            1.7.13  DEFDSC
                    -
                    Default
                    Disconnect
                    Message  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000032
      1.8   MACRO
            TO
            CHANGE
            SLOT
            PARAMETERS  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000033
            1.8.1   OWLi
                    -
                    OWL
                    PF-
                    i
                    Key  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000033
            1.8.2   AIDIBM
                    -
                    IBM
                    AID
                    Key  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000034
            1.8.3   IBMi
                    -
                    IBM
                    PF-
                    i
                    Key  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000035
            1.8.4   VIRASO
                    -
                    Associated
                    Device
                    Request  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000036






                           - vi -











            1.8.5   VIRTYP
                    -
                    Virtual
                    Host
                    Mode
                    Device
                    Type  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000036
            1.8.6   ECHO
                    -
                    Echo
                    Project
                    code  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000037
            1.8.7   MXMAPU
                    -
                    Maximum
                    Number
                    of
                    Simultaneous
                    Users  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000037
            1.8.8   SCNBUF
                    -
                    Screen
                    Buffer  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000038
            1.8.9   BUFUSE
                    -
                    Buffer
                    Space
                    Usage  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000038
            1.8.10  SAVQUE
                    -
                    Save
                    Queue
                    Option  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000039
            1.8.11  MNPORT
                    -
                    Minimum
                    Port
                    Number  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000039
            1.8.12  TOLIAC
                    -
                    Tolerance
                    for
                    Inactivity
                    Timer  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000040
            1.8.13  TOLNPL
                    -
                    Tolerance
                    for
                    No
                    Polling  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000040




                          - vii -











            1.8.14  INVSTA
                    -
                    Zap
                    Sense
                    and
                    Status
                    Message  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000040
      1.9   MACROS
            TO
            DEFINE
            HOST
            INTERFACE
            DEBUGGING
            PARAMETERS  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000041
            1.9.1   NETCON
                    -
                    Network
                    Console  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000041
            1.9.2   RETCODE
                    -
                    Trace
                    of
                    BSC
                    Receiver
                    Return
                    Codes  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000043
            1.9.3   PRTCON
                    -
                    Print
                    Tymfile
                    Configuration  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000044
            1.9.4   RTRACE
                    -
                    BSC
                    Line
                    Receiver
                    Trace  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000044
            1.9.5   STPCRSH
                    -
                    Halt
                    Slot
                    When
                    Crash  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000045
            1.9.6   IRINGSZ
                    -
                    IRING
                    Size  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000046
            1.9.7   ORINGSZ
                    -
                    ORING
                    Size  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000046



                          - viii -











            1.9.8   BUFLET
                    -
                    Bufferlet
                    Number.  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000047
            1.9.9   CMDLNK
                    -
                    Number
                    of
                    Command
                    Link  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000047
            1.9.10  PTRACE
                    -
                    Protocol
                    Trace  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000048
            1.9.11  GENNIB
                    -
                    generate
                    the
                    nib
                    file  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000048
            1.9.12  DEFMODE
                    -
                    Default
                    Input
                    Mode  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000049
      1.10  MARCO'S
            TO
            ALLOW
            BOM
            TO
            CHANGE
            CONFIGURATION
            VALUES  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000049
            1.10.1  MOTYM
                    -
                    Dynamic
                    Modification
                    Commands
                    Allowed  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000050
            1.10.2  STNU
                    -
                    Define
                    Storage
                    for
                    On-
                    Line
                    Modifications  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000050







                           - ix -











            1.10.3  BOMPW
                    -
                    Define
                    Password
                    to
                    Access
                    Sub-
                    Menu
                    in
                    BOM  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000051

  2.  HBOM  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000052
      2.1   ACCESSING
            HBOM
            THROUGH
            DDT  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000052
      2.2   GENERAL
            INFORMATION
            FUNCTIONS  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000053
            2.2.1   List
                    Commands
                    Available
                    -
                    MENU  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000053
            2.2.2   List
                    Editing
                    Characters
                    -
                    INST  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000053
            2.2.3   Leave
                    HBOM
                    and
                    DDT
                    -
                    EXIT  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000053
            2.2.4   Leave
                    HBOM
                    -
                    QUIT  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000053
      2.3   NETWORK
            OPERATION
            FUNCTIONS  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000053
            2.3.1   Query
                    Slot's
                    Version
                    -
                    CODE  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000054







                           - x -











            2.3.2   Query
                    Slot's
                    Status
                    -
                    STATUS  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000054
            2.3.3   Query
                    Crash
                    History
                    -
                    CRASH  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000056
      2.4   ISIS
            RINGS
            TRACE
            FUNCTIONS  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000059
            2.4.1   Display
                    IRING
                    trace
                    only
                    -
                    DIR  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000060
            2.4.2   Display
                    ORING
                    trace
                    only
                    -
                    DOR  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000060
            2.4.3   Trace
                    both
                    IRING
                    and
                    ORING
                    -
                    DR  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000060
            2.4.4   Query/Change
                    Mode
                    of
                    Message
                    Translation
                    -
                    DRNG  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000061
      2.5   BSC
            LINE
            MONITORING
            FUNCTIONS  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000061
            2.5.1   Query/Change
                    Input
                    Mode
                    Command
                    -
                    MODE  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000061




                           - xi -











            2.5.2   Query
                    Slot's
                    Configuration
                    -
                    CONF  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000062
            2.5.3   Query
                    Line
                    Status
                    -
                    QLINE  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000063
            2.5.4   Query
                    Control
                    Unit
                    Status
                    -
                    QCU  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000064
            2.5.5   Query
                    Device
                    Status
                    -
                    QDEV  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000066
            2.5.6   Reset
                    CU
                    Error
                    Counts
                    -
                    RESET  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000067
            2.5.7   Restart
                    Line
                    Error
                    Counts
                    -
                    RERR  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000068
            2.5.8   Display
                    Line
                    Error
                    Statistics
                    -
                    DERR  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000068
            2.5.9   Display
                    CU
                    Not
                    Being
                    Polled
                    -
                    DNPLL  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000069
      2.6   DEBUGGING
            FUNCTIONS  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000070






                          - xii -











            2.6.1   Enable
                    Character
                    Per
                    Second
                    Trace
                    -
                    ECPS  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000070
            2.6.2   Display
                    Character
                    Per
                    Second
                    Trace
                    Results
                    -
                    DCPS  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000071
            2.6.3   Enable
                    Polling
                    Cycle
                    Trace
                    -
                    EPC  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000072
            2.6.4   Display
                    Polling
                    Cycle
                    Trace
                    Results
                    -
                    DPC  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000072
            2.6.5   Enable
                    Time
                    Stamp
                    Trace
                    -
                    ESTAMP  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000073
            2.6.6   Display
                    Time
                    Stamp
                    Trace
                    Results
                    -
                    DSTAMP  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000074
            2.6.7   Enable
                    and
                    Display
                    Protocol
                    Trace
                    -
                    SCOPE  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000075
                    2.6.7.1    Command
                               Syntax  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000075




                          - xiii -











                    2.6.7.2    Command
                               Error
                               Handling  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000076
                    2.6.7.3    Scope
                               Trace
                               Information  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000076
                    2.6.7.4    PBH
                               Receive
                               Information  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000076
                    2.6.7.5    PBH
                               Transmit
                               Information  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000077
                    2.6.7.6    PBH
                               Internal
                               States  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000078
                    2.6.7.7    Text  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000078
                    2.6.7.8    Sample
                               Sessions  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000078
      Host
      General
      Poll
      With
      No
      I/O
      Pending
      In
      PBH  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000078
      Host
      Select
      Write
      To
      PBH  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000079
            2.8.1   TRACE
                    SUPPRESS
                    COMMAND  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000079
                    2.8.1.1    Sample
                               Sessions  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000080
      Scope
      Trace
      with
      Trcsup
      disabled  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000080
      Scope
      Trace
      with
      Trcsup
      enabled  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000080







                          - xiv -











            2.10.1  Enable
                    Data
                    Trace
                    -
                    EDAT  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000080
            2.10.2  Display
                    Data
                    Trace
                    -
                    DDAT  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000081
            2.10.3  Disable
                    All
                    Enabled
                    Traces
                    -
                    DISABLE  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000082
      2.11  QUEUE
            PROCESSOR  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000082
            2.11.1  Stop
                    XMT
                    Q
                    Process
                    -
                    STOPXMT  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000082
            2.11.2  Query
                    Data
                    On
                    XMT
                    Q
                    -
                    QXMTQ  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000083
            2.11.3  Start
                    XMT
                    Q
                    Process
                    -
                    STARTXMT  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000083
            2.11.4  Stop
                    RCV
                    Q
                    Process
                    -
                    STOPRCV  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000083
            2.11.5  Query
                    Data
                    On
                    RCV
                    Q
                    -
                    QRCVQ  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000084




                           - xv -











            2.11.6  Start
                    RCV
                    Q
                    Process
                    -
                    STARTRCV  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000084
      2.12  MODIFY
            TYMFILE
            PARAMETERS
            ON
            LINE  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000084
            2.12.1  Modify
                    Control
                    Unit
                    Address
                    -
                    MCU  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000085
            2.12.2  Modify
                    Device
                    Address
                    -
                    MDEV  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000085
            2.12.3  Change
                    Parameters
                    Subfield
                    -
                    CHPR  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000085
      2.13
            BSC
            LINE
            CONTROL
            FUNCTIONS  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000086
            2.13.1  THE
                    DOWN
                    COMMAND  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000086
            2.13.2  THE
                    UP
                    COMMAND  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000087

  3.  3270
      REFERENCE
      MANUAL
      FOR
      PBH  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000089
      3.1   IBM
            ENVIRONMENT  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000089
            3.1.1   IBM
                    FAMILY  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000089
            3.1.2   IBM
                    PRODUCTS  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000089
                    3.1.2.1    Overview  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000089



                          - xvi -











      Operating
      Systems  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000090
      Communication
      Procedures  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000090
      Applications
      Products  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000090
                    3.4.0.1    Operating
                               System  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000091
                    3.4.0.2    Telecommunications
                               Access
                               Methods  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000091
                    3.4.0.3    TELEPROCESSING
                               MONITORS  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000092
      CUSTOMER
      INFORMATION
      CONTROL
      SYSTEM
      (CICS)  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000092
      INFORMATION
      MANAGEMENT
      SYSTEM
      (IMS)  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000093
      CONVERSATIONAL
      MONITORING
      SYSTEM
      (CMS)  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000093
      3270
      IDS
      LOCAL
      COMMUNICATION  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000093
                    3.8.0.1    FRONT
                               END
                               PROCESSOR
                                 0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000094
      FUNCTIONALITY
        0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000094
      3705
      COMPATIBLE
      PROGRAMS
        0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000094
      EP  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000094
      NCP
        0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000095
      PEP
        0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000095
      DATA
      LINKS
        0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000095






                          - xvii -











      DEFINITION
      AND
      ESTABLISHMENT
      OF
      DATA
      LINKS
        0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000096
      3.16  3270
            LINE
            DISCIPLINE  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000097
            3.16.1  GENERAL
                    BSC
                    BLOCK
                    FORMAT  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000097
            3.16.2  CATAGORIES
                    OF
                    COMMANDS  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000099
                    3.16.2.1   Poll
                                 0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000100
                    3.16.2.2   Selection
                               Addressing
                               or
                               Selecting  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000100
      3270
      Operations  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000100
      ORDERS  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000100
            3.18.1  POLL
                    COMMAND
                    1  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000100
                    3.18.1.1   General
                               Poll
                               Format
                                 0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000100
                    3.18.1.2
                               Normal
                               answers
                               to
                               GENERAL
                               POLL  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000101
            3.18.2  POLL
                    COMMAND
                    2  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000101
                    3.18.2.1   Specific
                               Poll
                               Format  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000101
            3.18.3  SELECTION
                    ADDRESSING
                    COMMAND  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000102
                    3.18.3.1   Format  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000102
            3.18.4  3270
                    OPERATIONS  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000103



                         - xviii -











                    3.18.4.1   WRITE  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000103
                    3.18.4.2   READ  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000103
                    3.18.4.3   CONTROL
                                 0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000104
                    3.18.4.4   ORDERS
                                 0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000104
                    3.18.4.5   WRITE
                                 0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000105
                    3.18.4.6   READ
                                 0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000106
                    3.18.4.7   ORDERS  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000111
            3.18.5  ADDITIONAL
                    COMMENTS  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000112
            3.18.6  EXAMPLES
                    OF
                    INTERCHANGES  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000116
            3.18.7  SDLC
                    OVERVIEW  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000120
                    3.18.7.1   Introduction
                                 0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000120
                    3.18.7.2   SDLC
                               Operating
                               Characteristics
                                 0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000121
                    3.18.7.3   Primary
                               and
                               Secondary
                               Stations
                                 0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000122
                    3.18.7.4   Transmission
                               States
                                 0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000122
                    3.18.7.5   Frame
                               Format
                                 0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000122
                    3.18.7.6   Control
                               Field
                               Formats  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000123
                    3.18.7.7   Information
                               Transfer
                               Format
                               -
                               I  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000124
                    3.18.7.8   Supervisor
                               Format
                               -
                               S
                                 0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000124






                          - xix -











                    3.18.7.9   Unnumbered
                               Format
                               -
                               U
                                 0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000124
      3.19  3270
            TYMNET
            NETWORK
            SUPPORT  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000124
            3.19.1  ACT
                    Network
                    Environment
                    Specifications  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000124
            3.19.2  HARDWARE
                    LEVEL  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000126
                    3.19.2.1   IIX
                               :
                               INFORMATION
                               INTERFACE
                               EXCHANGE  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000126
      DETERMINING
      INTELLIGENCE
        0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000127
      DETERMINING
      THE
      IIX
      DIALECT
        0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000127
      IIX
      MESSAGE
      STRUCTURE
        0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000128
                    3.22.0.1   D.S.P
                               :
                               DISPLAY
                               SYSTEM
                               PROTOCOL  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000129
                    3.22.0.2   LUD
                               :
                               LOCAL
                               USER
                               DIRECTORY  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000131
                    3.22.0.3   Virtual
                               Host
                               Mode
                               :
                               VHM
                                 0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000132






                           - xx -











                    3.22.0.4   CMT
                               :
                               CHARACTER
                               MODE
                               TRANSLATOR  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000132
      3.23  LOGON
            -
            LOGOUT
            PROCEDURES  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000133
            3.23.1  GENERALITIES  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000133
                    3.23.1.1   Stored
                               logon
                                 0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000134
                    3.23.1.2   PVC
                               :
                               Permanent
                               Virtual
                               Circuit
                                 0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000134
                    3.23.1.3   Menu
                               screen
                                 0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000135
                    3.23.1.4   Basic
                               logon
                               screen
                                 0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000135
                    3.23.1.5   Gateway
                               logon
                               screen
                                 0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000135
                    3.23.1.6   DSP
                               logon
                               screen
                                 0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000136
                    3.23.1.7   NSS
                               :
                               Network
                               Services
                               Screen
                                 0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000137
      3.24  DIFFERENT
            CASES  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000138
      3.25  INTERFACES
            GENERATION  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000139
            3.25.1  GENERATION
                    LAYOUT  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000139
            3.25.2  CMTI
                    TYMFILE  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000141
            3.25.3  COMMAND
                    FILES  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000143




                          - xxi -











      3.26  INTERNAL
            STRUCTURE  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000144
            3.26.1  LIBRARIES  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000144
            3.26.2  MODULES  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000144
            3.26.3  PROCESSES  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000145
            3.26.4  SUMMARY
                      0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000146
            3.26.5  SEGMENTATION  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000146
                    3.26.5.1   Mac
                               segmentation
                                 0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000147
      3.27  INTERFACES
            MONITORING
            and
            DEBUGGING  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000148
            3.27.1  GENERAL
                    DDT
                    COMMANDS  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000148
            3.27.2  DATASCOPE
                    TRACES  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000150
            3.27.3  CRASH
                    TABLES  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000150
            3.27.4  BUFFER
                    TRACES  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000150
            3.27.5  TROUBLESHOOTING  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000151
      3.28  CONFIGURATION  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000152
            3.28.1  FIGURES  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000152
            3.28.2  CONSTRAINTS  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000153
      3.29  SCHEDULES  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000153
      3.30  GLOSSARY  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000154

  4.  THE
      TURBO
      ENGINE
      ENVIRONMENT  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000157
      4.1   SOFTWARE
            NOTES  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000157
            4.1.1   PBH
                    Code  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000157
            4.1.2   Loading
                    Code  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000157
      4.2   HARDWARE
            NOTES  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000157
            4.2.1   GP  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000157
            4.2.2   IOCP  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000157
            4.2.3   Paddle
                    Card  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000158

  5.  MCP  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000159
      5.1   Functions  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000159
            5.1.1   Overview  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000159



                          - xxii -











            5.1.2   Features  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000160
                    5.1.2.1    Target
                               Devices  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000160
                    5.1.2.2    Transparency  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000160
                    5.1.2.3    Compatibility  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000160
                    5.1.2.4    Destination
                               mapping  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000161
            5.1.3   Call
                    Establishment  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000161
                    5.1.3.1    Called
                               DTE
                               Address
                               Format  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000162
                    5.1.3.2    Protocol
                               ID  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000163
                    5.1.3.3    Call
                               User
                               Data  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000164
            5.1.4   Data
                    Transfer  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000164
                    5.1.4.1    Conversion
                               Process  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000164
                    5.1.4.2    Forward
                               Abort  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000165
                    5.1.4.3    Level-
                               2
                               Kanji  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000165
                    5.1.4.4    Autoskip
                               for
                               Hitachi  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000165
                    5.1.4.5    Data
                               Re-
                               Blocking  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000166
                    5.1.4.6    Printers  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000166
                    5.1.4.7    Repeat
                               to
                               Address  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000166
            5.1.5   Call
                    Clearing  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000167
                    5.1.5.1    Conversion
                               Failure  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000167
                    5.1.5.2    Incorrectly
                               formatted
                               Called
                               DTE
                               Address  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000167
                    5.1.5.3    Zappers  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000167
            5.1.6   MCP
                    Generated
                    Messages  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000167




                         - xxiii -











            5.1.7   Write
                    Structured
                    Field  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000167
            5.1.8   Hitachi
                    Print
                    Control
                    Characters  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000168
            5.1.9   Re-
                    blocking
                    for
                    Hitachi  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000168
      5.2   Monitoring  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000168
            5.2.1   Port
                    Display  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000169
            5.2.2   Log
                    Display  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000169
      5.3   Limitations  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000169
            5.3.1   81st
                    column
                    on
                    IBM
                    terminals  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000170
            5.3.2   Kanji
                    Shift
                    Character  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000170
            5.3.3   Break
                    Key  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000170
            5.3.4   Unsupported
                    Commands  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000170
            5.3.5   Terminal
                    and
                    Host
                    Timeouts  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000171
            5.3.6   Screen
                    Sizes  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000171
            5.3.7   Gateway
                    Access  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000171
            5.3.8   Write
                    Structured
                    Field
                    Command  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000171
            5.3.9   Test
                    Request  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000172
            5.3.10  Multiple
                    User
                    DSP
                    Circuits  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000172
            5.3.11  Command
                    Chaining  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000172





                          - xxiv -











            5.3.12  Connection
                    Request
                    Mode  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000172
            5.3.13  DSP
                    Protocol
                    Violations  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000172
      5.4   Bit
            Mappings  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000174
      5.5   Sysgen  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000183
            5.5.1   Statements  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000183
                    5.5.1.1    BEGINTYM  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000183
                    5.5.1.2    OPTION  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000183
                    5.5.1.3    MESSAGE  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000183
                    5.5.1.4    HOST  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000186
                    5.5.1.5    SESSIONS  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000187
                    5.5.1.6    ENDTYM  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000187
                    5.5.1.7    Defaults  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000187

  6.  BELCOR  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000190
      6.1   HOW
            TYMNET
            IMPLEMENTS
            3270
            BSC  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000190
            6.1.1   PBH
                    -
                    POLLED
                    BISYNC
                    HOST
                    INTERFACE  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000190
            6.1.2   MODES
                    OF
                    OPERATIONS  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000192
                    6.1.2.1    NATIVE
                               MODE  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000192
                    6.1.2.2    NATIVE/SNA-
                               H
                               MODE  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000194
                    6.1.2.3    SNA-
                               T/NATIVE
                               MODE  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000196
                    6.1.2.4    VIRTUAL
                               HOST
                               MODE  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000198
                    6.1.2.5    X.25/DSP
                               MODE  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000199








                          - xxv -











      6.2   HOW
            POLLINGS
            ARE
            HANDLED
            BY
            TYMNET  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000202
            6.2.1   HOST
                    TO
                    PBH  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000202
      6.3   3270
            DISPLAY
            SYSTEM
            PROTOCOL  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000203
            6.3.1   DSP
                    CONTROL
                    MESSAGES
                    IN
                    TYMNET  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000203
            6.3.2   DSP
                    DATA
                    MESSAGE
                    FORMAT
                    IN
                    TYMNET  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000203
                    6.3.2.1    COMMAND
                               MESSAGE  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000203
                    6.3.2.2    RESPONSE
                               MESSAGE
                               FORMATS  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000205
      6.4   EARLY
            DATA
            FORWARDING  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000207
            6.4.1   THEORY
                    OF
                    OPERATIONS  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000207
            6.4.2   FOREGROUND/BACKGROUND
                    COMMUNICATIONS  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000208
            6.4.3   TO-
                    TERMINAL
                    DIRECTION  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000210
            6.4.4   TO-
                    HOST
                    DIRECTION  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000210
            6.4.5   DYNAMIC
                    BUFFER
                    ADJUSTMENT  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000210
                    6.4.5.1    FOREGROUND  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000210
                    6.4.5.2    BACKGROUND  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000211

  7.  HITACHI  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000212




                          - xxvi -











      7.1   Design
            Objectives  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000212
      7.2   HSC
            Characteristics  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000212
            7.2.1   Data
                    Link
                    Control  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000212
                    7.2.1.1    Cross
                               Reference
                               of
                               Device
                               Address
                               Assignments  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000213
            7.2.2   WRITE
                    Group
                    Commands  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000217
            7.2.3   READ
                    Group
                    Commands  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000217
            7.2.4   Syntax
                    of
                    WRITE
                    Group
                    Commands  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000218
            7.2.5   Orders  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000220
            7.2.6   Attribute
                    Bytes  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000221
            7.2.7   Print
                    Control
                    Characters  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000221
            7.2.8   Program
                    Function
                    Keys  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000221
            7.2.9   Sense
                    and
                    Status
                    Messages  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000221
      7.3   Error
            Recovery
            Procedures  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000224
            7.3.1   HSC
                    Line
                    Disciplines  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000224
            7.3.2   Diagram
                    of
                    Line
                    Disciplines  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000228
                    7.3.2.1    Polling  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000229
                    7.3.2.2    Selection  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000230





                         - xxvii -











                    7.3.2.3    WRITE
                               Type
                               Command  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000231
                    7.3.2.4    READ
                               Type
                               Command  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000233
            7.3.3   Network
                    Error
                    Recovery  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000234
                    7.3.3.1    FEP
                               -
                               HIF  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000234
                    7.3.3.2    TIF
                               -
                               CU  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000234
                    7.3.3.3    Command
                               -
                               To
                               Terminal
                               Direction  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000235
                    7.3.3.4    Response
                               -
                               To
                               Host
                               Direction  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000236
      7.4   Test
            Facilities  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000236
            7.4.1   Host
                    Emulation  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000236
            7.4.2   Terminal
                    Emulation  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000237
            7.4.3   Test
                    Host
                    Environment  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000237

  8.  CRM4
      DEVELOPMENT  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000238
      8.1   LOGON
            PROCEDURE  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000238
            8.1.1   CRT
                    LOGON  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000238
            8.1.2   PRINTER
                    LOGON  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000239
      8.2   CMT
            TYMFILE
            CONFIGURATION  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000240
      8.3   RESTRICTIONS  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000241

  9.  CRM4
      IMPLEMENTATION  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000242
      9.1   Scenario  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000242



                         - xxviii -











 10.  ADDENDUM
      TO
      3270
      INTERFACE
      REFERENCE
      MANUAL  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000246
      10.1  Summary
            of
            changes  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000246
            10.1.1  Host
                    Interface
                    PBH07.?04
                      0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000246
            10.1.2  Terminal
                    Interface
                    PBT05.?04
                      0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000246
      10.2  Host
            Interface  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000246
            10.2.1  Multi-
                    targeting  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000246
            10.2.2  Disconnect
                    message
                    sequences  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000247
            10.2.3  Second
                    greeting
                    message  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000249
            10.2.4  Test
                    Request
                    Message  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000250
            10.2.5  3101
                    24
                    PF
                    keys
                    support  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000251
            10.2.6  3101
                    printer
                    support  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000251
            10.2.7  3101
                    read
                    modify
                    command
                    and
                    read
                    buffer
                    command.  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000252








                          - xxix -











            10.2.8  Error
                    messages
                    to
                    supervisor
                    log.
                    7.04
                      0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000252
      10.3  Terminal
            Interface  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000254
            10.3.1  Parameter
                    to
                    skip
                    DSP
                    screen  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000254
            10.3.2  Screen
                    recovery
                    after
                    network
                    services.  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000254
            10.3.3  Node
                    information
                    in
                    network
                    service
                    screen  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000254
            10.3.4  Quick
                    key
                    sequence
                    to
                    bypass
                    network
                    service
                    screen  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000255
            10.3.5  Interval
                    time
                    to
                    supervisor
                    log.  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000256
            10.3.6  Error
                    messages
                    to
                    Supervisor
                    Log  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000257
            10.3.7  Bisync
                    Operation
                    Monitor
                    BOM
                      0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000259






                          - xxx -











                    10.3.7.1   LOGGING
                               INTO
                               THE
                               BISYNC
                               OPERATIONS
                               MONITOR
                                 0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000260
                    10.3.7.2   COMMAND  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000260
                    10.3.7.3   LOGGING
                               OUT
                               THE
                               BISYNC
                               OPERATIONS
                               MONITOR  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000263
      10.4  ATM3624  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000263
            10.4.1  3624
                    BISYNC
                    PROTOCOL  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000264
                    10.4.1.1   APPLICATION
                               LEVEL
                               MESSAGES  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000264
                    10.4.1.2   BSC
                               LEVEL
                               MESSAGES  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000265
      POLLING
      AND
      BSC
      RESPONSES  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000267
      SENSE
      AND
      STATUS
      MESSAGES  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000267
      TEXT
      AND
      ACKNOWLEDGEMENTS  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000267
      ADDRESSING  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000267
      TRANSMIT
      SYNCHRONIZATION  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000268
            10.9.1  PBH
                    AND
                    THE
                    3624  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000268
                    10.9.1.1   CONFIGURING
                               A
                               3624
                               DEVICE  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000268








                          - xxxi -











                    10.9.1.2   DIFFERENCES
                               BETWEEN
                               3624
                               BSC
                               AND
                               3270
                               BSC
                               PROTOCOL  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000270
      ADDRESSES  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000270
      ILLEGAL
      BISYNC
      CONTROL
      MESSAGES  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000270
      PBH
      RESPONSES
      TO
      POLLS
      AND
      SELECTS  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000271
      TRANSPARENT
      TEXT  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000271
                    10.13.0.1  TYMNET
                               CIRCUIT
                               CHANGES  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000272
      PERMANENT
      VIRTUAL
      CIRCUIT  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000272
      DSP
      LOGON  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000272
      START/STOP
      POLLING  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000273
      MONITOR
      COMMAND  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000275





















                         - xxxii -











                         APPENDICES



  I.  CRASH
      CODES
      FOR
      3270
      PBH
      INTERFACE  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000277

 II.  SAMPLE
      HIF
      TYMFILE  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000279

III.  BISYNC
      RCV
      RECEIVE
      CODES  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000282

 IV.  BISYNC
      XMIT
      RETURN
      CODES  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000283

  V.  3270
      PBH
      SLOT
      DEFINED
      CRASH
      CODES  0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000284























                         - xxxiii -




   3 