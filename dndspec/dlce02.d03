



                                                               May 27, 1987








                      SDLC External Reference Manual












                           Version 2 Revision 02


                                  TYMNET
                      NETWORK TECHNOLOGY DEVELOPMENT
                               May 27, 1987





   ====================================================================
   |       TYMNET's  proprietary  rights  are  included  in  the      |
   |       information disclosed herein. The recipient, by receiving  |
   |       this document, agrees that neither this document nor the   |
   |       information disclosed herein nor any part thereof shall be |
   |       reproduced or transferred to other documents or used or    |
   |       disclosed to others for manufacturing or for any other     |
   |       purpose except as specifically authorized in writing by    |
   |       TYMNET.                                                    |
   ====================================================================



 Copyright 1987 by Tymnet -- The McDonnell Douglas Network Systems Company










                     SDLC/QLLC External Reference Manual         QLCERS.DOC




                                                               May 27, 1987







                              TABLE OF CONTENTS

  Section                                                              Page



  1.   Product Overview                                                   2
    1.1   Operational Overview                                            3
    1.2   Application of Support                                          4
       1.2.1    37X5 to 8100 SDLC host                                    6
       1.2.2    Remote 3274/E2100 to 8100 connection                      7
       1.2.3    Split Multipoint Links                                    8
       1.2.4    Software Requirements                                     9
       1.2.5    Hardware Requirements                                     9

    1.3   Constraints                                                    12


  2.   Technical Description                                             13
    2.1   Physical Interface                                             15
       2.1.1    Modem Connection                                         18
       2.1.2    Direct Connection                                        19

    2.2   Data Link Configurations                                       20
    2.3   Link Level Protocol                                            20
    2.4   Local Procedures                                               23
       2.4.1    RR - Receive Ready                                       23
       2.4.2    RNR - Receive Not Ready                                  23
       2.4.3    REJ - Reject                                             24
       2.4.4    FRMR - Frame Reject                                      24
       2.4.5    Nr and Ns - Frame Receive and Send Sequence number       25
       2.4.6    Poll/Final Bit                                           25

    2.5   End to End Procedures                                          26
       2.5.1    SNRM                                                     30
       2.5.2    DM                                                       33
       2.5.3    DISC                                                     34
       2.5.4    UA                                                       35
       2.5.5    FRMR                                                     37
       2.5.6    RD                                                       39
       2.5.7    XID                                                      40
       2.5.8    TEST                                                     43
       2.5.9    I-Frame                                                  45

    2.6   Inter-Slot Format and Protocol                                 46
       2.6.1    TYMNET Intra-ISIS Messages                               47
          2.6.1.1     Restart-request (00)                               47
          2.6.1.2     Restart-response (01)                              47

                     SDLC/QLLC External Reference Manual         QLCERS.DOC




                                                               May 27, 1987


          2.6.1.3     Take Over (02)                                     47
          2.6.1.4     Report to Supervisor's Log (03)                    48
          2.6.1.5     Report Host Status (04)                            49
          2.6.1.6     Report Accounting (05)                             49
          2.6.1.7     Tell Host Time (06)                                50
          2.6.1.8     Pseudo-needle Request (07)                         50
          2.6.1.9     Auxiliary Circuit Request (08)                     50
          2.6.1.10    Pseudo-needle Reject (09)                          50
          2.6.1.11    Report Host Port Availability (0A)                 50
          2.6.1.12    Host Unacceptable (0B)                             51
          2.6.1.13    Report Host Cost (0C)                              51
          2.6.1.14    No Supervisor (0D)                                 51
          2.6.1.15    1-Down (0E)                                        51
          2.6.1.16    Report All Hosts (0F)                              51
          2.6.1.17    Extended Report Host Status (10)                   51

       2.6.2    TYMNET ISIS Control and Data Messages                    52
       2.6.3    TYMNET IIX Protocol                                      54
       2.6.4    GLOBAL IIX Messages                                      55
          2.6.4.1     Select Dialect Command (8080)                      55
          2.6.4.2     Select Dialect Response (8081)                     55
          2.6.4.3     Gateway Reached Smart Host (8082)                  55
          2.6.4.4     Gateway Reached Dumb Host (8083)                   55
          2.6.4.5     Normal Logon Status (8084)                         56
          2.6.4.6     Resynchronize Interface Exchange (8085)            56
          2.6.4.7     Product ID and Version (8086)                      56
          2.6.4.8     Request Product ID and Version (8087)              56

    2.7   Virtual Call Procedures                                        57
       2.7.1    Outgoing Permanent Virtual Circuit                       57
       2.7.2    Outgoing Switched Virtual Call                           58
       2.7.3    Incoming Permanent Virtual Call                          58
       2.7.4    Incoming Switched Virtual Call                           59

    2.8   SDLC IIX Dialect Handshaking                                   60
       2.8.1    Select Dialect Command Message                           61
       2.8.2    Select Dialect Response Message                          61
       2.8.3    Turkey Level Message                                     61

    2.9   Circuit Building Procedures                                    62
    2.10  SDLC PVC Building Procedure                                    63
       2.10.1   PVC Request Message                                      63
       2.10.2   PVC Response Message                                     64

    2.11  SDLC SVC Building Procedure                                    65
       2.11.1   SVC Address Mapping                                      66
       2.11.2   Facilities                                               68
          2.11.2.1    Reverse Charge                                     69
          2.11.2.2    Throughput Class Negotiation                       71
          2.11.2.3    Closed User Group                                  73

       2.11.3   SVC Message Formats                                      76
          2.11.3.1    Called Address Message                             76

                     SDLC/QLLC External Reference Manual         QLCERS.DOC




                                                               May 27, 1987


          2.11.3.2    Calling Address Message                            77
          2.11.3.3    Facility                                           78
          2.11.3.4    Reverse Charge Facilty Parameter Field             79
          2.11.3.5    Throughput Class Negotiation Facility Parameter    80
          2.11.3.6    Utilities Message                                  81
          2.11.3.7    Call User Data Message                             82
          2.11.3.8    Call Accept Message                                83

    2.12  Data Transfer Procedures                                       84
       2.12.1   QLLC Data Messages and Processing                        84
          2.12.1.1    Data Message Format                                85
          2.12.1.2    Data Qualified Message Format                      86

       2.12.2   QLLC Data Message Processing                             88
       2.12.3   XID Procedures                                           89
       2.12.4   Information Frames                                       89
       2.12.5   Flow Control                                             89

    2.13  Restart Procedure                                              90
       2.13.1   Reset Messages and Procedures                            90
          2.13.1.1    Reset Cause/ Diagnostic Message Format             91
          2.13.1.2    Reset Confirmation Message Format                  92
          2.13.1.3    Reset Procedures                                   92

       2.13.2   Clear Procedures and Messages                            95
          2.13.2.1    Clear Cause/ Diagnostic Message Format             95
          2.13.2.2    Clearing Procedure                                 98

    2.14  Error Recovery                                                100
       2.14.1   Local Error Recovery                                    100
          2.14.1.1    Primary Ports                                     100
          2.14.1.2    Secondary Ports                                   102

       2.14.2   End-to-End Error Recovery                               103


  3.   Operations Support                                               104
    3.1   Operating Characteristics                                     104
    3.2   Operating Scenarios                                           106
       3.2.1    Initialization and PVC Building                         106
          3.2.1.1     Initialize Physical Lines                         107
          3.2.1.2     Circuit Building                                  108
          3.2.1.3     PVC IIX Dialect Handshaking                       109

       3.2.2    Initialization and SVC Building                         110
          3.2.2.1     Initialize Physical Lines                         111
          3.2.2.2     SVC IIX Dialect Handshaking                       113

       3.2.3    Normal Disconnect Mode to Normal Response Mode          114
       3.2.4    Normal Response Mode (NRM)                              115
       3.2.5    Normal Response Mode to Normal Disconnect Mode-NDM      116

    3.3   Host Status Report                                            117

                     SDLC/QLLC External Reference Manual         QLCERS.DOC




                                                               May 27, 1987


    3.4   Monitoring and Control                                        118
       3.4.1    Logging into the System Monitor                         118
       3.4.2    DISPLAY Commands                                        119
          3.4.2.1     DISPLAY HOST                                      120
          3.4.2.2     DISPLAY CONFIG                                    120
          3.4.2.3     DISPLAY STAT Command                              121
          3.4.2.4     DISPLAY LOGON Command                             123
          3.4.2.5     DISPLAY EIA Command or DISPLAY RSC Command        124
          3.4.2.6     DISPLAY FACILITY                                  124
          3.4.2.7     DISPLAY CALLED ADDRESS                            125
          3.4.2.8     DISPLAY CUG                                       125
          3.4.2.9     DISPLAY PARAMETER Command                         126
          3.4.2.10    DISPLAY PVC COMMAND                               126

       3.4.3    SHUT Command                                            127
       3.4.4    RSHUT Command                                           127
       3.4.5    CHANGE Commands                                         128
          3.4.5.1     CHANGE LOGON Command                              128
          3.4.5.2     CHANGE STATION POLLING ADDRESS Command            128
          3.4.5.3     CHANGE STATION CALLED ADDRESS Command             129
          3.4.5.4     CHANGE LOGON DESTINATION STATION ADDR Command     129
          3.4.5.5     CHANGE LOGON DESTINATION LINE Command             130
          3.4.5.6     CHANGE LOGON DESTINATION HOST Command             130
          3.4.5.7     CHANGE LOGON DESTINATION CHANNEL Command          131
          3.4.5.8     CHANGE XMT TPUT Command                           131
          3.4.5.9     CHANGE RCV TPUT CLASS Command                     131
          3.4.5.10    CHANGE WINDOW Command                             132
          3.4.5.11    CHANGE MAXFRAME Command                           132
          3.4.5.12    CHANGE RVCHARGE Command                           133
          3.4.5.13    CHANGE THROUGHPUT CLASS NEGOTIATION Command       133
          3.4.5.14    CHANGE CUG SUBSCRIPTION Command                   133
          3.4.5.15    CHANGE CUGGROUP Command                           134

       3.4.6    EXIT Command                                            134
       3.4.7    REFRESH Command                                         135
       3.4.8    LOGTABLE Command                                        135
       3.4.9    WHO Command                                             135

    3.5   Extended DDT Commands                                         136
       3.5.1    Logging into Extended DDT                               136
       3.5.2    Extended DDT Display Ring Commands                      136
       3.5.3    Extended DDT Symbol Address Display                     137
       3.5.4    Extended DDT Real Time SDLC Line Display                137
       3.5.5    Extended DDT Menu Display                               138
       3.5.6    Terminate Extended DDT Mode                             138


                                INDEX
                                =====                                   141





                     SDLC/QLLC External Reference Manual         QLCERS.DOC




                                                               May 27, 1987





                               LIST OF TABLES
                               ==============


  Table                                                                Page


  1.     QLLC Control Field and SDLC Command /Response Mapping           87

  2.     Reset Cause Codes                                               91

  3.     Local procedure error's diagnostic code                         92

  4.     Clearing Cause Codes                                            96

  5.     SDLC generated diagnostic code                                  96



































                     SDLC/QLLC External Reference Manual         QLCERS.DOC




                                                               May 27, 1987





                               LIST OF FIGURES
                               ===============


  Figure                                                               Page


  1.     Interconnection of SDLC hosts and terminals through TYMNET       5

  2.     37X5 to 8100 host                                                6

  3.     8100 to 3274/E2100 connection                                    7

  4.     Combining remote secondary QLLC DTE's onto a multipoint link     8

  5.     Combining remote primary QLLC DTE's onto a multipoint link       9

  6.     SDLC interface conceptual layout                                14

































                     SDLC/QLLC External Reference Manual         QLCERS.DOC




                                                               May 27, 1987


                                   PREFACE



  This    document   describes    the   technical    aspects,   operational
  characteristics,  and  application  of Tymnet's  SDLC  interface.   It is
  assumed  that the  reader of  this document  is familiar  with  the basic
  concepts of  Synchronous Data Link  Control (SDLC),  CCITT recommendation
  X.25,   and  IBM   Qualified  Logical   Link  Control   (QLLC)  protocol.
  Documentation  on these  protocols  which can  provide  useful background
  information includes:

       [1] CCITT Recommendation X.25 (Geneva, November 1980)

       [2] IBM Synchronous Data Link Control General Information
           IBM, GA27-3093

       [3] The X.25 Interface For Attaching SNA Nodes to
           Packet-Switched Networks General Information Manual
           IBM, GA27-3345

       [4] ECMA Standard ECMA-71 HDLC Selected Procedures,
           January, 1981

       [5] TYMNET Circuit Protocol Reference Manual, August 25, 1983

       [6] TYMNET SDLC Interface System Generation Reference Manual,
           Version 2.02, October, 1986


























  1                  SDLC/QLLC External Reference Manual         QLCERS.DOC




  Product Overview                                             May 27, 1987






  1 - Product Overview




  The basic function of TYMNET SDLC interfas either to  provide access
  between  SDLC protocol  terminals  and hosts  or  to allow  IBM  hosts to
  communicate  through  Tymnet  with remote  X.25  Data  Terminal Equipment
  capable  of supporting  Qualified Logical  Link Control  (QLLC) protocol,
  utilizing  the package-switching  data transmission  services  of TYMNET,
  such as:

    o IBM 37X5 with NCP Packet Switching Interface (NPSI)
    o IBM 3274 with X.25 microcode
    o other X.25 and QLLC compatible DTEs


  Tymnet's  SDLC interface  will be  implemented as  an enhancement  to the
  existing SDLC native mode interface.  Both interfaces run  under Tymnet's
  ISIS network operating system on the Tymnet Engine or Mini-Engine.


  Both  Normal Response  Mode (NRM)  and Normal  Disconnect Mode  (NDM) are
  supported.


  No  hardware  or  software  changes are  normally  required  at  the host
  computer.  Nonswitched, half  duplex, point-to-point or  multipoint links
  to  hosts  are supported.   A  secondary  port will  appear  to  the host
  computer as a single secondary  station on a point-to-point link or  as a
  number of secondary stations on a multipoint link.


  No  hardware or  software changes  are required  at the  remote terminal.
  Nonswitched, half duplex, point-to-point or multipoint links to terminals
  are supported.   A primary port  will appear to  attached terminals  on a
  point-to-point or multipoint link as a primary station.


  The TYMNET SDLC interface supports  Physical Unit types 1, 2, and  4, and
  is transparent to all Logical Unit types.


  TYMNET SDLC terminal  and host interfaces can  be used to  replace leased
  lines between hosts using SDLC protocol and SDLC terminals.





  2                  SDLC/QLLC External Reference Manual         QLCERS.DOC




  Product Overview                                             May 27, 1987


     1.1  Operational Overview




  The basic function of Tymnet's SDLC interface is either to provide access
  between SDLC protocol terminals and  hosts or to allow X.25 QLLC  DTEs to
  communicate with  IBM hosts,  without changes  to either  the DTE  or the
  host.  In order to accomplish this function, the interface must:

    o connect directly to the IBM host via one or more
      links.

    o provide access between SDLC protocol terminals and
      hosts with either a switched or permanent virtual
      circuit.

    o connect each SDLC station on the link to a remote
      X.25 QLLC DTE with either a switched or permanent
      virtual circuit.

    o act as the primary station when the IBM 8100 host
      acts as one or more secondary stations on a link

    o act as one or more secondary stations when the
      IBM host acts as the primary station on a link

    o translate certain SDLC frames into X.25 QLLC packets
      for transmission across the PSN.

    o translate certain X.25 QLLC packets received from the
      PSN into SDLC frames.






















  3                  SDLC/QLLC External Reference Manual         QLCERS.DOC




  Product Overview                                             May 27, 1987


     1.2  Application of Support




  TYMNET SDLC terminal  and host interfaces can  be used to  replace leased
  lines  between  hosts  using  SDLC  protocol  and  SDLC  terminals.   The
  following  diagram  illustrates  the interconnection  of  SDLC  hosts and
  terminals using TYMNET.













































  4                  SDLC/QLLC External Reference Manual         QLCERS.DOC




  Product Overview                                             May 27, 1987


              ----------              ----------
              |        |              |        |
              |  IBM   |              |  IBM   |
              |   370  |              |   370  |
              |        |              |        |
              ----------              ----------
                   |                       |
                   |                       |
               --------                --------
               |      |                |      |
               | 370X |                | 370X |
               |      |    +++++++     |      |
               --------   +       +    --------       --------
                  |      +         +       /          | 3276 |
   --------       |     +           +     /           --------
   |      |       ++++++             +++++++         /
   | 3274 |-------+                         +       / --------
   |      |        +                         +--------| 3276 |
   --------         +                        +        --------
                     +                       +
           --------   +      TYMNET          +        --------
           |      |   +                     +---------| 3276 |
           | 8100 |---+                  +++          --------
           |      |   +                 +
           --------   +                +     --------
                      +                +-----| 3275 |
                       +              +      --------
                      / +        +++++
   --------          /   +      +     |
   | 3651 |         /     ++++++      |
   | LOOP |---------        |         --------
   | CTLR |                 |         | 3271 |
   --------                 |         --------
   |      |              --------
  *        *             |      |
  |  CRTs  |             | 3777 |
  *        *             |      |
   |      |              --------
    *----*




    Figure 1 - Interconnection of SDLC hosts and terminals through TYMNET










  5                  SDLC/QLLC External Reference Manual         QLCERS.DOC




  Product Overview                                             May 27, 1987


        1.2.1  37X5 to 8100 SDLC host



  Figure 2  illustrates the  application of the  SDLC interface  to support
  communications  between an  8100 host  and a  remote  37X5 communications
  controller.


   ---------                      ---------
  | Primary |                    |         |            -----------
  | Logical |<-- logical link -->| Primary |<- SDLC -> | Secondary |
  |  Link   |                    |  Port   |   LINK    |  Station  |
  | Station |                    |         |            -----------
  |---------|      --------      |---------|
  | Packet  |<--->| Packet |<--->| Packet  |                8100
  | Layer   |  ^  | Layer  |  ^  | Layer   |                Host
   ---------   |   --------   |   ---------
               virtual circuit

    37X5         Tymnet X.25       SDLC
                  Interface        Interface



                        Figure 2 - 37X5 to 8100 host




























  6                  SDLC/QLLC External Reference Manual         QLCERS.DOC




  Product Overview                                             May 27, 1987


        1.2.2  Remote 3274/E2100 to 8100 connection



  Figure 3  illustrates the  application of the  SDLC interface  to support
  communications between an 8100 host and a remote 3274 or E2100  X.25 QLLC
  DTE.


                          -----------                      -----------
     ---------           |           |                    | Secondary |
    | Primary |<- SDLC ->| Secondary |<-- logical link -->|  Logical  |
    | Station |   LINK   |   Port    |                    |   Link    |
     ---------           |           |                    |  Station  |
                         |-----------|      --------      |-----------|
                         |  Packet   |<--->| Packet |<--->|   Packet  |
       8100              |  Layer    |  ^  | Layer  |  ^  |   Layer   |
       Host               -----------   |   --------   |   -----------
                                        virtual circuit

                           SDLC             Tymnet X.25       3274 or
                           Interface        Interface        E2100




                  Figure 3 - 8100 to 3274/E2100 connection



























  7                  SDLC/QLLC External Reference Manual         QLCERS.DOC




  Product Overview                                             May 27, 1987


        1.2.3  Split Multipoint Links



  Figure 4 illustrates the ability of the SDLC interface to  combine remote
  secondary QLLC DTE's onto a single multipoint link to the IBM  8100 host.
  Each station requires a  separate virtual circuit.  Note that  the remote
  DTE's  could  also  be  attached to  the  same  X.25  interface  by using
  different logical channels on the X.25 link.


   ---------       -----------               --------        -----------
  | Primary |<--->| Secondary |<----------->|  X.25  |<---->| Secondary |
  | Station |  ^  |   Port    |<-----|      |        |      | QLLC DTE  |
   ---------   |   -----------    ^  |       --------        -----------
               |                  |  |       --------        -----------
       multipoint link            |  |----->|  X.25  |<---->| Secondary |
        two stations              |         |        |      | QLLC DTE  |
                                 virtual     --------        -----------
                                 circuits

    8100           SDLC                      Tymnet X.25        3274
    host           Interface                 Interface



   Figure 4 - Combining remote secondary QLLC DTE's onto a multipoint link



























  8                  SDLC/QLLC External Reference Manual         QLCERS.DOC




  Product Overview                                             May 27, 1987


  Figure 5 illustrates the combination of remote primary QLLC DTE's  onto a
  multipoint link.   As in  the previous example,  each station  requires a
  separate virtual circuit.


   -----------       ---------               --------        -----------
  | Secondary |<--->| Primary |<----------->|  X.25  |<---->|  Primary  |
  | Stations  |  ^  |  Port   |<-----|      |        |      | QLLC DTE  |
   -----------   |   ---------    ^  |       --------        -----------
                 |                |  |       --------        -----------
       multipoint link            |  |----->|  X.25  |<---->|  Primary  |
        two stations              |         |        |      | QLLC DTE  |
                                 virtual     --------        -----------
                                 circuits

    8100           SDLC                      Tymnet X.25        37X5
    host           Interface                 Interface



    Figure 5 - Combining remote primary QLLC DTE's onto a multipoint link







        1.2.4  Software Requirements


  The SDLC interface runs under ISIS and is compatible with either TYMNET-I
  or TYMNET-II network nodes.


  Configuring an interface requires proper configuration of  ISIS regarding
  memory size and allocation of physical IO devices.






        1.2.5  Hardware Requirements


  SIO


  The SDLC interface runs in a standard TYMNET ENGINE with at least one SIO
  mother board and one daughter board (either RS-232-C/V.24 or V.35).  Each
  daughter board provides two physical ports.  The formula  for determining
  the number of daughterboards required is:

  9                  SDLC/QLLC External Reference Manual         QLCERS.DOC




  Product Overview                                             May 27, 1987


       ( Number of ports + 1) / 2


  The formula for determining the number of motherboards required for ports
  with line speeds up to 9.6 kb is:

       ( Number of ports + 15) / 16


  Any fractions resulting  from the divisions  are discarded and  the whole
  number result is used.


  In order  to handle frame  sizes greater than  4K, the mother  board must
  contain micro code  version E or  later. To use  this new code  for frame
  sizes greater than 4K, the slot must use the proper macro values.



  Memory Size


  The memory  size for  a particular  SDLC interface  is composed  of three
  elements:  basic memory  size,  SIO buffer  size, and  size  of Bufferlet
  storage.  The basic memory required for the interface is:

      o  82k bytes if Secondary SDLC Ports only
      o  82k bytes if Primary SDLC Ports only
      o  85k bytes if mixed Primary and Secondary ports
      o  5k bytes for each line
      o  5k bytes for each control unit


  In addition to  the basic memory, additional  memory is required  for SIO
  buffers for each  Port.  The formula  for calculating SIO  buffer storage
  size for each Port is:

       (MFMSZn * 16) + 1k

  Where 
       MFMSZn = maximum frame size for Port n.

  Buffer  space is  also required  for bufferlets  and command  lists.  The
  formula  for  calculating  each  Port's  bufferlet  for  either  transmit
  bufferlet quotas or receive bufferlet quotas allocation is:

       BBQAn = ((MFMSZn + (BBFLSZ-1)) / BBFLSZ ) * FRMQA

               Resulting fractions are discarded. And
               BBQAn  = number of bufferlets allocated for Port n
               BBFLSZ = bufferlet size
               MFMSZn = maximum frame size for Port n
               FRMQA  = frame quota allowed.

  10                 SDLC/QLLC External Reference Manual         QLCERS.DOC




  Product Overview                                             May 27, 1987


  Additional bufferlets  are required  for the  System monitor.   The total
  number  of bufferlets  required  in an  SDLC  interface is  given  by the
  formula:

       NBBFLT = (2 * (sum of (BBQAn * NMSTNn))) + (MONPRT * MONBQA)

       Where
                BBFLT  = total number of bufferlets allocated
                BBQAn  = bufferlets allocated for Port n
                NMSTNn = maximum number of stations on port n
                MONBQA = bufferlet quota for the System monitor
                MONPRT = number of System monitor ports


  The sum of each Port's allocation must be added together.



  The final formula for bufferlet size calculation is:

       (NBBFLT * BBFLSZ) + (NBBFLT * CMDSIZ)

       Where
                NBBFLT = total number of bufferlets allocated
                BBFLSZ = bufferlet size
                CMDSIZ = size of the command links
                         If (NBBFLT * BBFLSZ) < 64k then CMDSIZ = 6,
                         otherwise CMDSIZ = 8.



  Default values for various parameters are:

                  o  BBFLSZ = 140
                  o  FRMQA  = 10
                  o  MONPRT = 1
                  o  MONBQA = 10
                  o  MFMSZn = 270
















  11                 SDLC/QLLC External Reference Manual         QLCERS.DOC




  Product Overview                                             May 27, 1987


     1.3  Constraints




     o   SDLC  command/response frames  not handled  by the  SDLC interface
         include:

         UI   - unnumbered information
         UP   - unnumbered poll
         CFGR - configure
         BCN  - beacon
         SIM  - set initialization mode
         RIM  - request initialization mode

     o   Direct  channel  attachment  (local  3270  or  3770  mode)  is not
         supported.

     o   Connection to a loop data link is not supported.

     o   Only Normal Response Mode  (NRM) and Normal Disconnect  Mode (NDM)
         are supported.

     o   NRZI  (Non-Return to  Zero  Inverted) transmission  coding  is not
         supported.

     o   A maximum of 16 primary  or secondary ports can be supported  by a
         single SDLC interface.

     o   A maximum of 32 stations  can be supported on a single  primary or
         secondary port.

     o   Multi link transmission groups are not supported.

     o   ASCII code set is not supported.

     o   Full duplex data mode is not supported.

















  12                 SDLC/QLLC External Reference Manual         QLCERS.DOC




  Technical Description                                        May 27, 1987






  2 - Technical Description




  This section details technical aspects of the SDLC interface, including a
  conceptual    overview,    physical    interface    capabilities,    link
  configurations, and local, virtual call, and error recovery procedures.



  Figure  6   provides  a  conceptual   overview  of  the   SDLC  interface
  architecture.


  The physical  IO interface  corresponds to the  ISIS SIO  channel command
  interface.  It is used to transfer frames and control signals between the
  SDLC interface and the access link.


  The foreground link control modules are responsible for managing the link
  protocol on the attached link.  Tymfile configuration macros define which
  of the four  link control modules is  assigned to a given  link.  Primary
  control modules act as the primary station on a link.   Secondary control
  modules act as one or more secondary stations on a link.


  The link control  modules are managed  by the background  station control
  modules via  internal background/foreground  queues and  control signals.
  The station control modules are responsible for QLLC packet  assembly and
  dis-assembly  and the  management of  virtual circuits.   Station control
  modules interface with network IO via the ISIS dispatcher ring interface.


  The  operations  monitor  is responsible  for  collecting  and displaying
  statistics  and configuration  data.  Facilities  are provided  to change
  some configuration data and control the state of a link.


  The  extended  DDT  process,  not  shown,  provides  customized debugging
  facilities for the SDLC interface.  It is accessed via the  node's kernel
  host.








  13                 SDLC/QLLC External Reference Manual         QLCERS.DOC




  Technical Description                                        May 27, 1987


               ---      -----------      ----------------      ---
              |   |    |  Primary  |    |                |    |   |
              |   |<-->|  Station  |<-->|                |    |   |
              |   |    |  Control  |    |                |    |   |
              |   |     -----------     |    Primary     |    |   |
              |   |         ...         |   Multipoint   |<-->|   |
              | N |     -----------     |  Link Control  |    | P |
              | e |    |  Primary  |    |                |    | h |
              | t |<-->|  Station  |<-->|                |    | y |
              | w |    |  Control  |    |                |    | s |
              | o |     -----------      ----------------     | i |
              | r |     -----------      ----------------     | c |
              | k |    | Secondary |    |                |    | a |
              |   |<-->|  Station  |<-->|                |    | l |
              | I |    |  Control  |    |                |    |   |
              | O |     -----------     |   Secondary    |    | I |
   VIRTUAL    |   |         ...         |   Multipoint   |<-->| O |<-*
  CIRCUITS <->|   |     -----------     |  Link Control  |    |   |  |
              |   |    | Secondary |    |                |    |   |ACCESS
              |   |<-->|  Station  |<-->|                |    |   | LINKS
              |   |    |  Control  |    |                |    |   |
              |   |     -----------      ----------------     |   |
              |   |                                           |   |
              |   |     -----------      ----------------     |   |
              |   |    |  Primary  |    |    Primary     |    |   |
              |   |<-->|  Station  |<-->| Point-to-point |<-->|   |
              |   |    |  Control  |    |  Link Control  |    |   |
              |   |     -----------      ----------------     |   |
              |   |     -----------      ----------------     |   |
              |   |    | Secondary |    |  Secondary     |    |   |
              |   |<-->|  Station  |<-->| Point-to-point |<-->|   |
              |   |    |  Control  |    |  Link Control  |    |   |
              |   |     -----------      ----------------      ---
              |   |     ------------
              |   |    | Operations |
              |   |<-->|  Monitor   |
               ---      ------------


                |---- background ----|----  foreground ---------|




                 Figure 6 - SDLC interface conceptual layout









  14                 SDLC/QLLC External Reference Manual         QLCERS.DOC




  Technical Description                                        May 27, 1987


     2.1  Physical Interface




  Connection to a SDLC port (on either a primary or secondary interface) is
  accommodated on the SIO daughter board via a female 25-pin "D" connector,
  Each  port can  be  ordered as  either RS-232-C/V.24  compatible  or V.35
  compatible.  The  SIO daughter board  provides two  ports.  RS-232-C/V.24
  and V.35 ports cannot be mixed on the same daughterboard.


  A. RS-232-C/V.24 Port

  o  An RS-232-C/V.24 port outputs the following signals:

         PIN     CCITT   EIA     FUNCTION

         2        103    BA      TRANSMITTED DATA
         4        105    CA      REQUEST TO SEND
         15       114    DB      TRANSMITTER CLOCK (SEE NOTE)
         17       115    DD      RECEIVER CLOCK    (SEE NOTE)
         20       108    CD      DATA TERMINAL READY


  NOTE - the SDLC port can provide 8000 Hz transmit and receive  clocks via
  a switch on the interface board.

  o  An RS-232-C/V.24 port inputs the following signals:

         PIN     CCITT   EIA     FUNCTION

         3        104    BB      RECEIVED DATA
         5        106    CB      CLEAR TO SEND
         6        107    CC      DATA SET READY
         15       114    DB      TRANSMITTER CLOCK
         17       115    DD      RECEIVER CLOCK


  B. V.35 Port

  o  A V.35 port outputs the following signals:

         PINS    CCITT   FUNCTION

          4       105    REQUEST TO SEND
          20      108    DATA TERMINAL READY
         11,12    103    TRANSMITTED DATA

  o  A V.35 port inputs the following signals:

         PINS    CCITT   FUNCTION


  15                 SDLC/QLLC External Reference Manual         QLCERS.DOC




  Technical Description                                        May 27, 1987


          5       106    CLEAR TO SEND
          6       107    DATA SET READY
         9,10     114    TRANSMITTER CLOCK
         21,22    104    RECEIVE DATA
         23,24    115    RECEIVER CLOCK

















































  16                 SDLC/QLLC External Reference Manual         QLCERS.DOC




  Technical Description                                        May 27, 1987







        2.1.1  Modem Connection



  The  circuit  connections  and  external  hardware  needed  to  connect a
  secondary port  to a host  or a  primary port to  a terminal(s)  is given
  below.




           --------        --------        --------        --------
           |      |        |      |        |      |        |      |
           | E    | 7    7 |    M |        | M    | 7    7 |    H |
           | N  SG|--------|SG  O |        | O  SG|--------|SG  O |
           | G    | 2    2 |    D |        | D    | 3    3 |    S |
           | I TXD|------->|TXD E |========| E RXD|------->|RXD T |
           | N    | 3    3 |    M |        | M    | 2    2 |      |
           | E RXD|<-------|RXD   |========|   TXD|<-------|TXD O |
           |      | 4    4 |    O |        | O    | 4    4 |    R |
           |   RTS|------->|RTS R |        | R RTS|<-------|RTS   |
           |      | 5    5 |      |        |      | 5    5 |    T |
           |   CTS|<-------|CTS L |        | L CTS|------->|CTS E |
           |      | 20  20 |    D |        | D    | 20  20 |    R |
           |   DTR|------->|DTR M |        | M DTR|<-------|DTR M |
           |      | 6    6 |      |        |      | 6    6 |    I |
           |   DSR|<-------|DSR   |        |   DSR|------->|DSR N |
           |      | 15  15 |      |        |      | 15  15 |    A |
           |   TXC|<-------|TXC   |        |   TXC|------->|TXC L |
           |      | 17  17 |      |        |      | 17  17 |      |
           |   RXC|<-------|RXC   |        |   RXC|------->|RXC   |
           |      |        |      |        |      |        |      |
           --------        --------        --------        --------
















  18                 SDLC/QLLC External Reference Manual         QLCERS.DOC




  Technical Description                                        May 27, 1987







        2.1.2  Direct Connection



  The  circuit  connections  required for  a  direct  connection  between a
  secondary port  and a  host or  a primary  port and  a terminal  for full
  duplex point-to-point applications are given below.




           --------        --------
           |      |        |      |
           | E    | 7    7 |    H |
           | N  SG|--------|SG  O | 
           | G    | 2    3 |    S |
           | I TXD|------->|RXD T |
           | N    | 3    2 |      |
           | E RXD|<-------|TXD O |
           |      | 4    4 |    R |
           |   RTS|---  ---|RTS   |
           |      | 5|  |5 |    T |
           |   CTS|<--  -->|CTS E |
           |      | 20   6 |    R |
           |   DTR|------->|DSR M |
           |      | 6   20 |    I |
           |   DSR|<-------|DTR N |
           |      | 15  15 |    A |
           |   INT|------->|TXC L |
           |      | 17  17 |      |
           |   INT|------->|RXC   |
           |      |        |      |
           --------        --------







  Note  that the  TYMNET engine  can  supply TXC  and RXC  clocks  from its
  internal 8000 Hz clock.







  19                 SDLC/QLLC External Reference Manual         QLCERS.DOC




  Technical Description                                        May 27, 1987


     2.2  Data Link Configurations




  External terminals and hosts are always referred to as "stations" while a
  TYMNET SDLC interface is always  referred to as a "port".   The secondary
  port will be refered to as the Host Interface (HIF), and the primary port
  will  be refered  to as  the Terminal  Interface (TIF)  in  the following
  chapters.  As an example, a  TYMNET primary port can send  command frames
  to a (external) secondary station.


  Primary and  secondary ports  on the TYMNET  SDLC interface  support both
  point-to-point   and   multipoint   configurations.    Only  non-switched
  connections are supported.


  Only  operation  on  half  duplex links  is  supported.   In  half duplex
  operation   RTS  is   raised  before   transmission  and   lowered  after
  transmission by the port.


  To summarize, there are  two basic data link configurations  supported by
  the TYMNET SDLC interface:


     o   half duplex, point-to-point, nonswitched

     o   half duplex, multipoint, nonswitched



  Note that  these configurations reflect  only the physical  capability of
  the link.  Protocol capability is discussed in section  Local Procedures.







     2.3  Link Level Protocol




  The  link  level  protocol  specifies  the  formatting  of  data  and the
  procedures for reliable transmission between a primary or  secondary port
  and the external systems.   The particular formats for  SDLC transmission
  blocks and a brief description of each field are as follows:



  20                 SDLC/QLLC External Reference Manual         QLCERS.DOC




  Technical Description                                        May 27, 1987


    --------------------------------------------------------
    |   F    |   A    |   C    |   I      |   FCS    |  F  |
    --------------------------------------------------------


  F -- Flag  Field.  SDLC uses  the bit sequence 7E  hex for the  start and
  termination of each variable length frame.


  A -- Address Field. The  SDLC address field is one byte  long, permitting
  up to 256 stations on a given link.  The station address  always pertains
  to a secondary station on a particular link.


  C  --  Control Field.   The  control  field specifies  the  purpose  of a
  particular frame.   It permits  a single   information transfer  to serve
  multiple control  functions.  The control  field can be  in one  of three
  formats:


     1.  Information  transfer  format (I),  having  full  sequence control
         (with a send sequence count, and a receive sequence count).

     2.  Supervisory format (S), having a receive sequence count but  not a
         send  sequence  count,  and  used to  manage  the  link  in normal
         operation.

     3.  Unnumbered format (U), having no sequence counts at all,  and used
         primarily for setting operation modes,  exchanging identification,
         and other miscellaneous operations.


  Command frames supported  include I, RR, RNR,  REJ, TEST, XID,  SNRM, and
  DISC.  Response frames supported include I, RR, RNR, REJ, TEST,  XID, UA,
  DM, FRMR, and RD.  In all three formats, one bit is used as  a poll/final
  bit.   In normal  response mode,  the  poll bit  is used  by  the primary
  station to  authorize the addressed  secondary station to  begin sending.
  The final bit is used by  a secondary station to indicate the  last frame
  of a transmission.


  In the SDLC discipline, an acknowledgment is required at least once every
  seven requests.  When one station sends its receive sequence count to the
  other station it will serve  to indicate the next frame that  is expected
  and to acknowledge all the  frames received up to the value  indicated by
  the receive  sequence count.  Window  sizes supported range  from 1  to 7
  frames.


     I --Information Field.  Following the control field, there may  or may
         not be  an information  field.  The  contents of  the I  field are
         transparent to the components of data link control.  Data  must be


  21                 SDLC/QLLC External Reference Manual         QLCERS.DOC




  Technical Description                                        May 27, 1987


         in 8-bit  EBCDIC character code  transmitted low order  bit first.
         The information  frame size which  includes the address  field and
         the  control field  can  be from  3  to 2048  bytes.  However, the
         maximum supported frame  size for a  particular link must  be pre-
         specified.

     FCS--Frame Check  Sequence Field.   The FCS  field contains  16 binary
         digits to validate transmission accuracy.  In the SDLC application
         of  CRC,  a  modified  polynomial  expression  (modulo  2)  of the
         transmission  to   be  checked  is   divided  by   the  generating
         polynomial,  X16  + X12  +  X5  + X1.   The  transmitter  send the
         complement of the resulting remainder value as the FCS field.










































  22                 SDLC/QLLC External Reference Manual         QLCERS.DOC




  Technical Description                                        May 27, 1987


     2.4  Local Procedures



  Since QLLC Data messages exchanged on the network, do not contain an SDLC
  Address  byte,  or  Nr,  Ns  and  P/F  bits  in  the  control  byte, this
  information is  supplied locally by the SDLC interface to  the SDLC link.


  SDLC RR, RNR and REJ frames are also handled locally. Some FRMR responses
  may need to be handled locally instead of sending them on to the X.25 SNA
  station.





        2.4.1  RR - Receive Ready


  This frame is handled  the same for both the primary and secondary ports.
  When an RR frame is received by the primary or secondary port  this is an
  indication that  the sending  station is  able to  receive from  the SDLC
  port. This frame can also acknowledge previously received frames.


  This frame is sent by the SDLC port when the SDLC port is able to receive
  from  the station.  The port  uses this  frame to  acknowledge previously
  received frames from the station.


  The SDLC port will also send an RR frame aknowledging previously received
  frames, if the port has timedout waiting for an expected Final bit set.


  The SDLC port will also send an RR frame when all the I-frames  queued in
  the SIO transmit rotor list are sent to the external stations.





        2.4.2  RNR - Receive Not Ready


  This frame is handled the same for both the primary and  secondary ports.
  When an  RNR frame  is received this  is an  indication that  the sending
  station is unable to receive any more information frames. This frame also
  acknowledges  previously  received information  frames.  After receiveing
  this frame, the SDLC port will not send any more Information frames until
  an RR is received.



  23                 SDLC/QLLC External Reference Manual         QLCERS.DOC




  Technical Description                                        May 27, 1987


  This frame is sent by the  SDLC port when the port's buffers  are filled.
  This will inhibit the station from sending until the port sends an RR.





        2.4.3  REJ - Reject


  If this  frame is received  by a secondary  port, a DISC  is sent  to the
  primary port, and a DM is sent to the primary station. The HIF is  now in
  NDM. The reason for this is because the HIF has no way to  recover, since
  the  frame  being  rejected  by  the  primary  station  has  already been
  acknowledged at the TIF.


  If this frame is received by a primary port from a secondary station, the
  frame is discarded and ignored.


  The REJ frame is never sent by the HIF or the TIF.





        2.4.4  FRMR - Frame Reject


  If this frame  is received by  the HIF from  the primary station,  a DISC
  frame is sent to the TIF, and a DM is sent to the primary  station. There
  is no  way for  the HIF  to recover  since the  frame being  rejected has
  already been acknowledged at the TIF.


  If this frame is received by the TIF it is discarded and ignored.


  The only interface which may  generate this frame locally is the  HIF. If
  the HIF receives  from the primary station  a frame with a  control field
  error, a prohibited I-field, or the message is too long, the HIF  sends a
  FRMR frame to the primary station. See section End to End Procedures FRMR
  case 3 to see what frames are accepted after the HIF sends a FRMR frame.










  24                 SDLC/QLLC External Reference Manual         QLCERS.DOC




  Technical Description                                        May 27, 1987


        2.4.5  Nr and Ns - Frame Receive and Send Sequence number


  The Nr  and Ns values  are not passed  end-to-end. The SDLC  port locally
  supplies these values in compliance with the SDLC protocol.





        2.4.6  Poll/Final Bit


  This bit is always reset when sent from one interface to  the destination
  interface  iternally  on virtual  circuit.  Therefore, this  bit  must be
  locally adjusted before sending to the SDLC station.


  The primary port will set this bit when polling the secondary station for
  information.


  The secondary port sets this bit in  a RR frame, if there are no  more I-
  frames to send. The Final bit is reset if more I-frames are ready to send
  to  the primary  station.  The following  is  an example  of  setting and
  resetting the Poll/Final bit.

    Secondary Station    TIF                 HIF  Primary Station
  -------------------    ---                 ---  ---------------
      I(0)-F(0),info1-->                       <--RR P(0)
                         Data Packet (info1)-->
      I(1)-F(0),info2-->                        -->I(0)-F(0),info1
                         Data Packet (info2)--> -->RR F(0)
      I(2)-F(0),info3-->  
             RR F(0) -->
                         Data Packet (info3)--> <-- RR P(1)
             RR(3)  <-- 
                                                -->I(1)-F(0),info2
                                                -->I(2)-F(0),info3
                                                -->RR F(0)  
  ----------------------------------------------------------------

  To indicate Poll or Final bit reset, -P and -F are used respectively.


  Each  data packet  contains one  SDLC I-frame.  The secondary  port (HIF)
  resets the Final  bit when sending the  first I-frame then sends  RR with
  Final  bit on  because this  is the  only frame  currently  available for
  transmission. When the secondary port is polled the next time,  there are
  2 I-frames ready to be  transmitted. In this case, the first  I-frame has
  the Final  bit reset, the  second I-frame has  the Final bit  reset, then
  sends the RR or RNR with Final bit on.


  25                 SDLC/QLLC External Reference Manual         QLCERS.DOC




  Technical Description                                        May 27, 1987


     2.5  End to End Procedures



  End to  end procedures  are used  to handle  SDLC unnumbered  frames, and
  information frames.  Only a  subset of the possible unnumbered  frames is
  supported by  this interface.  Some of these  unnumbered frames  are sent
  only by a primary station, some only by a secondary station, and some may
  be sent by both primary and secondary stations. (see IBM Synchronous Data
  Link Control General Information Manual)


  The  following is  a list  of SDLC  unnumbered frames  supported  by this
  interface:

           ACRONYM   DEFINING CHARACTERISTICS

           SNRM      Set normal response mode 
           DM        Disconnect mode (response)
           DISC      Disconnect (command)
           UA        Unnumbered aknowledgement
           FRMR      Frame reject
           RD        Request disconnect
           XID       Transmit identification
           TEST      Test pattern



  The following is a list of SDLC unnumbered frames which are NOT supported
  by this interface:

           ACRONYM   DEFINING CHARACTERISTICS

           UI        Unnumbered information
           RIM       Request initialization mode
           SIM       Set initialization mode
           BCN       Beacon
           CFGR      Configure
           UP        Unnumbered poll















  26                 SDLC/QLLC External Reference Manual         QLCERS.DOC




  Technical Description                                        May 27, 1987


  Unnumbered commands/responses and information frames are sent end-to-end.
  SDLC interface will send the following unnumbered commands  and responses
  end-to-end  in Data  messages with  Q bit  set, for  information  on data
  qualified message see Section Data Qualified Message Format:

           SDLC      QLLC
           ----      ----
           SNRM       QSM    
           DISC       QDISC
           XID        QXID
           TEST       QTEST
           RD         QRD
           UA         QUA
           DM         QDM
           FRMR       QFRMR

  Both the  HIF and the  TIF operate in  two modes; Normal  Disconnect Mode
  (NDM) and  Normal Response Mode  (NRM).  Each mode  functions differently
  depending on whether it`s the HIF or the TIF. A basic description  of how
  each interface operates in these two modes is given below.


































  27                 SDLC/QLLC External Reference Manual         QLCERS.DOC




  Technical Description                                        May 27, 1987


  Host Interface Normal Disconnect Mode (NDM)


  The HIF is initialized to NDM. During NRM, HIF enters NDM when either the
  primary station sends  a DISC, FRMR to  the HIF, or a  DM is sent  by the
  TIF.


  The  HIF waits  to receive  either XID,  TEST, or  SNRM from  the primary
  station.  Before any of these  frames is received, all frames  queued for
  transmission  to  the  primary  station  (received  from  the   TIF)  are
  discarded.


  Once one of these frames is received, the frames queued  for transmission
  to the primary station are procesed. If the frame being processed  is not
  an expected  response to the  received command frame,  then the  frame is
  discarded. The following sections explain the expected responses for each
  SDLC command frame sent by the host.


  Terminal Interface Normal disconnect Mode (NDM)


  The TIF is initialized to NDM. During NRM, TIF enters NDM when either the
  secondary station sends an FRMR, DM to the TIF, or a DISC is sent  by the
  HIF.


  In Normal Disconnect  Mode the TIF is  looking for a frame  received from
  the HIF to  transmit to the terminal.  All SDLC frames received  from the
  secondary station, at this point, are ignored until an SNRM, DISC, XID or
  TEST frame is received from the HIF and then transmitted to the secondary
  station.


  Once one of these frames has been transmitted by the TIF to the secondary
  station, the frames which  have been received from the  secondary station
  are   processed  if  they  are  the  expected  response  frames.  See the
  following sections for a description of the expected response frames. All
  unexpected responses are discarded.


  Host Interface Normal Response Mode (NRM)


  The HIF enters NRM when a UA is sent by the HIF to the primary station in
  response to an SNRM.


  The  HIF will  make sure  that all  information frames  from  the primary
  station are  formatted correctly  before sending them  to the  TIF. Also,


  28                 SDLC/QLLC External Reference Manual         QLCERS.DOC




  Technical Description                                        May 27, 1987


  only those unnumbered  SDLC frames which are  commands will be  passed to
  the TIF.


  The only  unnumbered frames  which can change  the mode  back to  NDM are
  SNRM,  and DISC.  Both of  these are  sent as  commands from  the primary
  station. See sections End to End Procedures SNRM, and DISC.


  Terminal Interface Normal Response Mode (NRM)


  The TIF enters  NRM from NDM,  when a UA  is received from  the secondary
  station in response to a SNRM command.


  Only SDLC unnumbered response and information frames are sent to the HIF.
  If an SDLC unnumbered command, such as SNRM, is received from a secondary
  station it  is discarded and  not passed to  the HIF because  of protocol
  violation.


  The TIF will go to NDM only if a SNRM was sent to the  secondary station,
  or a UA  or DM response  to a DISC frame  is received from  the secondary
  station.


  The following scenarios demonstrate  the SDLC to SDLC  configuration. For
  more information  on what a  X.25 interface will  do, refer  to X.25/X.75
  Interface Reference Manual.
























  29                 SDLC/QLLC External Reference Manual         QLCERS.DOC




  Technical Description                                        May 27, 1987


        2.5.1  SNRM

           Case  Start           TIF          HIF          End
                 Mode                                      Mode
           -----------------------------------------------------
           1     NDM    <-SNRM--|   |<--QSM--|   |<-SNRM--
                        <-SNRM--|   |        |  X|<-SNRM--
                        <-SNRM--|   |        |  X|<-SNRM--
                        <-SNRM--|   |        |  X|<-SNRM--
                        <-SNRM--|   |        |  X|<-SNRM--
                                |   |        |  X|<-SNRM--
                        <-SNRM--|   |<--QSM--|   |<-SNRM--
                                |   |        |   |         NDM
           ----------------------------------------------------
           2     NDM    --SNRM->|X  |        |   |
                                |   |        |   |         NDM
           ----------------------------------------------------
           3     NDM    <-SNRM--|   |<--QSM--|   |<-SNRM--
                (After          |   |        |   |
                 SNRM)  --UA--->|   |--QUA-->|   |--UA--->
                                |   |        |   |         NRM
           ----------------------------------------------------
           4     NDM    <-SNRM--|   |<--QSM--|   |<-SNRM--
                (After          |   |        |   |
                 SNRM)  --DM--->|   |--QDM-->|   |--DM--->
                                |   |        |   |         NDM
           ----------------------------------------------------
           5     NDM    <-SNRM--|   |<--QSM--|   |<-SNRM--
                (After          |   |        |   |
                 SNRM)          |  X|<-*OTHER|   |<-*OTHER-
                                |   |        |   |         NDM

           *OTHER = QXID, QTEST, QSM(after retries=0)

           ---------------------------------------------------
           6     NDM    <-SNRM--|   |<--QSM--|   |<-SNRM--
                                |   |        |   |
                        *OTHER->|X  |        |   |         NDM

           *OTHER = NOT DM or UA

           ---------------------------------------------------
           7     NRM            |   |<-CALL--|   |<-SNRM--
                                |   |  RESET |   |
                                |   | (CLEAR)|   |--DM--->
                 NDM            |   |        |   |         NDM
           ---------------------------------------------------
           8     NRM    --SNRM->|   |--CALL->|   |
                                |   |  RESET |   |
                                |   | (CLEAR)|   |
                 NDM            |   |        |   |         NDM
           ---------------------------------------------------


  30                 SDLC/QLLC External Reference Manual         QLCERS.DOC




  Technical Description                                        May 27, 1987


         Case 1 - During NDM, when the first SNRM is received by the
                 HIF it is sent to the TIF. The HIF is still in NDM,
                 but is waiting for a response to the SNRM command.


                 While in this  waiting for response state,  the HIF
                 will  only  process  XID, TEST,  or  SNRM  from the
                 primary station. All other frames are discarded.


                 The HIF will decrement a retry counter (default = 5
                 retries)  first   time  it  checks   for  something
                 received  from  the TIF  and  finds  nothing within
                 NETREPLYTO timer.  Please  refer to sysgen  for the
                 SNRMRETRIES, NETREPLYTO.  When this counter reaches
                 0, HIF stops looking  for a response and  goes back
                 to the start of NDM.


                 The TIF  sends the SNRM  to the  secondary station.
                 TIF  is also  still in  NDM, but  is waiting  for a
                 response  from the  secondary station  to  the SNRM
                 command.


                 While in this  waiting for response state,  the TIF
                 will not process any frames received from  the HIF.
                 Each time  TIF looks for  a receive frame  from the
                 secondary  station,  and  finds  nothing,  a  retry
                 counter  is decremented   (default =  1  retries, 0
                 second pause, and 0 sequence number).  Please refer
                 to sysgen for  SNRMRETRIES macro.  Each time  it is
                 decremented  an  SNRM  is  sent  to  the  secondary
                 station. When the counter  reaches 0 and so  is the
                 2nd,  3rd argument  of SNRMRETRIES  reaches  0, TIF
                 stops looking for a response and starts  NDM before
                 SNRM  sent.  If  the  2nd,  and  3rd   argument  of
                 SNRMRETRIES are specified  other than 0,  after the
                 1st argument of SNRMRETRIES reaches 0, the TIF will
                 wait t seconds defined in the 2nd  argument, before
                 another sequence of  retries which is  specified in
                 the 3rd augument of SNRMRETRIES.


         Case 2 - An  SNRM received  by the  TIF from  the secondary
                 station is discarded in both NDM and NRM.


         Case 3 - After sending the SNRM, the TIF will accept  a QUA
                 frame  received  from the  secondary  station  as a
                 positive  response  to  the   previously  sent SNRM
                 command. The  UA is  sent to the  HIF, and  the TIF


  31                 SDLC/QLLC External Reference Manual         QLCERS.DOC




  Technical Description                                        May 27, 1987


                 enters  NRM.  Before  entering  NRM,  the  TIF will
                 discard  any  QSM  frames  which  might  have  been
                 received from the HIF while waiting for the UA.


                 When the HIF receives  this QUA, UA is sent  to the
                 primary station.  The HIF enters NRM.


         Case 4 - The TIF sends the QDM to the HIF. TIF restarts NDM
                 (waiting for SNRM from  HIF). The HIF sends  the DM
                 to the primary  station, and the HIF  also restarts
                 NDM (waiting for SNRM from primary station).


         Case 5 - The HIF may still process certain  frames received
                 from the  primary  station during this  waiting for
                 response  from TIF  state.   The  frames  which are
                 processed  are  XID,  TEST,  and  SNRM  if  retries
                 counter  = 0.  For  more information  on  how these
                 frames are  processed see  the section  relating to
                 each frame.


         Case 6 - The TIF will discard all frames other than  DM and
                 UA received from  the secondary station  after SNRM
                 is sent.


         Case 7 - During NRM a SNRM  frame received by the  HIF from
                 the Host, a CALL RESET or CALL CLEAR packet for PVC
                 or  SVC  respectively  (with  cause  code  =  local
                 procedure  procedure   error,  diagnostic   code  =
                 receive unexpected SNRM frame ) is sent to the TIF,
                 and the  HIF sends  DM to host.  The HIF  then goes
                 into NDM.


         Case 8 - During NRM a SNRM frame received by the TIF from a
                 secondary  station,  a  CALL  RESET  or  CALL CLEAR
                 packet for  PVC or SVC  respectively (with  cause =
                 local procedure  error, diagnostic code  = received
                 unexpected SNRM frame) is sent to the HIF.  The TIF
                 then goes into NDM.










  32                 SDLC/QLLC External Reference Manual         QLCERS.DOC




  Technical Description                                        May 27, 1987


        2.5.2  DM

           Case  Start           TIF          HIF          End
                 Mode                                      Mode
           ----------------------------------------------------
           1     NDM/   ---DM-->|   |--QDM-->|   |---DM-->
                 NRM            |   |        |   |         NDM/
                                |   |        |   |         NRM
           ----------------------------------------------------
           2     NDM            |   |        |  X|<--DM---
                                |   |        |   |         NDM
           ----------------------------------------------------
           3     NRM            |   |<-CALL--|   |<--DM---
                                |   | RESET  |   |---DM-->
                 NDM            |   |(CLEAR) |   |         NDM
           ----------------------------------------------------


         Case 1 - In both modes QDM is sent from the TIF to  the HIF
                 when  received from  a secondary  station.  The HIF
                 sends the DM to  the primary station. Both  TIF and
                 HIF start NDM mode (waiting for SNRM state).


         Case 2 - In NDM a DM  received by the HIF from  the primary
                 station is discarded.


         Case 3 - In NRM a DM  received by the HIF from  the primary
                 station will  cause the HIF  to send either  a CALL
                 RESET  or  a  CALL  CLEAR  packet  for  PVC  or SVC
                 respectively (with the cause code = local procedure
                 error, diagnostic code  = get unexpected  DM frame)
                 to TIF, and then send a DM to the primary station.




















  33                 SDLC/QLLC External Reference Manual         QLCERS.DOC




  Technical Description                                        May 27, 1987


        2.5.3  DISC

           Case  Start           TIF          HIF          End
                 Mode                                      Mode
           ----------------------------------------------------
           1     NDM            |   |        |  X|<-DISC--
                                |   |        |   |         NDM
           ----------------------------------------------------
           2     NDM/   --DISC->|X  |        |   |         NDM/
                 NRM            |   |        |   |         NRM
           ----------------------------------------------------
           3     NRM    <-DISC--|   |<-QDISC-|   |<-DISC--
                                |   |        |   |---DM-->
                        -UA/DM->|   |--QDM-->|X  |         NDM
           ----------------------------------------------------


         Case 1 - During NDM, the  HIF will discard a  DISC received
                 from the primary station.


         Case 2 - In both modes (NDM or NRM), the TIF will discard a
                 DISC when received from the secondary station.


         Case 3 - The HIF will respond locally to the  QDISC command
                 by sending  a DM response  to the  primary station.
                 The HIF sends the DISC  to the  TIF. HIF is  now in
                 NDM.


                 The TIF transmits the DISC to the secondary station
                 and  waits  for  a  DM  or  UA   response  from the
                 secondary station. Once the TIF receives DM   or UA
                 it is in NDM. The TIF sends a QDM to the HIF when a
                 UA or DM is received from the secondary station.  A
                 number  of  DISC  is  sent  to  secondary  stations
                 (default  =  4 retries).   If  the  REPLYTO elapses
                 before a DM is received from the secondary station,
                 the TIF enters into NDM. Please refer to sysgen for
                 DISCRETRIES.


                 By the time the  HIF has received the QDM,  the HIF
                 has had  a receive  timeout (nothing  received from
                 primary) and empties  all frames received  from the
                 TIF.







  34                 SDLC/QLLC External Reference Manual         QLCERS.DOC




  Technical Description                                        May 27, 1987


        2.5.4  UA

           Case  Start           TIF          HIF          End
                 Mode                                      Mode
           ----------------------------------------------------
           1     NDM    --UA--->|X  |        |   |
              (Before           |   |        |   |
               SNRM)            |   |        |   |         NDM
           ----------------------------------------------------
           2     NDM    <-SNRM--|   |<--QSM--|   |<-SNRM--
              (After            |   |        |   |
               SNRM)    ---UA-->|   |--QUA-->|   |---UA-->
                                |   |        |   |         NRM
           ----------------------------------------------------
           3     NDM            |   |        |  X|<--UA---
                                |   |        |   |         NDM
           ----------------------------------------------------
           4     NRM    <-DISC--|   |<-QDISC-|   |<-DISC--
              (After            |   |        |   |---DM-->
               DISC)    ---UA-->|   |--QDM-->|X  |         NDM
           ----------------------------------------------------
           5     NRM    ---UA-->|   |--CALL->|   |
                                |   |  RESET |   |
                                |   | (CLEAR)|   |
                 NDM            |   |        |   |         NDM
           ----------------------------------------------------
           6     NRM            |   |        |   |<--UA----
                                |   |<-CALL--|   |
                                |   |  RESET |   |
                                |   | (CLEAR)|   | 
                 NDM            |   |        |   |---DM--->
                                |   |        |   |         NDM
           ----------------------------------------------------

         Case 1 - The TIF will discard a UA received in NDM before a
                 SNRM has been sent to the terminal.


         Case 2 - After the SNRM has been  sent in NDM, and a  UA is
                 received by the TIF, a QUA is sent to the  HIF. The
                 TIF is now in NRM. When the QUA arrives at the HIF,
                 UA is output to  the Host. The HIF also  enters NRM
                 at this time.


         Case 3 - In NDM,  the HIF will  discard a UA  received from
                 the Host.


         Case 4 - After  a  DISC  has  been  sent  from  the primary
                 station to the  secondary station (see  section End
                 to End Procedure DISC case 3), a UA may be  sent to


  35                 SDLC/QLLC External Reference Manual         QLCERS.DOC




  Technical Description                                        May 27, 1987


                 the TIF from the  secondary station. The TIF  is in
                 NDM after UA received. The HIF is in NDM before QDM
                 received from TIF.


         Case 5 - In NRM (no SNRM or DISC has been sent),  anytime a
                 UA  is  received from  secondary  station,  the TIF
                 sends either  a CALL RESET  or a CALL  CLEAR packet
                 for  PVC or  SVC  respectively (with  cause  code =
                 local  procedure error,  diagnostic code  = receive
                 unexpected UA frame) to HIF. The TIF then goes into
                 NDM.


         Case 6 - When the HIF receives a UA from the Host in NRM, a
                 CALL  RESET or  CALL CLEAR  packet for  PVC  or SVC
                 respectively  (with  cause code  =  local procedure
                 error,  diagnostic  code  =  receive  unexpected UA
                 frame) is sent to TIF, and sends a DM to host.



































  36                 SDLC/QLLC External Reference Manual         QLCERS.DOC




  Technical Description                                        May 27, 1987


        2.5.5  FRMR


  The SDLC FRMR frame is used by the HIF to locally reject a bad frame sent
  from the primary station.  See section Local Procedures for  sending FRMR
  locally.


  In the TIF, this frame  can only be received from the  secondary station.
  The only time  the TIF sends this  FRMR response to the  HIF is if  it is
  NDM, and is a response to  an XID command. If the FRMR frame  is received
  during NRM, there is no way to recover. The TIF simply discards  the FRMR
  in this case.

           Case  Start           TIF          HIF          End
                 Mode                                      Mode
           ----------------------------------------------------
           1     NDM    -FRMR-->|X  |        |   |
                                |   |        |   |         NDM
           ----------------------------------------------------
           2     NDM            |   |        |  X|<--FRMR-
                                |   |        |   |         NDM
           ----------------------------------------------------
           3     NDM    <-XID---|   |<-QXID--|   |<-XID---
               (After           |   |        |   |
                 XID)   -FRMR-->|   |-QFRMR->|   |-FRMR-->
                                |   |        |   |         NDM
           ----------------------------------------------------
           4     NRM    -FRMR-->|   |--QDM-->|   |
                 NDM            |   |        |   |         NDM
           ----------------------------------------------------
           5     NDM            |   |<-CALL--|   |<-FRMR--
                                |   |  RESET |   |
                                |   | (CLEAR)|   |
                                |   |        |   |---DM-->
                                |   |        |   |         NDM
           ----------------------------------------------------


         Case 1 - The  TIF  discards  any  FRMRs  received  from the
                 terminal in NDM.


         Case 2 - The HIF discards any FRMRs received from  the Host
                 in NDM.


         Case 3 - A FRMR frame is sent end to end after a  XID frame
                 is sent  during NDM.  This is  to tell  the primary
                 station the XID frame has been rejected.  After the
                 FRMR is  sent to  the primary  station, the  HIF is
                 waiting for either  SNRM, or DISC from  the primary


  37                 SDLC/QLLC External Reference Manual         QLCERS.DOC




  Technical Description                                        May 27, 1987


                 station. If SNRM or  is received the HIF  goes into
                 NRM. If DISC is received, the HIF restarts  the NDM
                 before the  XID was  sent. If  a frame  is received
                 which is not SNRM, or DISC then the HIF resends the
                 FRMR. If receive timeout occurrs  (nothing received
                 in certain amount  of time), then HIF  restarts NDM
                 before XID sent.


         Case 4 - In NRM the TIF  changes the received FRMR  to QDM,
                 and sends  QDM to  HIF.  The  TIF then  enters into
                 NDM, since there is  no way for the TIF  to recover
                 in  this situation.  The frame  being  rejected has
                 already been acknowledged at the HIF.


         Case 5 - When a FRMR is received by the HIF in NRM,  a CALL
                 RESET  or  CALL   CLEAR  packet  for  PVC   or  SVC
                 respectively  (with  cause code  =  local procedure
                 error,  diagnostic  code  =  unexpected  FRMR frame
                 received) to  TIF. The HIF  then notifies  the Host
                 that it's now in NDM by sending the Host a DM.  See
                 section End to  End Procedures DISC for  details on
                 handling DISC frames.






























  38                 SDLC/QLLC External Reference Manual         QLCERS.DOC




  Technical Description                                        May 27, 1987


        2.5.6  RD

           Case  Start           TIF          HIF          End
                 Mode                                      Mode
           ----------------------------------------------------
           1     NDM    ---RD-->|X  |        |   |
                                |   |        |   |         NDM
           ----------------------------------------------------
           2     NDM/           |   |        |  X|<--RD---
                 NRM            |   |        |   |         NDM/
                                |   |        |   |         NRM
           ----------------------------------------------------
           3     NRM    ---RD-->|   |--QRD-->|   |---RD-->
                        <-DISC/-|   |<-QDISC/|   |<-DISC/-
                          SNRM  |   |  QSM   |   |  SNRM
                                |   |        |   |         NDM
           ----------------------------------------------------


         Case 1 - The TIF will discard a RD received during NDM.


         Case 2 - In any  mode, a  RD received by  the HIF  from the
                 Host is discarded.


         Case 3 - When the TIF receives a RD during NRM, the  QRD is
                 sent to the HIF. The TIF is still in NRM,  but will
                 discard any frames other than QDISC or QSM received
                 from the HIF. The  TIF will still send  frames from
                 the terminal to  the HIF. The  HIF sends the  RD to
                 the Host, and remains in NRM. For  more information
                 on SNRM and DISC see sections End to End Procedures
                 SNRM, and DISC.




















  39                 SDLC/QLLC External Reference Manual         QLCERS.DOC




  Technical Description                                        May 27, 1987


        2.5.7  XID

           Case  Start           TIF          HIF          End
                 Mode                                      Mode
           ----------------------------------------------------
           1     NDM    <--XID--|   |<-QXID--|   |<--XID--
               (After           |   |        |   |
                 XID)   --XID-->|   |-QXID-->|   |--XID-->
                                |   |        |   |         NDM
           ----------------------------------------------------
           2     NDM    <--XID--|   |<-QXID--|   |<--XID--
                                |   |        |   |
                        ---DM-->|   |--QDM-->|   |---DM-->
                                |   |        |   |         NDM
           ----------------------------------------------------
           3     NDM    <--XID--|   |<-QXID--|   |<--XID--
                                |   |        |   |
                         -FRMR->|   |-QFRMR->|   |-FRMR-->
                                |   |        |   |         NDM
           ----------------------------------------------------
           4     NDM    <--XID--|   |<-QXID--|   |<--XID--
                                |   |        |  X|<--XID--
                                |   |        |  X|<--XID--
                        *OTHER->|X  |        |  X|<--XID--
                                |   |        |  X|<--XID--
                                |   |        |  X|<--XID--
                        <--XID--|   |<-QXID--|   |<--XID--
                                |   |        |   |         NDM

           * OTHER are any frames which are NOT XID, DM, or FRMR.

           ------------------------------------------------------
           5     NDM    --XID-->|X  |        |   |
                                |   |        |   |         NDM
           ----------------------------------------------------
           6     NRM    <--XID--|   |<-QXID--|   |<--XID---
                                |   |        |   |         NRM
           ----------------------------------------------------
           7     NRM    ---XID->|   |--QXID->|   |---XID-->
                                |   |        |   |         NRM
           ----------------------------------------------------













  40                 SDLC/QLLC External Reference Manual         QLCERS.DOC




  Technical Description                                        May 27, 1987


         Case 1 - In NDM, the HIF sends the QXID to the TIF and then
                 will not send  any future frames received  from the
                 Host until a response to the QXID has been received
                 from  the  TIF. The  HIF  is still  in  NDM  but is
                 waiting for either a  QXID, QDM, or QFRMR  from the
                 TIF.  Any other  frames received  from the  TIF are
                 discarded.


                 The  TIF sends  the XID  to the  terminal.  The TIF
                 looks at the next frame received from the terminal.
                 If it is XID, the QXID is sent to the HIF.  The TIF
                 goes to the start of NDM.


                 When the QXID is received by the HIF from  the TIF,
                 the HIF sends QXID to  the Host. The HIF is  now at
                 the start of NDM again.


         Case 2 - After the XID has  been sent from the Host  to the
                 terminal, in  NDM, and the  TIF receives a  DM from
                 the terminal, the DM  is sent to the HIF.   The TIF
                 restarts the NDM before  the XID was sent.  The HIF
                 sends the DM to  the Host, and restarts  NDM before
                 XID sent.


         Case 3 - After the XID has  been sent from the Host  to the
                 teminal, in  NDM, the TIF  may receive a  FRMR from
                 the terminal.  In this case,  the QFRMR is  sent to
                 the HIF. The TIF is  now in NDM before the  XID was
                 sent. When the HIF gets the QFRMR, it sends FRMR to
                 the Host. The  HIF is now  waiting for the  Host to
                 send either DISC, SNRM, or SIM. See section  End to
                 End Procedures on FRMR.


         Case 4 - If the TIF receives something other than  XID, DM,
                 or FRMR  after sending XID,  then the  TIF discards
                 the frame and restarts NDM before the XID was sent.
                 In this mode, the TIF may retransmit an XID that is
                 received from the HIF.


                 Meanwhile, the HIF keeps checking for a  QXID, QDM,
                 or QFRMR from the  TIF.  In NDM, the HIF  sends the
                 first QXID  frame from the  primary station  to the
                 TIF. Subsequently received XID frames are discarded
                 until  the HIF  has looked  at the  received frames
                 from the TIF retry times ( retries reaches 0; while
                 retry counter specified in XIDRETRIES  macro, refer


  41                 SDLC/QLLC External Reference Manual         QLCERS.DOC




  Technical Description                                        May 27, 1987


                 to  sysgen  manual  default  =  5)  when NETREPLYTO
                 timesout, and found nothing. The HIF  then restarts
                 the NDM as if no XID has been sent. The HIF  is now
                 able  to transmit  the next  XID frame  it receives
                 from the primary station.  Please refer  sysgen for
                 XIDRETRIES macro.


         Case 5 - If an unsolicited XID is sent to the TIF before an
                 XID was sent to  the terminal, the received  XID is
                 discarded.


         Case 6 - In NRM, an QXID  may be transmitted any  time from
                 the  HIF to  the TIF.  When this  happens,  the HIF
                 stays in NRM.


         Case 7 - In NRM, an QXID  may be transmitted any  time from
                 the TIF to the HIF. The TIF stays in NRM.


































  42                 SDLC/QLLC External Reference Manual         QLCERS.DOC




  Technical Description                                        May 27, 1987


        2.5.8  TEST

           Case  Start         TIF            HIF          End
                 Mode                                      Mode
           -----------------------------------------------------
           1     NDM   <-TEST-|   |<-QTEST---|   |<--TEST--
                              |   |          |  X|<--TEST--
                              |   |          |  X|<--TEST--
                       -(NOT->|X  |          |  X|<--TEST--
                        TEST) |   |          |  X|<--TEST--
                              |   |          |  X|<--TEST--
                       <-TEST-|   |<-QTEST---|   |<--TEST--
                              |   |          |   |          NDM
           ----------------------------------------------------
           2     NDM   <-TEST-|   |<-QTEST---|   |<--TEST--
                              |   |          |   |
                       -TEST->|   |--QTEST-->|   |---TEST-->
                              |   |          |   |          NDM
           ----------------------------------------------------
           3     NRM   <-TEST-|   |<--QTEST--|   |<--TEST---
                              |   |          |   |          NRM
           ----------------------------------------------------
           4     NRM   -TEST->|   |---QTEST->|   |---TEST-->
                              |   |          |   |          NRM
           ----------------------------------------------------


         Case 1 - In NDM,  the HIF sends  the first TEST  frame from
                 the  primary  station  to  the   TIF.  Subsequently
                 received TEST  frames are  discarded until  the HIF
                 has  looked at  the  received frames  from  the TIF
                 retry times(  retries reaches 0,  while TESTRETRIES
                 specified  in  TESTRETRIES macro,  refer  to sysgen
                 manual, default =  5) when NETREPLYTO  timesout and
                 found nothing. The HIF then restarts the NDM  as if
                 no TEST frame has  been sent.  The HIF is  now able
                 to transmit  the next TEST  frame it  receives from
                 the primary station.


                 The TIF will send  the TEST frame to  the secondary
                 station, and  then wait for  a TEST  response frame
                 from  the  secondary.  All  other  frames  from the
                 secondary station are discarded by the TIF  at this
                 point.  After  looking for  a  received  frame from
                 secondary station, and not finding a  TEST response
                 frame, the TIF  stops looking and restarts  the NDM
                 before the TEST  was sent. The  TIF is now  able to
                 receive another QTEST from the HIF.


         Case 2 - After the  TEST frame  has been  sent from  end to


  43                 SDLC/QLLC External Reference Manual         QLCERS.DOC




  Technical Description                                        May 27, 1987


                 end, and the secondary station TEST  response frame
                 is sent  end to end,  both TIF and  HIF are  at the
                 start  of NDM  before the  TEST was  sent.  At this
                 point  the  HIF can  pass  to the  TIF  either QSM,
                 QTEST, QXID, or QDISC frames only.


         Case 3 - During NRM a TEST frame received from  the primary
                 station  by the  HIF is  sent to  the TIF.  The HIF
                 remains in  NRM and  does not  look for  a response
                 QTEST frame from the  TIF. The TIF also  remains in
                 NRM, and does not look for a TEST response from the
                 secondary station.


         Case 4 - During  NRM  a   TEST  frame  received   from  the
                 secondary station  by the TIF  is sent to  the HIF.
                 The TIF and HIF  remain in NRM. Neither TIF  or HIF
                 insure that this TEST response frame  was solicited
                 by the primary station.


































  44                 SDLC/QLLC External Reference Manual         QLCERS.DOC




  Technical Description                                        May 27, 1987


        2.5.9  I-Frame

           Case    Start                                        End
                   Mode             TIF             HIF         Mode
           ---------------------------------------------------------
           1       NDM   I-Frame->|X   |           |  X|<-I-Frame
                                  |    |           |   |
                                  |    |           |   |         NDM
           ---------------------------------------------------------
           2       NRM   I-Frame->|    | I-Frame-->|   | I-Frame->
                                  |    |           |   |   
                         <-I-Frame|    |<-I-Frame--|   |<-I-Frame-
                                  |    |           |   |         NRM
           ---------------------------------------------------------


         Case 1 - Information frames are ignored during NDM.


         Case 2 - If the I-frame  is formatted correctly  (i.e. good
                 address,  control bytes  etc.), then  the  frame is
                 passed   to   destination   interface.   Only   the
                 information field from  the I-frame is  sent across
                 the  network. All  other  fields of  the  frame are
                 supplied   by   local   procedures   at   interface
                 transmitting  to  the station.  For  more  on local
                 procedures   see  Section   Local   Procedure.   If
                 something is wrong  with the I-frame  when received
                 from the primary station  by the HIF, the  HIF will
                 send a FRMR to the primary station.
























  45                 SDLC/QLLC External Reference Manual         QLCERS.DOC




  Technical Description                                        May 27, 1987


     2.6  Inter-Slot Format and Protocol




  This section describes the different types and format of network messages
  which  are  sent and  received  by  the SDLC  interface.   There  are two
  fundamental types of messages, those which are transfered between  slot 0
  and   the  SDLC   slot,  and   those  which   are  used   for  intra-ISIS
  communications.


  Messages  which are  sent to  or received  from slot  0 (node  code), are
  called  intra-ISIS messages.  These messages  are distinguishable  by the
  destination port # (RPORT) equal to 0.


  Messages  which are  transfered  to slots  other  than slot  0,  have the
  destination port  # (RPORT)  equal to  the port  number assigned  to this
  circuit. This  port #  is obtained  from either  Pseudo-needle (B2)  , or
  Needle (00) ISIS Control messages, when received by the SDLC  slot. These
  messages can  be categorized  as either ISIS  Control and  Data messages,
  Global IIX messages, or SDLC  IIX Dialect messages. The SDLC  IIX Dialect
  messages are either control or data messages. These data messages  are in
  the  form of  Data Qualified  packets (end-to-end  SDLC frames),  or Data
  packets (SDLC Information frames).


  To understand this  section, the reader  must be familiar  with TYMNET-II
  and ISIS-II.
























  46                 SDLC/QLLC External Reference Manual         QLCERS.DOC




  Technical Description                                        May 27, 1987


        2.6.1  TYMNET Intra-ISIS Messages



  Only a subset  of the Intra-ISIS (port  0) messages are supported  by the
  SDLC  interface.  Messages  which  are  not  supported  are  ignored  and
  discarded.


  For more information on  these types of messages, see  ISIS-II docuement,
  chapter 2 -- ISIS Process Intercommunication.


  The following table  is a brief  description of how  supported Intra-ISIS
  message is handled by the SDLC interface:





  2.6.1.1  Restart-request (00)


  This message is not supported by the SDLC interface.





  2.6.1.2  Restart-response (01)


  This message is not supported by the SDLC interface.





  2.6.1.3  Take Over (02)


  When this message  is received from slot  0, a Port  Availability message
  (0A) is sent to slot 0.











  47                 SDLC/QLLC External Reference Manual         QLCERS.DOC




  Technical Description                                        May 27, 1987


  2.6.1.4  Report to Supervisor's Log (03)


  The only  time the SDLC  interface sends this  message, is if  the switch
  REPORT is set when the  interface was assembled. If this switch  has been
  set, then each time  there is a change in  the log table this  message is
  sent.   The  log code  is  the report  type  field of  the  03 intra-ISIS
  message, and data2  hex message is the  data2 field of the  03 intra-ISIS
  message.  These log table changes are as follows:

           Log Code     Log Table Change
           (Report type)
           --------     ----------------
             2          Slot initial start
             3          Slot restart
             4          Circuit built
             5          Circuit zapped
             6          Circuit/station or line shut
             7          Circuit/station or line removed from shut
             8          Line up
             9          Line down
            0A          Circuit/station or line shut due to excessive 
                        log on retries
            0B          Circuit/station or line logon failed
            0C          Circuit/station or line inoperable

                        Inoperable message will be processed if the
                        following circumstances occur:

                        TIF(primary port):

                        1. When retry counter is decremented to 0 in NRM.
                        2. When DM is received from external system in 
                           NRM.
                        3. When un-expected frames such as SNRM, UI, REJ
                           are received from external system in NRM.
                        4. Timeout happens when I-frame is being retrans-
                           mitted to external system.
                        5. Timeout happens when any frames are being
                           transmitted to external system in NRM and NDM.

                        HIF(secondary port):

                        1. Timeout happens when I-frame is being retrans-
                           mitted to external system in NRM.
                        2. Timeout happens when any frames are being
                           transmitted to external system in NRM and NDM.

            0D          Monitor circuit built
            0E          Monitor circuit zapped
            0F          Circuit received black ball
            10          Circuit received gray ball
            11          Circuit/station received data overflow

  48                 SDLC/QLLC External Reference Manual         QLCERS.DOC




  Technical Description                                        May 27, 1987


            12          Circuit/station received data underflow
            13          Circuit detached
            14          Zapper received
            15          Detach received
            16          Circuit received hung/super hung
            17          SIO interrupt



           Data2        Data2 hex message
           ------------ -------------------------------------------
           LLSS         for all types of log code except 0D and 0E.
                        where LL is line number and SS is station number.
                        Report data2 hex message for a whole line is
                        LLFF. For a whole slot is FFFF.

                        For report type 0D and 0E, the data hex message
                        is a number which is an index to the good guy 
                        list with this index, we will know who built/
                        zapped a circuit to/from the monitor system. For
                        an invalid user or use is already logon monitor
                        system, the data2 hex message is FFFF.





  2.6.1.5  Report Host Status (04)


  This  message is  only sent  by  the SDLC  interface if  the  host cannot
  support IIX. The only host in  the SDLC interface which does not  use IIX
  is the Monitor Host.  This message is sent when a Needle is  received for
  the Monitor  host, when  a Monitor  port is  being terminated,  or during
  initialization for a Monitor port.





  2.6.1.6  Report Accounting (05)


  This message is not supported by the SDLC interface.










  49                 SDLC/QLLC External Reference Manual         QLCERS.DOC




  Technical Description                                        May 27, 1987


  2.6.1.7  Tell Host Time (06)


  This message is not supported by the SDLC interface.





  2.6.1.8  Pseudo-needle Request (07)


  This message is sent  to slot 0 when the  interface is trying to  build a
  circuit. A circuit can only  be built from the terminal interface  to the
  host interface.





  2.6.1.9  Auxiliary Circuit Request (08)


  This message is not supported by the SDLC interface.





  2.6.1.10  Pseudo-needle Reject (09)


  When this message is received from slot 0, the interface will  resend the
  Pseudo-needle Request message (07) to slot 0.





  2.6.1.11  Report Host Port Availability (0A)


  This message is  sent to slot 0  whenever the Report Host  Status message
  (04), or Extended Host Status message (10) is sent.










  50                 SDLC/QLLC External Reference Manual         QLCERS.DOC




  Technical Description                                        May 27, 1987


  2.6.1.12  Host Unacceptable (0B)


  If this message is received from slot 0, the SDLC interface will crash.





  2.6.1.13  Report Host Cost (0C)


  This message is not supported by the SDLC interface.





  2.6.1.14  No Supervisor (0D)


  This message is not supported by the SDLC interface.





  2.6.1.15  1-Down (0E)


  This message is not supported by the SDLC interface.





  2.6.1.16  Report All Hosts (0F)


  This message is not supported by the SDLC interface.





  2.6.1.17  Extended Report Host Status (10)


  This message  is sent in  place of the  Report Host Status  message (04),
  when IIX protocol  is understood by Host.  This message is sent  the same
  times the Report Host Status message (04) is sent, except it is  sent for
  all ports other than monitor.


  51                 SDLC/QLLC External Reference Manual         QLCERS.DOC




  Technical Description                                        May 27, 1987


        2.6.2  TYMNET ISIS Control and Data Messages



  The TYMNET SDLC interface  runs under TYMNET's ISIS-II  system.  However,
  not  all  of  the  ISIS  Control  message  types  are  supported  by this
  interface.


  The following  table is a  summary of ISIS  Control message usage  by the
  SDLC interface:


  TYPE    Original Usage                SDLC Usage
  (hex)
  ------------------------------------------------------------------
  00      Needle                        Needle
  9E      Detach                        Detach
  9F      Zapper                        Zapper
  A0      Apply Backpressure            Apply Backpressure
  A1      Release Backpressure          Release Backpressure
  A2      Flush Output                  Default action but not empty
                                         input buffer
  A3      Flush Input                   Default action but not empty
                                         output buffer
  A4      Black Ball                    Circuit zap and rebuild
  A5      Gray  Ball                    Circuit zap and rebuild
  A6      enter 'DEM'                   Default action (ignore)
  A7      leave 'DEM'                   Default action (ignore)
  A8      enter 'Transparency'          Default action (ignore)
  A9      leave 'Transparency'          Default action (ignore)
  AA      Green Ball                    Default action (return GB)
  AB      Red Ball                      Default action (return RB)
  AC      Yellow Ball                   Default action (return OB)
  AD      Orange Ball                   Default action (ignore)
  AE      Break                         Default action (ignore)
  AF      'Hang Up'                     Zap circuit
  B0      Query                         Default action (ignore)
  B1      Set Parameter                 Default action (ignore)
  B2      Pseudo-needle                 Pseudo-needle
  B3      Normal Logon Char.            Normal logon char.
  B4      Normal Logon Status           Normal logon status
  B5      Logon Failure                 Logon failure (recovery)
  B6      Logon Successful              Logon successful
  B7      Addendum to Account           Default action (ignore)
  B8      Super 'Hang Up'               Zap circuit
  B9      Set XMT Limit                 Default XMT limit (9Dx)
  BA      Break End                     Default action (ignore)
  BB      Zap Acknowledge               Default action (ignore)
  BC      Enter AODM                    Default action (ignore)
  BD      Leave AODM                    Default action (ignore)
  BE      Zap Reason                    Default action (ignore)
  BF      SIIX Command                  SIIX command

  52                 SDLC/QLLC External Reference Manual         QLCERS.DOC




  Technical Description                                        May 27, 1987


  C0      TIIX Command                  TIIX command
  C1-FF   Reserved                      Default action (ignore)




















































  53                 SDLC/QLLC External Reference Manual         QLCERS.DOC




  Technical Description                                        May 27, 1987


        2.6.3  TYMNET IIX Protocol



  The  SDLC  interface  supports  TYMNET  IIX  protocol.  For  the detailed
  description of  this protocol  please refer  to TYMNET  Circuit Protocol,
  Chapter 3 Interface Information Exchange in TYMNET.


  The IIX message  types are divided into  two groups: global  and dialect.
  Global  messages  are  of  a general  nature  and  are  supported  by all
  interfaces that support IIX protocol. Global messages may be sent  at any
  time even when a particular dialect is in effect.


  Dialect messages are only sent and received between interfaces which both
  support this dialect and have agreed to speak this dialect.



  An IIX command or response consists of the following:


     1.  A leading  ISIS control message  to indicate the  start of  an IIX
         message, SIIX.

     2.  The following ISIS Data  message contains 2 bytes to  indicate the
         the type of IIX message.

     3.  An optional  length field  to indicate  the size  in bytes  of the
         information field which follows.

     4.  An  optional  IIX  message  information  field  of  varying length
         depending on the IIX message type.

     5.  An  optional   ending  ISIS  control   message  to   indicate  the
         termination of an IIX message, TIIX.

















  54                 SDLC/QLLC External Reference Manual         QLCERS.DOC




  Technical Description                                        May 27, 1987


        2.6.4  GLOBAL IIX Messages



  Global IIX  messages 8082, 8083,  and 8084 are  only applicable  when the
  virtual circuit spans over more than one network.


  The current  global IIX  messages handled  by the  SDLC interface  are as
  follows:




  2.6.4.1  Select Dialect Command (8080)


  This  command  contains a  2  byte information  field  which  selects the
  dialect value. The SDLC IIX can only select the SDLC IIX dialect value of
  808A.





  2.6.4.2  Select Dialect Response (8081)


  This message is sent in response to a Select Dialect Command  (8080), and
  contains  a 2  byte  dialect value  to  indicate the  agreed  dialect.  A
  response  dialect value  of 8080  indicates that  all dialects  have been
  rejected.





  2.6.4.3  Gateway Reached Smart Host (8082)


  No  information field  is contained  in this  message. Here  'smart host'
  means the host supports IIX protocol.





  2.6.4.4  Gateway Reached Dumb Host (8083)


  No information field is contained in this message. Here 'dumb host' means
  the host cannot support IIX protocol.


  55                 SDLC/QLLC External Reference Manual         QLCERS.DOC




  Technical Description                                        May 27, 1987


  2.6.4.5  Normal Logon Status (8084)


  This IIX  message contains  an 8  bit information  field to  indicate the
  logon  status. The  format for  this status  is the  same as  in  ISIS B4
  control message.





  2.6.4.6  Resynchronize Interface Exchange (8085)


  Currently the SDLC interface does not send this message, and ignores this
  message when it is received.





  2.6.4.7  Product ID and Version (8086)


  This message contains a 4  byte information field. The first 2  bytes are
  the product ID of the sending  interface. The next 2 bytes are the  8 bit
  version and 8 bit revision numbers of the sending interface.


  The SDLC interface will respond with this message to a request product ID
  message (see next message). The product ID for the TYMNET  SDLC interface
  is 49x.





  2.6.4.8  Request Product ID and Version (8087)


  This message contains no information field. The interface  receiving this
  message  responds with  the product  ID and  version (8086)  message (see
  above message).











  56                 SDLC/QLLC External Reference Manual         QLCERS.DOC




  Technical Description                                        May 27, 1987


     2.7  Virtual Call Procedures




  The SDLC interface can originate or accept either a permanent or switched
  virtual call for each station  on an attached SDLC link.  There  are four
  possible call procedures available:

    o outgoing permanent virtual call
    o outgoing switched virtual call
    o incoming permanent virtual call
    o incoming switched virtual call


  The call procedure used for a specific station is defined in  the Tymfile
  configuration of the SDLC interface.


  The  SDLC interface  will clear  a call  only if  an  unrecoverable error
  occurs, as detailed in section Clear Procedures and Messages.


  Until  a virtual  call is  established for  a given  interface  port, all
  frames received from any attached stations are ignored.







        2.7.1  Outgoing Permanent Virtual Circuit



  The information needed to  complete a permanent virtual circuit  (PVC) is
  defined in the interface Tymfile, and includes:

    o destination and origination PVC channel
    o destination and origination host number
    o destination and origination link number
    o throughput class code in origination direction
    o throughput class code in opposite direction
    o DTE DSR status


  Note that the interface must  have a higher network host number  than the
  destination X.25 interface in order to complete the PVC connection.


  The PVC is built when  the interface initially starts running or  after a


  57                 SDLC/QLLC External Reference Manual         QLCERS.DOC




  Technical Description                                        May 27, 1987


  time delay when the PVC is  cleared.  The time delay period is  a Tymfile
  parameter.  The PVC  can be cleared  through the operations  monitor SHUT
  command.  Using the RSHUT command will allow the PVC to be re-built.


  The SDLC  interface exchanges PVC  request and confirmation  packets with
  the  X.25  interface  as  defined  by  Tymnet  X.25  PVC  network circuit
  protocol.







        2.7.2  Outgoing Switched Virtual Call



  The  call  request  packet information  needed  to  complete  an outgoing
  switched virtual call is defined in the interface's Tymfile, including:

    o called DTE address
    o calling DTE address (optional)
    o facilities (optional)
    o call user data (optional)


  The  interface builds  an  outgoing switched  virtual call  in  a similar
  manner as an outgoing permanent virtual call.  A timer is used to prevent
  the interface from flooding the network with circuit requests.


  Throughput  class  and flow  control  negotiation during  call  setup are
  subject to further study.







        2.7.3  Incoming Permanent Virtual Call



  The information needed to map an incoming PVC request to an  SDLC station
  is defined in the interface Tymfile. This information is the same  as for
  outgoing  permanent virtual circuits.  Each station which is to accept an
  incoming PVC must have defined:

    o destination and origination PVC channel
    o destination and origination host number

  58                 SDLC/QLLC External Reference Manual         QLCERS.DOC




  Technical Description                                        May 27, 1987


    o destination and origination Link number
    o throughput class code in origination direction
    o throughput class code in opposite direction
    o DTE DSR status


  When  an incoming  PVC is  detected, the  interface searches  through its
  mapping tables to identify which station is associated with the call.







        2.7.4  Incoming Switched Virtual Call



  Each station which is to accept an incoming PVC must have defined  in the
  interface  Tymfile  a  mapping  DTE address.   When  an  incoming  SVC is
  detected, the interface, using the called DTE address in the call request
  packet,  will  search its  mapping  table to  identify  which  station is
  associated with the call.


  It will be  possible to specify  the same DTE  address for more  than one
  station, thus creating a pool of available connections.  In this case, an
  incoming SVC will be matched to the first available


  Tymfile parameters  will also  specify the  DTE addresses  and facilities
  fields used  in the  call connected  packet.  Left  for further  study is
  throughpt class and flow control facility negotiation.




















  59                 SDLC/QLLC External Reference Manual         QLCERS.DOC




  Technical Description                                        May 27, 1987


     2.8  SDLC IIX Dialect Handshaking




  Once an  ISIS Pseudo-Needle  message has been  received by  the interface
  originating the circuit, and the  ISIS Needle message is received  by the
  circuit destination interface, the SDLC IIX dialect handshaking must take
  place before a PVC or SVC may be built.



  The  interface  receiving  the  Needle  responds  with  a  Select Dialect
  Command.  This  command  contains  a list  of  IIX  dialect(s)  which the
  interface can support.



  A Select Dialect Response, indicating which dialect will be used, is sent
  by the interface receiving the Select Dialect Command.



  The interface receiving the Select Dialect Response, now sends the Turkey
  Level  message,  indicating  which  turkey  level  is  supported  by  the
  interface.



  To complete the handshaking sequence, the interface receiving this Turkey
  Level message, responds with it`s own Turkey Level message.



  The interface originating the circuit is now able to initiate  either the
  PVC building procedure (see  section SDLC PVC Building Procedure)  or the
  SVC building procedure (see section SDLC SVC Building Procedure).

















  60                 SDLC/QLLC External Reference Manual         QLCERS.DOC




  Technical Description                                        May 27, 1987


        2.8.1  Select Dialect Command Message


  ----------------------------------------
  | RPORT | Length | 8081 | Dialect List |
  ----------------------------------------


                Length 
  Field         in bytes   Description
  ------------  --------   ------------------------
  Dialect List  2 X (# of  List of all IIX dialects
                dialects)  understood by interface.





        2.8.2  Select Dialect Response Message


  Select Dialect Response message format:

  --------------------------------------------
  | RPORT | Length | 8081 | Selected Dialect |
  --------------------------------------------


                   Length
  Field            in bytes  Description
  ---------------- --------  ---------------------
  Selected Dialect    2      SDLC Dialect selected.
                             (8083)





        2.8.3  Turkey Level Message


  Turkey Level message format:

  ----------------------------------------
  | RPORT | Length | C093 | Turkey Level |
  ----------------------------------------


                Length
  Field        in bytes Values       Description
  ------------ -------- ----------   ----------------------------
  Turkey Level  2      >0 for SVC   Level of IIX dialect messages
                       >1 for PVC   understood by interface.

  61                 SDLC/QLLC External Reference Manual         QLCERS.DOC




  Technical Description                                        May 27, 1987


     2.9  Circuit Building Procedures




  The SDLC interface will support two types of circuit  building processes;
  Permanent Virtual Circuit (PVC) and Switched Virtual Call (SVC).


  A PVC and  an SVC have  the same meanings  as a PVC  and SVC used  by the
  X.25/X.75 Interface, with  one acception. The SDLC  SVC will have  a pre-
  defined destination, set during system generation. Where as the X.25/X.75
  Interface allows for switching the SVC destination by the user  after the
  interface has come up. Therefore, the SDLC interface will only  support a
  permanent SVC.


  SDLC PVC Definition:   PVC building will begin  as soon as  the interface
  first comes up or after the network becomes available following  the loss
  of circuits  due to a  network outage. This  circuit will remain  until a
  network failure.  The circuit  set-up procedure is simpler than  that for
  an SVC. Less  packets are exchanged between  interfaces to set-up  a PVC.
  All level 3 packets that  deal with Call set-up (i.e. Call  Request, Call
  User Data,  etc.) or  call clearing are  not used  for PVC  building. All
  information  needed  to build  the  PVC to  the  correct  destination, is
  defined during system generation in the TYMFILE.



  SDLC SVC Definition:  Building an SVC starts  when an interface  places a
  call to the destination interface. To place a call, several  packets must
  be sent  (i.e. Send Called  Address, Send Calling  Address, etc.)  to the
  destination.  The  destination information needed  for these  packets, is
  determined at system generation in the TYMFILE.


  Now  that  the  different  types of  circuits  have  been  clarified, the
  following  sub-sections   will  describe   in  detail   circuit  building
  procedures for SDLC PVC and SDLC SVC.















  62                 SDLC/QLLC External Reference Manual         QLCERS.DOC




  Technical Description                                        May 27, 1987


     2.10  SDLC PVC Building Procedure




  After  both interfaces  have done  the IIX  Dialect handshaking  and both
  speak Turkey  Level 2 or  higher, the originating  interface sends  a PVC
  Request packet and waits for a PVC Confirmation packet.   The destination
  interface  responds   with  the   PVC  Confirmation   packet,  containing
  confirmation information.


  The originating interface is  always the interface with the  highest host
  number.







        2.10.1  PVC Request Message



  PVC Request message format:

  --------------------------------------------------------------
  | RPORT | Length | C099 | Length | Dest. Host #| Dest. Ch. # |
  --------------------------------------------------------------
  | Dest. Link # | Rcv. TPUT | Trans. TPUT | DTE Status |
  -------------------------------------------------------


               Length
  Field       in bytes  Values           Definition
  ------------ ------  ---------------- --------------------
  Length         2        8             Length of rest of message.
  Dest. Host #   2     DHOST(host #)    Destination host no.
  Dest. Ch. #    2     PVC.DCHAN(n)     Destination channel no.
  Dest. Link #   1     PVC.DLINK(n)     Destination link no.
  Rcv. TPUT      1     PVC.TTPUT(t)     Throughput class code in 
                                        reverse direction.
  Trans. TPUT    1     PVC.RTPUT(r)     Throughput class code in 
                                        this direction.
  DTE Status     1     0=up, 1=down     DTE DSR Status








  63                 SDLC/QLLC External Reference Manual         QLCERS.DOC




  Technical Description                                        May 27, 1987


        2.10.2  PVC Response Message



  PVC Response message format:

  ---------------------------------------------------
  | RPORT | Length | C09A | PVC Status | DTE Status |
  ---------------------------------------------------


             Length
  Field     in bytes Values           Definition
  ---------- ------ ---------------  ----------------
  PVC Status  1      0=confirmed      PVC built status
                     1=config. error
  DTE Status  1      0=up, 1=down     DTE DTR status





































  64                 SDLC/QLLC External Reference Manual         QLCERS.DOC




  Technical Description                                        May 27, 1987


     2.11  SDLC SVC Building Procedure




  After  both interfaces  have done  the IIX  Dialect handshaking  and both
  speak  the same  Turkey  Level 1  or higher,  the  SDLC ITF  will  send a
  sequence of  call request  IIX messages  for each  line specified  in the
  TYMFILE as an outgoing SVC.  For each line specified as an  incoming SVC,
  the SDLC ITF expects a sequence of call request IIX messages.


  The  outgoing  SVC  lines  first send  the  Called  Address  IIX message,
  followed by the Calling Address, Facility and finally the Call  User Data
  IIX messages.  The Calling  Address message  may or  may not  be included
  depending  on  whether  the  TYMFILE  has  been  set-up  to  include this
  information.   Also,  the   Facilities  message  with   Throughput  Class
  Negotiation  is  always sent.  Other  user facilities  are  only  sent if
  subscribed to.


   Once  these  messages  have been  sent,  the  interface  receiving these
  messages responds with the Call Accept IIX message.


  The incoming SVC  lines expect this exact  same sequence of  call request
  IIX messages.  Once all of  the correct messages  have been  received the
  SDLC ITF will respond with a Call Accept IIX message.


























  65                 SDLC/QLLC External Reference Manual         QLCERS.DOC




  Technical Description                                        May 27, 1987


        2.11.1  SVC Address Mapping



  This section  describes how an  incoming call (to  the SDLC ITF  from the
  network) is used to determine the destination SDLC line and  station.  It
  also explains how  the SDLC ITF sends  outgoing calls to  the destination
  X.25 link and channel.


  Incoming Calls to the SDLC ITF from X.25 ITF


  In this example,  the X.25 DTE (NPSI  or QLLC Controller)  is originating
  the call to  the X.25 ITF.  The X.25 DTE needs  to be sysgenned  with the
  called address.

  The X.25 ITF expects the  Called Address in the Call Request  packet from
  the DTE to  have a specific  format. The address  must contain a  DNIC, a
  destination  Host #,  and other  information used  by the  SDLC  ITF when
  passed in the Called Address IIX message.

  The Called Address format is as follows:
     | DNIC | 0H HH HH | LL | SS |

  where:   DNIC    2 bytes      Data Network I.D. Code
           0HHHHHH 3 bytes      Destination Host #
           LL      1 byte       line/link #
           SS      1 byte       station address/channel #


  The X.25  ITF uses the  Host #  in the Pseudo-needle  request to  build a
  ciruit to the SDLC ITF. The X.25 ITF sends the complete called address on
  this circuit in the Called Address IIX message.


  The SDLC ITF  uses the Host  #, received in  the needle, to  identify the
  destination SDLC line(s).  The called address  in the Called  Address IIX
  message, further identifies the destination line and station for the SVC.


  If the line # and station  address in the called adrress are  all zeroes,
  this means a pool of stations are being called. The first  available line
  and station with the requested Host # will be assigned as the destination
  for the SVC.


  All stations with the same host # (in a pool) must subscribe to  the same
  facilities. These  user facilities  must be  compatable with  the calling
  X.25 DTE user facilities.




  66                 SDLC/QLLC External Reference Manual         QLCERS.DOC




  Technical Description                                        May 27, 1987


  Outgoing Calls from the SDLC ITF to the X.25 ITF


  In this example,  the SDLC ITF  is originating the  call to the  X.25 DTE
  (NPSI or QLLC  Controller). The SDLC ITF  needs to be sysgenned  with the
  called address for the X.25 ITF.


  The SDLC ITF does not need all the same information in the called address
  as does  the X.25 ITF  needs to  originate a call.  However, to  make the
  calling procedure as straight forward as possible, the SDLC ITF  will use
  the same format for the called address as does the X.25 ITF.


  The SDLC ITF uses the Host #, from the HOST macro, for  the Pseudo-needle
  request. Each outgoing SVC has been sysgenned with a called address. This
  address is sent to the X.25 ITF in the Called Address IIX message  to the
  X.25 ITF.


  The X.25  ITF uses  the Host  # received  in the  Needle to  identify the
  destination  X.25  Link. The  first  available channel  on  this  link is
  assigned as the destination for the SVC. The range of  available channels
  is an X.25 ITF sysgen parameter. The called address is sent from the X.25
  ITF to the X.25 DTE in an Incoming Call Packet.


  The X.25 DTE (NPSI or QLLC Controller) must be sysgenned with  the called
  address. The X.25  DTE knows which  SVC on this  link is being  called by
  matching up the called address.
























  67                 SDLC/QLLC External Reference Manual         QLCERS.DOC




  Technical Description                                        May 27, 1987


        2.11.2  Facilities



  The SDLC ITF will support subscriptions to only the following facilities:

    o Reverse Charge
    o Throughput Clas Negotiation
    o Closed User Group


  All other facilities  received in the  facility or utilities  IIX message
  will not  be supported.  The call  will be  cleared with  the appropriate
  clear cause code  of Invalid Facility Request (code=03).


  For  a detailed  description of  supported facilities  see  the following
  sections.




































  68                 SDLC/QLLC External Reference Manual         QLCERS.DOC




  Technical Description                                        May 27, 1987


  2.11.2.1  Reverse Charge



  Reverse Charging is an optional  user facility which can be  requested by
  an incoming call for a  given virtual call.  Without this  facility being
  subscribed to or  requested, a call is  charged to the calling  ITF. This
  user  facility, if  subscribed  to and  requested, allows  the  caller to
  charge the call  to the ITF receiving  the call. See section  SVC Message
  Format-Facility for facility message format.


  The X.25 ITF is responsible for reporting all accounting  messages needed
  to charge the call to either the caller or calling DTE.



  Incoming Calls with Reverse Charge Facility


  Reverse Charge Requested -

  If  the SDLC  ITF subscribes  to  this user  facility, then  the  call is
  accepted and the call is charged to the SDLC ITF.


  If the SDLC ITF  is NOT a subscriber, then  the call is accepted  only if
  reverse charge is NOT requested. If reverse charge is requested  then the
  call is   cleared with  a clear  cause of  Reverse Charge  Acceptance Not
  Subscribed.


  Reverse Charge NOT Requested -

  If the SDLC  ITF subscribes to this  user facility, the call  is accepted
  but the caller is charged for the call.


  If the SDLC ITF  is NOT a subscriber to  this user facility, the  call is
  also accepted because reverse charge has not been  requested.  Subscribed
  (code=19).













  69                 SDLC/QLLC External Reference Manual         QLCERS.DOC




  Technical Description                                        May 27, 1987


  Incoming Calls without Reverse Charge Facility


  The SDLC ITF will always accept this call whether the SDLC ITF subscribes
  to  the Reverse  Charge  Facility or  not.  Outgoing  Calls  with Reverse
  Charge Facility


  Reverse Charge Requested -

  If the SDLC ITF subscribes to this user facility all outgoing  calls will
  use Reverse Charge a Facility with reverse charge requested.


  Reverse Charge NOT Requested -

  The SDLC ITF will never  send this user facility with reverse  charge NOT
  requested.



  SDLC TYMFILE Macros for Reverse Charge -


  CHARGE(n)

  where n = 01 for  request reverse charge accepted, 02 for  reverse charge
  NOT requested  accepted, or  03 for both  reverse charge  requestedor NOT
  requested accepted.



  X.25 TYMFILE Macros for Reverse Charge -


  CHARGE(+|-CPT,+|-RCX,+|-RCNA,+|-CPNA,+|-RCNS,+|-XCLEAR)


















  70                 SDLC/QLLC External Reference Manual         QLCERS.DOC




  Technical Description                                        May 27, 1987


  2.11.2.2  Throughput Class Negotiation



  Throughput Class negotiation is an optional user facility agreed upon for
  a period  of time  which can  be used by  a DTE  for virtual  calls. This
  facility, if subscribed to, permits negotiation, on a per call  basis, of
  the   throughput   classes.  The   throughput   classes   are  considered
  independently direction  of data transmission.   Since the  X.25/X.75 ITF
  always uses throughput class  negotiation on the network  (between DCEs),
  the SDLC ITF  will do the  same.  That is the  SDLC ITF always  uses this
  facility  when building  an  SVC and  always expects  this  facility when
  receiving an incoming call.  See section SVC Message  Format-Facility for
  facility message format.


  When building an outgoing SVC or PVC circuit , the SDLC ITF uses the TPUT
  class to gouge the circuit.


  Incoming Call with TPUT Class Negotiation

  The SDLC ITF compares the received TPUT classes in the facility parameter
  field with the defined TPUT class for the line. If the TPUT class  is too
  large (too fast),  the SDLC ITF responds  with a Call Accept  IIX message
  containing the lower accepted TPUT classes.


  If the requested  TPUT classes are smaller  or equal to the  defined TPUT
  classes on the  SDLC line, the Call  Accept IIX message will  contain the
  requested TPUT classes.


  Outgoing Calls with Throughput Class Negotiation

  The SDLC ITF  sends the Facility IIX  message with TPUT classes  for each
  outgoing SVC built. The receive and transmit TPUT classes in this message
  are defined  in the SVC.TCLASS  macro (for SVCs)  or in the  PVC.TPUT and
  PVC.RTPUT macros  (for PVCs). If  these macros are  not defined  then the
  TPUT classes are derived  from the Baud rate  on the SDLC line.   In this
  case,  the  receive and  transmit  TPUT  classes would  be  equal  in the
  Facilities message.


  After sending the last call request message (Call User Data IIX message),
  the SDLC ITF receives a  Call Accept IIX message with the  final accepted
  TPUT classes. These classes will be equal or less than the requested TPUT
  classes. Also, the transmit and receive TPUT classes may differ.






  71                 SDLC/QLLC External Reference Manual         QLCERS.DOC




  Technical Description                                        May 27, 1987


  SDLC TYMFILE Macros for TPUT Class Negotiation


  SVC.TCLASS(t,r) - for SVC lines

  PVC.TTPUT(t) - for PVC lines

  PVC.RTPUT(r) - for PVC lines


  SPEED(baud  rate) -  The baud  rate specified  by this  macro is  used to
  derive the receive and transmit TPUT classes, when the above  TPUT macros
  have not been defined.



  X.25 TYMFILE Macros for TPUT Negotiation


  TCLASS(dfttmt,dftrcv,+|-Negotiation) -  This macro specifies  the default
  transmit and  receive TPUT  classes for  the X.25  DTE, and  whether TPUT
  Class Negotiation facility is subscribed to by the X.25 DTE.
































  72                 SDLC/QLLC External Reference Manual         QLCERS.DOC




  Technical Description                                        May 27, 1987


  2.11.2.3  Closed User Group



  Closed User Group is an  optional user facility agreed upon for  a period
  of time for virtual calls.  This facility, if subscribed to,  enables the
  incoming  call from  X.25  interface belong  to  on or  more  closed user
  groups.  A closed  user group  accepts the  incoming call  from  X.25 ITF
  belonging  to  the group  to  communicate with  each  other,  but rejects
  communication with all other calls from X.25 ITF.  This user  facility is
  not sent in the  Facility message. Instead, the Utility  message contains
  all the information for the Closed User Group (CUG) Facility.  The format
  for  the Utility  message is  the  same as  the format  for  the Facility
  message.  Basically, this  facility is  made up  of a  CUG  facility code
  followed by an  interlock code (IC).  For  more details on the  format of
  this facility see section SVC Message Format - Utilities Message.


  An SDLC line may chose to subscribe to this facility be using the SVC.CUG
  statement in the TYMFILE. To define a table of valid interlock  codes for
  a group  of SDLC lines,  the SVC.CGROUP statement  is used. The  table of
  interlock codes is defined on the Group level in the TYMFILE.  Therefore,
  if an SDLC line subscribes to the CUG facility, then all  interlock codes
  defined for the Group are valid for this SDLC line.


  When an SDLC line subscribes to the CUG facility it may also subscribe to
  incoming  and/or  outgoing access.  Incoming  access allows  calls  to be
  accepted which  do not  contain the  CUG facility.  If both  incoming and
  outgoing access is subscribed to, then a CUG call with ANY interlock code
  will be accepted. If  neither incoming or outgoing access  are subscribed
  to, then only CUG calls  containing an interlock code found in  the group
  of valid interlock codes for the called SDLC line will be accepted.





















  73                 SDLC/QLLC External Reference Manual         QLCERS.DOC




  Technical Description                                        May 27, 1987


  Incoming Call without Closed User Group Facility


  This call is only accepted by  the SDLC ITF if the called SDLC  line does
  NOT  subscribe  to  CUG  facility, OR  subscribes  to  CUG  facility with
  incoming access.  In all other  cases the SDLC  ITF will clear  the call,
  with a cause code of Access Barred.


  Incoming Call with Closed User Group Facility


  This call is only accepted by the SDLC ITF in the following cases:


         Case 1. If the called SDLC line subscribes to  CUG facility
                 AND the interlock code matches.


         Case 2. If called SDLC line subscribes to CUG facility with
                 incoming AND  outgoing access. (interlock  code may
                 or may not match in this case)


                 In  all other  cases, the  call is  cleared  with a
                 Cause Code of Accessed Barred.




























  74                 SDLC/QLLC External Reference Manual         QLCERS.DOC




  Technical Description                                        May 27, 1987


  Outgoing Call without Closed User Group Facility


  The SDLC ITF will  send an SVC without  CUG facility only if  the calling
  SDLC line does not subscribe to the CUG facility.


  Outgoing Call with Closed User Group Faility


  If the calling  SDLC line subscribes to  the CUG facility, then  the call
  will always be a CUG call  with the first interlock code defined  for the
  SDLC Group.


  SDLC TYMFILE Macros used for CUG

  SVC.CUG(YES|NO,INC|blank,OUT|blank)
  SVC.CUGROUP(icodea,icodeb)


  X.25 TYMFILE Macros used for CUG

      CUG(+|-subscription,+|-incoming,+|-outgoing)
      CUGROUP(cugindex,icodea,icodeb,+|-icb,+|-ocb)





























  75                 SDLC/QLLC External Reference Manual         QLCERS.DOC




  Technical Description                                        May 27, 1987


        2.11.3  SVC Message Formats





  2.11.3.1  Called Address Message



  This  message  is always  the  first  call request  IIX  message  sent or
  received during the SVC building  process. To call a pool of  SVCs within
  the same host #, the line # and station address should both be zero.


  When  the  destination of  the  SVC is  a  SDLC ITF,  the  called address
  contains the destination line # and station address. When the destination
  is an X.25 ITF, the called address contains a link # and Channel #.
  Called Address message format:

  --------------------------------------------------------
  | RPORT | Length | C087 | No. Digits   | DNIC | Host # |
  --------------------------------------------------------
  | Line # | Station Addr. |
  --------------------------


           Length
  Field    in bytes Values               Description
  -------- -------- -----------------    ----------------------
  No. Digits  1     (No. addr. digits    No. of address digits
                    + 1) = 8
  DNIC        2     ODNIC(n)             Data Network I.D. Code
                                         (TYMNET uses 3106)
  Host #      3     DHOST(host #)        Dest. host #
  Line #      1     SVC.DLINK(n)         Dest. line # or link #
  Station     1     SVC.DCHAN(n)         Dest. station addr or
    Address                                      channel #
















  76                 SDLC/QLLC External Reference Manual         QLCERS.DOC




  Technical Description                                        May 27, 1987


  2.11.3.2  Calling Address Message



  The  SDLC ITF  currently  accepts any  calling address  received  in this
  message. For outgoing calls, the  SDLC ITF never sends a  calling address
  message.


  If the X.25 ITF  does not receive from the  DTE a calling address  in the
  call request packet, the X.25 sends a calling address message to the SDLC
  ITF anyway. This  calling address message  contains a calling  address of
  all zeroes. Since there are  no valid digits in the calling  address, the
  no. of digits (part of the message) will be equal to zero.


  Calling Address message format:

  --------------------------------------------------------
  | RPORT | Length | C088 | No. Digits | Calling Address |
  --------------------------------------------------------


         Length
  Field  in bytes Values                Description
  ------ -------- --------------------- ----------------------
  No. Digits  1       n                 No. of address digits

  Calling     n    sysgenned by         Address used to identify
    Addr.           calling DTE          the calling DTE
























  77                 SDLC/QLLC External Reference Manual         QLCERS.DOC




  Technical Description                                        May 27, 1987


  2.11.3.3  Facility


  This message is formated the same as the Utility message. There
  may be many Facility codes, followed by their parameter fields,
  in one Facility message. Not all facility codes are received in this 
  message. Facility codes which have a parameter field length greater
  than 1 are received in the Utility message (such as CUG and CUGOA).

  Facility message format:

  ----------------------------------------------------
  | RPORT | Length | C08D | Facility field length +1 |
  ----------------------------------------------------
  | Facility field length | Facility code | 
  -----------------------------------------
  | Facility Parameter Field |..........
  ----------------------------


                 Length
  Field          in bytes  Description
  ---------      --------  ----------------------
  Facility field      1    Length of rest of msg
   length + 1
  Facility field      1    Length of rest of msg
   length              
  Facility Code       1    reverse charge             = 01
                          *fast select                = 01
                           TPUT clas neg.             = 02
                          *CUG (with 1 byte parameter
                                field)                = 03
                         **CUG (with variable length 
                                parameter field)      = C3
                         **CUGOA (with outgoing
                                  access)             = C7
                          *Bilateral CUG              = 41
                          *packet size                = 42
                          *window size                = 43
                          *RPOA selection             = 44
  Facility Parameter 
  Field               1   dependent on facility code




  * These user facilities are not supported by the SDLC ITF.

  ** These user facilities are received in the Utilities message.





  78                 SDLC/QLLC External Reference Manual         QLCERS.DOC




  Technical Description                                        May 27, 1987


  2.11.3.4  Reverse Charge Facilty Parameter Field



  Facility Parameter Field Format:

  FF00 000R  
  ||      |___________ Reverse Charge bit 
  ||                   (0=not requested, 1=requested)
  ||__________________ Fast Select bit
  |                    (0=no restriction on response, 
  |                     1=restriction)
  |___________________ Fast Select bit
                       (0= not requested, 1=requested)



  The fast select facility is not supported by the SDLC ITF,  therefore the
  fast select bits should always be reset.



































  79                 SDLC/QLLC External Reference Manual         QLCERS.DOC




  Technical Description                                        May 27, 1987


  2.11.3.5  Throughput Class Negotiation Facility Parameter



  Facility Parameter Field Format:

  RRRR TTTT    where RRRR = TPUT class from called DTE
                     TTTT = TPUT class from calling DTE


  Both transmit and receive TPUT classes are BCD and are as follows:

  3 =     75 Baud
  4 =    150 Baud
  5 =    300 Baud
  6 =    600 Baud
  7 =   1200 Baud
  8 =   2400 Baud
  9 =   4800 Baud
  A =   9600 Baud
  B =  19200 Baud
  C =  48000 Baud
































  80                 SDLC/QLLC External Reference Manual         QLCERS.DOC




  Technical Description                                        May 27, 1987


  2.11.3.6  Utilities Message



  The only Utility  codes currently processed by  the SDLC ITF are  the CUG
  code (C3) and CUGOA (C7)  code. All other Utility codes are  accepted but
  ignored by the SDLCC ITF.


  Even though technically the CUG and CUGOA codes are facilities,  they are
  received in  the Utility message.  The reason for  this is  because their
  parameter fields are  of varying lengths. The  X.25 ITF only  sends those
  Facility codes which  have a parameter field  length of one byte,  in the
  Facility message.


  The Utility message  has the same format  as the Facility  message. There
  may be  many Utility codes,  followed by their  parameter fields,  in one
  Utility message.


  Utilities message format:

  -----------------------------------------------------
  | RPORT | Length | C08C | Utilitiy field length + 1 |
  -----------------------------------------------------
  | Utility field length | Utility code | 
  ---------------------------------------
  | Utility parameter field | .........
  ---------------------------

                  Length
  Field           in bytes    Description
  -------------  --------     -------------------------------------
  Utility field      1        Length of rest of msg
    length+1
  Utility field      1        Length of rest of msg
    length
  Utility code       1        *CUG code (closed user group
                               facility)                      = C3
                              *CUGOA code (closed user group
                               facility with outgoing access) = C7
  Utility parameter
  field             variable  depends on utility code, for
                              CUG or CUGOA always a 4 byte
                              interlock code

  * other codes may be received, but only these codes are processed.






  81                 SDLC/QLLC External Reference Manual         QLCERS.DOC




  Technical Description                                        May 27, 1987


  2.11.3.7  Call User Data Message



  The SDLC ITF  accepts any call user  data received in this  message.  The
  call user data is end user defined.


  Call User Data message format:

  ----------------------------------------------------------------
  | RPORT | Length | C089 | Length of data | Call user data field|
  ----------------------------------------------------------------


               Length
  Field        in bytes  Description
  ------       -------- ---------------------------------

  Length of data    1    Length of call user data field
  User Data Field   n    End user defined

































  82                 SDLC/QLLC External Reference Manual         QLCERS.DOC




  Technical Description                                        May 27, 1987


  2.11.3.8  Call Accept Message



  The SDLC ITF just accepts whatever is in the call connected field of this
  message.  When sending  this  message, the  SDLC ITF  includes  the final
  throughput classes in the  call connected field (see  section Facilities-
  Throughput Class Negotiation for TPUT class negotiation).

  Call Accept message format:

  ----------------------------------------------------------
  | RPORT | Length | C092 | Length  | Call Connected Field  |
  ----------------------------------------------------------


               Length
  Field       in bytes Description
  ----------- -------- ----------------------------
  Length         2     No. bytes in Call Connect field
  Call connect   n     see CCITT Call Connected Packet format.
   field
































  83                 SDLC/QLLC External Reference Manual         QLCERS.DOC




  Technical Description                                        May 27, 1987


     2.12  Data Transfer Procedures




  This sections describes the procedures used to exchange QLLC  packets and
  SDLC frames between the QLLC DTE and the respective attached station.


  During Data  Transfer, after  PVC or  SVC has  been built,  the following
  dialect messages may be exchanged:

      Dialect Message         Code      SVC  PVC  
      ----------------------- ------    ---  ---
      Data                    (C094)     X    X
      Reset Cause/ Diagnostic (C096)          X
      Reset Confirmation      (C091)          X
      Clear Cause/ Diagnostic (C095)     X


  Data messages may be exchanged on both an SVC and PVC. The Reset messages
  are only valid for PVC, and the Clear message is only valid for SVC.


  Interrupt  packets  are  not  allowed  on  SNA-to-SNA   connections,  and
  therefore, should never be exchanged.







        2.12.1  QLLC Data Messages and Processing



  Data  messages are  the means  of transporting  QLLC  HDLC-like commands,
  responses and information across the network. There are two types of Data
  messages; one is a Data Qualified  message (Q bit set), and the  other is
  just a Data message (Q  bit reset). Data Qualified messages  contain QLLC
  commands and responses, where  as Data messages contain the  I-field from
  the SDLC Information frame.











  84                 SDLC/QLLC External Reference Manual         QLCERS.DOC




  Technical Description                                        May 27, 1987


  2.12.1.1  Data Message Format


  Data message (Q bit = 0) format:

  -----------------------------------------------------------
  | RPORT | Length | C094 | Data Flags | Data Length | Data |
  -----------------------------------------------------------



             Length
  Field     in bytes Function
  --------- -------- ---------------------------------------
  Data Flags   1     QDRRBRRM    
                     Q= Data qualifier flag
                        (0=data, 1=command/response)
                     D= Delivery Confirmation
                        (always 0 for SNA to SNA connections)
                     M= More data flag
                        (0= no more data, 1= more data)
                     R= reserved (always 0)
  -----------------------------------------------------------
  Data Length  2     Length of rest of QLLC message.
  -----------------------------------------------------------
  Data        1-128  I-Field from SDLC Information frame.
  -----------------------------------------------------------



























  85                 SDLC/QLLC External Reference Manual         QLCERS.DOC




  Technical Description                                        May 27, 1987


  The next sub-section  describes the fields in  the Data message  and Data
  Qualified messages.





  2.12.1.2  Data Qualified Message Format



  Data Qualified message (Q bit = 1) format:

  --------------------------------------------------------
  | RPORT | Length | C094 | Data Flags | QLLC msg length |
  --------------------------------------------------------
  | QLLC Address Field    | QLLC Control Field           |
  --------------------------------------------------------
  | QXID/QTEST Information Field (optional)              |
  --------------------------------------------------------



             Length
  Field     in bytes Function
  --------- -------- ---------------------------------------
  Data Flags   1     QDRRBRRM    
                     Q= Data qualifier flag
                        (0=data, 1=command/response)
                     D= Delivery Confirmation
                        (always 0 for SNA to SNA connections)
                     M= More data flag
                        (0= no more data, 1= more data)
                     R= reserved (always 0)
  -----------------------------------------------------------
  QLLC Msg
  Length       2     Length of rest of QLLC message.
  -----------------------------------------------------------
  Data        1-128  I-Field from SDLC Information frame.
  -----------------------------------------------------------
  QLLC Address  1    Coded FF for commands, station address
                     for responses.
  -----------------------------------------------------------
  QLLC Control  1    This field contains the command/response
                     transmitted by the primary or secondary
                     link station as depicted in Table 1.
  ------------------------------------------------------------
  QXID/QTEST   1-n   This field is of variable length and 
  Information        is used to carry QXID, QTEST or QFRMR data.
  ------------------------------------------------------------




  86                 SDLC/QLLC External Reference Manual         QLCERS.DOC




  Technical Description                                        May 27, 1987


  -----------------------------------------------------------------
  | SDLC     | QLLC     | C-Field  | I-Field | Primary | Secondary|
  | Function | Control  |   Hex    | Allowed | Command | Response | 
  -----------------------------------------------------------------
  | SNRM     | QSM      |   93     |   no    |    X    |          |
  | DISC     | QDISC    |   53     |   no    |    X    |          |
  | XID      | QXID     |   BF     |   yes   |    X    |          |
  | TEST     | QTEST    |   F3     |   yes   |    X    |          |
  | RD       | QRD      |   53     |   no    |         |     X    |
  | XID      | QXID     |   BF     |   yes   |         |     X    |
  | TEST     | QTEST    |   F3     |   yes   |         |     X    |
  |*RR       | QRR      |   F1     |   no    |    X    |          |
  | UA       | QUA      |   73     |   no    |         |     X    |
  | DM       | QDM      |   1F     |   no    |         |     X    |
  | FRMR     | QFRMR    |   97     |   yes   |         |     X    |
  -----------------------------------------------------------------


       Table 1 - QLLC Control Field and SDLC Command /Response Mapping


  * RR is not sent end-to-end.
































  87                 SDLC/QLLC External Reference Manual         QLCERS.DOC




  Technical Description                                        May 27, 1987


        2.12.2  QLLC Data Message Processing



  The SDLC interface will convert between  Data messages (QLLC formated) on
  the network and  SDLC Frames on the  SDLC link. This  conversion involves
  handling some of the SDLC protocol locally (i.e. supplying Address, and a
  complete Control  byte with Ns,  Nr, and P/F  where needed),  and mapping
  SDLC  unnumbered  commands/responses  and  information  frames  into QLLC
  formated Data  messages for  end-to-end procedures  (i.e. SNRM  Frames on
  SDLC link become Data messages containing QSM command on network).











































  88                 SDLC/QLLC External Reference Manual         QLCERS.DOC




  Technical Description                                        May 27, 1987


        2.12.3  XID Procedures



  Normally, the SDLC interface  translates QXID packets to XID  frames, and
  vice versa.


  As  an option  on primary  ports,  the interface  can respond  to  a QXID
  command packets with a pre-defined QXID response packet, and not  pass on
  the QXID packet  to the attached station.   This option is  configured by
  Tymfile  statements which  define the  contents of  the  QXID information
  field.  A different QXID  configuration can be applied to  each secondary
  station.





        2.12.4  Information Frames



  SDLC  information frames  are  assembled into  X.25 data  packets  by the
  interface for transmission  over the PSN.   More Data Mark  segmenting is
  used  if  the SDLC  information  frame exceeds  the  maximum  packet size
  established during call setup.


  X.25  data packets  received  by the  interface are  assembled  into SDLC
  information frames for transmission  to the attached station.   More Data
  Mark segmenting is supported.   If the X.25 information packet  is larger
  than  the  SDLC  information  frame  maximum  size,  the  packet  will be
  transmitted in multiple SDLC information frames.





        2.12.5  Flow Control



  The  SDLC interface  uses the  RNR supervisory  frame to  flow  control a
  primary station.   Flow control occurs  due to interface  buffer resource
  limits,  network  congestion, or  because  the remote  X.25  QLLC/DTE has
  exerted flow control across its DTE/DCE interface.


  The SDLC interface will stop sending data to a secondary station when the
  SDLC acknowledgement  window is full  or an RNR  is received.   In either
  case, flow  control will  eventually propagate to  the X.25  QLLC DTE/DCE
  interface.

  89                 SDLC/QLLC External Reference Manual         QLCERS.DOC




  Technical Description                                        May 27, 1987


     2.13  Restart Procedure




  The restart procedure is  used to initialize or re-initialize  the packet
  level DTE/DCE interface. This procedure must be executed after link level
  initialization  is complete.  The DTE/DCE  interface  becomes operational
  only after  successful completion of  the restart procedure.  The restart
  procedure  simultaneously  clears  all  virtual  calls  and   resets  all
  permanent virtual circuits at the DTE/DCE interface.


  If a Restart Request packet  is received by the X.25/X.75  Interface from
  the  X-link,  it  sends   a  Reset  Cause/Diagnostic  message   or  Clear
  Cause/Diagnostic  message   across  the   network  for   a  PVC   or  SVC
  respectively.


  The X.25/X.75 Interface waits  for a Reset Confirmation message  from the
  network,  if circuit  is  PVC, before  responding  to the  X-link  with a
  Restart  Confirmation  packet. If  the  circuit is  an  SVC,  the Restart
  Confirmation packet  is sent on  the X-link as  soon as the  Clear Cause/
  Diagnostic message was sent.


  To initiate the  restart procedure, the  X.25/X.75 Interface will  send a
  Restart Indication packet  to the X-link, and  at the same time  send the
  Reset Cause / Diagnostic  or Clear Cause/ Diagnostic messages  across the
  network for a PVC or SVC respectively.


  The X.25/X.75 Interface  is now waiting  for a Reset  Confirmation packet
  from the X-link, for the restart procedure to be complete.


  Since during the restart  procedure, the only dialect  messages exchanged
  with the SDLC interface are Reset or Clear messages, the function  of the
  SDLC interface is described in the Reset and Clear procedure sections.







        2.13.1  Reset Messages and Procedures



  The Reset procedure uses two types of IIX Dialect messages;  Reset Cause/
  Diagnostic message, and Reset Confirmation message.


  90                 SDLC/QLLC External Reference Manual         QLCERS.DOC




  Technical Description                                        May 27, 1987


  2.13.1.1  Reset Cause/ Diagnostic Message Format



  Reset Cause/ Diagnostic message format:

  ----------------------------------------------------------
  | RPORT | Length | C096 | Reset Cause | Reset Diagnostic |
  ----------------------------------------------------------


                   Length
  Field           in bytes Description
  --------------- -------- ------------------------------------
  Reset Cause        1    Cause for reset. Table 2 contains the
                          reset cause codes.
  Reset Diagnostic   1    Table 3 contains the reset diagnostic
                          code which generated and sent by 
                          SDLC interface. Additional infor
                          -mation on the reason for reset. See 
                          IBM NPSI manual Appendix E and F for
                          diagnostic codes received  by SDLC
                          Interface. See Apendix A in this docuement
                          for DTE generated diagnostic codes 
                          sent by the SDLC interface.


  ---------------------------------------------------
  | Reset Cause                         Code in hex |
  ---------------------------------------------------
  | DTE Originated                           00     |
  ---------------------------------------------------
  |   Out of order                           01     |
  |   Remote procedure error                 03     |
  |   Local procedure error                  05     |
  |   Network congestion                     07     |
  |   Remote DTE operational                 09     |
  |   Network operational                    0F     |
  |   Incompatible destination               11     |
  ---------------------------------------------------


                         Table 2 - Reset Cause Codes




  ---------------------------------------------------
  | Diagnostic Code                     Code in hex |
  ---------------------------------------------------
  | REJ received, general PAD error          70     |
  | Lost data due to unavailable bufferlet   71     |
  | Timeout before message received          73     |

  91                 SDLC/QLLC External Reference Manual         QLCERS.DOC




  Technical Description                                        May 27, 1987


  |*SDLC invalid frames                      74     |
  | Received sequence error                  76     |
  ---------------------------------------------------


              Table 3 - Local procedure error's diagnostic code




  * SDLC invalid frames include:

    SNRM received from secondary station
    UI received
    Control field error
    Information field prohibited
    Message received too long
    Received message length error
    Address error



  2.13.1.2  Reset Confirmation Message Format


  Reset Confirmation message format:

  -------------------------
  | RPORT | Length | C091 | 
  -------------------------



  There are no additional fields for this message.





  2.13.1.3  Reset Procedures



  IBM SNA X.25 DTEs do  not reset virtual calls. Therefore, a  Reset Cause/
  Diagnostic message will never be received by the SDLC interface  with DTE
  originated cause code (00) on a SVC.


  The reset procedure is used to re-initialize PVCs and in so doing removes
  in each direction  of transmission all data  packets which may be  in the
  network. This procedure is  only allowed during the data  transfer state.
  The SDLC  interface will  both send and  receive Reset  Cause/ Diagnostic
  Messages.

  92                 SDLC/QLLC External Reference Manual         QLCERS.DOC




  Technical Description                                        May 27, 1987


         Case 1 -Reset Cause/ Diagnostic Message received by SDLC

         interface.


                 A Reset Cause/  Diagnostic Message received  by the
                 SDLC interface, has  either a DTE  originated cause
                 code or  DCE originated cause  code. In  both cases
                 this cause code and it's  corresponding diagnostics
                 code are not used  by the SDLC Interface.  The SDLC
                 interface responds  to the Reset  Cause/ Diagnostic
                 Message  by  putting   the  SDLC  link   in  Normal
                 Disconnect Mode (NDM).


                 After the  PVC is in  NDM, the SDLC  interface must
                 send a Reset Confirmation message to  the X.25/X.75
                 Interface.


                 For  a  table of  DCE  originated  Diagnostic codes
                 received  in the  Reset Cause/  Diagnostic message,
                 see  the   X.25/X.75  Interface   Reference  manual
                 chapter on Cause and Diagnostic values.


                 For  a  table of  DTE  origintaed  Diagnostic codes
                 which may  be received by  the SDLC interface  in a
                 Reset Cause/ Diagnostic  message, see the  IBM NPSI
                 General Information Manual Appendix F.



         Case 2 - Reset  Cause/  Diagnostic  Message  sent  by  SDLC
                 Interface.



                 The   SDLC  interface   will  initiate   the  reset
                 procedure for  both DTE  and DCE  generated errors.
                 DTE  generated  errors  are  SDLC  protocol  errors
                 detected on the SDLC link. DCE errors are all other
                 types  of  errors such  as  PVC  building procedure
                 errors,    and    Network    errors.     A    Reset
                 Cause/Diagnostic Message  is sent to  the X.25/X.75
                 Interface.  The reason  for the reset  is indicated
                 by the cause  and diagnostic codes included  in the
                 Reset Cause/ Diagnostic Message.


                 For   DTE   generated  errors   the   Reset  Cause/
                 Diagnostic  Messages  sent by  the  SDLC Interface,


  93                 SDLC/QLLC External Reference Manual         QLCERS.DOC




  Technical Description                                        May 27, 1987


                 always contain the  DTE generated cause  code (00).
                 The  corresponding  diagnostic code,  in  the Reset
                 Cause/ Diagnostic Message, is one of the Pad Errors
                 (112  thru  127).  Since  the  cause  code  is  DTE
                 generated,  the X.25/X.75  Interface  simply passes
                 the cause  and diagnostic  codes in  the form  of a
                 Reset Indication packet to the DTE connected to the
                 X-link.


                 For DCE generated errors the Reset Cause/Diagnostic
                 Message sent by the SDLC interface, will  contain a
                 DCE generated cause diagnostic code (non zero) from
                 Table 2  in section Reset  Cause/Diagnostic Message
                 Format.  The  corresponding diagnostic code  can be
                 found   in   the   Table   3   in   section   Reset
                 Cause/Diagnostic  Message Format  and the  IBM NPSI
                 General Information Manual Appendix E.


                 The SDLC interface may receive a Reset Confirmation
                 message  from the  X.25/X.75 Interface,  to confirm
                 receipt of the Reset Cause/ Diagnostic message.


                 For  a  table of  DTE  Originated  diagnostic codes
                 which may be sent by the SDLC interface in  a Reset
                 Cause/ Diagnostic message,  see Appendix A  in this
                 docuement.

























  94                 SDLC/QLLC External Reference Manual         QLCERS.DOC




  Technical Description                                        May 27, 1987


        2.13.2  Clear Procedures and Messages



  The only IIX Dialect message used during the clear procedure is the Clear
  Cause/ Diagnostic message.





  2.13.2.1  Clear Cause/ Diagnostic Message Format



  Clear Cause/ Diagnostic message format:

  -------------------------------------------------------------
  | RPORT | Length | C095 | Clearing Cause | Clear Diagnostic |
  -------------------------------------------------------------


                  Length
  Field          in bytes  Function
  -------------- -------- --------------------------------------
  Clearing Cause    1     Clearing cause code as indicated in 
                          Table 4 below.
  --------------------------------------------------------------
  Clear Diagnostic  1     See Table 5 for SDLC generated
                          and sent clear diagnostic code.
                          Additional information for the clear
                          cause. See IBM NPSI manual Appendix F
                          and E for diagnostic codes received by
                          SDLC interface. See Appendix A in
                          this docuement for diagnostic codes
                          sent by the SDLC interface.
  --------------------------------------------------------------

















  95                 SDLC/QLLC External Reference Manual         QLCERS.DOC




  Technical Description                                        May 27, 1987




  ----------------------------------------------------
  | Clearing Cause                       Code in hex |
  ----------------------------------------------------
  | DTE Originated                            00     |
  ----------------------------------------------------
  |   Number busy                             01     |
  |   Invalid Facility request                03     |
  |   Network congestion                      05     |
  |   Access bared                            08     |
  |   Out of order                            09     |
  |   Access barred                           0B     |
  |   Not obtainable                          0D     |
  |   Remote procedure error                  11     |
  |   Local procedure error                   13     |
  |   PROA out of order                       15     |
  |   Reverse charging not subscribed         19     |
  |   Incompatible destination                21     |
  |   Fast select acceptance not subscribed   29     |
  ----------------------------------------------------


                       Table 4 - Clearing Cause Codes




  ---------------------------------------------------
  | Diagnostic Code                     Code in hex |
  ---------------------------------------------------
  | No additional information                00     |
  | Call set-up problem                      40     |
  | Facility code not allowed                41     |
  | Facility parameter not allowed           42     |
  | Invalid called address                   43     |
  | Invalid calling address                  44     |
  | Invalid select dialect response          94     |
  | Bad turkey level                         AA     |
  | Incoming access not allowed for CUG      B7     |
  | Wrong circuit state                      BE     |
  | REJ received, general PAD error          70     |
  | Lost data due to unavailable bufferlet   71     |
  | Timeout before message received          73     |
  |*SDLC invalid frames                      74     |
  | Received sequence error                  76     |
  ---------------------------------------------------


                  Table 5 - SDLC generated diagnostic code




  96                 SDLC/QLLC External Reference Manual         QLCERS.DOC




  Technical Description                                        May 27, 1987


  * SDLC invalid frames include:

    SNRM received from secondary station
    UI received
    Control field error
    Information field prohibited
    Message received too long
    Received message length error
    Address error













































  97                 SDLC/QLLC External Reference Manual         QLCERS.DOC




  Technical Description                                        May 27, 1987


  2.13.2.2  Clearing Procedure


  The clearing procedure is only  used for SVCs. A Clear  Cause/ Diagnostic
  message  may either  be  sent or  received  by the  SDLC  interface. This
  procedure is  used to clear  a call  or to not  accept an  incoming call.
  After  the  call  is  cleared,  the  SVC  circuit  building  procedure is
  restarted.


         Case 1 - Clear Cause/  Diagnostic message received  by SDLC
                 interface.


                 The SDLC interface will put the  corresponding SDLC
                 link  in  normal disconnect  mode  (NDM)  when this
                 message  is received.  The X.25/X.75  Interface has
                 also zapped this circuit when the clear message was
                 sent. The clear cause and diagnostic codes  in this
                 message have no significance to the SDLC interface.


         Case 2 - Clear  Cause/  Diagnostic  message  sent  by  SDLC
                 interface.


                 This message is sent by the SDLC interface only for
                 SVCs, for  both DTE and  DCE generated  errors. DTE
                 generated errors are SDLC protocol  errors detected
                 on  the SDLC  link.  DCE generated  errors  are all
                 other types of  errors such as SVC  building errors
                 and network errors.


                 For   DTE  generated   errors,  the   Clear  Cause/
                 Diagnostic   message  with   the  cause   code  DTE
                 Originated (00) is sent to the X.25/X.75 Interface.
                 The diagnostic code is  one of the Pad  Errors (112
                 thru  127), see  Appendix A  and Table  4 and  5 in
                 section  Clear  Cause/Diagnostic   Message  Format.
                 Since  the  cause  code  is  DTE   Originated,  the
                 X.25/X.75  Interface simply  passes it  in  a Clear
                 Indication packet to the DTE on the X-link.


                 For DCE  generated errors, the  cause code  will be
                 from  Table 4  in section  Clear  Cause/ Diagnostic
                 Message  Format   (non  zero).   The  corresponding
                 diagnostic code  will be  one from  the Table  5 in
                 section Clear Cause/ Diagnostic Message  Format and
                 the IBM NPSI General Information Manual Appendix E.



  98                 SDLC/QLLC External Reference Manual         QLCERS.DOC




  Technical Description                                        May 27, 1987


                 The SDLC interface puts the SDLC link corresponding
                 to the cleared SVC in normal disconnect mode (NDM).
                 The SDLC interface  is responsible for  zapping the
                 circuit.


















































  99                 SDLC/QLLC External Reference Manual         QLCERS.DOC




  Technical Description                                        May 27, 1987


     2.14  Error Recovery




  SDLC interface error recovery procedures fall into two  categories, local
  and end-to-end.  Local errors are temporary in nature and handled  by the
  interface.  End-to-end errors cannot be resolved by the  interface, which
  either clears or resets the virtual call.







        2.14.1  Local Error Recovery



  The interface applies SDLC Two Way Alternate error recovery procedures to
  handle  FCS  errors  and  timeouts.  If  retry  counters  and  timers are
  exhausted then end-to-end error recovery is undertaken.



  2.14.1.1  Primary Ports


  The following table  details the actions a  primary port will  take given
  certain error conditions.

      EVENT               ACTION

      Timeouts to, CRC    Retransmit until limit reached or good
      error in, or bad    response received.  If limit reached then 
      response to any     set disconnect mode and send QDM network
      supervisory or      packet message via the circuit to its 
      unnumbered frame    corresponding secondary port.

      Timeouts to an      Poll until limit reached or response re
      information frame   received.  Retransmit unacknowledged
      with P-bit set      frames if good response, otherwise set
                          timeout mode and notify secondary port.

      CRC error in        Confirm last good frame after Final bit
      information frame   detected, or timeout then confirm with
                          RR, or send REJ.

      DM to information   Set disconnect mode, discard frame,
      frame               and notify secondary port.

      FRMR                Set timeout mode and send notification to

  100                SDLC/QLLC External Reference Manual         QLCERS.DOC




  Technical Description                                        May 27, 1987


                          secondary port.  Discard this command frame.

      Lost circuit        Send DISC and restart when circuit rebuilt.



















































  101                SDLC/QLLC External Reference Manual         QLCERS.DOC




  Technical Description                                        May 27, 1987


  2.14.1.2  Secondary Ports


  The following table details the  actions a secondary port will  take upon
  detection of an error event.

      EVENT               ACTION

      Timeout to any      Wait for retransmission, if timeout
      supervisory or      set timeout mode, notify primary port.
      unnumbered frame

      CRC error or bad    Wait for retransmission, if timeout
      response in any     set timeout mode, notify primary port.
      supervisory or
      unnumbered frame

      CRC error in        Wait for retransmission, if timeout
      information frame   set timeout mode, notify primary port.
                          Or send REJ response.

      Lost circuit        Send DISC and restart when circuit 
                          rebuilt.































  102                SDLC/QLLC External Reference Manual         QLCERS.DOC




  Technical Description                                        May 27, 1987


        2.14.2  End-to-End Error Recovery



  The  mechanism  used  to  handle  errors  beyond  the  capability  of the
  interface to  correct locally is  to clear, or  reset, the  virtual call.
  The  reset procedure  is used  for permanent  virtual circuits.   In both
  cases, the  diagnostic code is  used to indicate  the reason  for action,
  according  to the  codes specified  in  Appendix E  and F  of  IBM's X.25
  Interface  for  Attaching  SNA  Nodes  to  Packet-Switched  Data Networks
  General Information Manual.



  Events  which  will  cause  the  interface  to  use  end-to-end  recovery
  procedures include:


       o receipt of an Interrupt packet
       o receipt of a packet with the D-bit set
       o detection  of   a  primary-to-primary   or  secondary-to-secondary
         connection attempt
       o exhaustion of link retry counter and timers
       o receipt of an information  packet greater than the  maximum packet
         size established for the call
       o SDLC protocol error
       o Reset Indication on Switched Virtual Call
       o invalid protocol ID in call request call user data
       o unable to map DTE address to a station


  For outgoing PVCs and SVCs,  the station is automatically shut if  one of
  the following errors occur:


       o bad username, host number, or password
       o PVC request denied
       o SVC  call cleared  due  to bad  protocol ID,  called   DTE address
         error, or facilities mis-match















  103                SDLC/QLLC External Reference Manual         QLCERS.DOC




  Operations Support                                           May 27, 1987






  3 - Operations Support




  This section contains  information concerning the operational  aspects of
  primary  and secondary  ports  as they  pertain to  polling,  host status
  report, system monitoring, and extend DDT.







     3.1  Operating Characteristics




  A primary  feature of the  TYMNET SDLC interface  is that all  polling is
  handled locally.  A secondary port responds to polls of secondary station
  addresses on a  host link independently  of its associated   primary port
  polling  those  same  secondary  station  addresses  on  a  remote  link.
  Secondary station addresses which a  secondary port can respond to  and a
  primary port can poll are sysgenned into the interface(s).


  A primary  port also has  the capability of  mapping a  secondary station
  address into a  different address.  This is  done on a  one-to-one basis.
  Since  the SDLC  interface supports  'Multi-drop' feature,  a  TIF link's
  polling address may be internally connected through virtual circuit  to a
  HIF link with a different  polling address (For details; please  refer to
  SDLC interface sysgen manual section MAPADDR).  As an example, let us say
  that  a host  is  polling addresses  A, B,  and  C on  a  multipoint link
  connected  to  a  TYMNET  SDLC secondary  port.   The  secondary  port is
  connected by three PVCs to  three primary ports.  The first  primary port
  is sysgenned  to only  poll addresses A  and B  on its  remote multipoint
  link.  The second primary port is sysgenned to map address C into address
  A which it polls on its remote point-to-point link.  This  feature allows
  reduction of the number of host ports to support a given number of remote
  terminals.








  104                SDLC/QLLC External Reference Manual         QLCERS.DOC




  Operations Support                                           May 27, 1987


                                       +++++++++++++
                                       +   SDLC    +
                                       + INTERFACE +
                                       +    --------
               +++++++++++++           +    | PRI  | POINT-POINT
               +   SDLC    +         |------| PORT |------------
               + INTERFACE +         | +    |  1   |    LINK
               +           +         | +    --------    (A)
               --------    +         | +           +
               |      |--------------| +    --------
   MULTIPOINT  | SEC  |    +           +    | PRI  |  MULTIPOINT
  -------------| PORT |    +           +    | PORT |------------
     LINK      |  1   |---------------------|  2   |    LINK
   3 STATIONS  |      |    +           +    |      |  2 STATIONS
    (A,B,C)    |      |    +           +    |      |    (A,B)
               |      |---------------------|      |
               |      |    +           +    |      |
               --------    +           +    --------
               +           +           +           |
               +++++++++++++           +++++++++++++


































  105                SDLC/QLLC External Reference Manual         QLCERS.DOC




  Operations Support                                           May 27, 1987


     3.2  Operating Scenarios




  This  section  illustrates  operations  of  the  SDLC   Interface  during
  Initialization  and  PVC  building,  Initialization  and   SVC  building,
  transition  from Normal  Disconnect Mode  (NDM) to  Normal  Response Mode
  (NRM), Normal Response Mode, and finally transition from  Normal Response
  Mode to Normal Disconnect Mode.





        3.2.1  Initialization and PVC Building



  The following diagram is  a scenario of operations  during initialization
  and  the PVC  building  process which  goes  on between  a  incoming call
  interface  and a  outgoing call  interface.  Sup  stands for  the network
  Supervisor.


  To build a PVC the SDLC interfaces must complete the following steps:


     1.  Initialize Physical  Line - Before  trying to build  a PVC  to the
         incoming call interface, or  accepting a Needle from  the outgoing
         call interface, both interfaces  make sure the physical  lines are
         up.

     2.  Build PVC - Once the  physical lines are active, the  PVC building
         process can begin.

     3.  PVC Dialect Handshake - It is not enough for the PVC to  be built;
         both interfaces  must be able  to use the  same IIX  Dialect. This
         step also  includes making sure  the interface  configurations are
         compatible. This is done when the outgoing call interface receives
         the Call Request from the incoming call interface.


  Each of these steps is illustrated in the next 3 sub-sections.










  106                SDLC/QLLC External Reference Manual         QLCERS.DOC




  Operations Support                                           May 27, 1987


  3.2.1.1  Initialize Physical Lines



  For  PVC,  the  line  with  higher  host  number,  when  compared  to the
  destination host number, is  the outgoing line, and the  destination host
  is the incoming line.

  Secondary   PVC outgoing
  Station     Call            Comments
  --------    ---------- ------------------------------------------
          <-- DTR OFF    The PVC outgoing line drops DTR for specific
                         period of time. This insures secondary 
                         station is disconnected.

          <-- DTR ON     DTR is raised if there is no DTR/DSR hand-
                         shaking, or if there is handshaking and DSR
                         is still down, or if no handshaking and DSR
                         is up but has been dropped at least once,
                         or if timer runs out. This procedure makes
                         sure secondary is disconnected.

                         The PVC outgoing line is ready to activate
                         the circuit building process to build circuit
                         to the  destination interface. The host
                         status of this PVC line is shut, in order
                         to build circuit to the destination inter
                         -face, a shut overwrite username is required.



  Primary    PVC incoming
  Station    Call            Comments
  -------    ----------  -----------------------------------------
         <-- DTR OFF     The PVC incoming line drops DTR to insure 
                         line is disconnected.

  DSR ON -->             This step is skipped if DTR/DSR handshaking
                         is not specified for this line. Otherwise,
                         the HIF waits for DSR up before raising DTR.

         <-- DTR ON      If no handshaking, DTR is always raised. The
                         PVC  incoming line  raises DTR in this  step
                         only if not handshaking and DSR is down, or
                         DSR is  up and has been dropped at least once,
                         or time is up.

                         The PVC incoming line is ready to accept
                         Needle for this line.





  107                SDLC/QLLC External Reference Manual         QLCERS.DOC




  Operations Support                                           May 27, 1987


  3.2.1.2  Circuit Building


  Outgoing Call
  Interface            Slot 0        Supervisor
  -----------------    --------      ------------------
  Pseudo-needle
  Request (07)      -->
                    <--------------- Pseudo-needle (B2)
  Logon Char. (B3)  --------------->
                    <--------------- Host Status (B4)
  Logon Char. (B3)  --------------->
                    <--------------- Logon Success(B6)


  Comments:


  The  outgoing   call  interface  builds   a  circuit   using  destination
  information  contained in  the TYMFILE  for this  interface.  The circuit
  building process  follows the  process defined  by ISIS-II.  The username
  used by  PVC building must  have SHUT overwrite  option validated  by the
  validation group.   The outgoing  call interface is  now ready  to accept
  either PVC IIX Dialect handshaking packets or SVC IIX Dialect handshaking
  packets from the remote incoming call interface.


  Incoming call
  Interface                  Supervisor
  ----------------------     -----------
                         <-- Needle (00)
  Host Status (04/10)    -->
  Port Availability (0A) -->


  Comments:


  The incoming  call interface accepts  the Needle only  after the  line is
  active. The incoming call interface responds to the Supervisory Node with
  the Host Status, and Port Availability messages. For more  information on
  these two messages see Section 2.6.1. The incoming call interface  is now
  ready to  start either  the PVC IIX  Dialect handshaking  or the  SVC IIX
  Dialect handshaking with the remote outgoing call interface.










  108                SDLC/QLLC External Reference Manual         QLCERS.DOC




  Operations Support                                           May 27, 1987


  3.2.1.3  PVC IIX Dialect Handshaking


  Outgoing Call                      Incoming Call
  Interface                          Interface
  -------------------------------    ---------------------
                                 <-- SIIX (BF)
                                 <-- Select Dialect (8080)
                                 <-- TIIX (C0)
  Select Dialect Response (8081) -->
  Turkey Level (C093)            -->
                                 <-- Turkey Level (C093)
  PVC Request (C099)             -->
                                 <-- PVC response/confirm. (C09A)


  Comments:


  The  incoming  call interface  sends  the Select  Dialect  (8080) message
  containing a  list of IIX  Dialects which are  supported by  the incoming
  call  interface.  The  outgoing  call interface  will then  select  a IIX
  Dialect from the list and send the Select Dialect Response (8081) message
  to the incoming call interface. If none of the dialects can  be supported
  the outgoing  call interface  send back  a null  selection in  the Select
  Dialect Response (8081) message.


  The outgoing call  interface then sends  a turkey message  containing the
  turkey level. If the  incoming call interface accepts this  turkey level,
  the incoming call interface responds with a turkey level (C093) message.


  The outgoing call interface then sends PVC Request (C099) to the incoming
  call  interface. If  the incoming  call interface  caecks and  agrees the
  configuration specified in  the PVC Request, a  PVC response/confirmation
  (C09A) message with confirmed byte is returned; otherwise, a PVC response
  with  configuration  error  is  returned.   For  more  information  on  a
  particular  message  see  either Section  2.6.4  Global  IIX  Messages or
  Section 2.6.5 SDLC IIX Dialect Messages.


  Both interfaces are now in Normal Disconnect Mode (NDM).











  109                SDLC/QLLC External Reference Manual         QLCERS.DOC




  Operations Support                                           May 27, 1987


        3.2.2  Initialization and SVC Building



  The following diagram is  a scenario of operations  during initialization
  and  the SVC  building  process which  goes  on between  a  incoming call
  interface  and a  outgoing call  interface.  Sup  stands for  the network
  Supervisor.


  For SVC,  the outgoing  call or  incoming call  is determined  during the
  sysgen time.


  To build a SVC the SDLC interfaces must complete the following steps:


     1.  Initialize Physical Line - Before trying to build a SVC to the SVC
         incoming  call  interface,  or accepting  a  Needle  from  the SVC
         outgoing call  interface, both interfaces  make sure  the physical
         lines are up.

     2.  Circuit  building  -  For  information  on  circuit  building, see
         Section on Circuit Building.

     3.  SVC Dialect  Handshake - It  is not enough  for the circuit  to be
         built; both interfaces must be  able to use the same  IIX Dialect.
         This step also  includes making sure the  interface configurations
         are compatible. This is done when the SVC incoming  call interface
         receives  the  Call  Address,  Calling  Address,  User Facilities,
         Utilities,  and  Call  User  Data  from  the  SVC   outgoing  call
         interface.


  Each of these steps is illustrated in the next 3 sub-sections.



















  110                SDLC/QLLC External Reference Manual         QLCERS.DOC




  Operations Support                                           May 27, 1987


  3.2.2.1  Initialize Physical Lines


  Secondary   SVC outgoing
  Station     Call           Comments
  --------    ---------- ------------------------------------------
          <-- DTR OFF    The SVC outgoing line drops DTR for a 
                         specific period of time.  This insures  
                         secondary station is disconnected.

          <-- DTR ON     DTR is raised if there is no DTR/DSR hand-
                         shaking, or if there is handshaking and DSR
                         is still down, or if no handshaking and DSR
                         is up but has been dropped at least once,
                         or if timer runs out. This procedure insures
                         secondary is disconnected.

   DSR ON -->            The SVC outgoing line monitors DSR up  for 
                         specific period of time defined by PVCTIMER
                         before considering the line ready for SVC 
                         building.

                         The SVC outgoing line reports the host
                         answer to the SUP, and host status shows 
                         answer.



  Primary    SVC incoming
  Station    Call            Comments
  -------    ----------  -----------------------------------------
         <-- DTR OFF     The SVC incoming line drops DTR to insure 
                         line is disconnected.

  DSR ON -->             This step is skipped if DTR/DSR handshaking
                         is not specified for this line. Otherwise,
                         the SVC incoming line waits for DSR up
                         before raising DTR.
       
         <-- DTR ON      If no handshaking, DTR is always raised. The
                         SVC incoming line raises DTR in this step 
                         only if not handshaking and DSR is down, or 
                         DSR is up and has been dropped at least once,
                         or time is up.

  DSR ON -->             The SVC incoming line monitors DSR up for a
                         certain period of time defined by PVCTIMER,
                         before line is considered active and ready
                         to accept Needle for this line. 

                         The SVC incoming line reports host answer
                         to SUP.


  111                SDLC/QLLC External Reference Manual         QLCERS.DOC




  Operations Support                                           May 27, 1987
























































  112                SDLC/QLLC External Reference Manual         QLCERS.DOC




  Operations Support                                           May 27, 1987


  3.2.2.2  SVC IIX Dialect Handshaking


  Primary                            Secondary
  Port (TIF)                         Port (HIF)
  -------------------------------    ---------------------
                                 <-- SIIX (BF)
                                 <-- Select Dialect (8080)
                                 <-- TIIX (C0)
  Select Dialect Response (8081) -->
  Turkey Level (C093)            -->
                                 <-- Turkey Level (C093)
  Called Address (C087)          -->
  * Calling Address (C088)       -->
  * User Facilities (C08D)       -->
  * Utilities (C08C)             -->
  Call Use
  r Data (C089)          -->
                                 <-- Call Accept (C092)

  * Optional messages

  Comments:


  The  incoming  call interface  sends  the Select  Dialect  (8080) message
  containing a  list of IIX  Dialects which are  supported by  the incoming
  call  interface.  The  outgoing  call interface  will then  select  a IIX
  Dialect from the list and send the Select Dialect Response (8081) message
  to the incoming call interface. If none of the dialects can  be supported
  the outgoing  call interface  send back  a null  selection in  the Select
  Dialect Response (8081) message.


  The outgoing call  interface then sends  a turkey message  containing the
  turkey level. If the  incoming call interface accepts this  turkey level,
  the incoming call interface responds with a turkey level (C093) message.


  The  outgoing  call interface  then  sends the  following  messages: Call
  Address (C087) message,  Calling Address (C088) message,  User Facilities
  (C08D)  message,  Utilities (C08C)  message,  and Call  User  Data (C089)
  message.  If  the  incoming  call  interface  accepts   this  information
  contained  in the  messages mention  above, the  incoming  call interface
  responds with a Call Accept (C092) message; otherwise a Call Clear (C095)
  message (with cause code  = imcompatible destination) is returned  to the
  outgoing call interface.   For  more information on a  particular message
  see Section SVC message formats.


  Both interfaces are now in Normal Disconnect Mode (NDM).



  113                SDLC/QLLC External Reference Manual         QLCERS.DOC




  Operations Support                                           May 27, 1987


        3.2.3  Normal Disconnect Mode to Normal Response Mode



  After the PVC has been built, the secondary port and the primary port are
  both in  Normal Disconnect Mode  (NDM).  The interfaces  are now  able to
  pass  SDLC frames  between the  primary and  secondary stations.  In this
  mode, only some SDLC  unnumbered commands and responses are  sent end-to-
  end. These frames are SNRM, UA,  XID, FRMR, DM, DISC, and TEST.  For more
  information  on  when  during  NDM  these  frames  are  sent  end-to-end,
  reference Section entitled End-to-End Procedures.


  It is  only after  both interfaces  have gone  into Normal  Response Mode
  (NRM), that  SDLC Information frames  are sent end-to-end.  The following
  diagram illustrates the transformation from NDM to NRM.


    Secondary    Primary              Secondary           Primary
    Station      Port                 Port                Station
  ----------     ----------------     ------------------  -------
                                                         <-- SNRM
                                  <-- Data Packet (QSM)   
             <-- SNRM
          UA -->
                 Data Packet (QUA)-->
                                                       UA -->
  ---------------------------------------------------------------



   After receiving the SNRM  frame from the primary station,  the secondary
  port sends a Data Packet, with Q bit set, containing the QSM command code
  to the  primary port. The  secondary port is  waiting for a  QUA response
  from the remote primary port.


  Once the secondary port receives  the UA response from the  primary port,
  the UA is sent  to the primary station and  the secondary port is  now in
  NRM.


  The primary port, sends the SNRM received from the secondary port  to the
  secondary station.  The primary  port is still  in NDM  waiting for  a UA
  response frame from the secondary station.


  Once  the  primary port  has  received  the UA  response  frame  from the
  secondary station, the  primary port is in  NRM. The primary port  send a
  Data Packet,  with Q  bit set, containing  the QUA  response code  to the
  secondary port.



  114                SDLC/QLLC External Reference Manual         QLCERS.DOC




  Operations Support                                           May 27, 1987


        3.2.4  Normal Response Mode (NRM)



  In this mode the secondary  port and the primary port will  exchange both
  SDLC unnumbered and  information frames end-to-end. For  more information
  on  end-to-end procedures  see Section  End to  End Procedures.  For more
  information on local procedures (i.e. Nr, Ns and P/F), see  Section Local
  Procedures.


  A typical Normal  Resonse Mode scenario  is illustrated in  the following
  diagram.


  Secondary              Primary         Secondary      Primary
  Station                Port            Port           Station
  ------------------     ----------      -----------    -------

                    <--20,RR P(0)
  20,I(0)-F(0),info1-->
                       Data Packet-->
                         (info1)
  20,I(1)-F(0),info2-->                40,I(0),-F(0)-->
             RR F(0)-->                      RR F(0)-->
                    <--20,RR P(2)                 <--40,RR P(1)

                       Data Packet 
                         (info2)  -->
                                       40,I(1)-F(0)-->
                                            RR F(0)-->
          20,RR F(0)-->                           <--40,I(0)-P(2),
                                                      info1
                                                  <--RR P(2)
                                        40,RR F(1)-->
                                  <--Data Packet
                                      (info1)       
                    <-- 20,I(0)-P(2)
                    <-- RR P(2)
  -----------------------------------------------------------------

  In this diagram -F indicates  Final bit reset. The secondary  station has
  an  address of  20 and  the primary  station has  an address  of  40. The
  secondary port sets the Final bit when there are no more frames  to send.
  Only the information field from  the I-frame is sent across  the network.
  All other fields are supplied locally, by port transmitting to primary or
  secondary station.


  In NDM, TIR.LN controls how long an SDLC primary or secondary  port waits
  for an I-frame from the network before deciding whether to send an  RR or
  RNR to external stations (for detail, please refer to sysgen  TIR timer).


  115                SDLC/QLLC External Reference Manual         QLCERS.DOC




  Operations Support                                           May 27, 1987


  when an RR or RNR is first received from a secondarystation,  the primary
  port primary  port will  delay POLLTIM time  before gointg  into transmit
  mode for that station (for detail, please refer to sysgen POLLTIM).





        3.2.5  Normal Response Mode to Normal Disconnect Mode-NDM



  Both  the Host  Interface and  Terminal Interface  will remain  in Normal
  Response Mode (NRM), untill one of the following conditions occurs:


     1. Secondary station sends a DM or RD to the primary port.

     2. Primary station sends a DISC to the secondary port.

     3. Primary station sends UA, FRMR, or DM to the secondary port.



  A typical transformation from NRM to NDM is illustrated below.


  Secondary Primary            Secondary              Primary
  Station   Port               Port                   Station
  -----    ----------------    ------------------     --------
   RD  -->
       <-- RR 
           Data Packet (QRD) -->
                                RD                 -->
                                                   <-- DISC
                            <-- Data Packet (QDISC)
       <-- DISC
   DM  -->
           Data Packet (QDM) -->
                                                DM -->














  116                SDLC/QLLC External Reference Manual         QLCERS.DOC




  Operations Support                                           May 27, 1987


     3.3  Host Status Report




  The SDLC  will report  host status  to the  supervisor whenever  the host
  status changes. Host status depends on whether the circuit is PVC or SVC.


  If the host has  only SVC lines, whenever the  DSR signal of any  line is
  detected up, the host will  report host answer to SUP;  otherwise, report
  host down.


  If the  host has PVC  lines only,  the host will  not report  host answer
  until any station on the PVC lines goes into NRM; otherwise the host will
  always show shut.


  If both PVC  lines and SVC  lines are genned  with the same  host number,
  then the host  status will show  answer if either  the DSR signal  of SVC
  line is up, or any station of PVC line goes into NRM. If neither  the DSR
  signal of any SVC line is detected up, nor any station of PVC line  is in
  NRM, then the initialization state of the host status is shut.






























  117                SDLC/QLLC External Reference Manual         QLCERS.DOC




  Operations Support                                           May 27, 1987


     3.4  Monitoring and Control




  Each SDLC  interface incorporates a  system monitor.  A  network operator
  can log into this monitor  to display the status, loading,  and exception
  conditions of each physical link attached to the interface.


  Other  information available  includes status  of network  logical links,
  interface revision level,  and the last crash  code and time.   A network
  operator  can  also  issue  diagnostic  commands  to  isolate  data  link
  problems.


  The commands needed to display and change SVC parameters, PVC parameters,
  and exception conditions  require further study.  The  following sections
  describe the system monitor in more detail.







        3.4.1  Logging into the System Monitor



  A  unique host  number is  used  in each  SDLC interface  for  the system
  monitor.  Users with the appropriate network validation and  the username
  genned in the MGOODGUY macro of  the SDLC tymfile can log into  this host
  number  and  access  the  system  monitor.  Each  user  is   granted  the
  authorization level  during the  SDLC interface sysgen.   If the  user is
  granted with the lower authorization  level, this user is not  allowed to
  use all the CHANGE commands of the system monitor. If the user is granted
  with the higher authorization level,  this user can use all  the commands
  of the system monitor.  Only one user with the same username can log into
  the system monitor, if the username is specified in the MGOODGUY  list of
  the SDLC interface tymfile only once.  Do not use NAD to log  into system
  monitor. When using Nad a double echo appears at users  terminal.  Either
  log in directly, or use MUX or AUXIO.  The system monitor  will initially
  prompt the user with:


  SDLC Interface Monitor

  Enter Terminal Type, 0=TTY, 1=HP, 2=ADM.
  >_




  118                SDLC/QLLC External Reference Manual         QLCERS.DOC




  Operations Support                                           May 27, 1987


  Three types of terminals are  supported by the system monitor,  low speed
  hard-copy  terminals, Tymshare  Model 444  (HP), and  Tymshare  Model 425
  (ADM-1A).  The 0=TTY mode really is the LINE mode which will  display the
  slot status by scrolling. Even  with a Tymshare Model 444  (HP) terminal,
  the user still can  select 0 if the users  prefers to have a  normal line
  mode.  However, the selection of 1 or 2 must be really for that paticular
  type  of  terminal,  otherwise  the  displayed  information  will  not be
  readable.  To select a terminal  type, the user enters the  terminal type
  followed  by a  carriage  return.  The  system monitor  then  outputs the
  Interface Status Display until a  command is issued or the  operator logs
  off.  The Interface Status Display consists of:


     o   header line, with SDLC interface ID, Node number, and Slot number

     o   detail line, with interface version number, time the slot was last
         started, the crash count, and the last crash code

     o   the command prompt ">"

      >  The system monitor uses ">" for the command prompt.
      >  Commands can be entered in either upper or lower case.
      >  Command abreviations may be entered.
      >  Control A can be used to delete the last character entered.
      >  Control Q or Escape can be used to delete the whole line.
      >  A command is executed when a carriage return is entered.
      >  To terminate a display, escape is entered to redisplay prompt.







        3.4.2  DISPLAY Commands


  All display commands may be issued by entering either  "DISPLAY", "DISP",
  or "D", as  the first argument of  the command. For example,  the display
  host command my be issued using anyone of the following formats:

       DISPLAY HOST (cr)
       DISP HOST (cr)
       D HOST (cr)
       DISPLAY H (cr)
       DISP H (cr)
       D H (cr)







  119                SDLC/QLLC External Reference Manual         QLCERS.DOC




  Operations Support                                           May 27, 1987


  3.4.2.1  DISPLAY HOST


  SYNTAX: DISPLAY HOST(cr)


  ABBREVIATED SYNTAX: D H(cr) o


  This command lists  the status of all  hosts in this interface.  For each
  host, this includes:

   o HOST     host number
   o TYPE     host type (monitor or SDLC)
   o STATUS   host status,
              values for STATUS are as follows:
                > HANS  host answered
                > HDWN  host down
                > HSHT  host shut
   o HMPT     total number of ports available
   o HSPT     number of ports in shut state
   o HUPT     number of ports in use
   o HAPT     number of ports in active state
   o HFPT     number of free ports


  * HUPT, HAPT and  HFPT are accurate for  op moniotr hosts and  hosts with
  incoming circuits only.





  3.4.2.2  DISPLAY CONFIG


  SYNTAX: DISPLAY CONFIG [line](cr)


  ABBREVIATED SYNTAX: D CONF [line](cr), or D C [line](cr)


  This command lists the configuration  data for all or a single  line.  If
  the line  number is  not specified, then  all lines  are listed  with the
  following information:

   o LINE #    line number
   o STATUS    line status,
               values for STATUS are as follows:
                 > OINI   outging line at initialization state
                 > ODWN   outgoing line at down state
                 > OWUP   outgoing line waiting for DTR up
                 > OCKT   outgoing line ready to build ckt

  120                SDLC/QLLC External Reference Manual         QLCERS.DOC




  Operations Support                                           May 27, 1987


                 > OACT   outgoing line active
                 > OTRM   outgoing line in terminated state
                 > OSHT   outgoing line shut
                 > OTRN   outgoing line at shut transition state
                 > ORST   outgoing line reset (PVC only)
                 > IINI   incoming line at intitialization state
                 > IDWN   incoming line at down state
                 > IWUP   incoming line waiting for  DTR up
                 > IRDY   incoming line ready to accept logon
                 > IACT   incoming line active
                 > ITRM   incoming line in terminated state
                 > ISHT   incoming line in shut state
                 > ITRN   incoming line in shut transition state
                 > IRST   incoming line reset (PVC only)
                 > HUKN   unknown state
   o HOST #    host number (if any)
   o MSTN      total number of stations
   o SSTN      current number of shut stations
   o ASTN      current number of active stations (incoming circuits only)
   o PVC       SVCIN, SVCOUT, PVCIN, or PVCOUT
   o ACLNK     link type,
               values for ACLNK are as follows:
                 > HP  half-duplex, point-to-point
                 > HM  half-duplex, multi-point
                 > FP  full-duplex, point-to-point
                 > FM  full-duplex, multi-point
   o MFM       maximum frame size
   o WDW       maximum window size
   o DT/SR     DTR/DSR signalling option
   o R/CTS     RTS/CTS signalling option
   o VTAM      use VTAM





  3.4.2.3  DISPLAY STAT Command


  SYNTAX: DISPLAY STAT [line] [station](cr)


  ABBREVIATED SYNTAX: D S [line] [station](cr)


  This command displays statistical information for lines and stations.  If
  the station number  is omitted, then statistics  for all stations  on the
  specified  line  is displayed.   If  both line  and  station  numbers are
  omitted,  then  statistics  for  all  lines  and  stations  is displayed,
  including:

   o LINE #       line number
   o LINE STATUS  line status,

  121                SDLC/QLLC External Reference Manual         QLCERS.DOC




  Operations Support                                           May 27, 1987


                  values for LINE STATUS are as follows:

                    > OINI   outging line at initialization state
                    > ODWN   outgoing line at down state
                    > OWUP   outgoing line waiting for DTR up
                    > OCKT   outgoing line ready to build ckt
                    > OACT   outgoing line active
                    > OTRM   outgoing line in terminated state
                    > OSHT   outgoing line shut
                    > OTRN   outgoing line at shut transition state
                    > ORST   outgoing line reset (PVC only)
                    > IINI   incoming line at intitialization state
                    > IDWN   incoming line at down state
                    > IWUP   incoming line waiting for  DTR up
                    > IRDY   incoming line ready to accept logon
                    > IACT   incoming line active
                    > ITRM   incoming line in terminated state
                    > ISHT   incoming line in shut state
                    > ITRN   incoming line in shut transition state
                    > IRST   incoming line reset (PVC only)
                    > HUKN   unknown state

   o RCV          total number of received frames since sta



   o XMT          total number of transmitted frames since
                  starting
   o REJ          number of frames rejected since starting
   o TIMOUT       number of timeouts occurring since starting
   o STATION #    relative station number
   o POLLING_ADDR station address
   o CKT_STS      station circuit status,
                  values for CKT_STS are as follows:

                    > COSHUT outgoing ckt shut
                    > COCLRD outgoing ckt cleared
                    > COREDY outgoing ckt ready to build circuit
                    > COCLRN outgoing ckt clearing
                    > COWPND outgoing ckt waiting for pseudo-needle 
                             response
                    > CONTLG outgoing ckt sending network logon
                    > CODLSD outgoing ckt waiting for select
                             dialect command
                    > CODLTK outgoing ckt waiting for turkey
                             response
                    > COCLHS outgoing ckt waiting for call accept
                             (SVC only)
                    > CODTXR outgoing ckt in data transfer
                    > COWPCF outgoing ckt waiting for PVC 
                             confirmation (PVC only)
                    > COWRST outgoing ckt waiting for reset up
                             (PVC only)
                    > CISHUT incoming ckt shut
                    > CICLRD incoming ckt cleared
                    > CIREDY incoming ckt ready to accept needle

  122                SDLC/QLLC External Reference Manual         QLCERS.DOC




  Operations Support                                           May 27, 1987


                    > CICLRN incoming ckt clearing
                    > CIDLSD incoming ckt waiting for select  
                             dialect response
                    > CIDLTK incoming ckt waiting for turkey level
                    > CITKST incoming ckt sent turkey, waiting for
                             PVC request (PVC only)
                    > CICLGA incoming ckt waiting for calling
                             address (SVC only)
                    > CICLSF incoming ckt waiting for facility 
                             message (SVC only)
                    > CICLUS incoming ckt waiting for call user
                             data (SVC only)
                    > CIDTXR incoming ckt in data transfer

   o LINK_STS     link protocol status,
                  values for LINK_STS are as follows:

                    > PNRR  protocol in NRM rcv state
                    > PNRX  protocol in NRM xmt state
                    > PNRS  protocol in NRM supervisor state
                    > PNDM  protocol in NDM
                    > PWNR  protocol in waiting NRM state
                    > PWND  protocol in waiting NDM state
                    > PHLT  protocol in halt state
                    > PCLR  protocol in clear state
                    > PTER  protocol in terminate state

  o RCV           number of receive frames for this station
  o XMT           number of transmit frames for this station





  3.4.2.4  DISPLAY LOGON Command


  SYNTAX: DISPLAY LOGON [line] [stations](cr)


  ABBREVIATED SYNTAX: D LOGN [line] [stations](cr), or
                      D L [line] [stations](cr)


  This  command displays  PVC and/or  SVC logon  information for  lines and
  stations.  If the station  number is omitted, then logon  information for
  all stations on  the line is displayed.   If the line number  is omitted,
  then all logon information is displayed, including:

   o LINE #     line number
   o STN #      station number
   o CU_ADDR    physical control unit address
   o MAP_ADDR   mapping control unit address

  123                SDLC/QLLC External Reference Manual         QLCERS.DOC




  Operations Support                                           May 27, 1987


   o USER-NAME  username (outgoing lines only)
   o HOST-ID    logon host number (outgoing lines only)
   o PASSWORD   password (outgoing lines only)





  3.4.2.5  DISPLAY EIA Command or DISPLAY RSC Command


  SYNTAX: DISPLAY EIA (or RSC) [line](cr)


  This command display EIA RS-232-C exectrical signal status - on or  off -
  for  lines.   If  the  line number  is  omitted,  then  the EIA/RSC-232-C
  information for all the lines within this slot is displayed, including:

   o  LINE =    line number
   o  DTR =     Data Terminal Ready (DTR) signal = ON or OFF
   o  DSR =     Data Set Ready (DSR) signal = ON or OFF
   o  RTS =     Request To Send (RTS) signal = ON or OFF
   o  CTS =     Clear To Send (CTS) signal = ON or OFF
   o  TX  =     Transmit Data = ON or OFF
   o  RX  =     Receive Data = ON or OFF







  3.4.2.6  DISPLAY FACILITY


  SYNTAX: DISPLAY FACILITY [line](cr)


  ABBREVIATED SYNTAX: D FAC [line](cr), or D F [line](cr)


  This command lists the facility data which are subscribed by all SVC or a
  single SVC line. For PVC lines use the DISPLAY PVC command.  If  the line
  number is  not specified, then  all lines are  listed with  the following
  information:

   o GROUP #   group number
   o LINE #    line number
   o CKT_TYP   circuit typ,
               value for CKT_TYP are as follows:

                 > PVCOUT  PVC outgoing call
                 > PVCIN   PVC incoming call

  124                SDLC/QLLC External Reference Manual         QLCERS.DOC




  Operations Support                                           May 27, 1987


                 > SVCOUT  SVC outgoing call
                 > SVCIN   SVC incoming call

   o TCLASS    throughput class negotiation subscription
               (SUB or no)
   o XMT       value of transmit throughput class(3-12)
   o RCV       value of receive throughput class (3-12)
   o CHARGE    reverse charge subscription(SUB or no)
   o RQ        reverse charge requested subscription(SUB or no)
   o NRQ       reverse charge not requested subscription
               (SUB or no)
   o CUG       close user group subscription(SUB or no)
   o INC       incoming call access subscription(SUB or no)
   o OUT       outgoing call access subscription(SUB or no)





  3.4.2.7  DISPLAY CALLED ADDRESS


  SYNTAX: DISPLAY CALLED [line] [station](cr)


  ABBREVIATED SYNTAX: D CALD [line] [station](cr), or
                      D CL [line] [stations](cr)


  This command displays the called address for SVC lines and  stations.  If
  the station number  is omitted, then  called address information  for all
  stations on the specified SVC line is displayed. If both line and station
  numbers are omitted,  then called address  information for all  lines and
  stations is displayed, including:

   o LINE #    line number
   o STN #     station number
   o CKT_TYP   circuit type, please refer to (DISPLAY FACILITY)
   o CALLED_ADDRESS  called address defined by sysgen





  3.4.2.8  DISPLAY CUG


  SYNTAX: DISPLAY CUG [group](cr)


  ABBREVIATED SYNTAX: D CUG [group](cr)



  125                SDLC/QLLC External Reference Manual         QLCERS.DOC




  Operations Support                                           May 27, 1987


  This command displays the cug  interlock code for all or a  single group.
  If the group number is not specified, then all groups are listed with the
  following information:

   o GROUP #   group number
   o LINE #    line number
   o CUGGROUP  cug interlock code





  3.4.2.9  DISPLAY PARAMETER Command


  SYNTAX: DISPLAY PARAMETR(cr)


  ABBREVIATED SYNTAX: D P(cr) or D PRM(cr)


  This command displays the  values of the internal function  parameters of
  this slot monitor.  Currently, the displayable parameters are as follows:

   o  REFRESH    refresh mode is either ON or OFF

   o  INTERVAL   the current setting for the refresh interval





  3.4.2.10  DISPLAY PVC COMMAND


  SYNTAX: DISPLAY PVC [line] [stations](cr)


  ABBREVIATED SYNTAX: D PVC [line] [stations] (cr)


  This command displays the  permanent virtual circuit information  for PVC
  incoming (PVCIN) and  PVC outgoing (PVCOUT)  lines and stations.   If the
  station  number is  omitted, then  PVC information  is displayed  for all
  stations on that line. If the line and station numbers are  omitted, then
  the  PVC  information  for  all  PVC  lines  and  stations  is displayed,
  including:

  o LINE #       line number
  o STN #        station number
  o CKT_TYP      circuit type (PVCIN, PVCOUT, SVCIN, or SVCOUT)
  o DHOST        destination host number (DHOST macro)
  o DLINE        destination line number (PVC.DLINE macro)

  126                SDLC/QLLC External Reference Manual         QLCERS.DOC




  Operations Support                                           May 27, 1987


  o DCHAN        destination channel number (PVC.CHAN macro)
  o XTPUT        tranxmit throughput negotitaion value 
                 (PVC.TTPUT macro)
  o RTPUT        receive throughput negotiation value 
                 (PVC.RTPUT macro)








        3.4.3  SHUT Command


  SYNTAX: SHUT [line] [station](cr)


  ABBREVIATED SYNTAX: S [line] [stations](cr)


  This command  is used  to shut  a station  on a  particular line.   If no
  station is specified then all stations on a line are shut.  If no line is
  specified then all stations on all lines are shut.







        3.4.4  RSHUT Command



  SYNTAX: RSHUT [line] [station](cr)


  ABBREVIATED SYNTAX: RSHT [line] [stations](cr), or
                      R [line] [stations](cr)


  This  command  is  used to  remove  a  shut station.   If  no  station is
  specified then all shut stations on the specified line are activated.  If
  no line is specified then all shut stations on all lines are activated.








  127                SDLC/QLLC External Reference Manual         QLCERS.DOC




  Operations Support                                           May 27, 1987


        3.4.5  CHANGE Commands


  All change commands may be issued by entering either "CHANGE", "CHNG", or
  "C", as the first argument  of the change command. For example,  to issue
  the change logon command one of the following commands may be entered:
            CHANGE LOGON
            CHNG LOGON
            C LOGON
            CHANGE L
            CHNG L
            C L





  3.4.5.1  CHANGE LOGON Command


  SYNTAX: CHANGE LOGON [line] [station](cr)


  ABBREVIATED SYNTAX: C L [line] [station](cr)
                      C LOGN [line] [station] (cr)


  This command is  used to change the   logon information for  a particular
  outgoing station.  The line  and station number must be  specified.  Once
  the  command is  executed, the  system monitor  will display  the current
  logon information (see DISPLAY LOGON) and prompt for the new logon string
  records. The format of each logon string record is: USERID:HOST#;PASSWORD
  or  USERID:HOST#  or  USERID.   For  logon  going  through  gateways, the
  appropriate number of  logon string records  must be entered.   Once this
  information is  entered, the  system monitor will  display the  new logon
  information.





  3.4.5.2  CHANGE STATION POLLING ADDRESS Command


  SYNTAX: CHANGE ADDR [line] [station] [address](cr)


  ABBREVIATED SYNTAX: C A [line] [station] [address](cr)


  This command is used to assign  a new polling address for a station  on a
  link. The  address must be  entered in hexadecimal  format. Once  the new


  128                SDLC/QLLC External Reference Manual         QLCERS.DOC




  Operations Support                                           May 27, 1987


  address  has  been  entered,  the system  monitor  will  display  the new
  address.  (see DISPLAY LOGON )


  The same  interface port  can be connected  to different  external system
  (but the primary/secondary stations relationship must be still preserved)
  without re-assembling (i.e. re-system-generation) of the slot code.





  3.4.5.3  CHANGE STATION CALLED ADDRESS Command


  SYNTAX: CHANGE CALLED [line] [station] [called address](cr)


  ABBREVIATED SYNTAX: C CALD [line] [station] [called address](cr)


  This command is used to assign  a new called address for a station  on an
  SVC link. The address must be entered using the same format as the called
  address during sysgen.


  Once this information is entered, the system monitor will display the new
  called address (see DISPLAY CALLED).





  3.4.5.4  CHANGE LOGON DESTINATION STATION ADDR Command


  SYNTAX: CHANGE DADDR [line] [station] [address](cr)


  ABBREVIATED SYNTAX: C DA [line] [station] [address](cr)


  This command is  used to assign a  new destination station address  for a
  particular station.  This information  is required  after the  circuit is
  built from the originate interface to the destination interface to attach
  the  circuit  to  the  desired  station  on  the  destination  interface,
  especially when the circuit logon information is changed and  a different
  destination port which may have a different station address is desired.


  The  line and  station number  must be  specified.  The  address  must be
  entered in hexadecimal format.


  129                SDLC/QLLC External Reference Manual         QLCERS.DOC




  Operations Support                                           May 27, 1987


  3.4.5.5  CHANGE LOGON DESTINATION LINE Command


  SYNTAX: CHANGE DLINE [line] [station] [desti. line](cr)


  ABBREVIATED SYNTAX: C DL [line] [station] [dest. line](cr)


  This command is  used to assign a  new destination line for  a particular
  station. This  information is required  after the PVC  is built  from the
  originate interface to the destination interface to attach the PVC to the
  desired  station  on  a particular  line  on  the  destination interface,
  especially  when the  PVC logon  information is  changed and  a different
  destination  port  which may  be  associated with  a  particular  line is
  desired.


  The line and  station number must be  specified.  The destination  line #
  must be entered in hexadecimal format.





  3.4.5.6  CHANGE LOGON DESTINATION HOST Command


  SYNTAX: CHANGE DHOST [line] [station] [desti. host](cr)


  ABBREVIATED SYNTAX: C DH [line] [station] [dest. host](cr)


  This command is  used to assign a  new destination host for  a particular
  station. This information is required after the circuit is built from the
  originate interface to the destination interface to attach the circuit to
  the desired station on a particular host on the destination interface.


  The line and  station number must be  specified.  The destination  host #
  must be entered  in decimal number, the  same as sysgen  parameter.  Once
  the  command  is  executed,  the  system  monitor  will  display  the new
  destination host information (see DISPLAY LOGON for SVC lines and DISPLAY
  PVC for PVC lines).









  130                SDLC/QLLC External Reference Manual         QLCERS.DOC




  Operations Support                                           May 27, 1987


  3.4.5.7  CHANGE LOGON DESTINATION CHANNEL Command


  SYNTAX: CHANGE DCHAN [line] [station] [desti. channel](cr)


  ABBREVIATED SYNTAX: C DC [line] [station] [dest. channel](cr)


  This command is used to assign a new destination channel for a particular
  station. This  information is required  after the PVC  is built  from the
  originate interface to the destination interface to attach the PVC to the
  desired station on a particular channel on the destination interface.


  The  line and  station number  must be  specified.  Once  the  command is
  executed, the  system monitor  will display  the new  destination channel
  information (see DISPLAY PVC).





  3.4.5.8  CHANGE XMT TPUT Command


  SYNTAX: CHANGE XTPUT [line] [station] [value](cr)


  ABBREVIATED SYNTAX: C XP [line] [station] [value](cr), or


  This command is  used to assign  a new xmt  throughput class value  for a
  station on a link. The  value must be between 3-12, which  corresponds to
  CCITT TPUT class.


  Once the command is executed, the system monitor will display the new xmt
  tput class value (see DISPLAY  FACILITY for SVC lines or DISPLAY  PVC for
  PVC lines).





  3.4.5.9  CHANGE RCV TPUT CLASS Command


  SYNTAX: CHANGE RTPUT [line] [station] [value](cr)


  ABBREVIATED SYNTAX: C RP [line] [station] [value](cr)


  131                SDLC/QLLC External Reference Manual         QLCERS.DOC




  Operations Support                                           May 27, 1987


  This command is used to assign  a new rcv tput class value for  a station
  on a link. The value  must be between 3-12, which corresponds  CCITT TPUT
  class standard.


  Once the  command is  excuted, the  system monitor  will display  the new
  receive throughput  class value  (see DISPLAY FACILITY  for SVC  lines or
  DISPLAY PVC for PVC lines).





  3.4.5.10  CHANGE WINDOW Command


  SYNTAX: CHANGE WINDOW [line] [value](cr)


  ABBREVIATED SYNTAX: C W [line] [value](cr), or
                      C WNDW [line] [value](cr)


  This command can be used to change the outstanding window frame size to a
  value less than or equal to the sysgen parameter value.  The  line number
  must be specified.  Once the command is entered, the system  monitor will
  display the new value (see DISPLAY CONFIG).





  3.4.5.11  CHANGE MAXFRAME Command


  SYNTAX: CHANGE MAXFRAME [line] [value](cr)


  ABBREVIATED SYNTAX: C M [line] [value](cr), or
                      C MFRM [line] [value](cr)


  This command  is used to  change the maximum  frame size on  a particular
  line.  The new value must be  less than or equal to the  sysgen parameter
  value.  The line number must be specified.  Once the command  is entered,
  the system monitor will display the new value (see DISPLAY CONFIG).








  132                SDLC/QLLC External Reference Manual         QLCERS.DOC




  Operations Support                                           May 27, 1987


  3.4.5.12  CHANGE RVCHARGE Command


  SYNTAX: CHANGE RVCHARGE [line] [value](cr)


  ABBREVIATED SYNTAX: C RV [line] [value](cr)


  This  command  is  used  to  change  reverse  charge  subscription  for a
  particular  line, and is valid for SVC lines only.  The new value must be
  one of the following:
   o 1       reverse charge subscribed with requested
   o 2       reverse charge subscribed with not requested
   o 3       reverse charge subscribed with both requested 
             and not requested
   o 4       reverse charge not subscribed

  The line  number must  be specified.   Once the  command is  entered, the
  system monitor will display the new value (see DISPLAY FACILITY).





  3.4.5.13  CHANGE THROUGHPUT CLASS NEGOTIATION Command


  SYNTAX: CHANGE TPUT [line] [0 or 1](cr)


  ABBREVIATED SYNTAX: C T [line] [0 or 1](cr)


  This command is used to change throughput class  negotiation subscription
  for a  particular SVC  line.  If  the value  equals 0,  the the  line you
  entered will not subscribe throughput class negotiation; if it is 1, then
  this line will subscribe  throughput class negotiation.  The  line number
  must be specified.  Once the command is entered, the system  monitor will
  display the new value (see DISPLAY FACILITY).





  3.4.5.14  CHANGE CUG SUBSCRIPTION Command


  SYNTAX: CHANGE CUG [line] [value](cr)


  ABBREVIATED SYNTAX: C CUG [line] [value](cr)


  133                SDLC/QLLC External Reference Manual         QLCERS.DOC




  Operations Support                                           May 27, 1987


  This command is  used to change the  close user group subscription  for a
  particular SVC line.  The value must be the following:
   o 0       cug not subscribed, neither incoming nor outgoing 
             access are allowed
   o 1       cug subscribed, neither incoming nor outgoing access 
             are allowed
   o 2       cug subscribed, incoming access is barred, outgoing 
             access is allowed
   o 3       cug subscribed, outgoing access is barred, incoming 
             access is allowed
   o 4       cug subscribed, both outgoing and incoming access are 
             allowed.

  The line  number must  be specified.   Once the  command is  entered, the
  system monitor will display the new value (see DISPLAY FACILITY).





  3.4.5.15  CHANGE CUGGROUP Command


  SYNTAX: CHANGE CUGGROUP [group] [index] [value](cr)


  ABBREVIATED SYNTAX: C CG [group] [index] [value](cr)


  This command is  used to change the  Cug interlock code for  a particular
  group. The group  number must be specified.   The group number,  which is
  specified,   must   have   the   close   user   group   subscribed,   and
  SVC.CGROUP(value) defined during sysgen time.  The index number points to
  each SVC.CGROUP(value), which defined during sysgen.  The new valued must
  be entered the same  format as sysgen SVC.CGROUP(value)  parameter.  Once
  the command  is entered, the  system monitor will  display the  new value
  (see DISPLAY CUG).







        3.4.6  EXIT Command


  SYNTAX: EXI(cr), EXIT(cr), BYE(cr), LOGOFF(cr), LOGOUT(cr)


  This command is used to log off from the SDLC interface system monitor.



  134                SDLC/QLLC External Reference Manual         QLCERS.DOC




  Operations Support                                           May 27, 1987


        3.4.7  REFRESH Command


  SYNTAX: REFRESH [ON][OFF](cr) or REFRESH [MIN]/[SEC] [value](cr)


  This command controls whether  the current display will refresh  with new
  information automatically, according to  the amount of time  specified in
  the sysgen parameter. The refresh interval can also be modified  by using
  the second format. The [MIN] can be used to set up interval with units in
  minutes. The [SEC] can be used to set up interval with units  in seconds.
  Both  accept  positiva intergers  as  the value  of  refresh  interval in
  minutes  or  seconds  respectively.   Entering  REFRESH   OFF  suppresses
  automatic updating of information.







        3.4.8  LOGTABLE Command


  SYNTAX: LOGTABLE(cr)


  This command is used to display  the contents of the slot log  file.  The
  slot  log  file  contains  exceptional  events  occurred  since  the slot
  initially  started. The  information displayed  from this  slot  log file
  includes:

   o  time
   o  PRODID (for SDLC , 70 in decimal)
   o  event code
   o  other information
   o  simple explaination text







        3.4.9  WHO Command


  SYNTAX: WHO(cr)


  This command is used to display those user's names that are authorized to
  log into  this slot  monitor host.  Each  name listed  on the  display is


  135                SDLC/QLLC External Reference Manual         QLCERS.DOC




  Operations Support                                           May 27, 1987


  marked with proper character  to indicate whether this user  is currently
  login into this monitor.









     3.5  Extended DDT Commands








        3.5.1  Logging into Extended DDT


  SYNTAX: ?STATUS (cr)


  The  SDLC Extended  DDT  is similar  to  Extended DDT  packages  in other
  interfaces.  The user must first log into DDT before issuing the Extended
  DDT  command  '?STATUS'.  Once   this  command  has  been   entered,  the
  acknowledgement  header will  be displayed  along with  the  Extended DDT
  prompt '>'.


  For a display of all possible commands available at this point,  the user
  need only type in '?' or 'HELP'.







        3.5.2  Extended DDT Display Ring Commands


  The commands used to display ISIS Input and Output Rings are as follows:

      DIR <ARG>        Display Dispatcher Input Ring from the
                       starting address <ARG>, or if no <ARG>
                       is defined display starts from the begin-
                       ning of the ring.

      DOR <ARG>        Display Dispatcher Output Ring from the

  136                SDLC/QLLC External Reference Manual         QLCERS.DOC




  Operations Support                                           May 27, 1987


                       starting address <ARG>, or if no <ARG>
                       is defined display starts from the begin-
                       ning of the ring.

      DR               Display Dispatcher Input and Output rings
                       continuously, until user types in `\`.







        3.5.3  Extended DDT Symbol Address Display


  Some  symbol  addresses,  commonly  needed  for  testing   purposes,  are
  available using the following command:

      SYM              Prints a list of symbol addresses, such as IRING
                       and ORING.







        3.5.4  Extended DDT Real Time SDLC Line Display


  The SCOPE command is used to display real time SDLC protocol information,
  being both transmitted and received on any user defined line.  The format
  for this command is as follows:

      SCOPE <ARG>      Display transmit and receive SDLC protocol
                       information for the line specified by
                       <ARG>. To stop the continuous display type
                       in `\`.

      Example Display:

      SCOPE 1       

      **************PRIMARY LINE*************
      MNE          ADDRESS    CONTROL   FASTC
      X SNRM         40         93      5A7370C
      R UA           40         73      5A73739
      X RR           40         11      5A73964
      R INF          40         10      5A73991
      * R SNRM       40         93      5A74041



  137                SDLC/QLLC External Reference Manual         QLCERS.DOC




  Operations Support                                           May 27, 1987


  If the line defined by <ARG> in the SCOPE command is defined as a primary
  line in  the TYMFILE  the header  will appear  as in  the example.  For a
  secondary line the header will display SECONDARY LINE instead  of PRIMARY
  LINE.


  The first field of the display is for the SDLC mneumonic.The prefix  of X
  indicates  transmit frame,  prefix R  indicates receive  frame, and  an *
  prefix indicates  this frame does  not follow the  SDLC protocol.  In the
  example,  the last  frame is  `* R  SNRM`. This  is an  error,  because a
  secondary  station is  never suppose  to transmit  command frames  to the
  primary station.


  The second and third fields are the SDLC frame address and control bytes,
  respectively, that are either received or transmitted on the SDLC line.


  The last field, FASTC, is the exact value of this clock at the  time each
  frame was transmitted or received.







        3.5.5  Extended DDT Menu Display


  There are two commands available to display the menu of possible Extended
  DDT commands:

      ?         Display menu of commands

      HELP      Display menu of commands







        3.5.6  Terminate Extended DDT Mode


  The  user  can  either  terminate Extended  DDT  by  logging  off,  or by
  returning to operator monitor.

      Q        Return to DDT

      ZZ       Log Off


  138                SDLC/QLLC External Reference Manual         QLCERS.DOC




  Operations Support                                           May 27, 1987


      EXI      Log Off





















































  139                SDLC/QLLC External Reference Manual         QLCERS.DOC




  Operations Support                                           May 27, 1987


                                    INDEX





















































  140                SDLC/QLLC External Reference Manual         QLCERS.DOC




  INDEX                                                        May 27, 1987


  ADDRESS LIMIT  21                      DISCRETRIES  @34
                                    INDEX
  ADDRESS MAPPING  104                   DISPLAY CLEDADDR COMMAND  @125
                                         DISPLAY CONFIG COMMAND  @120
                                         DISPLAY CUG COMMAND  @125
  BAUD  @72                              DISPLAY EIA OR RSC COMMAND  @124
                                         DISPLAY FACILITY COMMAND  @124
                                         DISPLAY HOST COMMAND  @120
  CALL ACCEPT MESSAGE  @83               DISPLAY LOGON COMMAND  @123
  CALL USER DATA MESSAGE  @82            DISPLAY PARAMETER COMMAND  @126
  CALLED ADDRESS  129                    DISPLAY PVC COMMAND  @126
  CALLED ADDRESS MESSAGE  @76            DISPLAY STAT COMMAND  @121
  CALLING ADDRESS MESSAGE  @77           DTE  @3
  CCITT RECOMMENDATION X.25  @1
  CHANGE CUG INTERLOCK CODE
     CMD  @134                           EIA  @15
  CHANGE CUG SUBSCRIPTION CMD  @133      EIA SIGNALS  DATA SET READY -
  CHANGE LOGON COMMAND  @128                DSR  @107, @107, @111, @111
  CHANGE LOGON DEST LINE CMD  @130       EIA SIGNALS  DATA TERMINAL READY -
  CHANGE LOGON DEST STAT ADDR               DTR  @107, @107, @111, @111
     CMD  @129                           END-TO-END PROCEDURES  @26
  CHANGE MAXFRAME CMD  @132              ERROR RECOVERY PRIMARY PORT  @100
  CHANGE RCV THROUGHPUT CLASS            ERROR RECOVERY SECONDARY
     CMD  @131                              PORTS  @102
  CHANGE RVCHARGE CMD  @133              EXIT CMD  @134
  CHANGE STAT CALLED ADDR CMD  @129      EXTENDED DDT  @13
  CHANGE STAT POLL ADDR                  EXTENDED DDT COMMANDS  @136
     CMD  @128, @131                     EXTENDED DDT COMMANDS  DISPLAY
  CHANGE THROUGHPUT CLASS                   RING  @136
     NEGOTIATION CMD  @133               EXTENDED DDT COMMANDS  EXIT EXT.
  CHANGE WINDOW CMD  @132                   DDT  @138
  CLEAR CAUSE/ DIAGNOSTIC                EXTENDED DDT COMMANDS  LOGGING
     MESSAGE  @95                           INTO EXT. DDT  @136
  CLEAR PROCEDURE  @95                   EXTENDED DDT COMMANDS  MENU
  CLOSED USER GROUP - CUG  @73              DISPLAY  @138
  CUG INTERLOCK CODE  134                EXTENDED DDT COMMANDS  REAL TIME
  CUG SUBSCRIPTION  134                     SDLC LINE DISPLAY  @137
                                         EXTENDED DDT COMMANDS  SYMBOL ADDR
                                            DISPLAY  @137
  DATA MESSAGE  @85
  DATA PACKET  @25, 115, @117
  DATA QUALIFIED MESSAGE  @86            FACILITIES  @68, @68
  DATA QUALIFIED PACKETS  @114           FACILITY MESSAGE  @78
  DCE  @71                               FRAME SIZE  132
  DESTINATION CHANNEL  131               FRAMES  DISC  @34
  DESTINATION HOST  130                  FRAMES  DM  @33, @117
  DESTINATION LINE  130                  FRAMES  FRMR  @24, @37, @45
  DESTINATION STATION ADDRESS  129       FRAMES  I-FRAME  @45, 115
  DEVICE DIRECT CHANNEL                  FRAMES  RD  @39, @117
     ATTACHMENT  12                      FRAMES  REJ  @24
  DIALECT IIX MESSAGES  CALL             FRAMES  RNR  @23
     ACCEPT  @109, @113                  FRAMES  RR  @23
  DIALECT IIX MESSAGES  CALL USER        FRAMES  SNRM  @30, @114
     DATA  @109, @113                    FRAMES  TEST  @43

  141                SDLC/QLLC External Reference Manual         QLCERS.DOC




  INDEX                                                        May 27, 1987


  FRAMES  UA  @35, @114                  INCOMING SWITCHED VIRTUAL
  FRAMES  XID  @40                          CALL  @58
  FRAMES BCN  @12                        INITIALIZE PHYSICAL
  FRAMES CFGR  @12                          LINES  @107, @111
  FRAMES DISC  @21, @117                 INTER-ISIS MESSAGES  HOST
  FRAMES DM  @21, @100                      STATUS  @108
  FRAMES FRMR  @21, @100, @116           INTER-ISIS MESSAGES  LOGON
  FRAMES I  @21                             CHAR  @108
  FRAMES RD  @21                         INTER-ISIS MESSAGES  LOGON
  FRAMES REJ  @21, @100, @102               SUCCESS  @108
  FRAMES RIM  @12                        INTER-ISIS MESSAGES  NEEDLE  @108
  FRAMES RNR  @21                        INTER-ISIS MESSAGES  PSEUDO-
  FRAMES RR  @21                            NEEDLE  @108
  FRAMES SIM  @12                        INTER-ISIS MESSAGES
  FRAMES SNRM  @21                          SIIX  @109, @113
  FRAMES TEST  @21                       INTER-ISIS MESSAGES
  FRAMES UA  @21, @116                      TIIX  @109, @113
  FRAMES UI  @12                         INTER-SLOT FORMAT AND
  FRAMES UP  @12                            PROTOCOL  @46
  FRAMES XID  @21                        INTERNAL CLOCK  15, 19
                                         INTRA-ISIS MESSAGES  @47
                                         INTRA-ISIS MESSAGES    Report
  GLOBAL IIX MESSAGES  GATEWAY              Accounting 05@49
     REACHED DUMB HOST 8083  @55         INTRA-ISIS MESSAGES  1-DOWN
  GLOBAL IIX MESSAGES  GATEWAY              0E  @51
     REACHED SMART HOST 8082  @55        INTRA-ISIS MESSAGES  AUXILIARY
  GLOBAL IIX MESSAGES  NORMAL LOGON         CIRCUIT REQUEST 08  @50
     STATUS 8084  @56                    INTRA-ISIS MESSAGES  EXTENDED
  GLOBAL IIX MESSAGES  PRODUCT ID           REPORT HOST STATUS  @108
     AND VERSION 8086  @56               INTRA-ISIS MESSAGES  EXTENDED
  GLOBAL IIX MESSAGES  REQUEST              REPORT HOST STATUS 10  @51
     PRODUCT ID AND VERSION              INTRA-ISIS MESSAGES  HOST STATUS
     8087  @56                                @108
  GLOBAL IIX MESSAGES  RESYNCHRONIZE     INTRA-ISIS MESSAGES  HOST
     INTERFACE EXCHANGE 8085  @56           UNACCEPTABLE 0B  @51
  GLOBAL IIX MESSAGES  SELECT            INTRA-ISIS MESSAGES  NO SUPERVISOR
     DIALECT  @109, @113                    0D  @51
  GLOBAL IIX MESSAGES  SELECT            INTRA-ISIS MESSAGES  PSEUDO-NEEDLE
     DIALECT COMMAND 8080  @55              REJECT 09  @50
  GLOBAL IIX MESSAGES  SELECT            INTRA-ISIS MESSAGES  PSEUDO-NEEDLE
     DIALECT RESPONSE  @109, @113           REQUEST  @108
  GLOBAL IIX MESSAGES  SELECT            INTRA-ISIS MESSAGES  PSEUDO-NEEDLE
     DIALECT RESPONSE 8081  @55             REQUEST 07  @50
                                         INTRA-ISIS MESSAGES  REPORT ALL
                                            HOSTS 0F  @51
  HALF DUPLEX LINK  20                   INTRA-ISIS MESSAGES  REPORT HOST
                                            COST 0C  @51
                                         INTRA-ISIS MESSAGES  REPORT HOST
  IIX PROTOCOL  @54                         PORT AVAILABILITY 0A  @50
  IIX PROTOCOL  GLOBAL IIX               INTRA-ISIS MESSAGES  REPORT HOST
     MESSAGES  @55                          STATUS 04  @49
  INCOMING PERMANENT VIRTUAL             INTRA-ISIS MESSAGES  REPORT TO SUP
     CALL  @58                              03  @48

  142                SDLC/QLLC External Reference Manual         QLCERS.DOC




  INDEX                                                        May 27, 1987


  INTRA-ISIS MESSAGES  RESTART-          P/F BIT  @24, 115
     REQUEST 00  @47                     PHYSICAL UNIT TYPES  2
  INTRA-ISIS MESSAGES  RESTART-          POLLING  104
     RESPONSE 01  @47                    POLLING ADDRESS  @104, 128
  INTRA-ISIS MESSAGES  TAKE OVER         POLLTIM  @115
     02  @47                             PSEUDO-NEEDLE MESSAGE  @60
  INTRA-ISIS MESSAGES  TELL HOST         PVC  @60, @62, @63, @106, 123, 128
     TIME 06  @50                        PVC REQUEST MESSAGE  @63
  ISIS CONTROL MESSAGES  @52             PVC RESPONSE MESSAGE  @64
  ISIS DATA MESSAGES  @52

                                         QLLC DATA MESSAGE PROCESSING  @84
  LOCAL PROCEDURES  @23                  QLLC DATA MESSAGES  @84
  LOGGING INTO MONITOR  @118             QUALIFIED LOGICAL LINK CONTROL  @1
  LOGICAL CHANNEL  @8
  LOGICAL UNIT TYPES  2
  LOGTABLE CMD  @135                     RCV TPUT CLASS  131
  LOOP DATA LINK  12                     REFRESH CMD  @135
                                         REPLYTO  @34
                                         RESET PROCEDURE  @90
  MULTIPOINT LINK  @8                    RETRIES  41
                                         REVERSE CHARGE  @69, 133
                                         RS-232-C/V.24  @9
  NDM SUPPORT  2                         RSHUT COMMAND   @127
  NEEDLE  @60                            RTS CONTROL  20
  NETREPLYTO  @31, 41, 43
  NORMAL DISCONNECT MODE - NDM  @116
  NORMAL DISCONNECT MODE - NDM  HOST     SDLC IIX DIALECT HANDSHAKING  @60
     INTERFACE  @28                      SELECT DIALECT COMMAND
  NORMAL DISCONNECT MODE - NDM              MESSAGE  @60, @61
     TERMINAL INTERFACE  @28             SELECT DIALECT RESPONSE
  NORMAL RESPONSE MODE - NRM  @116          MESSAGE  @60, @61
  NORMAL RESPONSE MODE - NRM  HOST       SHUT COMMAND  @127
     INTERFACE  @28                      SIO MOTHER BOARD  @9
  NORMAL RESPONSE MODE - NRM             SNRMRETRIES  31, 31
     TERMINAL INTERFACE  @29             SVC  @60, @62, @65
  NPSI  @67                              SVC ADDRESS MAPPING  @66
  NR  @24, 115
  NRM SUPPORT  2
  NRZI TRANSMISSION CODING  12           TCLASS  @72
  NS  @24, 115                           TESTRETRIES  @43
                                         THROUGHPUT CLASS NEGOTIAITON  133
                                         THROUGHPUT CLASS
  OPERATING CHARACTERISTICS  @104           NEGOTIATION  @71, @71
  OPERATING SCENARIOS  @106              TIR.LN  @115
  OPERATION SCENARIOS                    TRP.LN  @31
     INITIALIZATION  @106                TURKEY LEVEL  @60
  OPERATION SCENARIOS  PVC               TURKEY LEVEL MESSAGE  @60, @61
     BUILDING  @106
  OUTGOING PERMANENT VIRTUAL
     CIRCUIT  @57                        WHO COMMAND  @135
  OUTGOING SWITCHED VIRTUAL              WINDOW SIZE  132
     CALL  @58

  143                SDLC/QLLC External Reference Manual         QLCERS.DOC




  INDEX                                                        May 27, 1987


  XIDRETRIES  @41
  XMT THROUGHPUT CLASS  131




















































  144                SDLC/QLLC External Reference Manual         QLCERS.DOC
 q) K