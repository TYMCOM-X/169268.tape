                                                                August 27, 1987







       **********              *********       *******         *       *
           *                   *       *       *     *         * *   * *
           *                   *       *       *     *         *  * *  *
           *           ****    *******         *     *         *   *   *
           *                   *       *       *     *         *       *
           *                   *       *       *     *         *       *
           *                   *********       *******         *       *


                     GENERAL OPERATIONS MANUAL FOR PBTBOM

                               VERSION PBT 9.03




                                    TYMNET
                        NETWORK TECHNOLOGY DEVELOPMENT
                                August 27, 1987
















     ====================================================================
     |   TYMNET's proprietary rights  are included in  the information  |
     |   disclosed herein.  The recipient, by receiving this document,  |
     |   agrees  that  neither  this  document  nor   the  information  |
     |   disclosed herein nor  any part thereof shall be reproduced or  |
     |   transferred to other documents or used or disclosed to others  |
     |   for  manufacturing  or  for  any  other   purpose  except  as  |
     |   specifically authorized in writing by TYMNET.                  |
     ====================================================================





                                                                     TBOM09.DOC
                                                                August 27, 1987







                                   TABLE OF CONTENTS

        Section                                                            Page



        1.   INTRODUCTION                                                     1


        2.   General Functions                                                2
          2.1   Menu COMMAND                                                  2
          2.2   EXIT COMMAND                                                  3
          2.3   QUIT COMMAND                                                  3
          2.4   CODE COMMAND                                                  4
          2.5   STATUS COMMAND                                                6
          2.6   ACCESS TO VIEW RING COMMAND                                   7
          2.7   CRASH COMMAND                                                 8


        3.   LINE CONTROL/STATUS FUNCTIONS                                   11
          3.1   MODE COMMAND                                                 11
          3.2   QUERY LINE COMMAND                                           12
          3.3   QUERY CONTROL UNIT COMMAND                                   13
          3.4   QUERY DEVICE COMMAND                                         15
          3.5   QUERY ONLINE DEVICES COMMAND                                 17
          3.6   RESET CONTROL UNIT ERROR COUNTS COMMAND                      17
          3.7   RESTART ERRORS COMMAND                                       17
          3.8   DISPLAY ERRORS COMMAND                                       18
          3.9   DISPLAY CONTROL UNITS NOT POLLED COMMAND                     19
          3.10  DISPLAY CONTROL UNITS NOT RESPONDING COMMAND                 20
          3.11  POLL CONTROL UNITS COMMAND                                   20
          3.12  DO NOT POLL CONTROL UNITS COMMAND                            21
          3.13  KILL CIRCUITS COMMAND                                        21
          3.14  BUILD PVC CIRCUITS COMMAND                                   22
          3.15  START DEVICE OPERATION COMMAND                               22
          3.16  STOP DEVICE OPERATION COMMAND                                23
          3.17  QUERY/CHANGE INTERVAL OF REAL TIME DISPLAY COMMAND           23


        4.   NEGATIVE ACKNOWLEDGEMENT HANDLING                               24


        5.   SLOT CONFIGURATION                                              26
          5.1   DISPLAY LINE/SLOT CONFIGURATION COMMAND                      26
          5.2   QUERY/CHANGE REPORT TO SUPERVISOR'S LOG                      28


        6.   QUEUE PROCESSOR                                                 29

                                                                     TBOM09.DOC
                                                                August 27, 1987


          6.1   INPUT QUEUE                                                  30
             6.1.1    Stop IN Q Process Command                              30
             6.1.2    Query Data on IN Q Command                             30
             6.1.3    Start IN Q Process Command                             31

          6.2   TRANSMIT QUEUE                                               32
             6.2.1    Stop XMT Q Process Command                             32
             6.2.2    Query Data on XMT Q Command                            32
             6.2.3    Start XMT Q Process Command                            33

          6.3   RECEIVE QUEUE                                                34
             6.3.1    Stop RCV Q Process Command                             34
             6.3.2    Query Data On RCV Q Command                            34
             6.3.3    Start RCV Q Process Command                            35

          6.4   OUTPUT QUEUE                                                 35
             6.4.1    Stop Output Q Process Command                          35
             6.4.2    Query Data on OUT Q Command                            36
             6.4.3    Start OUT Q Process Command                            36


        7.   SYSTEM GENERATIONS                                              37
          7.1   DEFINE RETRY LIMIT FOR LINE MACRO                            37
          7.2   CHANGE RETRY LIMIT FOR LINE MACRO                            37
          7.3   DEFINE REAL TIME DISPLAY INTERVAL MACRO                      38
          7.4   DEFINE DSP ERROR REPORT TO HPAD MACRO                        38


        8.   TRACE FUNCTIONS                                                 39
          8.1   ENABLE CHARACTER PER SECOND TRACE COMMAND                    39
          8.2   DISPLAY CHARACTER PER SECOND TRACE COMMAND                   40
          8.3   ENABLE POLL RESPONSE TRACE COMMAND                           41
          8.4   DISPLAY POLL RESPONSE TRACE COMMAND                          42
          8.5   ENABLE TINE STAMP TRACE COMMAND                              42
          8.6   DISPLAY TIME STAMP COMMAND                                   43
          8.7   ENABLE RESPONSE TRACE COMMAND                                44
          8.8   DISPLAY RESPONSE TRACE COMMAND                               45
          8.9   ENABLE PROTOCOL TRACE COMMAND                                46
          8.10  DISPLAY PROTOCOL TRACE COMMAND                               47
          8.11  ENABLE DATA TRACE COMMAND                                    48
          8.12  DISPLAY DATA TRACE COMMAND                                   49
          8.13  DISABLE TRACE COMMAND                                        49


        9.   RING TRACE COMMANDS                                             50
          9.1   TRACE IRING COMMAND                                          52
          9.2   TRACE ORING COMMAND                                          52
          9.3   TRACE IRING AND ORING COMMAND                                52
          9.4   TRACE IRING AND ORING BY RPORT COMMAND                       53


                                     APPENDICES
                                     ==========

                                                                     TBOM09.DOC
                                                                August 27, 1987


        I.   BISYNC RECEIVE RCV CODES                                        55


        II.  BISYNC TRANSMIT XMIT CODES                                      56


        III. 3270 PBT CRASH CODES                                            57















































                                                                     TBOM09.DOC
        INTRODUCTION                                            August 27, 1987






                                   1 -  INTRODUCTION


             The Bisync Operations Monitor (BOM) for PBT version 9.03 is a tool
        that monitors  and controls  features of  the 3270  Terminal Interface.
        The  TBOM  is a feature  of both the  standard 3270  Terminal Interface
        (EBCDIC) and the Hong Kong Shanghai Bank (HSBC) 3270 Terminal Interface
        (ASCII).  There are some differences in the implementation of  the TBOM
        in each  of the interfaces. These are described in this document.

             To access the TBOM, the user must first log into Dynamic Debugging
        Tool (DDT). DDT is a generalized debugging and monitoring tool  that is
        part of  ISIS, the TYMNET  Engine operating system.   To log  into DDT,
        enter:

             USERNAME:KERNEL HOST NUMBER;PASSWORD

             followed by a Carriage Return <CR> when the PLEASE LOG IN  message
        is displayed. When  prompted for the slot  number, enter the  number of
        the  slot in which the  3270 Terminal Interface resides.  Then,  at the
        prompt (*),  access the TBOM  from DDT by  entering the  ?STAT command.
        Once in the  TBOM, the prompt (:>) indicates that the TBOM is  ready to
        accept commands.

             Command lines are terminated by a Carriage Return  <CR>. Arguments
        are separated by either a comma, space, line feed, or tab.

             Limited editing  control is available  for the TBOM.  Pressing the
        ESCAPE key aborts  the current command line  and returns to  the prompt
        (:>).  Pressing the Control-W key (^W) discards the partial token, word
        or  number,  that is  already input.  Pressing  the Control-A  (^A) and
        Control-H (^H) keys discards the last character of the token.  This has
        the same effect as a backspace. Pressing the Control-C (^C) key anytime
        terminates the current  process of the TBOM.  Output is halted  and the
        user is returned from the TBOM to DDT.

             The date is  displayed as "ddmmmyy"; where  dd is the day,  mmm is
        the month, and yy is the year (for example, 10APR84).

             When  reference is  made to  the relative  line, control  unit, or
        device number; this means the  order in which each of these  is defined
        in the interface  Tymfile.  The first line  that is defined is  line 0,
        the second  line that  is defined  is line  1, the  third line  that is
        defined is line 2, and so on.






        1                                                            TBOM09.DOC
        General Functions                                       August 27, 1987






                                2 -  General Functions


             This  chapter   describes  the   commands  that   provide  general
        information   about  the  monitor  and  status  of  the  3270  Terminal
        Interface.   This   information includes  which  command  functions are
        available, what the slot  configuration is, and information  about slot
        crashes (if any occur).






                                   2.1  Menu COMMAND


             Syntax: MENU or ?

             The Menu command prints the list of commands used for the TBOM.

             (INSTRUCTION COMMAND)

             Syntax: INS or INST

             The Instruction command displays a list of editing  characters and
        explains there uses. It also displays the list of delimiter characters.
        The format of the output is as follows:
        TBOM -- 3270PBT Bisync Operations Monitor
        NODE    xxxx    SLOT    x       day/month/year   time of day

        The following are the editing characters:

         o Escape (ESC)     - Aborts back to the command level.

         o Control-W (^W)   - Discards the partial token.

         o Control-A (^A)   - Discards the last character of the token  
                              (same effect as a backspace).

         o Control-H (^H)   - Discards the last character of the token  
                              (same effect as a backspace).

        Valid delimiters are:

          o Line Feed (LF) 
           
          o Horizontal Tab(HT)   
           

        2                                                            TBOM09.DOC
        General Functions                                       August 27, 1987


          o Space (" ") 
           
          o Comma (",")

          o Carriage Return ( <CR> ) - Terminates command line.







                                   2.2  EXIT COMMAND


             Syntax: EXIT

             The  Exit  command  logs  the  user  out  of  the  3270PBT  Bisync
        Operations Monitor and DDT.






                                   2.3  QUIT COMMAND


             Syntax: QUIT or Q or CONTROL C

             The Quit command exits the user from the 3270PBT Bisync Operations
        Monitor to the slots DDT.






















        3                                                            TBOM09.DOC
        General Functions                                       August 27, 1987


                                   2.4  CODE COMMAND


             Syntax: CODE

             The  Code command  displays the  slot description.  The  output is
        displayed as follows:
        TBOM -- 3270PBT Bisync Operations Monitor
        NODE  nnnn    SLOT  ss   ddmmmyy hh:mm:ss

        3270 TERMINAL INTERFACE   VERSION xx.xx

        SID xxx    KHOST xxx   ORGHST xxx   ASSM ddmmmyy hh:mm:ss

        #LINE   #CU   #DEV   {ATM   PDP   VDU   TT   GTP   (UNK)}
          xx     xx    xxx   { xx    xx    xx   xx    xx     xx }

             This display is interpreted as follows:

             VERSION Version number as version.revision level. This

             is displayed in DECIMAL to be consistent with

             DDT and the SUPERVISOR.

             ASSM    Date assembled in Greenwich Mean Time (GMT)

             "daymonthyear  hour:minute:second" format.

             Comment:

             Note that Greenwich Mean Time replaced now

             by Coordinated Universal Time (UTC)

             SID     Slot identifier

             KRNHST  Kernel host number

             ORGHST  Origination host number (3270 slot host number for

             example, the host that originates network circuits)

             #LINE   Number of lines

             #CU     Number of control units

             #DEV    Number of devices

             ATM  -  Number of Automated Teller Machines (ATM)

             (applies only to the HSBC 3270 Terminal Interface)


        4                                                            TBOM09.DOC
        General Functions                                       August 27, 1987


             PDP  -  Number of DEC PDP devices

             (applies only to the HSBC 3270 Terminal Interface)

             VDU  -  Number of Video Display Units (VDU)

             (applies only to the HSBC 3270 Terminal Interface)

             TT   -  Number of Teller Terminals (TT)

             (applies only to the HSBC 3270 Terminal Interface)

             GTP  -  Number of General Terminal Printers (GTP)

             (applies only to the HSBC 3270 Terminal Interface)

             UNK  -  Number of devices of unknown type (displayed only  to show
        how

             many devices of unknown type there are)

             (applies only to the HSBC 3270 Terminal Interface)
































        5                                                            TBOM09.DOC
        General Functions                                       August 27, 1987


                                  2.5  STATUS COMMAND


             Syntax: STATUS

             The Status command displays the status of the slot. The  format of
        the output is displayed as follows
        TBOM -- 3270PBT Bisync Operations Monitor
        NODE  nnnn    SLOT  ss   ddmmmyy hh:mm:ss

        HOST     RESTARTS     LAST START     CIRCUITS   PVC CIRCUITS
        SHUT       xxxx    ddmmmyy hh:mm:ss    xxx           xxx

        (GONE)

        BUF LEFT   BUF USED   BUF ZAPS   CMDLNK LEFT  CMDLNK USED  CMDLNK ZAPS
          xxxx       xxxx       xxxx         xxxx        xxxx          xxxx

             This display is interpreted as follows:

        HOST         -  Indicates3270 terminal interface host status.  SHUT  
                        is normal status indicating that the slot is involved  
                        in an execution. At this time, the slot cannot be a  
                        circuit destination. A GONE status indicates that the  
                        slot is halted or not yet initialized.

        RESTARTS     -  Number of restarts.

        LAST START   -  Time of last start in Greenwich Mean Time (GMT),
                        in a "daymonthyear  hour:minute:second" format.
                        Comment: 
                        Note that Greenwich Mean Time replaced now by 
                        Coordinated Universal Time (UTC).

        CIRCUITS     -  Number of circuits in use.

        PVC CIRCUITS -  Number of PVC circuits currently being used.

        BUF LEFT     -  Number of buffers left.

        BUF USED     -  Number of buffers used        BUF ZAPS     -  Number of circuit zaps, (circuits that are torn down),
                        since the last restart that are due to insufficient  
                        buffers.

        CMDLNK LEFT  -  Number of command links left. (Command links are 
                        descriptors. For a given device, they contain 
                        either error codes or the location and quantity of data
                        that is stored in buffers.)

        CMDLNK USED  -  Number of command links used.


        6                                                            TBOM09.DOC
        General Functions                                       August 27, 1987


        CMDLNK ZAPS  -  Number of circuit zaps due to insufficient command.
                        links since the last restart






                           2.6  ACCESS TO VIEW RING COMMAND


             Syntax: EXTDDT

             The Access To View Ring command allows access to a set of commands
        which allow viewing of the Input Ring (IRING) and Output  ring (ORING).
        The menu accessed provides a description of these commands.  The output
        is displayed as follows:
        TBOM -- 3270PBT Bisync Operations Monitor
        NODE  xxxx      SLOT  x         day/month/year  time

        The following are the Extended DDT commands for the 3270
        Terminal Interface:

        DIR <address> - Real-time IRING display from <address>;
                        otherwise, from the start of the ring.

        DOR <address> - Real-time ORING display from <address>;
                        otherwise, from the start of the ring.

        DR            - Real-time display of both the IRING and ORING
                        that stayes with one ring until the port number  
                        changes.

        DRA           - Real-time display of the IRING and ORING
                        alternating rings.



















        7                                                            TBOM09.DOC
        General Functions                                       August 27, 1987


                                  2.7  CRASH COMMAND


             Syntax: CRASH

             The  Crash  command  displays information  about  the  most recent
        crash.  Because the Crash Count is initialized to one when the  slot is
        started,  only  Crash Count  information  is displayed.  The  output is
        displayed as follows:
        TBOM  --  3270PBT Bisync Operations Monitor
        NODE  nnnn    SLOT  ss   ddmmmyy hh:mm:ss

        CRASH COUNT  xxxx
        TIME  mm/dd/yy  hh:mm:ss
        FASTC  xxxxxxxx
        CRASH POINT  xxxxxxxx
        CRASH CODE  xx
        PSW  xxxxxxxx

        REGISTERS

        xxxxxxxx  xxxxxxxx  xxxxxxxx  xxxxxxxx  xxxxxxxx  xxxxxxxxx
        xxxxxxxx  xxxxxxxx  xxxxxxxx  xxxxxxxx  xxxxxxxx  xxxxxxxxx
        xxxxxxxx  xxxxxxxx  xxxxxxxx  xxxxxxxx

        STACK (LIFO)

        xxxx xxxx xxxx xxxx xxxx xxxx xxxx xxxx xxxx xxxx xxxx xxxx
        xxxx xxxx xxxx xxxx xxxx xxxx xxxx xxxx xxxx xxxx xxxx xxxx

        JUMP INDEX  xxxx

        JUMP TABLE

        xxxxxxxx  xxxxxxxx  xxxxxxxx  xxxxxxxx
        xxxxxxxx  xxxxxxxx  xxxxxxxx  xxxxxxxx
        xxxxxxxx  xxxxxxxx  xxxxxxxx  xxxxxxxx
        xxxxxxxx  xxxxxxxx  xxxxxxxx  xxxxxxxx

        IRING POINTERS  xxxx  xxxx
        IRSIZE  xxxx

        IRING

        xxxx  xxxx  xxxx  xxxx  xxxx  xxxx  xxxx  xxxx
        xxxx  xxxx  xxxx  xxxx  xxxx  xxxx  xxxx  xxxx
        xxxx  xxxx  xxxx  xxxx  xxxx  xxxx  xxxx  xxxx

        ORING POINTERS  xxxx  xxxx
        ORSIZE  xxxx

        ORING


        8                                                            TBOM09.DOC
        General Functions                                       August 27, 1987


        xxxx  xxxx  xxxx  xxxx  xxxx  xxxx  xxxx  xxxx
        xxxx  xxxx  xxxx  xxxx  xxxx  xxxx  xxxx  xxxx
        xxxx  xxxx  xxxx  xxxx  xxxx  xxxx  xxxx  xxxx

        This display is interpreted as follows:

        CRASH COUNT  -  Number of times (in hexadecimal) that the slot  
                        has crashed  since loaded.  Crash count is initialized 
                        to one when the slot is first started.

        TIME         -  Time of crash in GMT, in a  
                        "month/day/year  hour:min:sec" format.

        FASTC        -  Time of crash in FASTC.  (FASTC, the system clock, is
                        a 32-bit value that is incremented at a rate of
                        600 times per second.)

        CRASH POINT  -  Address of the next instruction at the time of the  
                        crash.

        CRASH CODE   -  Crash code.  A list if standard ISIS crash codes
                        follows:
                         
                    Crash Code     Significance
                    ----------     ------------ 

                        0          Power failure
                        1          Manual restart
                        0E         Parity error
                        10         Dispatcher crash
                        11         Illegal instruction
                        12         Illegal SVC
                        13         System crash
                        14         Protection violation
                        15         Non-recoverable device check
                        16         Watch frog timer - a time-out


        PSW           - Program status word at the time of the crash.

        REGISTERS     - Register values (registers 0 - F) at the time of  
                        the crash.

        STACK         - Entire stack Contents at the time of the crash, read  
                        out as Last In First Out (LIFO).

        JUMP INDEX    - Index into the table of the last jump.

        JUMP TABLE    - The jump trace table contains the address of the  
                        preceding jumps. The jump trace table is valid only if
                        the slot is restarted by technical support personnel
                        with the jump trace enabled.


        9                                                            TBOM09.DOC
        General Functions                                       August 27, 1987


        IRING POINTERS- Full and empty pointers for the IRING.

        IRSIZE        - The size of the IRING (in bytes).

        IRING         - The entire IRING (IRING is a ring buffer storing all
                        of the messages received from the network to be read  
                        by the  slot).

        ORING POINTERS- The full and empty pointers for ORING.

        ORSIZE        - The size of the ORING (in bytes).

        ORING         - The entire ORING (ORING is a ring buffer that stores 
                        all of the messages received from the slot to be sent 
                        to the network).  







































        10                                                           TBOM09.DOC
        LINE CONTROL/STATUS FUNCTIONS                           August 27, 1987






                          3 -  LINE CONTROL/STATUS FUNCTIONS


             This chapter describes the commands that control and  indicate the
        current status of the  lines, control units, and devices  connected  to
        the slot. This includes the ability to start or stop polling a  control
        unit and to break down specified circuits or groups of  circuits.






                                   3.1  MODE COMMAND


             Syntax: MODE aaa

             Default: ADR

             The Mode command sets the selection mode, where aaa is the desired
        mode.   For applicable  commands,  this determines  the  lines, control
        units, and devices specified by the relative position  number, address,
        or user defined  ID.  The default mode  is ADR.  Modes cannot  be mixed
        within a single command line.   (The user-defined ID is defined  in the
        DEFLN,  DEFCU,  or  DEFDEV  macro in  the  Tymfile.)   These  modes are
        specified as  follows:

             REL  -  Relative position number

             ADR  -  Address        USR  -  User defined ID

             If  the Mode  command is  entered without  specifying a  mode, the
        current  mode is  displayed. The default mode,  ADR, can be  changed by
        equating  the  label DFTMOD to  the desired mode  in the  Tymfile.  For
        example:

             DFTMOD  EQ       REL          :REL  is the  default mode  for TBOM
        commands











        11                                                           TBOM09.DOC
        LINE CONTROL/STATUS FUNCTIONS                           August 27, 1987


                                3.2  QUERY LINE COMMAND


             Syntax: QLINE lna (mode is ADR) or QLINE ln (mode is REL) or QLINE

             The  Query  Line  command  displays  line  status  for   the  line
        specified, where ll is the  line number.  If no line is  specified, the
        command  displays the status of all the lines. The line  number entered
        may be   the relative line  number, the line  address, or the  line ID;
        depending on the  state of the Mode  command. The default mode  is line
        address(ADR). The Query Line command output is displayed as follows:
        TBOM -- 3270PBT Bisync Operations Monitor
        NODE  nnnn    SLOT  ss   ddmmmyy hh:mm:ss

        LINE   LADR   LID   SPRT   #CU   #DEV TYPE STATE  RTS  HNG   DSR
         xx     xx     xx    xx     xx    xx   x   xxxx    x    x     x

        This display is interpreted as follows:

        LINE -  Relative line number
        LADR -  Line address as defined by the DEFLN macro in the Tymfile.
        LID  -  Line ID number as defined by the DEFLN macro in the Tymfile.
        SPRT -  Physical synchronous port to which the line is attached.
        #CU  -  Number of control units per line.
        #DEV -  Number of devices per line.
        TYPE -  0 if the line is a leased line;
                1 if the line is a full-duplex switched line;
                2 if the line is a half-duplex switched line;
                ? indicates the line is a leased line.

        STATE - One of the following five states:

             o  A OK message indicates that the DTR signal is raised and  
                the user may dial in at this point.

             o  A READY message indicates that the line is connected and  
                is ready for the user to log in.

             o  An ACTIVE message indicates that the line is connected and  
                the user is successfully logged into the host.

             o  An IDLE message indicates that there is no circuit in the  
                current line and the DTR signal has been dropped in order to
                disconnect the line.

             o  A HANG message indicates that the DTR gignal has already been
                dropped, but the DSR signal is still high. In this situation, 
                there could be some problems with the line or dial-up equipment
                and users are not allowed to dial in at this point.

                ?   indicates that the line is a leased line or unknown
                    type.


        12                                                           TBOM09.DOC
        LINE CONTROL/STATUS FUNCTIONS                           August 27, 1987


        RTS  -  1 if RTS/CTS required; 0 if not
        HNG  -  1 if hang logic required; 0 if not (for dial-up lines)
        DSR  -  ? if DTR/DSR is not required or not possible for this line;
                1 if DSR is high (indicates the line is functioning properly);
                0 if DSR is low (indicates the line is not functioning  
                  properly)  






                            3.3  QUERY CONTROL UNIT COMMAND


             Syntax: QCU ll,cc (mode is ADR) or QCU cun (mode is REL)

             The  Query  Control  Unit  command  displays  the  status  of  the
        specified  control  unit, where  ll is the  line number  and cc  is the
        control unit  when  the mode is ADR.  If no control unit  is specified,
        the status of  all control units on the line specified is displayed.

             The  line and  control unit  number may  be the  line/control unit
        address, the line/control unit ID, or the relative control  unit number
        (which  may be entered by  itself), depending on the state of  the Mode
        command. The default mode is ADR. The format of the output is displayed
        as follows:
        TBOM -- 3270PBT Bisync Operations Monitor
        NODE  nnnn    SLOT  ss   ddmmmyy hh:mm:ss

        CU CUADR CID #DEV   STATUS    PTO REXMT XERR XTOT NAKS RERR RTOT
        xx  xx   xx   xx    ACTIVE    xxx  xxx  xxx  xxxx xxx  xxx  xxxx
                              (NO RESPONSE)
                                (NOPOLL)

        This display is interpreted as follows:


        CU    - Relative control unit number.

        CUADR - Control unit address, as defined by the DEFCU macro in
                the Tymfile.

        CID   - Control unit ID number as defined in the DEFCU macro in  
                the Tymfile.

        #DEV  - Number of devices per control unit.

        STATUS- Polling status of the control unit. (ACTIVE indicates that the
                terminal interface is polling and the the the control unit  is
                responding.  NO RESPONSE indicates that the terminal interface 
                is polling and that the control unit is not responding. NOPOLL 
                indicates that the terminal interface is not polling).

        13                                                           TBOM09.DOC
        LINE CONTROL/STATUS FUNCTIONS                           August 27, 1987



        PTO   - Number of times (in hexidecimal) the control unit polled
                when it did not respond (count is always accumulated; cleared
                by the RESET command).

        REXMT - Number of retransmissions (in hexidecimal) of data to control
                unit (count is always accumulated; cleared by the RESET
                command).

        XERR  - Number of transmission errors (in hexidecimal) (Count is
                always accumulated; cleared by the RESET command).

        XTOT  - Number of data blocks (in hexidecimal) transmitted. Both ETX  
                and ETB blocks are included in the count, (which is always
                accumulated, but is cleared  by the RESET command).   
                (Retransmissions are included in the count).

        NAKS  - Number of negative acknowledgements (in hexidecimal) sent
                to the control unit (count is always accumulated; cleared  
                by the RESET command).

        RERR  - Number of receive errors detected (in hexidecimal)
                (count is always accumulated; cleared by the RESET command).

        RTOT - Number of data blocks received (in hexidecimal). Both ETX  
               and ETB blocks are included in the count (which is always  
               accumulated, but cleared by the RESET command).



























        14                                                           TBOM09.DOC
        LINE CONTROL/STATUS FUNCTIONS                           August 27, 1987


                               3.4  QUERY DEVICE COMMAND


             Syntax: QDEV ll,cc,dd (mode is ADR) or QDEV dvn (mode is REL)

             The  Query  Device  command  displays  the  device  status  of the
        specified  device; where ll is the line number, cc is the control unit,
        and dd  is  the device. If  no device is  specified, the status  of all
        devices  on the specified control  unit is displayed.  In the  ADR mode
        or ID  mode  the command line is  rejected, if the line  and/or control
        numbers are not entered.

             The line, control unit, and device number may be  the line/control
        unit/device address, the  line/control unit/device ID, or  the relative
        device  number which  may be  entered by  itself. This  depends  on the
        state of the Mode command. The  default mode is ADR. The format  of the
        output is displayed as follows:
        TBOM -- 3270PBT Bisync Operations Monitor
        NODE  nnnn    SLOT  ss   ddmmmyy hh:mm:ss

        DEV DADR DID  {TYPE } PVC COL XPR NKEY  DPRT  STATE    S/S  AP  CA  DA
        xxx  xx  xxx  { VDU }  x   x   x   xx    xx    IDLE     xx  xx  xx  xx
                        {(ATM)}                       (LOGIN)
                        {(PDP)}                       (NATIVE)
                        {(GTP)}                       (VIRTUAL)
                        {(TT) }

        This display is interpreted as follows:

        DEV   -  Relative device number.

        DADR  -  Device address as defined by the DEFDEV macro in the Tymfile.

        DID   -  Device ID as defined by the DEFDV macro in the Tymfile.

        TYPE  -  Device type (only for the HSBC 3270 Terminal Interface).

        PVC   -  1 if permanent virtual circuit; 0 if not.

        COL   -  1 if terminal has color capabilities; 0 if not.

        XPR   -  1 if terminal can handle extended features (transparent);
                 0 if it cannot handle extended features such as Value of  
                 Network Services Key (NKEY).

        DPRT  -  Dispatcher port number (a 0 indicates there is no circuit  
                 for this device).

        STATE -  State of the device as follows:
           
           o  IDLE - Indicates that no circuit exists for the specified device.

           o  LOGIN - Indicates that terminal interface is building a circuit

        15                                                           TBOM09.DOC
        LINE CONTROL/STATUS FUNCTIONS                           August 27, 1987


                      for the specified device.   

           o  NATIVE - Indicates that circuit exists between terminal interface
                       and a 3270 type host (through the 3270 Host Interface  
                       or X.25 interface that uses DSP).   

           o  VIRTUAL - Indicates that a circuit exists between terminal
                        interface and a ASCII-type host (a host that accepts  
                        ASCII character mode data streams).

        S/S   -  Last sense/status half-word (in hexidecimal) received from
                 the device.

        AP    -  Application ID field from the circuit enable packet  
                 (the logical line address for the device at the host
                 interface).  If the circuit is not built yet  
                 (which occurs during the Idle  or Logon mode),  
                 NONE is displayed for device.

        CA    -  Control unit address field from the circuit enable packet  
                 (the logical control unit address for the device at the host
                 interface).  If the circuit is not built yet (which occurs
                 during the Idle or Logon mode), NONE is displayed for device.

        DA    -  Device address field from the circuit enable packet  
                 (the logical device address for the device at the host
                 interface).  If the circuit is not built yet  
                 (which occurs during the Idle or Logon mode),  
                 NONE is displayed for device.

























        16                                                           TBOM09.DOC
        LINE CONTROL/STATUS FUNCTIONS                           August 27, 1987


                           3.5  QUERY ONLINE DEVICES COMMAND


             Syntax : ONLINE

             The Query Online Devices command display all the devices that have
        logged into  the host  interface. No arguements  are required  for this
        command.

             Example :

        Please type MENU for help
        :> ONLINE
        The following is displayed: 

        TBOM -- 3270PBT Bisync Operations Monitor
        NODE  2062    SLOT  2    24Apr86 22:11:12

        DEV DADR DID PVC COL XPR NKEY DPRT STATE S/S  AP CA DA     ONLINE

         0  40    0  0   0   0   F4   10  NATIVE C240 40 C3 4F 24Apr86 22:09:22







                     3.6  RESET CONTROL UNIT ERROR COUNTS COMMAND


             Syntax:  RESET

             The Reset  Control Unit  Error Counts command  resets to  zero all
        count totals of errors,  transmits and receives for all  control units.
        (These are the totals reported by the Query Control Unit command.)






                              3.7  RESTART ERRORS COMMAND


             Syntax:  RERR ll

             The Restart Errors command  resets the error counts  and specifies
        the line for which error reporting is done. (Error reporting is done by
        the Display Errors  command.) The value ll  specifies the line,  and is
        interpreted according to the current mode. If no line is specified, the
        Display Errors command causes error information for the entire  slot to


        17                                                           TBOM09.DOC
        LINE CONTROL/STATUS FUNCTIONS                           August 27, 1987


        be displayed. (Error counts accumulated for the Display  Errors command
        are reset to zero.)






                              3.8  DISPLAY ERRORS COMMAND


             Syntax:  DERR n

             The Display Errors command displays the number of line errors that
        occurr in each hour  for the past n  hour(s) and the average  number of
        errors for that period.  The value of  n can range from 1 to 24.   If n
        is not specified only the average number of errors and  line exceptions
        for the past 24 hours is  displayed. Any errors that occur in  the most
        recent  partial hour  or other  partial hour  are not  included  in the
        average.

             A bin  is maintained for  each error type  and line  exception for
        each  hour in a 24-hour cycle.   At the beginning of the hour,  the bin
        is  emptied. Then, each error occurring within that hour is recorded in
        the bin.  At the end of the hour, the process moves to the next set  of
        bins.  This  process cycles continuously.   The output is  displayed as
        follows:
        TBOM -- 3270PBT Bisync Operations Monitor
        NODE  nnnn    SLOT  ss   ddmmmyy hh:mm:ss

        LINE xx
         -SLOT-

        HOUR   PTO   RE-TRAN  XERR   NAKS   RERR
         xx     xx     xx      xx     xx     xx
         xx     xx     xx      xx     xx     xx
         xx     xx     xx      xx     xx     xx
         xx     xx     xx      xx     xx     xx*

               xxx    xxx     xxx    xxx    xxx   TOTALS

        AVERAGE PER HOUR

                xx     xx      xx     xx     xx

             This display is interpreted as follows:

             LINE -  Line  number, per the current  mode, for which  errors are
        reported  (ENTIRE  SLOT  indicates that  errors  are  reported  for all
        lines).

             HOUR -  Bin hour in UTC.


        18                                                           TBOM09.DOC
        LINE CONTROL/STATUS FUNCTIONS                           August 27, 1987


             PTO - Number of times the control unit has been polled when it did
        not respond.

             RE-TRAN - Number of retransmissions of data to the control unit.

             XERR -  Total transmit errors.

             NAKS -   Number of Negative  acknowledgements sent to  the control
        unit.

             RERR -  Total receive errors.

             * Indicates the partial hour  that is included in the  totals, but
        not  included in the average.






                     3.9  DISPLAY CONTROL UNITS NOT POLLED COMMAND


             Syntax: DNPLL

             The Display Control  Units Not Polled  command displays a  list of
        all  the  control units  that  are  not being  polled.   The  output is
        displayed as follows:
        TBOM -- 3270PBT Bisync Operations Monitor
        NODE  nnnn    SLOT  ss   ddmmmyy hh:mm:ss

        LINE    CU
         xx     xx
         xx     xx

             This display is interpreted as follows:

             LINE  -  Line number (per the current mode).

             CU   -    Number of  the control  unit not  being polled  (per the
        current  mode).













        19                                                           TBOM09.DOC
        LINE CONTROL/STATUS FUNCTIONS                           August 27, 1987


                  3.10  DISPLAY CONTROL UNITS NOT RESPONDING COMMAND


             Syntax: DNRSP

             The Display Control Units  Not Responding command displays  a list
        of  all control units that are not responding to polls.  The  output is
        displayed as follows:
        TBOM -- 3270PBT Bisync Operations Monitor
        NODE  nnnn    SLOT  ss   ddmmmyy hh:mm:ss

        LINE    CU
         xx     xx
         xx     xx

             This display is interpreted as follows:

             LINE -  Relative line number (per the current mode)

             CU   -   Relative number(s)  of the control  unit(s) that  are not
        responding to polls (per the current mode).






                           3.11  POLL CONTROL UNITS COMMAND


             Syntax: POLL ll,cc

             The  Poll  Control  Units command  functions  differently  for the
        standard  3270 Terminal Interface and the HSBC 3270 Terminal Interface.

         o  For the standard 3270 Terminal Interface, the Poll command causes
            the specified control unit(s) to be polled when the host is  
            polling; where ll is the line, and cc is the control unit.  If no  
            control unit is specified, all the control units on the specified  
            line are polled.

         o  For the HSBC 3270 Terminal Interface, the Poll command causes the  
            specified control unit(s) to be polled when the host is polling;
            where ll is the line, and cc is the control unit.  If no control  
            unit is specified, all the control units on the specified line  
            are polled.

         o  The line and control unit number may be the line/control unit  
            address or the line/control unit ID, or the relative control unit  
            number (which may be entered by itself). This depends on the state 
            of the Mode command.



        20                                                           TBOM09.DOC
        LINE CONTROL/STATUS FUNCTIONS                           August 27, 1987


                        3.12  DO NOT POLL CONTROL UNITS COMMAND


             Syntax: NOPOLL ll,cc

             The Do  Not Poll Control  Units command functions  differently for
        the   standard  3270  Terminal Interface  and  the  HSBC  3270 Terminal
        Interface.  These differences are described as follows:

              o  For the standard  3270 Terminal Interface, the  Nopoll command
        causes the  specified control  unit(s) not  to be  polled, where  ll is
        the  line,  and  cc  is  the  control  unit.   If  no  control  unit is
        specified,  the  command halts  polling  of all  the  control  units on
        the specified line.

              o   For  the HSBC  3270  Terminal Interface,  the  Nopoll command
        causes      the specified control unit(s) not to be polled; where ll is
        the       line, and  cc is  the control  unit.  If  no control  unit is
        specified,     the command  halts polling of  all the control  units on
        the specified      line. A  Nopoll command from  the TBOM  has priority
        over resume      polling commands received from the host.  Polling does
        not resume      until a Poll  command is issued  from the TBOM  and the
        host is     polling.

              o  The line and control unit number may be the  line/control unit
        address,  the  line/control  unit  ID,  or  the  relative  control unit
        number (which  may be  entered by  itself). This  depends on  the state
        of the Mode command.






                              3.13  KILL CIRCUITS COMMAND


             Syntax: KILL ll,cc,dd

             The Kill circuits command kills the specified circuit(s); where ll
        is  the  line, cc is  the control unit,  and dd is  the device.   If no
        device  is specified, the circuits to all the devices on  the specified
        control unit are killed. If no control unit is specified,  the circuits
        to all  devices on the specified line are killed.  The line number must
        be  specified.  For PVCs, automatic rebuild is prohibited.

             The line, control unit, and device number may be  the line/control
        unit/device address, the  line/control unit/device ID, or  the relative
        device number  (which may be  entered by itself).  This depends  on the
        state of the Mode command.




        21                                                           TBOM09.DOC
        LINE CONTROL/STATUS FUNCTIONS                           August 27, 1987


                           3.14  BUILD PVC CIRCUITS COMMAND


             Syntax:  BUILD ll,cc,dd

             The  Build  PVC  Circuits  command  rebuilds  the   specified  PVC
        circuit(s)  killed by the Kill command; where ll is the line, cc is the
        control  unit, and  dd is the device.   If no device is  specified, the
        circuits  to all the devices on the specified control unit are rebuilt.
        If no  control  unit is specified, the  circuits to all devices  on the
        specified line are rebuilt.  The line number must be specified.

             The line, control unit, and device number may be  the line/control
        unit/device address, the  line/control unit/device ID, or  the relative
        device number  (which may be  entered by itself).  This depends  on the
        state of the Mode command.






                         3.15  START DEVICE OPERATION COMMAND


             Syntax : STARTDEV lna [cua [dva]] or STARTDEV dvn

             The  Start  Device Operation  command,  followed by  at  least one
        argument, or two other  optional arguments, activate the  operations of
        the  device  or  group  of devices  that  are  specified.  The required
        arguments are lna (line address  in ADR mode) or dvn (device  number in
        REL mode). If  only lna is  specified, or if  lna and cua  (the control
        unit address in ADR  mode) are specified, then all the  devices defined
        in the designated  group, devices under the specified line,  or devices
        under the specified line and control unit are affected.

             This  command  does  not  affect  the  devices  that  already have
        circuits.  Instead, for the devices  that are in the Idle mode  and are
        deactivated by the Stop Devices command-users can login again.

             For  Permanent  Virtual  Circuit  (PVC)-configured  devices,  this
        command  does not apply. The only command that can be used in this case
        is  the Build command, which enables the PVC logic to initiate  the PVC
        login procedures.










        22                                                           TBOM09.DOC
        LINE CONTROL/STATUS FUNCTIONS                           August 27, 1987


                          3.16  STOP DEVICE OPERATION COMMAND


             Syntax : STOPDEV lna [cua [dva]] or STOPDEV dvn

             The Stop Device Operation  command disables the operations  of the
        device  or  group  of devices  specified.  Once  stopped,  users cannot
        login. If  an attempt to  use the  terminal is made  at this  time, the
        message CRT PORT HAS BEEN DISABLED is displayed, informing the  user of
        the device status.

             This  command does  not apply  to any  PVC-configured  devices. If
        users try to  log into a printer  from the Network Service  Screen, the
        message  PRINTER  PORT HAS  BEEN  DISABLED is  output  by  the terminal
        interface to indicate the device status.

             The Kill  command can  be used  to terminate  the circuit  for any
        device desired;  however only the  Build command can  be used  to start
        device operations and begin the login process for PVC devices.

             Once the  circuits are disconnected  by the Kill  command, devices
        can  be  disabled  by  issuing the  Stop  Device  command  (for non-PVC
        devices) and activated by issuing the Start Device command.






               3.17  QUERY/CHANGE INTERVAL OF REAL TIME DISPLAY COMMAND


             Syntax : DISPLAY [nn]

             Default : 600 seconds, or 10 minutes.

             The  Query/Change Interval  Of Real  Time Display  command  can be
        invoked, while in TBOM to change the interval of real time  node, slot,
        and time display. The real time display interval starts either when the
        user  logs  into the  TBOM  and  no activities  are  observed  or after
        executing one and  before next command  is issued. The  value displayed
        deviates 5 to 15 seconds from the value entered. This is caused  by the
        program.

             The  argument  nn  (in decimal  seconds)  disables  the  real time
        display if set to zero. If nn is not entered, then the current interval
        of real time display is reported to the user. The user can enter any nn
        value, ranging from 0 to 99999 (in decimal).






        23                                                           TBOM09.DOC
        NEGATIVE ACKNOWLEDGEMENT HANDLING                       August 27, 1987






                        4 -  NEGATIVE ACKNOWLEDGEMENT HANDLING


             The  current  implementation  of  the  3270PBT  Terminal Interface
        eventually terminates the network circuits when the error  recovery for
        handling Negative Acknowledgements (NAK) exceeds the maximum  number of
        retries allowed.

             When PBT detects an  error condition while either in  the transmit
        or receive state, it performs a retry operation by going  through error
        recovery several times. This is  done only if the error was  not fatal.
        For fatal errors, the circuit is always terminated without retries.

             PBT logs  the reason for  the error and  checks against  the retry
        limit during each  retry. If PBT cannot  recover from the  errors after
        the retry limit is  reached, the Host Packet  Assembly/Dissembly (HPAD)
        is informed by the COMMAND/RESPONSE ABORTED/UNDELIVERED message sent by
        the  Display Systems  Protocol (DSP).  In this  DSP error  message, PBT
        reports the coded reason for the last error condition.

             After  receiving the  DSP  error message,  HPAD sends  back  a DSP
        INVITATION TO CLEAR message  which causes PBT to terminate  the network
        circuit for the device with the error conditions.

             These enhancements to  PBT allow the  device to stay  connected to
        the  host  when PBT has  a problem  with line of  the control  unit. No
        COMMAND/RESPONSE ABORTED/UNDELIVERED message is sent back to  the HPAD.
        However,  a report  to the  Supervisor's log  is made  to  monitor this
        condition with the network logger.

             The network logger message is displayed as follows:

        122:18:11:00

         NODE REPORT 2704 SLOT# 4 PBT TYPE 45 404040

        122:18:12:06


             In the  logger message example,  the TYPE 45  part of  the display
        indicates  that  a message  from  the control  unit  has  been received
        incorrectly, and that PBT responded with a NAK. In this case, the error
        retry limit has been reached  and the problem has not been  solved. The
        operator's interventions may be required to check into the PBT  slot to
        monitor  the  error conditions  of  the line.  The  Query  Control Unit
        command can  be used to  query the status  of the control  unit address
        indicated in the logger's message.



        24                                                           TBOM09.DOC
        NEGATIVE ACKNOWLEDGEMENT HANDLING                       August 27, 1987


             Note that  with this  enhancement, the message  that PBT  fails to
        deliver either to the host or terminal is lost and cannot be recovered.
        If the message comes from  the the host, it is locally  acknowledged by
        the host interface. If PBT fails to deliver this message to the control
        unit,   host interface  is not   notified. Similarly,  if PBT  fails to
        receive  the  response from  the  control unit  correctly,  HIF  is not
        notified.

             The Define Retry Limit for  Line, Change Retry Limit for  Line and
        Define DSP  Error Report  to HPAD  Macros are  introduced to  define or
        change the maximum number of retries and to disable the sending  of the
        DSP error message to the HPAD.










































        25                                                           TBOM09.DOC
        SLOT CONFIGURATION                                      August 27, 1987






                                5 -  SLOT CONFIGURATION


             This chapter  describes the commands  that give  information about
        the  status of the slot.






                     5.1  DISPLAY LINE/SLOT CONFIGURATION COMMAND


             Syntax : CONF ln, CONF lna, or CONF

             The  Display  Line/Slot  Configuration  command  issued   to  TBOM
        displays the line or slot configuration. The parameter that follows the
        command can  be entered,  depending on  what the  mode setting  is. For
        relative mode operation, use relative line number ln. For  Line Address
        mode operations, use line address lna. If no parameter is  entered, the
        configuration of the entire slot is displayed.

             For each device, the output of the Display Line/Slot Configuration
        command also indicates what the defined character set and host type are
        for  multi-protocol  support.  The  output  resulting  is  displayed as
        follows:

        :>CONF

        TBOM -- 3270PBT Bisync Operations Monitor
        NODE  2062    SLOT  1    03Dec85 18:16:09


        LINE  LADR  LID  #CU    HOST
          0    40    00    1    IBM

              CUN   CUADR  CID  #DEV
               0     040   000     2

                    DEV    DADR  DID  DTYP   COL  XPR   CHAR
                      0     040  000  C1920   N    N    ENGLISH
                      1     0C1  001  P1920   N    N    ENGLISH

              CUN   CUADR  CID  #DEV
               0     0C1   001     2

                    DEV    DADR  DID  DTYP   COL  XPR   CHAR
                      2     040  002  C1920   N    N    ENGLISH

        26                                                           TBOM09.DOC
        SLOT CONFIGURATION                                      August 27, 1987


                      3     0C1  003  P1920   N    N    ENGLISH

        LINE  LADR  LID  #CU    HOST
          1   0C1    01    2    IBM

              CUN   CUADR  CID  #DEV
               2     040   001     3

                    DEV    DADR  DID  DTYP   COL  XPR   CHAR
                      4     040  004  C1920   Y    N    ENGLISH
                      5     0C1  005  C1920   N    N    ENGLISH
                      6     0C2  006  P2560   N    N    ENGLISH

              CUN   CUADR  CID  #DEV
               3     0C1   003     2

                    DEV    DADR  DID  DTYP   COL  XPR   CHAR
                      7     040  007  C3440   N    N    ENGLISH
                      8     0C1  008  C1920   N    N    ENGLISH

        LINE  LADR  LID  #CU    HOST
          2   0C2    02    2    IBM

              CUN   CUADR  CID  #DEV
               4     040   004     3

                    DEV    DADR  DID  DTYP   COL  XPR   CHAR
                      9     040  009  C1920   Y    N    ENGLISH
                     10     0C1  010  C1920   N    N    ENGLISH
                     11     0C2  011  P2560   N    N    ENGLISH
























        27                                                           TBOM09.DOC
        SLOT CONFIGURATION                                      August 27, 1987


                     5.2  QUERY/CHANGE REPORT TO SUPERVISOR'S LOG


             Syntax : SUPLOG [YES/NO]

             The Query/Change Report To Supervisor's Log command causes  PBT to
        turn off/on the report to the Supervisor's log. This report informs the
        Supervisor of the  activities in the slot.  SUPLOG, followed by  the NO
        argument, terminates the process:  If followed by the YES  argument, it
        begins the  process. The user  can query the  action by  issuing SUPLOG
        without an  argument. The  default action  reports to  the Supervisor's
        log.










































        28                                                           TBOM09.DOC
        QUEUE PROCESSOR                                         August 27, 1987






                                 6 -  QUEUE PROCESSOR


             This  chapter describes  the commands  that stop  data processing,
        examine this data, and then release it for processing.

             There are  four queues  in the terminal  interface. These  are the
        Input Queue (IN Q), Transmit Queue (XMT Q), Receive Queue (RCV  Q), and
        Output  Queue (OUT  Q).  These queues  pass control  and  data messages
        between the Foreground (F/G) and Background (B/G).

                 -------------------------------------------------------
                |                                                       |
         ---    |                                                       |
        | C |   |                                                       |
        | O |   |        -------           -------           -------    |
        | N | --|-----> | RCV Q | ------> | OUT Q | ------> | ORING | --|->  N
        | T |   |        -------           -------           -------    |    E
        | R |   |                                                       |    T
        | O |   |                                                       |    W
        | L |   |                                                       |    O
        |   |   |                                                       |    R
        | U |   |        -------           ------           -------     |    K
        | N | <-|------ | XMT Q | <------ | IN Q | <------- | IRING | <-|--
        | I |   |        -------           ------           -------     |
        | T |   |                                                       |
         ---    |                                                       |
                |                                                       |
                |                                                       |
                 -------------------------------------------------------


             When data is received from the control unit, F/G places it  in the
        RCV Q where it is scanned and processed by the PBT's B/G. If  the input
        concerns the Network Service Screen, some data may be generated  by the
        PBT's B/G  and placed into  the XMT Q  so that F/G  can send it  to the
        control unit.

             If the input is for the host, then the data is passed to the OUT Q
        and converted into a DSP message in the B/G to be delivered to the host
        interface.

             When the host  sends a command message  to the host  interface, it
        arrives from the network  in the Input Ring  (IRING) of the PBT  in DSP
        format.  The DSP message decoder either acts on the DSP control message
        or converts the DSP data  message into a bisynchronous format.  It then
        places it in the IN Q, where it is passed to the XMT Q. The XMT  Q then
        stores it until it is transmitted to the control unit by the F/G.


        29                                                           TBOM09.DOC
        QUEUE PROCESSOR                                         August 27, 1987


             The commands  that control the  queue processors are  described in
        the remainder of this chapter.






                                   6.1  INPUT QUEUE


             The commands that control the Input Queue processor  are described
        in this section.





                    6.1.1  Stop IN Q Process Command

             Syntax : STOPIN dvn or STOPIN lna cua dva

             The Stop IN  Q Process command stops  the IN Q processor,  so that
        data coming from the  network or generated by  the PBT is not  moved to
        the transmit queue to be transmitted.





                    6.1.2  Query Data on IN Q Command

             Syntax : QINQ

             The Query Data On IN Q  command displays the contents of the  IN Q
        for the device specified by the Stop IN Q Processcommand.

             The format of the display is as follows:

        BUFADR      CONTENTS
        xxxxx  xxxx xxxx xxxx xxxx xxxx xxxx xxxx xxxx xxxx xxxx
        xxxxx  xxxx xxxx xxxx xxxx xxxx xxxx xxxx xxxx xxxx xxxx


             In the above display, BUFADR is the buffer address in  memory from
        which the  data is  read. For  the IN  Q and  XMT Q,  the data  that is
        displayed does not conform to  the format of actual data  read directly
        from  memory. The output of this command is formatted so that  the data
        is  not  in  reversed Extended  Binary-Coded  Decimal  Interchange Code
        (EBCDIC).




        30                                                           TBOM09.DOC
        QUEUE PROCESSOR                                         August 27, 1987


                    6.1.3  Start IN Q Process Command

             Syntax : STARTIN

             The Start IN Q Process  command starts the processing of the  IN Q
        for  the device stopped by the Stop IN Q Process command.  The terminal
        resumes normal operations after the processor is reactivated.















































        31                                                           TBOM09.DOC
        QUEUE PROCESSOR                                         August 27, 1987


                                  6.2  TRANSMIT QUEUE


             The  commands  that  contol  the  Transmit  Queue   processor  are
        described in this section





                    6.2.1  Stop XMT Q Process Command

             Syntax : STOPXMT dvn or STOPXMT lna,cua,dva

             The  Stop XMT  Q  Process command  stops  the XMT  Q  scanner from
        processing the data in the XMT Q for the specified device. If  any data
        remains in the queue it is  not sent to the control unit.  This command
        may  interfere with the normal operation of the Bisync line. Sync (SYN)
        insertions or Temporary Text Delay (TTD) could be generated by  the PBT
        F/G until more data is made  available from the B/G by the Start  XMT Q
        Process command.





                    6.2.2  Query Data on XMT Q Command

             Syntax : QXMTQ

             The Query Data On XMT  Q command queries and displays data  on the
        XMT Q captured by executing the Stop XMT Q Process command on a device.

             The output is displayed as follows:
        BUFADR      CONTENTS
        xxxxx  xxxx xxxx xxxx xxxx xxxx xxxx xxxx xxxx xxxx xxxx
        xxxxx  xxxx xxxx xxxx xxxx xxxx xxxx xxxx xxxx xxxx xxxx

             In  the above  display,  BUFADR is  the buffer  address  where the
        contents of the XMT Q  are stored for display. The output  is displayed
        in EBCDIC  format: not in  reversed EBCDIC format  as data  is normally
        formatted in memory. For control messages, the output's  format differs
        from the format  shown above. The  words CONTROL MESSAGE  appear before
        the message itself. The codes for  the Query Data On XMT Q  command are
        as follows:


           o   FFF9 - sense/status message (SS0/SS1 follows)
           o   FFFF - disconnect
           o   FFFE - record time
           o   FFFD - Yellow Ball
           o   FFFC - Orange Ball
           o   FFFB - send EOT

        32                                                           TBOM09.DOC
        QUEUE PROCESSOR                                         August 27, 1987


           o   FFFA - error
           o   FFF8 - Acknowledgement






                    6.2.3  Start XMT Q Process Command

             Syntax : STARTXMT

             The Start XMT  Q Process command restarts  the XMT Q  scanner. The
        scanner processes XMT Q  data for the device stopped  from transmitting
        to the  host by  the Stop XMT  Q Process  command. This  command causes
        terminal operation to resume, if the Stop RCV Q command is not executed
        yet.





































        33                                                           TBOM09.DOC
        QUEUE PROCESSOR                                         August 27, 1987


                                  6.3  RECEIVE QUEUE


             The  commands  that  control  the  Receive  Queue   processor  are
        described in this section.





                    6.3.1  Stop RCV Q Process Command

             Syntax : STOPRCV dvn or STOPRCV lna,cua,dva

             The  Stop RCV  Q  Process command  stops  the RCV  Q  scanner from
        processing  the data  in  the queue  for  the device  specified  by the
        argument.  Data captured  on  the queue  is  output from  the  host. It
        remains  in the  queue while  the Start  RCV Q  Process command  is not
        executed. The captured data can be examined by the Query Data On  RCV Q
        command. Once  the Stop  RCV Q Process  command is  executed and  is in
        effect,  the  keyboard remains  locked.  (It remains  locked  while the
        process is stopped and not processed by the host.)





                    6.3.2  Query Data On RCV Q Command

             Syntax : QRCVQ

             The Query Data on RCV  Q command queries and displays data  in the
        RCV Q captured by executing the Stop RCV Q Process command on a device.

             The output is displayed as follows:

        BUFADR      CONTENTS
        xxxxx  xxxx xxxx xxxx xxxx xxxx xxxx xxxx xxxx xxxx xxxx
        xxxxx  xxxx xxxx xxxx xxxx xxxx xxxx xxxx xxxx xxxx xxxx


             In the  above display,  BUFADR is the  buffer address  storing the
        contents of the RCV Q that  is to be displayed. The format of  the data
        output is the same as the format of the data in memory (that  is EBCDIC
        format).  The format  of the output  for control messages  differs from
        that shown above; the  words CONTROL MESSAGE appear before  the message
        itself. The codes for the Query Data On RCV Q command are as follows:


           o   FFF9 - sense/status  message(SS0/SS1 follows)
           o   FFFF - disconnect
           o   FFFE - record time
           o   FFFD - Yellow Ball

        34                                                           TBOM09.DOC
        QUEUE PROCESSOR                                         August 27, 1987


           o   FFFC - Orange Ball
           o   FFFB - Send EOT
           o   FFFA - error
           o   FFF8 - Acknowledgement






                    6.3.3  Start RCV Q Process Command

             Syntax : STARTRCV

             The  START  RCV  Q  Process command  restarts  the  RCV  Q scanner
        processing data stored in  the queue. Data processing is  restarted the
        device stopped  from transmitting  to the  terminal by  the Stop  RCV Q
        Process  command.   The Start  RCV  Q Process  command  causes terminal
        operations  to resume,  providing  the Stop  XMT  Q command  is  not in
        effect.






                                   6.4  OUTPUT QUEUE


             The commands that control the Output Queue processor are described
        in this section.





                    6.4.1  Stop Output Q Process Command

             Syntax : STOPOUT dvn or STOPOUT lna cua dva

             The Stop Output Q Process command stops the OUT Q; data is stopped
        and does  not pass into  the network from  the control unit.  Once this
        command  is executed,  the keyboard  appears locked,  and user  data is
        preserved in memory for examination.










        35                                                           TBOM09.DOC
        QUEUE PROCESSOR                                         August 27, 1987


                    6.4.2  Query Data on OUT Q Command

             Syntax : QOUTQ

             See the Query Data On OUT Q Command.





                    6.4.3  Start OUT Q Process Command

             Syntax : STARTOUT

             See the Start RCV Q Process command.







































        36                                                           TBOM09.DOC
        SYSTEM GENERATIONS                                      August 27, 1987






                                7 -  SYSTEM GENERATIONS


             This chapter describes  the additional macros needed  to configure
        new enhancements for the PBT slot.






                        7.1  DEFINE RETRY LIMIT FOR LINE MACRO


             Syntax : DEFRTY(n)

             Default : 8 retries

             This macro defines the  maximum number of retries (n,  in decimal)
        allowed before the line is considered bad. When the line  is considered
        bad,  a report  is  made to  the  Supervisor. If  enabled,  the Display
        Systems  Protocol (DSP)  error  message is  also reported  to  the Host
        Packet  Assembly/Disassembly (HPAD).  The number  defined by  the macro
        applies to the line being  configured, and other lines, if  not changed
        by the Retry macro.






                        7.2  CHANGE RETRY LIMIT FOR LINE MACRO


             Syntax : BRETRY(n)

             This macro changes the  maximum number of retries (n,  in decimal)
        for  the line being configured. This macro does not affect  the default
        number as defined by the Define Retry Limit For Line macro.











        37                                                           TBOM09.DOC
        SYSTEM GENERATIONS                                      August 27, 1987


                     7.3  DEFINE REAL TIME DISPLAY INTERVAL MACRO


             Syntax : DSPTIM(n)

             Default : 10 minutes (in decimal)

             This macro defines the time interval for the real-time  display of
        node, slot, and time information.  The time is measured in  seconds (or
        minutes).






                      7.4  DEFINE DSP ERROR REPORT TO HPAD MACRO


             Syntax : DSPERR(YES/NO)

             Default : YES

             This macro defines whether DSP error messages are reported  to the
        HPAD. They are reported when error conditions are detected  between the
        terminal interface and the control unit.




























        38                                                           TBOM09.DOC
        TRACE FUNCTIONS                                         August 27, 1987






                                 8 -  TRACE FUNCTIONS


             This  chapter  describes  the  commands  that  control  the  trace
        functions  and  provide  status  information.  Status   information  is
        provided about traces of data flow, response time, and protocol.

             Each trace has a duration  that is both defaulted in the  code and
        can be explicitly  stated when the trace  is enabled (m  represents the
        duration of the trace in  the command syntax).  If the duration  is not
        specified, the default duration is used.  The default can be changed by
        setting a label equal to a value in the Tymfile.  The appropriate label
        is given in each trace description.  The maximum default value must fit
        in a half-word and be equivalent  to less than seven days.  All  of the
        traces degrade the efficiency of the system.

             As an  example, the default  value (m) for  the time stamp  can be
        changed by setting the value of STMPTM equal to the  desired  number of
        seconds in the Tymfile as follows:

                             STMPTM  EQ      $A30

             The example  shown above sets  the default value  (m) equal  to 30
        seconds.






                    8.1  ENABLE CHARACTER PER SECOND TRACE COMMAND


             Syntax: ECPS ll,m

             Default duration: 60 minutes Label: CPSTM

             This  command enables  the character/second  test for  the  next m
        minutes, where ll is  the specified line.  The  value of ll can  be the
        line address, relative line  number, or the user-defined  ID (depending
        on the current mode). If no line is specified, the character per second
        trace is enabled for the entire slot.  If m (the number of  minutes) is
        not specified, the  test continues either  for the default  duration or
        until halted by the Display  Character Per Second Trace command  or the
        Disable command; otherwise, the slot is restarted.

             The character  count, in  Native mode  or  Virtual  Terminal mode,
        includes all  characters transferred  across the  Bisync line  from the


        39                                                           TBOM09.DOC
        TRACE FUNCTIONS                                         August 27, 1987


        Start of Text (STX)  to the End of  Transmission Block (ETB) or  End of
        Text (ETX).  Leading sync characters, pad characters, and  the checksum
        are not included in the count.

             The  character  count  does not  include  data  transferred during
        login.  It  also does  not  include messages  originating  at  the 3270
        Terminal Interface and transmitted to the terminal.






                    8.2  DISPLAY CHARACTER PER SECOND TRACE COMMAND


             Syntax: DCPS

             This   command   halts   and   displays   the   results   of   the
        Character/Second  Test.  This  test  computes  the  average  number  of
        characters per second  throughput by the slot. The format of the output
        is displayed as follows:
        TBOM -- 3270PBT Bisync Operations Monitor
        NODE  nnnn    SLOT  ss   ddmmmyy hh:mm:ss

        LINE xx        DUR(min)
        (ENTIRE SLOT)

        CHARS/SEC xxxx    TOTAL CHARS xxxx    PER hh:mm:ss

        This display is interpreted as follows:

        LINE xx    -  The line on which the throughput is measured (per the
                      current mode), or entire slot (if no line was specified).

        DUR(min)   -  The duration of the trace, if not halted by the Display 
                      Charater Per Second Trace command or Disable command.

        CHARS/SEC  -  The number of characters per second throughput by the
                      slot or the specified line.

        TOTAL CHARS - The total number of characters throughput by the line or
                      slot for the specified period.

        PER         - The amount of time the trace ran, in the "hours:min:sec"
                      format.








        40                                                           TBOM09.DOC
        TRACE FUNCTIONS                                         August 27, 1987


                        8.3  ENABLE POLL RESPONSE TRACE COMMAND


             Syntax:  EPR ll,cc,m

             Default duration: 60 minutes Label: PRTM

             This  command  enables the  poll  response trace  for  the  next m
        minutes; where ll is the line, and cc is the control unit.   This trace
        measures the average poll response time for the specified control unit.
        If no line is specified  the poll response is measured for  all control
        units in the slot.  If the number of minutes (m), is not specified, the
        trace continues either for the default duration or until halted  by the
        Display Poll Response Trace  command or the Disable  command; otherwise
        the slot is restarted.

             The  line and  control unit  number can  be the  line/control unit
        address, the line/control unit ID, or the relative control  unit number
        (which  may  be entered by  itself). This depends  on the state  of the
        Mode command.

             The Poll Response  Trace Test keeps  track only of  the successful
        polls.   If  the  control  unit  does  not  respond,  the  time  is not
        accumulated and the poll is not used in computing the  average response
        time.





























        41                                                           TBOM09.DOC
        TRACE FUNCTIONS                                         August 27, 1987


                       8.4  DISPLAY POLL RESPONSE TRACE COMMAND


             Syntax:  DPR

             This command halts and  displays the results of the  Poll Response
        Trace  Test.  This test  computes  the average  poll  response  for the
        specified  control  unit. The  format  of the  output  is  displayed as
        follows:
        TBOM -- 3270PBT Bisync Operations Monitor
        NODE  nnnn    SLOT  ss   ddmmmyy hh:mm:ss

        CU xx    DUR(min) xx
        (SLOT)

        RESP(ms) xxx    POLLS xxxx    PER xx

             This display is interpreted as follows:

             CU    -   Control unit number (per the current mode).

             DUR(min) The duration of the  trace, if not halted by  the Display
        Poll Response Trace command or Disable command.

             RESP  -   Average poll response time (in milliseconds).

             POLLS -   Number of poll responses in the period.

             PER   -   The amount of time the trace ran, in  the "hour:min:sec"
        format.






                         8.5  ENABLE TINE STAMP TRACE COMMAND


             Syntax: ESTAMP ll,cc,dd,m

             Default duration: 5 minutes Label: STMPTM

             The Enable Time Stamp  Trace command enables the time  stamp trace
        for each transaction  of the specified device  for the next  m minutes;
        where ll,cc, or dd is the specified device (per the current mode). If m
        is  not specified, the trace continues either for the  default duration
        or until halted by the  Display Time Stamp command or  Disable command;
        otherwise the slot is restarted.

             NOTE: This command is not valid for a device operating  in Virtual
        mode.


        42                                                           TBOM09.DOC
        TRACE FUNCTIONS                                         August 27, 1987


                            8.6  DISPLAY TIME STAMP COMMAND


             Syntax: DSTAMP

             This command halts and displays the time stamp trace for  the last
        two transactions of the specified device.  The time stamp values are in
        Fast Clock (FASTC). FASTC, the system clock, is a 32 bit value  that is
        incremented at a rate of 600 times per second. The format of the output
        is displayed as follows:
        TBOM -- 3270PBT Bisync Operations Monitor
        NODE  nnnn    SLOT  ss   ddmmmyy hh:mm:ss

        DUR(min) xx    PER hh:mm:ss

        DEVxx   PORT NUMBER xx

                          LAST        PRIOR

        RCV STX         xxxxxxxx    xxxxxxxx
        RCV ETX         xxxxxxxx    xxxxxxxx
        STX ORING       xxxxxxxx    xxxxxxxx
        ETX ORING       xxxxxxxx    xxxxxxxx
        STX IRING       xxxxxxxx    xxxxxxxx
        ETX IRING       xxxxxxxx    xxxxxxxx
        XMT SELECT      xxxxxxxx    xxxxxxxx
        XMT STX         xxxxxxxx    xxxxxxxx
        XMT ETX         xxxxxxxx    xxxxxxxx
        XMT COMPLETE    xxxxxxxx    xxxxxxxx
        DELAY(ms)       xxxx        xxxx

        In the above display, the column labeled LAST is the time stamp for the
        most recent transaction; the column labeled PRIOR is the transaction
        that precedes the most recent transaction. The preceding display is
        interpreted as follows:

        DUR(min)    -   The duration (in minutes) of the trace, if not halted
                        by the Display Time Stamp command or Disable command.

        PER         -   The amount of time the trace ran, in the "hour:min:sec"
                        format.

        DEV         -   The device being traced (per the current mode).

        PORT NUMBER -   The dispatcher port number that is associated with the
                        device being traced.

        RCV STX     -   Receive Start of Text (STX) of the incoming message by
                        the Foreground.

        RCV ETX     -   Receive End of Text (ETX) of the incoming message by  
                        the Foreground.


        43                                                           TBOM09.DOC
        TRACE FUNCTIONS                                         August 27, 1987


        STX ORING   -   The STX of an incoming message put into the Output Ring
                        (ORING) by the Background.

        ETX ORNG    -   The ETX of an incoming message put into the ORING by
                        the Background.

        STX IRING   -   The STX of an outgoing message read from the IRING by  
                        the Background.

        ETX IRING   -   The ETX of an outgoing message read from the IRING by  
                        the Background.

        XMT SELECT  -   The select is transmitted.

        XMT STX     -   Transmit STX of an outgoing message to the terminal by 
                        the Foreground.

        XMT ETX     -   Transmit ETX of an outgoing message to the terminal by 
                        the Foreground.

        XMT COMPLETE -  Transmission is complete.

        DELAY        -  Round trip delay, measured from the receipt of the STX 
                        to the transmission of STX (in milliseconds).







                          8.7  ENABLE RESPONSE TRACE COMMAND


             Syntax: EREST ll,cc,dd,m

             Default duration: 60 minutes

             Label: RESTM

             This  command enables  the Response  Time Test  for  the specified
        device  for  the next  (m) minutes; where  ll,cc, or  dd is  the device
        number (per the current mode). If m is not specified, the Response Time
        Test continues until one of the following occurs:

           o  the 60-minute default duration
            
           o  the Display Response Trace command is issued 
            
           o  the Disable command is issued 
            
           o  the slot is restarted 


        44                                                           TBOM09.DOC
        TRACE FUNCTIONS                                         August 27, 1987


             This test records the receipt of the STX of an incoming message by
        the Foreground and  the transmission of the  STX of the message  to the
        terminal by the Foreground.  The difference between these two  times is
        the response time for a given message.

             The  response  time  measurements  are  valid  only  for  messages
        initiated by the terminal; they are not valid for messages initiated by
        the host.

             NOTE:

             The  Enable  Response Trace  command  is not  valid  for  a device
        operating  in Virtual mode.






                          8.8  DISPLAY RESPONSE TRACE COMMAND


             Syntax: DREST

             This command  halts the  trace and  displays the  average response
        time per transaction (in milliseconds) for the period specified  by the
        Enable Response Trace command. The format of the output is displayed as
        follows:
        TBOM -- 3270PBT Bisync Operations Monitor
        NODE  nnnn    SLOT  ss   ddmmmyy hh:mm:ss

        DEV xx     DUR(min)

        RESP AVE xxx    RESP # xxx    PER xxx

             This display is interpreted as follows:

             DEV        -      The  specified device  number  (per  the current
        mode).

             DUR(min) - The duration of the trace (if not halted by the Display
        Response Trace command or Disable command).

             RESP AVE  -     The average response time (in milliseconds).

             RESP #    -     The number of transactions within the period.

             PER       -     The duration of the trace (in minutes).






        45                                                           TBOM09.DOC
        TRACE FUNCTIONS                                         August 27, 1987


                          8.9  ENABLE PROTOCOL TRACE COMMAND


             Syntax: EPROT ll,m

             Default duration: 10 minutes

             Label: PROTTM

             This command enables the protocol trace for the specified line for
        the next (m)  minutes, where ll is  the specified line number  (per the
        current mode). If m is not  specified, the trace runs until one  of the
        following occurs:

           o  10 minutes (the default duration) 

           o  the Display Protocol Trace command is issued 

           o  the Disable command is issued 

           o  the slot is restarted

































        46                                                           TBOM09.DOC
        TRACE FUNCTIONS                                         August 27, 1987


                         8.10  DISPLAY PROTOCOL TRACE COMMAND


             Syntax: DPROT

             This command displays the  protocol trace for the  specified line.
        The protocol sequence is  displayed as the interface processed  it. The
        format of the output is displayed as follows:
        TBOM -- 3270PBT Bisync Operation Monitor
        NODE  nnnn    SLOT  ss   ddmmmyy hh:mm:ss

        LINE xx    DUR(min) xx    PER  hh:mm:ss

        XMT:  DATA      RCV:  ACK0      SXEL
        XMT:  DATA      RCV:  ACK1      SXMT
        XMT:  EOT

             This display is interpreted as follows:

             LINE -  Line number  specified by  Enable Protocol  Trace command,
        (per the current mode).

             DUR(min) - The duration (in minutes)of the trace, if not halted by
        the Display Protocol Trace command or Disable command.

             PER   -   The amount of  time the trace ran in  the "hour:min:sec"
        format.

             XMT:  -   Transmit protocol (DATA, ENQ, EOT, NAK, TTD, ACK1, WACK,
        ACK0, RVI, or DISC)

             RCV:  -    Receive protocol  (Good Data ETX  Block, Good  Data ETB
        Block, ENQ, EOT, NAK,  DISC, ACK1, WACK, ACK0, RVI,  TTD, Multi-leaving
        ?,  Data Abort,  Lost  Synchronization, Overrun,  No  Initial Bufferlet
        Available, Timeout Before Message Received, CRC Error In  Data Message,
        Lost Data Due to Unavailability of Bufferlets,  Unidentifiable Message,
        Forced Completion by Background).

             xxxx  -   State table pointer for the preceding  protocol sequence
        (add 10000 hexadecimal to the  value to yield the address of  the state
        table.

             The following are examples of the descriptive words and meanings:

         o  SXSEL  - Waiting for response to the select poll sent by the PBT.

         o  SRINIT - We have sent either a general or specific poll message.
                     We are expecting a response from the control unit.

         o  SRWACK - PBT's receiver is waiting for internal resources, and has
                     sent WACKS to the control unit telling it to wait for a
                     positive acknowledgement before sending more data.


        47                                                           TBOM09.DOC
        TRACE FUNCTIONS                                         August 27, 1987


         o SRCV    - The control unit has sent 1st data block.  This state  
                     handles the reception of subsequent data blocks.

         o SXMT    - We have control of line(control unit acknowledged the  
                     select poll) and have sent a data block to the control
                     unit.

         o SENQ    - Waiting for response to an abort message (ENQ) that was  
                     sent by the PBT.

         o SXTTD   - Waiting for response to a TTD (STX ENQ) that was sent by  
                     the PBT.







                            8.11  ENABLE DATA TRACE COMMAND


             Syntax: EDAT ll,cc,dd,m

             Default duration: 10 minutes

             Label: DATTM

             This command enables the  data trace for the specified  device for
        the next (m) minutes; where ll,cc, or dd is the device number  (per the
        current mode). The transmit and receive data is traced. Up to the first
        ten characters of the message block,  and the ETB or ETX are  saved. If
        the number  of minutes is  not specified, the  trace continues  for the
        default duration, until the Display Data Trace command is issued, until
        the Disable command is issued, or until the slot is restarted.

             NOTE:

             The Enable Data Trace command is not valid for a  device operating
        in Virtual mode.














        48                                                           TBOM09.DOC
        TRACE FUNCTIONS                                         August 27, 1987


                           8.12  DISPLAY DATA TRACE COMMAND


             Syntax: DDAT

             This command  disables and displays  the transmit data  trace. For
        the standard 3270 Terminal Interface, the data is displayed  in EBCDIC.
        For the HSBC 3270 Terminal  Interface, the data is displayed  in ASCII.
        The format of the out[ut is displayed as follows:
        TBOM -- 3270PBT Bisync Operations Monitor
        NODE  nnnn    SLOT  ss   ddmmmyy hh:mm:ss

        DEV  xx    DUR(min)  xx    PER  hh:mm:ss

        XMT:  02xx xxxx xxxx xxxx xx03
        RCV:  02xx xxxx xxxx xxxx xx03
        XMT:  02xx xxxx xxxx xxxx xx03

             This display is interpreted as follows:

             DEV   -   The specified device number (per the current mode).

             DUR(min) - The duration (in  minutes) of the trace, if  not halted
        by the Display Data Trace command or Disable command.

             PER   -   The amount of time the trace ran, in  the "hour:min:sec"
        format.

             XMT:  -    The  first  ten  data  bytes  transmitted  to terminal,
        followed by ETB or ETX.

             RCV:  -  The first ten data bytes received from terminal, followed
        by  ETB or ETX.






                              8.13  DISABLE TRACE COMMAND


             Syntax: DISABLE

             The Disable command disables all enabled traces.









        49                                                           TBOM09.DOC
        RING TRACE COMMANDS                                     August 27, 1987






                               9 -  RING TRACE COMMANDS


             This section describes the  commands used to trace either  or both
        of the Input and Output Rings between the slot and the network. Placing
        the following statement in  the Tymfile determines the  availability of
        the trace commands as follows:

             RNGTRC  EQ        1                    :1  =  Ring  Trace Commands
        available

             If  the preceding  statement  is not  used, the  commands  are not
        available.

             The output  of the  traces moves  along with  the events,  as they
        individually come  in or  go out of  the slot.  Input Ring  (IRING) and
        Output Ring (ORING) output is not related.

             The format of  the output of the  ring trace commands  is similar,
        except for the designation of  the Input or Output Ring.  The following
        is a sample output:
        O 20004 RQR 0000 00
        I 20508 DAT 001C 09C0 9480 0004 0012 C240  |...@......B@|
        O 2000C HSR 0000 1000 12F7 001C 0000 0000 8034
        I 20514 SIX 001C BF
        O 2001C HSR 0000 1000 12F7 001C 0000 0000 8034
        I 20518 DAT 001C 0CC0 9400 0007 0000 007D C150 03  |...@.......}AP. |
        I 20538 NOS 001C A0
        O 2007C HSR 0000 1000 12F7 001C 0000 0000 8034
        I 2053C SND 001C A1
        O 2008C HSR 0000 1000 12F7 001C 0000 0000 8034
        I 20540 SIX 001C BF
        I 20544 DAT 001C 0CC0 9400 0007 0000 017D C150 03  |...@.......}AP. |
        I 20564 SIX 001C BF
        I 20568 DAT 001C 0CC0 9400 0007 0000 027D C150 03  |...@.......}AP. |

             The first character of the preceding output indicates  whether the
        trace is that of an Input  or Output Ring. The second field,  a 5-digit
        number, is the ring address where the message is read. The  third field
        is an abbreviation  of the ISIS message  type. The 4-digit  number that
        follows  the ISIS  message type  is the  RPORT number  assigned  by the
        dispatcher if a circuit has been built; otherwise, a port 0  message is
        output. The first  2 bytes after the  RPORT is the  inter/intra message
        type  defined in  the ISIS  manual.  If  a data  message is  found, the
        entire message indicated by the  count is displayed. The last  field of
        the  data message,  enclosed  by bars,  is  a translation  of  the data
        message contents; it is interpreted in ASCII.



        50                                                           TBOM09.DOC
        RING TRACE COMMANDS                                     August 27, 1987


             Once  a  ring trace  command  is entered,  output  continues until
        another character is entered.  The backslash "/" is the  best character
        to use  to halt the output. If the backslash is not used,  the commands
        continue  to output  the ring  trace as  the ring  indices  are updated
        within the slot.

             The ISIS message abbreviations are interpreted as follows:
                 
                NDL  -  NEEDLE
                DAT  -  DATA
                DET  -  DETACH MESSAGE TYPE
                ZAP  -  DISCONNECT MESSAGE
                NOS  -  APPLY BACK-PRESSURE (NO SEND)
                SND  -  RELEASE BACK-PRESSURE (SEND)
                ICM  -  FLUSH OUTPUT (GOBBLER)
                BKG  -  FLUSH INPUT (BACK GOBBLER)
                BLK  -  DATA LOST IN THIS DIRECTION (BLACK BALL)
                GRY  -  DATA LOST IN OPPOSITE DIRECTION (GREY BALL)
                EDE  -  ENTER DEFERED ECHO MESSAGE
                LDE  -  LEAVE DEFERED ECHO MESSAGE
                ETM  -  ENTER TRANSPARENCY MODE
                LTM  -  LEAVE TRANSPARENCY MODE
                GB   -  GREEN BALL
                RB   -  RED BALL
                YB   -  YELLOW BALL
                OB   -  ORANGE BALL
                BRK  -  BREAK DETECTED
                HNG  -  HANG UP
                QTP  -  QUERY TERMINAL PARAMETER
                STP  -  SET TERMINAL PARAMETER
                PSN  -  PSEUDO NEEDLE
                NLC  -  NORMAL LOGON CHAR
                NLS  -  NORMAL LOGON STATUS
                LOF  -  LOG ON FAILURE
                NCC  -  NORMAL CIRCUIT COMPLETE
                ADA  -  ADDENDUM TO ACCOUNTING
                SHG  -  SUPER-HANG UP
                TLM  -  SET TRANSMIT LIMIT
                EBK  -  END OF BREAK
                ZAK  -  ZAP ACK
                EAD  -  ENTER ALTERNATE OUTPUT DEVICE MODE
                LAD  -  LEAVE ALTERNATE OUTPUT DEVICE MODE
                ZAR  -  ZAP WITH REASON
                SIX  -  START INTERFACE INFORMATION EXCHANGE
                TIX  -  TERMINATE INTERFACE INFORMATION EXCHANGE
                RQR  -  RESTART REQUEST
                RST  -  RESTART INTERFACE
                NTO  -  NODE HAS BEEN TAKEN OVER
                REP  -  REPORT TO SUPERVISOR'S LOG
                RHS  -  REPORT HOST STATUS (OBSOLETE)
                RAC  -  REPORT ACCOUNTING
                TIM  -  GMT TIME
                RNP  -  REQUEST FOR NORMAL PSEUDO NEEDLE

        51                                                           TBOM09.DOC
        RING TRACE COMMANDS                                     August 27, 1987


                RAP  -  REQUEST AUX PSEUDO-NEEDLE
                PSR  -  PSEUDO-NEEDLE REJECTED
                HPA  -  HOST PORT AVAILABILITY
                HNA  -  HOST NOT ACCEPTABLE
                RHC  -  REPORT HOST COST
                NSU  -  NO SUPERVISOR
                ODN  -  1-DOWN TEXT
                RAH  -  REPORT ALL HOSTS
                HSR  -  HOST STATUS REPORT







                               9.1  TRACE IRING COMMAND


             Syntax : DIR adr

             This command traces the  IRING from the address indicated.  If the
        address is not given, the entire IRING is displayed from  the beginning
        up to where the indices stop.






                               9.2  TRACE ORING COMMAND


             Syntax : DOR adr

             This  command displays  the ORING  from the  address  indicated to
        where the  indices stop. If  the address is  not specified,  the entire
        ORING is displayed.






                          9.3  TRACE IRING AND ORING COMMAND


             Syntax : DR

             This  command starts  the trace  of the  rings from  the beginning
        address  to the current pointer. The output displayed alternates before
        the ORING and IRING messages.


        52                                                           TBOM09.DOC
        RING TRACE COMMANDS                                     August 27, 1987


                      9.4  TRACE IRING AND ORING BY RPORT COMMAND


             Syntax : DRA

             This  command starts  the trace  of the  rings from  the beginning
        address  of  the IRING  and ORING.  The  command displays  ORING output
        until the RPORT  number changes.  IT  then displays IRING  output until
        the RPORT number changes.  The output displayed continues  to alternate
        as the RPORT numbers change.












































        53                                                           TBOM09.DOC
                                                                August 27, 1987



























                      *   ****  ****  ***** *   * ****  ***** *   *
                     * *  *   * *   * *     **  * *   *   *    * * 
                    ***** ****  ****  ****  * * * *   *   *     *  
                    *   * *     *     *     *  ** *   *   *    * * 
                    *   * *     *     ***** *   * ****  ***** *   *
























        54                                                           TBOM09.DOC
        BISYNC RECEIVE RCV CODES                                August 27, 1987






                        APPENDIX I.   BISYNC RECEIVE RCV CODES



        Appendix I includes a list of the internal bisync receive codes used in
        the display of certain commands, such as the SCOPE command. These codes
        are displayed as follows: 

        Code (Hexidecimal)        Label             Description
        ------------------        -----             -----------

           0                      RCDATX          Good data ETX received
           1                      RCDATB          Good data ETB received
           2                      RCENQ           ENQ received
           3                      RCEOT           EOT received
           4                      RCNAK           NAK received
           5                      RCDISC          DLE,EOT (disconnect signal) 
                                                  received
           6                      RCACK1          ACK1 received
           7                      RCWACK          WACK received
           8                      RCACK0          ACK0 received
           9                      RCRVI           RVI received
           A                      RCTTD           TTD(STX,ENQ) received
           B                      RCMBID          Multi-leaving bid (SOH,ENQ)
           C                      RCDABT          Data abort  
                                                  (ENQ,EOT,NAK in text)
           D                      RCLSYN          Lost synchronization
           E                      RCOVRN          Overrun (more data  
                                                  than bufferlets specified)
           F                      RCNROM          No initial bufferlet  
                                                  available
           10                     RCTMOT          Timeout before message  
                                                  is received
           11                     RCBADD          CRC error in data message
           12                     RCLOST          Lost data due to  
                                                  inavailability of bufferlet
           13                     RCUNID          Unidentifiable message
           14                     RCFCOM          Forced completion by  
                                                  Background











        55                                                           TBOM09.DOC
        BISYNC TRANSMIT XMIT CODES                              August 27, 1987






                       APPENDIX II.   BISYNC TRANSMIT XMIT CODES



             The following bisync operation codes are used to send data:

        Code (Hexidecimal)        Label          Description 
        ------------------        -----          ----------- 

          0                       XCDATA          Send DATA
          1                       XCENQ           Send ENQ
          2                       XCEOT           Send EOT
          3                       XCNAK           Send NAK
          4                       XCTTD           Send TTD
          5                       XCACK1          Send ACK1
          6                       XCWACK          Send WACK
          7                       XCACK0          Send ACK0
          8                       XCRVI           Send RVI
          9                       XCDISC          Send disconnect(DLE,EOT)































        56                                                           TBOM09.DOC
        3270 PBT CRASH CODES                                    August 27, 1987






                         APPENDIX III.   3270 PBT CRASH CODES



        These are the crash codes returned and the location of the nearest
        label associated with that crash.

        Crash   Nearest         Localize               Crash Reason
        -----   -------         --------               ------------
        Code     Label           Module
        ----     -----           ------ 

         20     DSR030                          Line cannot support DTR/DSR
         44     ICRASH                          Drop DTR SVC crash
         44     HHNCRA                          Raise DTR SVC crash
         60     INDCR           FRNTND          No activation routine
         60     INCN1           FRNTND          No DCB was assigned
                                                No state table was assigned
                                                No activation routine was
                                                assigned
         61     ACTIVN                          Illegal port 0 MSG or NEEDLE
         61     POM30                           Illegal port 0 MSG or NEEDLE
         61     SPECL           FRNTND          Invalid port 0 Message
         62     INVAL           FRNTND          Invalid message
         63     INPUT3          FRNTND          Invalid port number,which has
                                                been
                                                active to receive the NEEDLE
         81     PBCRAS                          No big bufferlet
         81     GBCRA0          BSCSXM          No big bufferlet
         81     PUTCR           MAIN            No big bufferlet
         81     BCRASH          MAIN            No big bufferlet for creating
                                                bisync frame,called by PUTBX
         81     PBCRSH          MAIN            Next buffer address not found
         82     GETCRA          MAIN            Attempted to get data from
                                                empty buffer
         83     NXTSC                           No nexr element for stored
                                                logon
         84     GCL01           CMDLST          Command link list locked for
                                                 'GET'  process
         84     GCL1            CMDLST          Same as above
         85     PCL             CMDLST          Command link list locked for
                                                'PUT'   process
         86     SRVCRA          BSCSRV          SVC error,try to connect input
                                                twice
                                                For receive process
         86     DSR020          BSCDTR          Query sync attribute SVC error
         86     DSR020          BSCDTR          Connect input SVC error
         86     DTR220          BSCDTR          Same
         87     BSXCRA          BSCSXM          SVC error,try to connect input

        57                                                           TBOM09.DOC
        3270 PBT CRASH CODES                                    August 27, 1987


                                                twice for transmit process
         88     BSXWRT          BSCSXM          Illegal transmit OP CODE
         88     BSXWCR          BSCSXM          Transmit list too small
         89     BSCD02                          Illegal buffer character count
         8D     DA.R11                          Ran out of unbusy links
         8D     DA.X11                          Ran out of unbusy links
         90     DATI20                          Unknowm IIX MSG(if TSTSW=1)
         90     IZOCRA                          Query I/O SVC failed
         91     DSPCR                           Illegal CUD IIX MSG
         97     IZPVCR          MAIN            No element for PVC logon
         98     CLBUG           CMDLST          Bug in command list usage
         99     CLFULL          CMDLST          Command link has no free link
         0F     TPT2            TIMEOUT         Timeout free list exhausted
         D0     BUFERR          BBUFER          Big bufferlet lists locked when
                                                 'GET'
         D0     PBB20           BBUFER          Big bufferlet lists locked when
                                                 'PUT'
         FF     PCRASH          BSCPTP          Bisync line crash




































        58                                                           TBOM09.DOC
  ` Lg